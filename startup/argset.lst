68K GAS   			page 1


   1               	
   2               	.file"argset.c"
   3               	.globl_argc
   4               	.section.bss
   5               	.align2
   8               	_argc:
   9 0000 0000 0000 	.zero4
  10               	.globl_argv_arr
  11               	.align2
  14               	_argv_arr:
  15 0004 0000 0000 	.zero4
  16               	.globl_cmdline
  17               	.align2
  20               	_cmdline:
  21 0008 0000 0000 	.zero4
  22               	.section.rodata
  23               	.LC0:
  24 0000 4669 6C65 	.string"File name unknown"
  24      206E 616D 
  24      6520 756E 
  24      6B6E 6F77 
  24      6E00 
  25               	.text
  26               	.align2
  27               	.globlargset
  29               	argset:
  30 0000 4E56 FDA4 	link.w %fp,#-604
  31 0004 2F02      	move.l %d2,-(%sp)
  32 0006 7001      	moveq #1,%d0
  33 0008 23C0 0000 	move.l %d0,_argc
  33      0000 
  34 000e 2D7C 0000 	move.l #.LC0,-604(%fp)
  34      0000 FDA4 
  35 0016 6000 0104 	jra .L2
  36               	.L4:
  37 001a 2039 0000 	move.l _cmdline,%d0
  37      0000 
  38 0020 5280      	addq.l #1,%d0
  39 0022 23C0 0000 	move.l %d0,_cmdline
  39      0000 
  40 0028 6002      	jra .L3
  41               	.L9:
  42 002a 4E71      	nop
  43               	.L3:
  44 002c 2039 0000 	move.l _cmdline,%d0
  44      0000 
  45 0032 2040      	move.l %d0,%a0
  46 0034 1010      	move.b (%a0),%d0
  47 0036 49C0      	extb.l %d0
  48 0038 1030 09B0 	move.b _ctype(%d0.l),%d0
  48      0000 0000 
  49 0040 1000      	move.b %d0,%d0
  50 0042 0280 0000 	and.l #255,%d0
  50      00FF 
  51 0048 7201      	moveq #1,%d1
  52 004a C081      	and.l %d1,%d0
  53 004c 1000      	move.b %d0,%d0
68K GAS   			page 2


  54 004e 4A00      	tst.b %d0
  55 0050 66C8      	jne .L4
  56 0052 2039 0000 	move.l _cmdline,%d0
  56      0000 
  57 0058 2040      	move.l %d0,%a0
  58 005a 1010      	move.b (%a0),%d0
  59 005c 4A00      	tst.b %d0
  60 005e 6700 00BC 	jeq .L2
  61 0062 42AE FFFC 	clr.l -4(%fp)
  62 0066 602A      	jra .L5
  63               	.L7:
  64 0068 2039 0000 	move.l _cmdline,%d0
  64      0000 
  65 006e 2240      	move.l %d0,%a1
  66 0070 1211      	move.b (%a1),%d1
  67 0072 3041      	move.w %d1,%a0
  68 0074 220E      	move.l %fp,%d1
  69 0076 0681 FFFF 	add.l #-204,%d1
  69      FF34 
  70 007c D2AE FFFC 	add.l -4(%fp),%d1
  71 0080 3408      	move.w %a0,%d2
  72 0082 2241      	move.l %d1,%a1
  73 0084 1282      	move.b %d2,(%a1)
  74 0086 52AE FFFC 	addq.l #1,-4(%fp)
  75 008a 5280      	addq.l #1,%d0
  76 008c 23C0 0000 	move.l %d0,_cmdline
  76      0000 
  77               	.L5:
  78 0092 2039 0000 	move.l _cmdline,%d0
  78      0000 
  79 0098 2040      	move.l %d0,%a0
  80 009a 1010      	move.b (%a0),%d0
  81 009c 49C0      	extb.l %d0
  82 009e 1030 09B0 	move.b _ctype(%d0.l),%d0
  82      0000 0000 
  83 00a6 1000      	move.b %d0,%d0
  84 00a8 0280 0000 	and.l #255,%d0
  84      00FF 
  85 00ae 7201      	moveq #1,%d1
  86 00b0 C081      	and.l %d1,%d0
  87 00b2 4A80      	tst.l %d0
  88 00b4 660E      	jne .L6
  89 00b6 2039 0000 	move.l _cmdline,%d0
  89      0000 
  90 00bc 2040      	move.l %d0,%a0
  91 00be 1010      	move.b (%a0),%d0
  92 00c0 4A00      	tst.b %d0
  93 00c2 66A4      	jne .L7
  94               	.L6:
  95 00c4 200E      	move.l %fp,%d0
  96 00c6 0680 FFFF 	add.l #-204,%d0
  96      FF34 
  97 00cc D0AE FFFC 	add.l -4(%fp),%d0
  98 00d0 2240      	move.l %d0,%a1
  99 00d2 4211      	clr.b (%a1)
 100 00d4 52AE FFFC 	addq.l #1,-4(%fp)
 101 00d8 2439 0000 	move.l _argc,%d2
68K GAS   			page 3


 101      0000 
 102 00de 202E FFFC 	move.l -4(%fp),%d0
 103 00e2 2F00      	move.l %d0,-(%sp)
 104 00e4 4EB9 0000 	jsr malloc
 104      0000 
 105 00ea 588F      	addq.l #4,%sp
 106 00ec 2008      	move.l %a0,%d0
 107 00ee 2D80 2D20 	move.l %d0,-604(%fp,%d2.l*4)
 107      FDA4 
 108 00f4 2039 0000 	move.l _argc,%d0
 108      0000 
 109 00fa 2236 0D20 	move.l -604(%fp,%d0.l*4),%d1
 109      FDA4 
 110 0100 5280      	addq.l #1,%d0
 111 0102 23C0 0000 	move.l %d0,_argc
 111      0000 
 112 0108 200E      	move.l %fp,%d0
 113 010a 0680 FFFF 	add.l #-204,%d0
 113      FF34 
 114 0110 2F00      	move.l %d0,-(%sp)
 115 0112 2F01      	move.l %d1,-(%sp)
 116 0114 4EB9 0000 	jsr strcpy
 116      0000 
 117 011a 508F      	addq.l #8,%sp
 118               	.L2:
 119 011c 2039 0000 	move.l _cmdline,%d0
 119      0000 
 120 0122 2040      	move.l %d0,%a0
 121 0124 1010      	move.b (%a0),%d0
 122 0126 4A00      	tst.b %d0
 123 0128 6600 FF00 	jne .L9
 124 012c 2039 0000 	move.l _argc,%d0
 124      0000 
 125 0132 E588      	lsl.l #2,%d0
 126 0134 2F00      	move.l %d0,-(%sp)
 127 0136 4EB9 0000 	jsr malloc
 127      0000 
 128 013c 588F      	addq.l #4,%sp
 129 013e 2008      	move.l %a0,%d0
 130 0140 23C0 0000 	move.l %d0,_argv_arr
 130      0000 
 131 0146 2039 0000 	move.l _argc,%d0
 131      0000 
 132 014c E588      	lsl.l #2,%d0
 133 014e 2239 0000 	move.l _argv_arr,%d1
 133      0000 
 134 0154 2F00      	move.l %d0,-(%sp)
 135 0156 200E      	move.l %fp,%d0
 136 0158 0680 FFFF 	add.l #-604,%d0
 136      FDA4 
 137 015e 2F00      	move.l %d0,-(%sp)
 138 0160 2F01      	move.l %d1,-(%sp)
 139 0162 4EB9 0000 	jsr memcpy
 139      0000 
 140 0168 4FEF 000C 	lea (12,%sp),%sp
 141 016c 242E FDA0 	move.l -608(%fp),%d2
 142 0170 4E5E      	unlk %fp
68K GAS   			page 4


 143 0172 4E75      	rts
 145               	.ident"GCC: (GNU) 4.5.1"
 146               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 5


DEFINED SYMBOLS
                            *ABS*:00000000 argset.c
    {standard input}:8      .bss:00000000 _argc
    {standard input}:14     .bss:00000004 _argv_arr
    {standard input}:20     .bss:00000008 _cmdline
    {standard input}:29     .text:00000000 argset

UNDEFINED SYMBOLS
_ctype
malloc
strcpy
memcpy
