68K GAS   			page 1


   1               	
   2               	.file"atof.c"
   3               	.text
   4               	.align2
   5               	.globlstrtod
   7               	strtod:
   8 0000 4E56 FFE8 	link.w %fp,#-24
   9 0004 2F02      	move.l %d2,-(%sp)
  10 0006 42AE FFFC 	clr.l -4(%fp)
  11 000a 42AE FFF4 	clr.l -12(%fp)
  12 000e 42AE FFF8 	clr.l -8(%fp)
  13 0012 42AE FFEC 	clr.l -20(%fp)
  14 0016 42AE FFF0 	clr.l -16(%fp)
  15 001a 42AE FFE8 	clr.l -24(%fp)
  16 001e 6004      	jra .L2
  17               	.L3:
  18 0020 52AE 0008 	addq.l #1,8(%fp)
  19               	.L2:
  20 0024 202E 0008 	move.l 8(%fp),%d0
  21 0028 2040      	move.l %d0,%a0
  22 002a 1010      	move.b (%a0),%d0
  23 002c 49C0      	extb.l %d0
  24 002e 1030 09B0 	move.b _ctype(%d0.l),%d0
  24      0000 0000 
  25 0036 1000      	move.b %d0,%d0
  26 0038 0280 0000 	and.l #255,%d0
  26      00FF 
  27 003e 7201      	moveq #1,%d1
  28 0040 C081      	and.l %d1,%d0
  29 0042 1000      	move.b %d0,%d0
  30 0044 4A00      	tst.b %d0
  31 0046 66D8      	jne .L3
  32 0048 202E 0008 	move.l 8(%fp),%d0
  33 004c 2040      	move.l %d0,%a0
  34 004e 1010      	move.b (%a0),%d0
  35 0050 0C00 002D 	cmp.b #45,%d0
  36 0054 660A      	jne .L4
  37 0056 52AE FFFC 	addq.l #1,-4(%fp)
  38 005a 52AE 0008 	addq.l #1,8(%fp)
  39 005e 6012      	jra .L5
  40               	.L4:
  41 0060 202E 0008 	move.l 8(%fp),%d0
  42 0064 2040      	move.l %d0,%a0
  43 0066 1010      	move.b (%a0),%d0
  44 0068 0C00 002B 	cmp.b #43,%d0
  45 006c 6604      	jne .L5
  46 006e 52AE 0008 	addq.l #1,8(%fp)
  47               	.L5:
  48 0072 202E 0008 	move.l 8(%fp),%d0
  49 0076 2040      	move.l %d0,%a0
  50 0078 1010      	move.b (%a0),%d0
  51 007a 0C00 002E 	cmp.b #46,%d0
  52 007e 6614      	jne .L6
  53 0080 2D7C 3FB9 	move.l #1069128089,-12(%fp)
  53      9999 FFF4 
  54 0088 2D7C 9999 	move.l #-1717986918,-8(%fp)
  54      999A FFF8 
68K GAS   			page 2


  55 0090 52AE 0008 	addq.l #1,8(%fp)
  56               	.L6:
  57 0094 206E FFF4 	move.l -12(%fp),%a0
  58 0098 226E FFF8 	move.l -8(%fp),%a1
  59 009c 4280      	clr.l %d0
  60 009e 4281      	clr.l %d1
  61 00a0 2F09      	move.l %a1,-(%sp)
  62 00a2 2F08      	move.l %a0,-(%sp)
  63 00a4 F21F 5400 	fmove.d (%sp)+,%fp0
  64 00a8 2F01      	move.l %d1,-(%sp)
  65 00aa 2F00      	move.l %d0,-(%sp)
  66 00ac F21F 5480 	fmove.d (%sp)+,%fp1
  67 00b0 F200 0438 	fcmp.x %fp1,%fp0
  68 00b4 F240 000E 	fsne %d0
  69 00b8 4400      	neg.b %d0
  70 00ba 0A00 0001 	eor.b #1,%d0
  71 00be 4A00      	tst.b %d0
  72 00c0 6700 008A 	jeq .L7
  73 00c4 6042      	jra .L8
  74               	.L9:
  75 00c6 F200 5C33 	fmovecr #0x33,%fp0
  76 00ca F22E 5423 	fmul.d -20(%fp),%fp0
  76      FFEC 
  77 00d0 F22E 7400 	fmove.d %fp0,-20(%fp)
  77      FFEC 
  78 00d6 202E 0008 	move.l 8(%fp),%d0
  79 00da 2040      	move.l %d0,%a0
  80 00dc 1010      	move.b (%a0),%d0
  81 00de 49C0      	extb.l %d0
  82 00e0 72D0      	moveq #-48,%d1
  83 00e2 D081      	add.l %d1,%d0
  84 00e4 F200 4000 	fmove.l %d0,%fp0
  85 00e8 F227 7400 	fmove.d %fp0,-(%sp)
  86 00ec 201F      	move.l (%sp)+,%d0
  87 00ee 221F      	move.l (%sp)+,%d1
  88 00f0 2F01      	move.l %d1,-(%sp)
  89 00f2 2F00      	move.l %d0,-(%sp)
  90 00f4 F21F 5480 	fmove.d (%sp)+,%fp1
  91 00f8 F22E 54A2 	fadd.d -20(%fp),%fp1
  91      FFEC 
  92 00fe F22E 7480 	fmove.d %fp1,-20(%fp)
  92      FFEC 
  93 0104 52AE 0008 	addq.l #1,8(%fp)
  94               	.L8:
  95 0108 202E 0008 	move.l 8(%fp),%d0
  96 010c 2040      	move.l %d0,%a0
  97 010e 1010      	move.b (%a0),%d0
  98 0110 49C0      	extb.l %d0
  99 0112 1030 09B0 	move.b _ctype(%d0.l),%d0
  99      0000 0000 
 100 011a 1000      	move.b %d0,%d0
 101 011c 0280 0000 	and.l #255,%d0
 101      00FF 
 102 0122 7202      	moveq #2,%d1
 103 0124 C081      	and.l %d1,%d0
 104 0126 4A80      	tst.l %d0
 105 0128 669C      	jne .L9
68K GAS   			page 3


 106 012a 202E 0008 	move.l 8(%fp),%d0
 107 012e 2040      	move.l %d0,%a0
 108 0130 1010      	move.b (%a0),%d0
 109 0132 0C00 002E 	cmp.b #46,%d0
 110 0136 6614      	jne .L7
 111 0138 2D7C 3FB9 	move.l #1069128089,-12(%fp)
 111      9999 FFF4 
 112 0140 2D7C 9999 	move.l #-1717986918,-8(%fp)
 112      999A FFF8 
 113 0148 52AE 0008 	addq.l #1,8(%fp)
 114               	.L7:
 115 014c 206E FFF4 	move.l -12(%fp),%a0
 116 0150 226E FFF8 	move.l -8(%fp),%a1
 117 0154 4280      	clr.l %d0
 118 0156 4281      	clr.l %d1
 119 0158 2F09      	move.l %a1,-(%sp)
 120 015a 2F08      	move.l %a0,-(%sp)
 121 015c F21F 5400 	fmove.d (%sp)+,%fp0
 122 0160 2F01      	move.l %d1,-(%sp)
 123 0162 2F00      	move.l %d0,-(%sp)
 124 0164 F21F 5480 	fmove.d (%sp)+,%fp1
 125 0168 F200 0438 	fcmp.x %fp1,%fp0
 126 016c F281 006E 	fjeq .L10
 127 0170 6048      	jra .L11
 128               	.L12:
 129 0172 202E 0008 	move.l 8(%fp),%d0
 130 0176 2040      	move.l %d0,%a0
 131 0178 1010      	move.b (%a0),%d0
 132 017a 49C0      	extb.l %d0
 133 017c 72D0      	moveq #-48,%d1
 134 017e D081      	add.l %d1,%d0
 135 0180 F200 4000 	fmove.l %d0,%fp0
 136 0184 F227 7400 	fmove.d %fp0,-(%sp)
 137 0188 201F      	move.l (%sp)+,%d0
 138 018a 221F      	move.l (%sp)+,%d1
 139 018c 2F01      	move.l %d1,-(%sp)
 140 018e 2F00      	move.l %d0,-(%sp)
 141 0190 F21F 5480 	fmove.d (%sp)+,%fp1
 142 0194 F22E 54A3 	fmul.d -12(%fp),%fp1
 142      FFF4 
 143 019a F227 7480 	fmove.d %fp1,-(%sp)
 144 019e 201F      	move.l (%sp)+,%d0
 145 01a0 221F      	move.l (%sp)+,%d1
 146 01a2 2F01      	move.l %d1,-(%sp)
 147 01a4 2F00      	move.l %d0,-(%sp)
 148 01a6 F21F 5400 	fmove.d (%sp)+,%fp0
 149 01aa F22E 5422 	fadd.d -20(%fp),%fp0
 149      FFEC 
 150 01b0 F22E 7400 	fmove.d %fp0,-20(%fp)
 150      FFEC 
 151 01b6 52AE 0008 	addq.l #1,8(%fp)
 152               	.L11:
 153 01ba 202E 0008 	move.l 8(%fp),%d0
 154 01be 2040      	move.l %d0,%a0
 155 01c0 1010      	move.b (%a0),%d0
 156 01c2 49C0      	extb.l %d0
 157 01c4 1030 09B0 	move.b _ctype(%d0.l),%d0
68K GAS   			page 4


 157      0000 0000 
 158 01cc 1000      	move.b %d0,%d0
 159 01ce 0280 0000 	and.l #255,%d0
 159      00FF 
 160 01d4 7202      	moveq #2,%d1
 161 01d6 C081      	and.l %d1,%d0
 162 01d8 4A80      	tst.l %d0
 163 01da 6696      	jne .L12
 164               	.L10:
 165 01dc 4AAE FFFC 	tst.l -4(%fp)
 166 01e0 670C      	jeq .L13
 167 01e2 F22E 541A 	fneg.d -20(%fp),%fp0
 167      FFEC 
 168 01e8 F22E 7400 	fmove.d %fp0,-20(%fp)
 168      FFEC 
 169               	.L13:
 170 01ee 42AE FFFC 	clr.l -4(%fp)
 171 01f2 202E 0008 	move.l 8(%fp),%d0
 172 01f6 2040      	move.l %d0,%a0
 173 01f8 1010      	move.b (%a0),%d0
 174 01fa 0C00 0065 	cmp.b #101,%d0
 175 01fe 672C      	jeq .L14
 176 0200 202E 0008 	move.l 8(%fp),%d0
 177 0204 2040      	move.l %d0,%a0
 178 0206 1010      	move.b (%a0),%d0
 179 0208 0C00 0045 	cmp.b #69,%d0
 180 020c 671E      	jeq .L14
 181 020e 202E 0008 	move.l 8(%fp),%d0
 182 0212 2040      	move.l %d0,%a0
 183 0214 1010      	move.b (%a0),%d0
 184 0216 0C00 0064 	cmp.b #100,%d0
 185 021a 6710      	jeq .L14
 186 021c 202E 0008 	move.l 8(%fp),%d0
 187 0220 2040      	move.l %d0,%a0
 188 0222 1010      	move.b (%a0),%d0
 189 0224 0C00 0045 	cmp.b #69,%d0
 190 0228 6600 00D2 	jne .L15
 191               	.L14:
 192 022c 52AE 0008 	addq.l #1,8(%fp)
 193 0230 202E 0008 	move.l 8(%fp),%d0
 194 0234 2040      	move.l %d0,%a0
 195 0236 1010      	move.b (%a0),%d0
 196 0238 0C00 002D 	cmp.b #45,%d0
 197 023c 660A      	jne .L16
 198 023e 52AE FFFC 	addq.l #1,-4(%fp)
 199 0242 53AE 0008 	subq.l #1,8(%fp)
 200 0246 6040      	jra .L18
 201               	.L16:
 202 0248 202E 0008 	move.l 8(%fp),%d0
 203 024c 2040      	move.l %d0,%a0
 204 024e 1010      	move.b (%a0),%d0
 205 0250 0C00 002B 	cmp.b #43,%d0
 206 0254 6630      	jne .L23
 207 0256 52AE 0008 	addq.l #1,8(%fp)
 208 025a 602C      	jra .L18
 209               	.L19:
 210 025c 202E FFE8 	move.l -24(%fp),%d0
68K GAS   			page 5


 211 0260 D080      	add.l %d0,%d0
 212 0262 2200      	move.l %d0,%d1
 213 0264 E589      	lsl.l #2,%d1
 214 0266 2400      	move.l %d0,%d2
 215 0268 D481      	add.l %d1,%d2
 216 026a 2D42 FFE8 	move.l %d2,-24(%fp)
 217 026e 202E 0008 	move.l 8(%fp),%d0
 218 0272 2040      	move.l %d0,%a0
 219 0274 1010      	move.b (%a0),%d0
 220 0276 49C0      	extb.l %d0
 221 0278 72D0      	moveq #-48,%d1
 222 027a D081      	add.l %d1,%d0
 223 027c D1AE FFE8 	add.l %d0,-24(%fp)
 224 0280 52AE 0008 	addq.l #1,8(%fp)
 225 0284 6002      	jra .L18
 226               	.L23:
 227 0286 4E71      	nop
 228               	.L18:
 229 0288 202E 0008 	move.l 8(%fp),%d0
 230 028c 2040      	move.l %d0,%a0
 231 028e 1010      	move.b (%a0),%d0
 232 0290 49C0      	extb.l %d0
 233 0292 1030 09B0 	move.b _ctype(%d0.l),%d0
 233      0000 0000 
 234 029a 1000      	move.b %d0,%d0
 235 029c 0280 0000 	and.l #255,%d0
 235      00FF 
 236 02a2 7202      	moveq #2,%d1
 237 02a4 C081      	and.l %d1,%d0
 238 02a6 4A80      	tst.l %d0
 239 02a8 66B2      	jne .L19
 240 02aa 0CAE 0000 	cmp.l #1023,-24(%fp)
 240      03FF FFE8 
 241 02b2 6F08      	jle .L20
 242 02b4 2D7C 0000 	move.l #1023,-24(%fp)
 242      03FF FFE8 
 243               	.L20:
 244 02bc 4AAE FFFC 	tst.l -4(%fp)
 245 02c0 6704      	jeq .L21
 246 02c2 44AE FFE8 	neg.l -24(%fp)
 247               	.L21:
 248 02c6 2F2E FFE8 	move.l -24(%fp),-(%sp)
 249 02ca 42A7      	clr.l -(%sp)
 250 02cc 2F3C 4024 	move.l #1076101120,-(%sp)
 250      0000 
 251 02d2 4EB9 0000 	jsr pow
 251      0000 
 252 02d8 4FEF 000C 	lea (12,%sp),%sp
 253 02dc F200 4000 	fmove.l %d0,%fp0
 254 02e0 F227 7400 	fmove.d %fp0,-(%sp)
 255 02e4 201F      	move.l (%sp)+,%d0
 256 02e6 221F      	move.l (%sp)+,%d1
 257 02e8 2F01      	move.l %d1,-(%sp)
 258 02ea 2F00      	move.l %d0,-(%sp)
 259 02ec F21F 5480 	fmove.d (%sp)+,%fp1
 260 02f0 F22E 54A3 	fmul.d -20(%fp),%fp1
 260      FFEC 
68K GAS   			page 6


 261 02f6 F22E 7480 	fmove.d %fp1,-20(%fp)
 261      FFEC 
 262               	.L15:
 263 02fc 4AAE 000C 	tst.l 12(%fp)
 264 0300 670A      	jeq .L22
 265 0302 202E 000C 	move.l 12(%fp),%d0
 266 0306 2040      	move.l %d0,%a0
 267 0308 20AE 0008 	move.l 8(%fp),(%a0)
 268               	.L22:
 269 030c 202E FFEC 	move.l -20(%fp),%d0
 270 0310 222E FFF0 	move.l -16(%fp),%d1
 271 0314 2F01      	move.l %d1,-(%sp)
 272 0316 2F00      	move.l %d0,-(%sp)
 273 0318 F21F 5400 	fmove.d (%sp)+,%fp0
 274 031c 242E FFE4 	move.l -28(%fp),%d2
 275 0320 4E5E      	unlk %fp
 276 0322 4E75      	rts
 278               	.align2
 279               	.globlatof
 281               	atof:
 282 0324 4E56 0000 	link.w %fp,#0
 283 0328 42A7      	clr.l -(%sp)
 284 032a 2F2E 0008 	move.l 8(%fp),-(%sp)
 285 032e 4EBA FCD0 	jsr strtod
 286 0332 508F      	addq.l #8,%sp
 287 0334 F227 7400 	fmove.d %fp0,-(%sp)
 288 0338 201F      	move.l (%sp)+,%d0
 289 033a 221F      	move.l (%sp)+,%d1
 290 033c 2F01      	move.l %d1,-(%sp)
 291 033e 2F00      	move.l %d0,-(%sp)
 292 0340 F21F 5400 	fmove.d (%sp)+,%fp0
 293 0344 4E5E      	unlk %fp
 294 0346 4E75      	rts
 296               	.ident"GCC: (GNU) 4.5.1"
 297               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 atof.c
    {standard input}:7      .text:00000000 strtod
    {standard input}:281    .text:00000324 atof

UNDEFINED SYMBOLS
_ctype
pow
