68K GAS   			page 1


   1               	
   2               	.file"ff.c"
   3               	.localFatFs
   4               	.commFatFs,32,2
   5               	.localFsid
   6               	.commFsid,2,2
   7               	.localCurrVol
   8               	.commCurrVol,1,1
   9               	.text
  10               	.align2
  12               	mem_cpy:
  13 0000 4E56 FFF8 	link.w %fp,#-8
  14 0004 2D6E 0008 	move.l 8(%fp),-4(%fp)
  14      FFFC 
  15 000a 2D6E 000C 	move.l 12(%fp),-8(%fp)
  15      FFF8 
  16 0010 6018      	jra .L2
  17               	.L3:
  18 0012 202E FFF8 	move.l -8(%fp),%d0
  19 0016 2040      	move.l %d0,%a0
  20 0018 1210      	move.b (%a0),%d1
  21 001a 202E FFFC 	move.l -4(%fp),%d0
  22 001e 2040      	move.l %d0,%a0
  23 0020 1081      	move.b %d1,(%a0)
  24 0022 52AE FFFC 	addq.l #1,-4(%fp)
  25 0026 52AE FFF8 	addq.l #1,-8(%fp)
  26               	.L2:
  27 002a 4AAE 0010 	tst.l 16(%fp)
  28 002e 56C0      	sne %d0
  29 0030 4400      	neg.b %d0
  30 0032 53AE 0010 	subq.l #1,16(%fp)
  31 0036 4A00      	tst.b %d0
  32 0038 66D8      	jne .L3
  33 003a 4E5E      	unlk %fp
  34 003c 4E75      	rts
  36               	.align2
  38               	mem_set:
  39 003e 4E56 FFFC 	link.w %fp,#-4
  40 0042 2D6E 0008 	move.l 8(%fp),-4(%fp)
  40      FFFC 
  41 0048 6012      	jra .L5
  42               	.L6:
  43 004a 202E 000C 	move.l 12(%fp),%d0
  44 004e 1200      	move.b %d0,%d1
  45 0050 202E FFFC 	move.l -4(%fp),%d0
  46 0054 2040      	move.l %d0,%a0
  47 0056 1081      	move.b %d1,(%a0)
  48 0058 52AE FFFC 	addq.l #1,-4(%fp)
  49               	.L5:
  50 005c 4AAE 0010 	tst.l 16(%fp)
  51 0060 56C0      	sne %d0
  52 0062 4400      	neg.b %d0
  53 0064 53AE 0010 	subq.l #1,16(%fp)
  54 0068 4A00      	tst.b %d0
  55 006a 66DE      	jne .L6
  56 006c 4E5E      	unlk %fp
  57 006e 4E75      	rts
68K GAS   			page 2


  59               	.align2
  61               	mem_cmp:
  62 0070 4E56 FFF4 	link.w %fp,#-12
  63 0074 2F02      	move.l %d2,-(%sp)
  64 0076 2D6E 0008 	move.l 8(%fp),-4(%fp)
  64      FFFC 
  65 007c 2D6E 000C 	move.l 12(%fp),-8(%fp)
  65      FFF8 
  66 0082 42AE FFF4 	clr.l -12(%fp)
  67 0086 4E71      	nop
  68               	.L9:
  69 0088 4AAE 0010 	tst.l 16(%fp)
  70 008c 56C0      	sne %d0
  71 008e 4400      	neg.b %d0
  72 0090 53AE 0010 	subq.l #1,16(%fp)
  73 0094 4A00      	tst.b %d0
  74 0096 673C      	jeq .L8
  75 0098 202E FFFC 	move.l -4(%fp),%d0
  76 009c 2040      	move.l %d0,%a0
  77 009e 1010      	move.b (%a0),%d0
  78 00a0 1000      	move.b %d0,%d0
  79 00a2 0280 0000 	and.l #255,%d0
  79      00FF 
  80 00a8 222E FFF8 	move.l -8(%fp),%d1
  81 00ac 2041      	move.l %d1,%a0
  82 00ae 1210      	move.b (%a0),%d1
  83 00b0 1201      	move.b %d1,%d1
  84 00b2 0281 0000 	and.l #255,%d1
  84      00FF 
  85 00b8 2400      	move.l %d0,%d2
  86 00ba 9481      	sub.l %d1,%d2
  87 00bc 2D42 FFF4 	move.l %d2,-12(%fp)
  88 00c0 4AAE FFF4 	tst.l -12(%fp)
  89 00c4 57C0      	seq %d0
  90 00c6 4400      	neg.b %d0
  91 00c8 52AE FFFC 	addq.l #1,-4(%fp)
  92 00cc 52AE FFF8 	addq.l #1,-8(%fp)
  93 00d0 4A00      	tst.b %d0
  94 00d2 66B4      	jne .L9
  95               	.L8:
  96 00d4 202E FFF4 	move.l -12(%fp),%d0
  97 00d8 241F      	move.l (%sp)+,%d2
  98 00da 4E5E      	unlk %fp
  99 00dc 4E75      	rts
 101               	.align2
 103               	chk_chr:
 104 00de 4E56 0000 	link.w %fp,#0
 105 00e2 6004      	jra .L11
 106               	.L13:
 107 00e4 52AE 0008 	addq.l #1,8(%fp)
 108               	.L11:
 109 00e8 202E 0008 	move.l 8(%fp),%d0
 110 00ec 2040      	move.l %d0,%a0
 111 00ee 1010      	move.b (%a0),%d0
 112 00f0 4A00      	tst.b %d0
 113 00f2 6710      	jeq .L12
 114 00f4 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 3


 115 00f8 2040      	move.l %d0,%a0
 116 00fa 1010      	move.b (%a0),%d0
 117 00fc 49C0      	extb.l %d0
 118 00fe B0AE 000C 	cmp.l 12(%fp),%d0
 119 0102 66E0      	jne .L13
 120               	.L12:
 121 0104 202E 0008 	move.l 8(%fp),%d0
 122 0108 2040      	move.l %d0,%a0
 123 010a 1010      	move.b (%a0),%d0
 124 010c 49C0      	extb.l %d0
 125 010e 4E5E      	unlk %fp
 126 0110 4E75      	rts
 128               	.align2
 130               	sync_window:
 131 0112 4E56 FFF8 	link.w %fp,#-8
 132 0116 202E 0008 	move.l 8(%fp),%d0
 133 011a 2040      	move.l %d0,%a0
 134 011c 1028 0004 	move.b 4(%a0),%d0
 135 0120 4A00      	tst.b %d0
 136 0122 6700 00D0 	jeq .L15
 137 0126 202E 0008 	move.l 8(%fp),%d0
 138 012a 2040      	move.l %d0,%a0
 139 012c 2D68 0030 	move.l 48(%a0),-4(%fp)
 139      FFFC 
 140 0132 7234      	moveq #52,%d1
 141 0134 D2AE 0008 	add.l 8(%fp),%d1
 142 0138 202E 0008 	move.l 8(%fp),%d0
 143 013c 2040      	move.l %d0,%a0
 144 013e 1028 0001 	move.b 1(%a0),%d0
 145 0142 1000      	move.b %d0,%d0
 146 0144 0280 0000 	and.l #255,%d0
 146      00FF 
 147 014a 4878 0001 	pea 1.w
 148 014e 2F2E FFFC 	move.l -4(%fp),-(%sp)
 149 0152 2F01      	move.l %d1,-(%sp)
 150 0154 2F00      	move.l %d0,-(%sp)
 151 0156 4EB9 0000 	jsr disk_write
 151      0000 
 152 015c 4FEF 0010 	lea (16,%sp),%sp
 153 0160 4A80      	tst.l %d0
 154 0162 6706      	jeq .L16
 155 0164 7001      	moveq #1,%d0
 156 0166 6000 008E 	jra .L17
 157               	.L16:
 158 016a 202E 0008 	move.l 8(%fp),%d0
 159 016e 2040      	move.l %d0,%a0
 160 0170 4228 0004 	clr.b 4(%a0)
 161 0174 202E 0008 	move.l 8(%fp),%d0
 162 0178 2040      	move.l %d0,%a0
 163 017a 2028 0024 	move.l 36(%a0),%d0
 164 017e 222E FFFC 	move.l -4(%fp),%d1
 165 0182 9280      	sub.l %d0,%d1
 166 0184 2001      	move.l %d1,%d0
 167 0186 222E 0008 	move.l 8(%fp),%d1
 168 018a 2041      	move.l %d1,%a0
 169 018c 2228 001C 	move.l 28(%a0),%d1
 170 0190 B280      	cmp.l %d0,%d1
68K GAS   			page 4


 171 0192 6360      	jls .L15
 172 0194 202E 0008 	move.l 8(%fp),%d0
 173 0198 2040      	move.l %d0,%a0
 174 019a 1028 0003 	move.b 3(%a0),%d0
 175 019e 1000      	move.b %d0,%d0
 176 01a0 0280 0000 	and.l #255,%d0
 176      00FF 
 177 01a6 2D40 FFF8 	move.l %d0,-8(%fp)
 178 01aa 6040      	jra .L18
 179               	.L19:
 180 01ac 202E 0008 	move.l 8(%fp),%d0
 181 01b0 2040      	move.l %d0,%a0
 182 01b2 2028 001C 	move.l 28(%a0),%d0
 183 01b6 D1AE FFFC 	add.l %d0,-4(%fp)
 184 01ba 7234      	moveq #52,%d1
 185 01bc D2AE 0008 	add.l 8(%fp),%d1
 186 01c0 202E 0008 	move.l 8(%fp),%d0
 187 01c4 2040      	move.l %d0,%a0
 188 01c6 1028 0001 	move.b 1(%a0),%d0
 189 01ca 1000      	move.b %d0,%d0
 190 01cc 0280 0000 	and.l #255,%d0
 190      00FF 
 191 01d2 4878 0001 	pea 1.w
 192 01d6 2F2E FFFC 	move.l -4(%fp),-(%sp)
 193 01da 2F01      	move.l %d1,-(%sp)
 194 01dc 2F00      	move.l %d0,-(%sp)
 195 01de 4EB9 0000 	jsr disk_write
 195      0000 
 196 01e4 4FEF 0010 	lea (16,%sp),%sp
 197 01e8 53AE FFF8 	subq.l #1,-8(%fp)
 198               	.L18:
 199 01ec 7001      	moveq #1,%d0
 200 01ee B0AE FFF8 	cmp.l -8(%fp),%d0
 201 01f2 65B8      	jcs .L19
 202               	.L15:
 203 01f4 4280      	clr.l %d0
 204               	.L17:
 205 01f6 4E5E      	unlk %fp
 206 01f8 4E75      	rts
 208               	.align2
 210               	move_window:
 211 01fa 4E56 0000 	link.w %fp,#0
 212 01fe 202E 0008 	move.l 8(%fp),%d0
 213 0202 2040      	move.l %d0,%a0
 214 0204 2028 0030 	move.l 48(%a0),%d0
 215 0208 B0AE 000C 	cmp.l 12(%fp),%d0
 216 020c 6754      	jeq .L21
 217 020e 2F2E 0008 	move.l 8(%fp),-(%sp)
 218 0212 4EBA FEFE 	jsr sync_window
 219 0216 588F      	addq.l #4,%sp
 220 0218 4A80      	tst.l %d0
 221 021a 6704      	jeq .L22
 222 021c 7001      	moveq #1,%d0
 223 021e 6044      	jra .L23
 224               	.L22:
 225 0220 7234      	moveq #52,%d1
 226 0222 D2AE 0008 	add.l 8(%fp),%d1
68K GAS   			page 5


 227 0226 202E 0008 	move.l 8(%fp),%d0
 228 022a 2040      	move.l %d0,%a0
 229 022c 1028 0001 	move.b 1(%a0),%d0
 230 0230 1000      	move.b %d0,%d0
 231 0232 0280 0000 	and.l #255,%d0
 231      00FF 
 232 0238 4878 0001 	pea 1.w
 233 023c 2F2E 000C 	move.l 12(%fp),-(%sp)
 234 0240 2F01      	move.l %d1,-(%sp)
 235 0242 2F00      	move.l %d0,-(%sp)
 236 0244 4EB9 0000 	jsr disk_read
 236      0000 
 237 024a 4FEF 0010 	lea (16,%sp),%sp
 238 024e 4A80      	tst.l %d0
 239 0250 6704      	jeq .L24
 240 0252 7001      	moveq #1,%d0
 241 0254 600E      	jra .L23
 242               	.L24:
 243 0256 202E 0008 	move.l 8(%fp),%d0
 244 025a 2040      	move.l %d0,%a0
 245 025c 216E 000C 	move.l 12(%fp),48(%a0)
 245      0030 
 246               	.L21:
 247 0262 4280      	clr.l %d0
 248               	.L23:
 249 0264 4E5E      	unlk %fp
 250 0266 4E75      	rts
 252               	.align2
 254               	sync_fs:
 255 0268 4E56 FFFC 	link.w %fp,#-4
 256 026c 2F02      	move.l %d2,-(%sp)
 257 026e 2F2E 0008 	move.l 8(%fp),-(%sp)
 258 0272 4EBA FE9E 	jsr sync_window
 259 0276 588F      	addq.l #4,%sp
 260 0278 2D40 FFFC 	move.l %d0,-4(%fp)
 261 027c 4AAE FFFC 	tst.l -4(%fp)
 262 0280 6600 0242 	jne .L26
 263 0284 202E 0008 	move.l 8(%fp),%d0
 264 0288 2040      	move.l %d0,%a0
 265 028a 1010      	move.b (%a0),%d0
 266 028c 0C00 0003 	cmp.b #3,%d0
 267 0290 6600 0206 	jne .L27
 268 0294 202E 0008 	move.l 8(%fp),%d0
 269 0298 2240      	move.l %d0,%a1
 270 029a 1029 0005 	move.b 5(%a1),%d0
 271 029e 0C00 0001 	cmp.b #1,%d0
 272 02a2 6600 01F4 	jne .L27
 273 02a6 202E 0008 	move.l 8(%fp),%d0
 274 02aa 2040      	move.l %d0,%a0
 275 02ac 3028 000A 	move.w 10(%a0),%d0
 276 02b0 4281      	clr.l %d1
 277 02b2 3200      	move.w %d0,%d1
 278 02b4 7034      	moveq #52,%d0
 279 02b6 D0AE 0008 	add.l 8(%fp),%d0
 280 02ba 2F01      	move.l %d1,-(%sp)
 281 02bc 42A7      	clr.l -(%sp)
 282 02be 2F00      	move.l %d0,-(%sp)
68K GAS   			page 6


 283 02c0 4EBA FD7C 	jsr mem_set
 284 02c4 4FEF 000C 	lea (12,%sp),%sp
 285 02c8 202E 0008 	move.l 8(%fp),%d0
 286 02cc 0680 0000 	add.l #562,%d0
 286      0232 
 287 02d2 2240      	move.l %d0,%a1
 288 02d4 12BC 0055 	move.b #85,(%a1)
 289 02d8 202E 0008 	move.l 8(%fp),%d0
 290 02dc 0680 0000 	add.l #563,%d0
 290      0233 
 291 02e2 2040      	move.l %d0,%a0
 292 02e4 10BC FFAA 	move.b #-86,(%a0)
 293 02e8 202E 0008 	move.l 8(%fp),%d0
 294 02ec 2240      	move.l %d0,%a1
 295 02ee 137C 0052 	move.b #82,52(%a1)
 295      0034 
 296 02f4 7035      	moveq #53,%d0
 297 02f6 D0AE 0008 	add.l 8(%fp),%d0
 298 02fa 2040      	move.l %d0,%a0
 299 02fc 10BC 0052 	move.b #82,(%a0)
 300 0300 7036      	moveq #54,%d0
 301 0302 D0AE 0008 	add.l 8(%fp),%d0
 302 0306 2240      	move.l %d0,%a1
 303 0308 12BC 0061 	move.b #97,(%a1)
 304 030c 7037      	moveq #55,%d0
 305 030e D0AE 0008 	add.l 8(%fp),%d0
 306 0312 2040      	move.l %d0,%a0
 307 0314 10BC 0041 	move.b #65,(%a0)
 308 0318 202E 0008 	move.l 8(%fp),%d0
 309 031c 0680 0000 	add.l #536,%d0
 309      0218 
 310 0322 2240      	move.l %d0,%a1
 311 0324 12BC 0072 	move.b #114,(%a1)
 312 0328 202E 0008 	move.l 8(%fp),%d0
 313 032c 0680 0000 	add.l #537,%d0
 313      0219 
 314 0332 2040      	move.l %d0,%a0
 315 0334 10BC 0072 	move.b #114,(%a0)
 316 0338 202E 0008 	move.l 8(%fp),%d0
 317 033c 0680 0000 	add.l #538,%d0
 317      021A 
 318 0342 2240      	move.l %d0,%a1
 319 0344 12BC 0041 	move.b #65,(%a1)
 320 0348 202E 0008 	move.l 8(%fp),%d0
 321 034c 0680 0000 	add.l #539,%d0
 321      021B 
 322 0352 2040      	move.l %d0,%a0
 323 0354 10BC 0061 	move.b #97,(%a0)
 324 0358 202E 0008 	move.l 8(%fp),%d0
 325 035c 0680 0000 	add.l #540,%d0
 325      021C 
 326 0362 222E 0008 	move.l 8(%fp),%d1
 327 0366 2241      	move.l %d1,%a1
 328 0368 2229 0010 	move.l 16(%a1),%d1
 329 036c 1201      	move.b %d1,%d1
 330 036e 2040      	move.l %d0,%a0
 331 0370 1081      	move.b %d1,(%a0)
68K GAS   			page 7


 332 0372 202E 0008 	move.l 8(%fp),%d0
 333 0376 0680 0000 	add.l #541,%d0
 333      021D 
 334 037c 222E 0008 	move.l 8(%fp),%d1
 335 0380 2241      	move.l %d1,%a1
 336 0382 2229 0010 	move.l 16(%a1),%d1
 337 0386 3201      	move.w %d1,%d1
 338 0388 E049      	lsr.w #8,%d1
 339 038a 1201      	move.b %d1,%d1
 340 038c 2040      	move.l %d0,%a0
 341 038e 1081      	move.b %d1,(%a0)
 342 0390 202E 0008 	move.l 8(%fp),%d0
 343 0394 0680 0000 	add.l #542,%d0
 343      021E 
 344 039a 222E 0008 	move.l 8(%fp),%d1
 345 039e 2241      	move.l %d1,%a1
 346 03a0 2229 0010 	move.l 16(%a1),%d1
 347 03a4 4241      	clr.w %d1
 348 03a6 4841      	swap %d1
 349 03a8 1201      	move.b %d1,%d1
 350 03aa 2040      	move.l %d0,%a0
 351 03ac 1081      	move.b %d1,(%a0)
 352 03ae 202E 0008 	move.l 8(%fp),%d0
 353 03b2 0680 0000 	add.l #543,%d0
 353      021F 
 354 03b8 222E 0008 	move.l 8(%fp),%d1
 355 03bc 2241      	move.l %d1,%a1
 356 03be 2229 0010 	move.l 16(%a1),%d1
 357 03c2 7418      	moveq #24,%d2
 358 03c4 E4A9      	lsr.l %d2,%d1
 359 03c6 1201      	move.b %d1,%d1
 360 03c8 2040      	move.l %d0,%a0
 361 03ca 1081      	move.b %d1,(%a0)
 362 03cc 202E 0008 	move.l 8(%fp),%d0
 363 03d0 0680 0000 	add.l #544,%d0
 363      0220 
 364 03d6 222E 0008 	move.l 8(%fp),%d1
 365 03da 2241      	move.l %d1,%a1
 366 03dc 2229 000C 	move.l 12(%a1),%d1
 367 03e0 1201      	move.b %d1,%d1
 368 03e2 2040      	move.l %d0,%a0
 369 03e4 1081      	move.b %d1,(%a0)
 370 03e6 202E 0008 	move.l 8(%fp),%d0
 371 03ea 0680 0000 	add.l #545,%d0
 371      0221 
 372 03f0 222E 0008 	move.l 8(%fp),%d1
 373 03f4 2241      	move.l %d1,%a1
 374 03f6 2229 000C 	move.l 12(%a1),%d1
 375 03fa 3201      	move.w %d1,%d1
 376 03fc E049      	lsr.w #8,%d1
 377 03fe 1201      	move.b %d1,%d1
 378 0400 2040      	move.l %d0,%a0
 379 0402 1081      	move.b %d1,(%a0)
 380 0404 202E 0008 	move.l 8(%fp),%d0
 381 0408 0680 0000 	add.l #546,%d0
 381      0222 
 382 040e 222E 0008 	move.l 8(%fp),%d1
68K GAS   			page 8


 383 0412 2241      	move.l %d1,%a1
 384 0414 2229 000C 	move.l 12(%a1),%d1
 385 0418 4241      	clr.w %d1
 386 041a 4841      	swap %d1
 387 041c 1201      	move.b %d1,%d1
 388 041e 2040      	move.l %d0,%a0
 389 0420 1081      	move.b %d1,(%a0)
 390 0422 202E 0008 	move.l 8(%fp),%d0
 391 0426 0680 0000 	add.l #547,%d0
 391      0223 
 392 042c 222E 0008 	move.l 8(%fp),%d1
 393 0430 2241      	move.l %d1,%a1
 394 0432 2229 000C 	move.l 12(%a1),%d1
 395 0436 7418      	moveq #24,%d2
 396 0438 E4A9      	lsr.l %d2,%d1
 397 043a 1201      	move.b %d1,%d1
 398 043c 2040      	move.l %d0,%a0
 399 043e 1081      	move.b %d1,(%a0)
 400 0440 202E 0008 	move.l 8(%fp),%d0
 401 0444 2240      	move.l %d0,%a1
 402 0446 2029 0020 	move.l 32(%a1),%d0
 403 044a 2200      	move.l %d0,%d1
 404 044c 5281      	addq.l #1,%d1
 405 044e 202E 0008 	move.l 8(%fp),%d0
 406 0452 2040      	move.l %d0,%a0
 407 0454 2141 0030 	move.l %d1,48(%a0)
 408 0458 202E 0008 	move.l 8(%fp),%d0
 409 045c 2240      	move.l %d0,%a1
 410 045e 2069 0030 	move.l 48(%a1),%a0
 411 0462 7234      	moveq #52,%d1
 412 0464 D2AE 0008 	add.l 8(%fp),%d1
 413 0468 202E 0008 	move.l 8(%fp),%d0
 414 046c 2240      	move.l %d0,%a1
 415 046e 1029 0001 	move.b 1(%a1),%d0
 416 0472 1000      	move.b %d0,%d0
 417 0474 0280 0000 	and.l #255,%d0
 417      00FF 
 418 047a 4878 0001 	pea 1.w
 419 047e 2F08      	move.l %a0,-(%sp)
 420 0480 2F01      	move.l %d1,-(%sp)
 421 0482 2F00      	move.l %d0,-(%sp)
 422 0484 4EB9 0000 	jsr disk_write
 422      0000 
 423 048a 4FEF 0010 	lea (16,%sp),%sp
 424 048e 202E 0008 	move.l 8(%fp),%d0
 425 0492 2040      	move.l %d0,%a0
 426 0494 4228 0005 	clr.b 5(%a0)
 427               	.L27:
 428 0498 202E 0008 	move.l 8(%fp),%d0
 429 049c 2240      	move.l %d0,%a1
 430 049e 1029 0001 	move.b 1(%a1),%d0
 431 04a2 1000      	move.b %d0,%d0
 432 04a4 0280 0000 	and.l #255,%d0
 432      00FF 
 433 04aa 42A7      	clr.l -(%sp)
 434 04ac 42A7      	clr.l -(%sp)
 435 04ae 2F00      	move.l %d0,-(%sp)
68K GAS   			page 9


 436 04b0 4EB9 0000 	jsr disk_ioctl
 436      0000 
 437 04b6 4FEF 000C 	lea (12,%sp),%sp
 438 04ba 4A80      	tst.l %d0
 439 04bc 6706      	jeq .L26
 440 04be 7001      	moveq #1,%d0
 441 04c0 2D40 FFFC 	move.l %d0,-4(%fp)
 442               	.L26:
 443 04c4 202E FFFC 	move.l -4(%fp),%d0
 444 04c8 242E FFF8 	move.l -8(%fp),%d2
 445 04cc 4E5E      	unlk %fp
 446 04ce 4E75      	rts
 448               	.align2
 449               	.globlclust2sect
 451               	clust2sect:
 452 04d0 4E56 0000 	link.w %fp,#0
 453 04d4 55AE 000C 	subq.l #2,12(%fp)
 454 04d8 202E 0008 	move.l 8(%fp),%d0
 455 04dc 2040      	move.l %d0,%a0
 456 04de 2028 0018 	move.l 24(%a0),%d0
 457 04e2 5580      	subq.l #2,%d0
 458 04e4 B0AE 000C 	cmp.l 12(%fp),%d0
 459 04e8 6204      	jhi .L29
 460 04ea 4280      	clr.l %d0
 461 04ec 6024      	jra .L30
 462               	.L29:
 463 04ee 202E 0008 	move.l 8(%fp),%d0
 464 04f2 2040      	move.l %d0,%a0
 465 04f4 1028 0002 	move.b 2(%a0),%d0
 466 04f8 1000      	move.b %d0,%d0
 467 04fa 0280 0000 	and.l #255,%d0
 467      00FF 
 468 0500 4C2E 0800 	muls.l 12(%fp),%d0
 468      000C 
 469 0506 222E 0008 	move.l 8(%fp),%d1
 470 050a 2041      	move.l %d1,%a0
 471 050c 2228 002C 	move.l 44(%a0),%d1
 472 0510 D081      	add.l %d1,%d0
 473               	.L30:
 474 0512 4E5E      	unlk %fp
 475 0514 4E75      	rts
 477               	.align2
 478               	.globlget_fat
 480               	get_fat:
 481 0516 4E56 FFF4 	link.w %fp,#-12
 482 051a 2F03      	move.l %d3,-(%sp)
 483 051c 2F02      	move.l %d2,-(%sp)
 484 051e 7001      	moveq #1,%d0
 485 0520 B0AE 000C 	cmp.l 12(%fp),%d0
 486 0524 6410      	jcc .L32
 487 0526 202E 0008 	move.l 8(%fp),%d0
 488 052a 2040      	move.l %d0,%a0
 489 052c 2028 0018 	move.l 24(%a0),%d0
 490 0530 B0AE 000C 	cmp.l 12(%fp),%d0
 491 0534 6206      	jhi .L33
 492               	.L32:
 493 0536 7001      	moveq #1,%d0
68K GAS   			page 10


 494 0538 6000 02AA 	jra .L34
 495               	.L33:
 496 053c 202E 0008 	move.l 8(%fp),%d0
 497 0540 2040      	move.l %d0,%a0
 498 0542 1010      	move.b (%a0),%d0
 499 0544 1000      	move.b %d0,%d0
 500 0546 0280 0000 	and.l #255,%d0
 500      00FF 
 501 054c 7202      	moveq #2,%d1
 502 054e B280      	cmp.l %d0,%d1
 503 0550 6700 0120 	jeq .L37
 504 0554 7403      	moveq #3,%d2
 505 0556 B480      	cmp.l %d0,%d2
 506 0558 6700 01B0 	jeq .L38
 507 055c 7601      	moveq #1,%d3
 508 055e B680      	cmp.l %d0,%d3
 509 0560 6600 026E 	jne .L46
 510               	.L36:
 511 0564 2D6E 000C 	move.l 12(%fp),-4(%fp)
 511      FFFC 
 512 056a 202E FFFC 	move.l -4(%fp),%d0
 513 056e E288      	lsr.l #1,%d0
 514 0570 D1AE FFFC 	add.l %d0,-4(%fp)
 515 0574 202E 0008 	move.l 8(%fp),%d0
 516 0578 2040      	move.l %d0,%a0
 517 057a 2228 0024 	move.l 36(%a0),%d1
 518 057e 202E 0008 	move.l 8(%fp),%d0
 519 0582 2040      	move.l %d0,%a0
 520 0584 3028 000A 	move.w 10(%a0),%d0
 521 0588 3000      	move.w %d0,%d0
 522 058a 0280 0000 	and.l #65535,%d0
 522      FFFF 
 523 0590 242E FFFC 	move.l -4(%fp),%d2
 524 0594 4C40 2003 	divul.l %d0,%d3:%d2
 525 0598 2002      	move.l %d2,%d0
 526 059a D081      	add.l %d1,%d0
 527 059c 2F00      	move.l %d0,-(%sp)
 528 059e 2F2E 0008 	move.l 8(%fp),-(%sp)
 529 05a2 4EBA FC56 	jsr move_window
 530 05a6 508F      	addq.l #8,%sp
 531 05a8 4A80      	tst.l %d0
 532 05aa 6600 0228 	jne .L47
 533               	.L39:
 534 05ae 202E 0008 	move.l 8(%fp),%d0
 535 05b2 2040      	move.l %d0,%a0
 536 05b4 3028 000A 	move.w 10(%a0),%d0
 537 05b8 3000      	move.w %d0,%d0
 538 05ba 0280 0000 	and.l #65535,%d0
 538      FFFF 
 539 05c0 222E FFFC 	move.l -4(%fp),%d1
 540 05c4 4C40 1000 	divul.l %d0,%d0:%d1
 541 05c8 222E 0008 	move.l 8(%fp),%d1
 542 05cc 2041      	move.l %d1,%a0
 543 05ce 1030 0834 	move.b 52(%a0,%d0.l),%d0
 544 05d2 1000      	move.b %d0,%d0
 545 05d4 0280 0000 	and.l #255,%d0
 545      00FF 
68K GAS   			page 11


 546 05da 2D40 FFF8 	move.l %d0,-8(%fp)
 547 05de 52AE FFFC 	addq.l #1,-4(%fp)
 548 05e2 202E 0008 	move.l 8(%fp),%d0
 549 05e6 2040      	move.l %d0,%a0
 550 05e8 2228 0024 	move.l 36(%a0),%d1
 551 05ec 202E 0008 	move.l 8(%fp),%d0
 552 05f0 2040      	move.l %d0,%a0
 553 05f2 3028 000A 	move.w 10(%a0),%d0
 554 05f6 3000      	move.w %d0,%d0
 555 05f8 0280 0000 	and.l #65535,%d0
 555      FFFF 
 556 05fe 242E FFFC 	move.l -4(%fp),%d2
 557 0602 4C40 2003 	divul.l %d0,%d3:%d2
 558 0606 2002      	move.l %d2,%d0
 559 0608 D081      	add.l %d1,%d0
 560 060a 2F00      	move.l %d0,-(%sp)
 561 060c 2F2E 0008 	move.l 8(%fp),-(%sp)
 562 0610 4EBA FBE8 	jsr move_window
 563 0614 508F      	addq.l #8,%sp
 564 0616 4A80      	tst.l %d0
 565 0618 6600 01BE 	jne .L48
 566               	.L41:
 567 061c 202E 0008 	move.l 8(%fp),%d0
 568 0620 2040      	move.l %d0,%a0
 569 0622 3028 000A 	move.w 10(%a0),%d0
 570 0626 3000      	move.w %d0,%d0
 571 0628 0280 0000 	and.l #65535,%d0
 571      FFFF 
 572 062e 222E FFFC 	move.l -4(%fp),%d1
 573 0632 4C40 1000 	divul.l %d0,%d0:%d1
 574 0636 222E 0008 	move.l 8(%fp),%d1
 575 063a 2041      	move.l %d1,%a0
 576 063c 1030 0834 	move.b 52(%a0,%d0.l),%d0
 577 0640 1000      	move.b %d0,%d0
 578 0642 0280 0000 	and.l #255,%d0
 578      00FF 
 579 0648 E188      	lsl.l #8,%d0
 580 064a 81AE FFF8 	or.l %d0,-8(%fp)
 581 064e 202E 000C 	move.l 12(%fp),%d0
 582 0652 7201      	moveq #1,%d1
 583 0654 C081      	and.l %d1,%d0
 584 0656 1000      	move.b %d0,%d0
 585 0658 4A00      	tst.b %d0
 586 065a 6708      	jeq .L42
 587 065c 202E FFF8 	move.l -8(%fp),%d0
 588 0660 E888      	lsr.l #4,%d0
 589 0662 600A      	jra .L43
 590               	.L42:
 591 0664 202E FFF8 	move.l -8(%fp),%d0
 592 0668 0280 0000 	and.l #4095,%d0
 592      0FFF 
 593               	.L43:
 594 066e 6000 0174 	jra .L34
 595               	.L37:
 596 0672 202E 0008 	move.l 8(%fp),%d0
 597 0676 2040      	move.l %d0,%a0
 598 0678 2228 0024 	move.l 36(%a0),%d1
68K GAS   			page 12


 599 067c 202E 0008 	move.l 8(%fp),%d0
 600 0680 2040      	move.l %d0,%a0
 601 0682 3028 000A 	move.w 10(%a0),%d0
 602 0686 E248      	lsr.w #1,%d0
 603 0688 3000      	move.w %d0,%d0
 604 068a 0280 0000 	and.l #65535,%d0
 604      FFFF 
 605 0690 242E 000C 	move.l 12(%fp),%d2
 606 0694 4C40 2003 	divul.l %d0,%d3:%d2
 607 0698 2002      	move.l %d2,%d0
 608 069a D081      	add.l %d1,%d0
 609 069c 2F00      	move.l %d0,-(%sp)
 610 069e 2F2E 0008 	move.l 8(%fp),-(%sp)
 611 06a2 4EBA FB56 	jsr move_window
 612 06a6 508F      	addq.l #8,%sp
 613 06a8 4A80      	tst.l %d0
 614 06aa 6600 0130 	jne .L49
 615               	.L44:
 616 06ae 7034      	moveq #52,%d0
 617 06b0 D0AE 0008 	add.l 8(%fp),%d0
 618 06b4 222E 000C 	move.l 12(%fp),%d1
 619 06b8 D281      	add.l %d1,%d1
 620 06ba 206E 0008 	move.l 8(%fp),%a0
 621 06be 3068 000A 	move.w 10(%a0),%a0
 622 06c2 4282      	clr.l %d2
 623 06c4 3408      	move.w %a0,%d2
 624 06c6 2042      	move.l %d2,%a0
 625 06c8 2601      	move.l %d1,%d3
 626 06ca 2408      	move.l %a0,%d2
 627 06cc 4C42 3001 	divul.l %d2,%d1:%d3
 628 06d0 2600      	move.l %d0,%d3
 629 06d2 D681      	add.l %d1,%d3
 630 06d4 2D43 FFF4 	move.l %d3,-12(%fp)
 631 06d8 202E FFF4 	move.l -12(%fp),%d0
 632 06dc 5280      	addq.l #1,%d0
 633 06de 2040      	move.l %d0,%a0
 634 06e0 1010      	move.b (%a0),%d0
 635 06e2 1000      	move.b %d0,%d0
 636 06e4 0280 0000 	and.l #255,%d0
 636      00FF 
 637 06ea E188      	lsl.l #8,%d0
 638 06ec 3200      	move.w %d0,%d1
 639 06ee 202E FFF4 	move.l -12(%fp),%d0
 640 06f2 2040      	move.l %d0,%a0
 641 06f4 1010      	move.b (%a0),%d0
 642 06f6 1000      	move.b %d0,%d0
 643 06f8 0240 00FF 	and.w #255,%d0
 644 06fc 8041      	or.w %d1,%d0
 645 06fe 3000      	move.w %d0,%d0
 646 0700 0280 0000 	and.l #65535,%d0
 646      FFFF 
 647 0706 6000 00DC 	jra .L34
 648               	.L38:
 649 070a 202E 0008 	move.l 8(%fp),%d0
 650 070e 2040      	move.l %d0,%a0
 651 0710 2228 0024 	move.l 36(%a0),%d1
 652 0714 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 13


 653 0718 2040      	move.l %d0,%a0
 654 071a 3028 000A 	move.w 10(%a0),%d0
 655 071e E448      	lsr.w #2,%d0
 656 0720 3000      	move.w %d0,%d0
 657 0722 0280 0000 	and.l #65535,%d0
 657      FFFF 
 658 0728 242E 000C 	move.l 12(%fp),%d2
 659 072c 4C40 2003 	divul.l %d0,%d3:%d2
 660 0730 2002      	move.l %d2,%d0
 661 0732 D081      	add.l %d1,%d0
 662 0734 2F00      	move.l %d0,-(%sp)
 663 0736 2F2E 0008 	move.l 8(%fp),-(%sp)
 664 073a 4EBA FABE 	jsr move_window
 665 073e 508F      	addq.l #8,%sp
 666 0740 4A80      	tst.l %d0
 667 0742 6600 009C 	jne .L50
 668               	.L45:
 669 0746 7034      	moveq #52,%d0
 670 0748 D0AE 0008 	add.l 8(%fp),%d0
 671 074c 222E 000C 	move.l 12(%fp),%d1
 672 0750 E589      	lsl.l #2,%d1
 673 0752 206E 0008 	move.l 8(%fp),%a0
 674 0756 3068 000A 	move.w 10(%a0),%a0
 675 075a 4282      	clr.l %d2
 676 075c 3408      	move.w %a0,%d2
 677 075e 2042      	move.l %d2,%a0
 678 0760 2601      	move.l %d1,%d3
 679 0762 2408      	move.l %a0,%d2
 680 0764 4C42 3001 	divul.l %d2,%d1:%d3
 681 0768 2600      	move.l %d0,%d3
 682 076a D681      	add.l %d1,%d3
 683 076c 2D43 FFF4 	move.l %d3,-12(%fp)
 684 0770 202E FFF4 	move.l -12(%fp),%d0
 685 0774 5680      	addq.l #3,%d0
 686 0776 2040      	move.l %d0,%a0
 687 0778 1010      	move.b (%a0),%d0
 688 077a 1000      	move.b %d0,%d0
 689 077c 0280 0000 	and.l #255,%d0
 689      00FF 
 690 0782 2200      	move.l %d0,%d1
 691 0784 7418      	moveq #24,%d2
 692 0786 E5A9      	lsl.l %d2,%d1
 693 0788 202E FFF4 	move.l -12(%fp),%d0
 694 078c 5480      	addq.l #2,%d0
 695 078e 2040      	move.l %d0,%a0
 696 0790 1010      	move.b (%a0),%d0
 697 0792 1000      	move.b %d0,%d0
 698 0794 0280 0000 	and.l #255,%d0
 698      00FF 
 699 079a 4840      	swap %d0
 700 079c 4240      	clr.w %d0
 701 079e 8280      	or.l %d0,%d1
 702 07a0 202E FFF4 	move.l -12(%fp),%d0
 703 07a4 5280      	addq.l #1,%d0
 704 07a6 2040      	move.l %d0,%a0
 705 07a8 1010      	move.b (%a0),%d0
 706 07aa 1000      	move.b %d0,%d0
68K GAS   			page 14


 707 07ac 0280 0000 	and.l #255,%d0
 707      00FF 
 708 07b2 E188      	lsl.l #8,%d0
 709 07b4 8280      	or.l %d0,%d1
 710 07b6 202E FFF4 	move.l -12(%fp),%d0
 711 07ba 2040      	move.l %d0,%a0
 712 07bc 1010      	move.b (%a0),%d0
 713 07be 1000      	move.b %d0,%d0
 714 07c0 0280 0000 	and.l #255,%d0
 714      00FF 
 715 07c6 8081      	or.l %d1,%d0
 716 07c8 0280 0FFF 	and.l #268435455,%d0
 716      FFFF 
 717 07ce 6014      	jra .L34
 718               	.L46:
 719 07d0 7001      	moveq #1,%d0
 720 07d2 6010      	jra .L34
 721               	.L47:
 722 07d4 4E71      	nop
 723 07d6 600A      	jra .L40
 724               	.L48:
 725 07d8 4E71      	nop
 726 07da 6006      	jra .L40
 727               	.L49:
 728 07dc 4E71      	nop
 729 07de 6002      	jra .L40
 730               	.L50:
 731 07e0 4E71      	nop
 732               	.L40:
 733 07e2 70FF      	moveq #-1,%d0
 734               	.L34:
 735 07e4 242E FFEC 	move.l -20(%fp),%d2
 736 07e8 262E FFF0 	move.l -16(%fp),%d3
 737 07ec 4E5E      	unlk %fp
 738 07ee 4E75      	rts
 740               	.align2
 741               	.globlput_fat
 743               	put_fat:
 744 07f0 4E56 FFF4 	link.w %fp,#-12
 745 07f4 2F03      	move.l %d3,-(%sp)
 746 07f6 2F02      	move.l %d2,-(%sp)
 747 07f8 7001      	moveq #1,%d0
 748 07fa B0AE 000C 	cmp.l 12(%fp),%d0
 749 07fe 6410      	jcc .L52
 750 0800 202E 0008 	move.l 8(%fp),%d0
 751 0804 2040      	move.l %d0,%a0
 752 0806 2028 0018 	move.l 24(%a0),%d0
 753 080a B0AE 000C 	cmp.l 12(%fp),%d0
 754 080e 620A      	jhi .L53
 755               	.L52:
 756 0810 7002      	moveq #2,%d0
 757 0812 2D40 FFFC 	move.l %d0,-4(%fp)
 758 0816 6000 036C 	jra .L54
 759               	.L53:
 760 081a 202E 0008 	move.l 8(%fp),%d0
 761 081e 2040      	move.l %d0,%a0
 762 0820 1010      	move.b (%a0),%d0
68K GAS   			page 15


 763 0822 1000      	move.b %d0,%d0
 764 0824 0280 0000 	and.l #255,%d0
 764      00FF 
 765 082a 7202      	moveq #2,%d1
 766 082c B280      	cmp.l %d0,%d1
 767 082e 6700 0186 	jeq .L57
 768 0832 7403      	moveq #3,%d2
 769 0834 B480      	cmp.l %d0,%d2
 770 0836 6700 0210 	jeq .L58
 771 083a 7601      	moveq #1,%d3
 772 083c B680      	cmp.l %d0,%d3
 773 083e 6600 0322 	jne .L68
 774               	.L56:
 775 0842 2D6E 000C 	move.l 12(%fp),-8(%fp)
 775      FFF8 
 776 0848 202E FFF8 	move.l -8(%fp),%d0
 777 084c E288      	lsr.l #1,%d0
 778 084e D1AE FFF8 	add.l %d0,-8(%fp)
 779 0852 202E 0008 	move.l 8(%fp),%d0
 780 0856 2040      	move.l %d0,%a0
 781 0858 2228 0024 	move.l 36(%a0),%d1
 782 085c 202E 0008 	move.l 8(%fp),%d0
 783 0860 2040      	move.l %d0,%a0
 784 0862 3028 000A 	move.w 10(%a0),%d0
 785 0866 3000      	move.w %d0,%d0
 786 0868 0280 0000 	and.l #65535,%d0
 786      FFFF 
 787 086e 242E FFF8 	move.l -8(%fp),%d2
 788 0872 4C40 2003 	divul.l %d0,%d3:%d2
 789 0876 2002      	move.l %d2,%d0
 790 0878 D081      	add.l %d1,%d0
 791 087a 2F00      	move.l %d0,-(%sp)
 792 087c 2F2E 0008 	move.l 8(%fp),-(%sp)
 793 0880 4EBA F978 	jsr move_window
 794 0884 508F      	addq.l #8,%sp
 795 0886 2D40 FFFC 	move.l %d0,-4(%fp)
 796 088a 4AAE FFFC 	tst.l -4(%fp)
 797 088e 6600 02DA 	jne .L69
 798               	.L59:
 799 0892 7034      	moveq #52,%d0
 800 0894 D0AE 0008 	add.l 8(%fp),%d0
 801 0898 222E 0008 	move.l 8(%fp),%d1
 802 089c 2041      	move.l %d1,%a0
 803 089e 3228 000A 	move.w 10(%a0),%d1
 804 08a2 3201      	move.w %d1,%d1
 805 08a4 0281 0000 	and.l #65535,%d1
 805      FFFF 
 806 08aa 206E FFF8 	move.l -8(%fp),%a0
 807 08ae 2408      	move.l %a0,%d2
 808 08b0 4C41 2001 	divul.l %d1,%d1:%d2
 809 08b4 2600      	move.l %d0,%d3
 810 08b6 D681      	add.l %d1,%d3
 811 08b8 2D43 FFF4 	move.l %d3,-12(%fp)
 812 08bc 202E 000C 	move.l 12(%fp),%d0
 813 08c0 7201      	moveq #1,%d1
 814 08c2 C081      	and.l %d1,%d0
 815 08c4 1000      	move.b %d0,%d0
68K GAS   			page 16


 816 08c6 4A00      	tst.b %d0
 817 08c8 6724      	jeq .L61
 818 08ca 202E FFF4 	move.l -12(%fp),%d0
 819 08ce 2040      	move.l %d0,%a0
 820 08d0 1010      	move.b (%a0),%d0
 821 08d2 1200      	move.b %d0,%d1
 822 08d4 0201 000F 	and.b #15,%d1
 823 08d8 202E 0010 	move.l 16(%fp),%d0
 824 08dc 1000      	move.b %d0,%d0
 825 08de 1000      	move.b %d0,%d0
 826 08e0 0280 0000 	and.l #255,%d0
 826      00FF 
 827 08e6 E988      	lsl.l #4,%d0
 828 08e8 1000      	move.b %d0,%d0
 829 08ea 8001      	or.b %d1,%d0
 830 08ec 6006      	jra .L62
 831               	.L61:
 832 08ee 202E 0010 	move.l 16(%fp),%d0
 833 08f2 1000      	move.b %d0,%d0
 834               	.L62:
 835 08f4 222E FFF4 	move.l -12(%fp),%d1
 836 08f8 2041      	move.l %d1,%a0
 837 08fa 1080      	move.b %d0,(%a0)
 838 08fc 52AE FFF8 	addq.l #1,-8(%fp)
 839 0900 202E 0008 	move.l 8(%fp),%d0
 840 0904 2040      	move.l %d0,%a0
 841 0906 117C 0001 	move.b #1,4(%a0)
 841      0004 
 842 090c 202E 0008 	move.l 8(%fp),%d0
 843 0910 2040      	move.l %d0,%a0
 844 0912 2228 0024 	move.l 36(%a0),%d1
 845 0916 202E 0008 	move.l 8(%fp),%d0
 846 091a 2040      	move.l %d0,%a0
 847 091c 3028 000A 	move.w 10(%a0),%d0
 848 0920 3000      	move.w %d0,%d0
 849 0922 0280 0000 	and.l #65535,%d0
 849      FFFF 
 850 0928 242E FFF8 	move.l -8(%fp),%d2
 851 092c 4C40 2003 	divul.l %d0,%d3:%d2
 852 0930 2002      	move.l %d2,%d0
 853 0932 D081      	add.l %d1,%d0
 854 0934 2F00      	move.l %d0,-(%sp)
 855 0936 2F2E 0008 	move.l 8(%fp),-(%sp)
 856 093a 4EBA F8BE 	jsr move_window
 857 093e 508F      	addq.l #8,%sp
 858 0940 2D40 FFFC 	move.l %d0,-4(%fp)
 859 0944 4AAE FFFC 	tst.l -4(%fp)
 860 0948 6600 0224 	jne .L70
 861               	.L63:
 862 094c 7034      	moveq #52,%d0
 863 094e D0AE 0008 	add.l 8(%fp),%d0
 864 0952 222E 0008 	move.l 8(%fp),%d1
 865 0956 2041      	move.l %d1,%a0
 866 0958 3228 000A 	move.w 10(%a0),%d1
 867 095c 3201      	move.w %d1,%d1
 868 095e 0281 0000 	and.l #65535,%d1
 868      FFFF 
68K GAS   			page 17


 869 0964 206E FFF8 	move.l -8(%fp),%a0
 870 0968 2408      	move.l %a0,%d2
 871 096a 4C41 2001 	divul.l %d1,%d1:%d2
 872 096e 2600      	move.l %d0,%d3
 873 0970 D681      	add.l %d1,%d3
 874 0972 2D43 FFF4 	move.l %d3,-12(%fp)
 875 0976 202E 000C 	move.l 12(%fp),%d0
 876 097a 7201      	moveq #1,%d1
 877 097c C081      	and.l %d1,%d0
 878 097e 1000      	move.b %d0,%d0
 879 0980 4A00      	tst.b %d0
 880 0982 670A      	jeq .L64
 881 0984 202E 0010 	move.l 16(%fp),%d0
 882 0988 E888      	lsr.l #4,%d0
 883 098a 1000      	move.b %d0,%d0
 884 098c 601C      	jra .L65
 885               	.L64:
 886 098e 202E FFF4 	move.l -12(%fp),%d0
 887 0992 2040      	move.l %d0,%a0
 888 0994 1010      	move.b (%a0),%d0
 889 0996 1200      	move.b %d0,%d1
 890 0998 0201 FFF0 	and.b #-16,%d1
 891 099c 202E 0010 	move.l 16(%fp),%d0
 892 09a0 E088      	lsr.l #8,%d0
 893 09a2 1000      	move.b %d0,%d0
 894 09a4 0200 000F 	and.b #15,%d0
 895 09a8 8001      	or.b %d1,%d0
 896               	.L65:
 897 09aa 222E FFF4 	move.l -12(%fp),%d1
 898 09ae 2041      	move.l %d1,%a0
 899 09b0 1080      	move.b %d0,(%a0)
 900 09b2 6000 01C4 	jra .L60
 901               	.L57:
 902 09b6 202E 0008 	move.l 8(%fp),%d0
 903 09ba 2040      	move.l %d0,%a0
 904 09bc 2228 0024 	move.l 36(%a0),%d1
 905 09c0 202E 0008 	move.l 8(%fp),%d0
 906 09c4 2040      	move.l %d0,%a0
 907 09c6 3028 000A 	move.w 10(%a0),%d0
 908 09ca E248      	lsr.w #1,%d0
 909 09cc 3000      	move.w %d0,%d0
 910 09ce 0280 0000 	and.l #65535,%d0
 910      FFFF 
 911 09d4 242E 000C 	move.l 12(%fp),%d2
 912 09d8 4C40 2003 	divul.l %d0,%d3:%d2
 913 09dc 2002      	move.l %d2,%d0
 914 09de D081      	add.l %d1,%d0
 915 09e0 2F00      	move.l %d0,-(%sp)
 916 09e2 2F2E 0008 	move.l 8(%fp),-(%sp)
 917 09e6 4EBA F812 	jsr move_window
 918 09ea 508F      	addq.l #8,%sp
 919 09ec 2D40 FFFC 	move.l %d0,-4(%fp)
 920 09f0 4AAE FFFC 	tst.l -4(%fp)
 921 09f4 6600 017C 	jne .L71
 922               	.L66:
 923 09f8 7034      	moveq #52,%d0
 924 09fa D0AE 0008 	add.l 8(%fp),%d0
68K GAS   			page 18


 925 09fe 222E 000C 	move.l 12(%fp),%d1
 926 0a02 D281      	add.l %d1,%d1
 927 0a04 206E 0008 	move.l 8(%fp),%a0
 928 0a08 3068 000A 	move.w 10(%a0),%a0
 929 0a0c 4282      	clr.l %d2
 930 0a0e 3408      	move.w %a0,%d2
 931 0a10 2042      	move.l %d2,%a0
 932 0a12 2601      	move.l %d1,%d3
 933 0a14 2408      	move.l %a0,%d2
 934 0a16 4C42 3001 	divul.l %d2,%d1:%d3
 935 0a1a 2600      	move.l %d0,%d3
 936 0a1c D681      	add.l %d1,%d3
 937 0a1e 2D43 FFF4 	move.l %d3,-12(%fp)
 938 0a22 202E 0010 	move.l 16(%fp),%d0
 939 0a26 1200      	move.b %d0,%d1
 940 0a28 202E FFF4 	move.l -12(%fp),%d0
 941 0a2c 2040      	move.l %d0,%a0
 942 0a2e 1081      	move.b %d1,(%a0)
 943 0a30 202E FFF4 	move.l -12(%fp),%d0
 944 0a34 5280      	addq.l #1,%d0
 945 0a36 222E 0010 	move.l 16(%fp),%d1
 946 0a3a 3201      	move.w %d1,%d1
 947 0a3c E049      	lsr.w #8,%d1
 948 0a3e 1201      	move.b %d1,%d1
 949 0a40 2040      	move.l %d0,%a0
 950 0a42 1081      	move.b %d1,(%a0)
 951 0a44 6000 0132 	jra .L60
 952               	.L58:
 953 0a48 202E 0008 	move.l 8(%fp),%d0
 954 0a4c 2040      	move.l %d0,%a0
 955 0a4e 2228 0024 	move.l 36(%a0),%d1
 956 0a52 202E 0008 	move.l 8(%fp),%d0
 957 0a56 2040      	move.l %d0,%a0
 958 0a58 3028 000A 	move.w 10(%a0),%d0
 959 0a5c E448      	lsr.w #2,%d0
 960 0a5e 3000      	move.w %d0,%d0
 961 0a60 0280 0000 	and.l #65535,%d0
 961      FFFF 
 962 0a66 242E 000C 	move.l 12(%fp),%d2
 963 0a6a 4C40 2003 	divul.l %d0,%d3:%d2
 964 0a6e 2002      	move.l %d2,%d0
 965 0a70 D081      	add.l %d1,%d0
 966 0a72 2F00      	move.l %d0,-(%sp)
 967 0a74 2F2E 0008 	move.l 8(%fp),-(%sp)
 968 0a78 4EBA F780 	jsr move_window
 969 0a7c 508F      	addq.l #8,%sp
 970 0a7e 2D40 FFFC 	move.l %d0,-4(%fp)
 971 0a82 4AAE FFFC 	tst.l -4(%fp)
 972 0a86 6600 00EE 	jne .L72
 973               	.L67:
 974 0a8a 7034      	moveq #52,%d0
 975 0a8c D0AE 0008 	add.l 8(%fp),%d0
 976 0a90 222E 000C 	move.l 12(%fp),%d1
 977 0a94 E589      	lsl.l #2,%d1
 978 0a96 206E 0008 	move.l 8(%fp),%a0
 979 0a9a 3068 000A 	move.w 10(%a0),%a0
 980 0a9e 4282      	clr.l %d2
68K GAS   			page 19


 981 0aa0 3408      	move.w %a0,%d2
 982 0aa2 2042      	move.l %d2,%a0
 983 0aa4 2601      	move.l %d1,%d3
 984 0aa6 2408      	move.l %a0,%d2
 985 0aa8 4C42 3001 	divul.l %d2,%d1:%d3
 986 0aac 2600      	move.l %d0,%d3
 987 0aae D681      	add.l %d1,%d3
 988 0ab0 2D43 FFF4 	move.l %d3,-12(%fp)
 989 0ab4 202E FFF4 	move.l -12(%fp),%d0
 990 0ab8 5680      	addq.l #3,%d0
 991 0aba 2040      	move.l %d0,%a0
 992 0abc 1010      	move.b (%a0),%d0
 993 0abe 1000      	move.b %d0,%d0
 994 0ac0 0280 0000 	and.l #255,%d0
 994      00FF 
 995 0ac6 2200      	move.l %d0,%d1
 996 0ac8 7418      	moveq #24,%d2
 997 0aca E5A9      	lsl.l %d2,%d1
 998 0acc 202E FFF4 	move.l -12(%fp),%d0
 999 0ad0 5480      	addq.l #2,%d0
 1000 0ad2 2040      	move.l %d0,%a0
 1001 0ad4 1010      	move.b (%a0),%d0
 1002 0ad6 1000      	move.b %d0,%d0
 1003 0ad8 0280 0000 	and.l #255,%d0
 1003      00FF 
 1004 0ade 4840      	swap %d0
 1005 0ae0 4240      	clr.w %d0
 1006 0ae2 8280      	or.l %d0,%d1
 1007 0ae4 202E FFF4 	move.l -12(%fp),%d0
 1008 0ae8 5280      	addq.l #1,%d0
 1009 0aea 2040      	move.l %d0,%a0
 1010 0aec 1010      	move.b (%a0),%d0
 1011 0aee 1000      	move.b %d0,%d0
 1012 0af0 0280 0000 	and.l #255,%d0
 1012      00FF 
 1013 0af6 E188      	lsl.l #8,%d0
 1014 0af8 8280      	or.l %d0,%d1
 1015 0afa 202E FFF4 	move.l -12(%fp),%d0
 1016 0afe 2040      	move.l %d0,%a0
 1017 0b00 1010      	move.b (%a0),%d0
 1018 0b02 1000      	move.b %d0,%d0
 1019 0b04 0280 0000 	and.l #255,%d0
 1019      00FF 
 1020 0b0a 8081      	or.l %d1,%d0
 1021 0b0c 0280 F000 	and.l #-268435456,%d0
 1021      0000 
 1022 0b12 81AE 0010 	or.l %d0,16(%fp)
 1023 0b16 202E 0010 	move.l 16(%fp),%d0
 1024 0b1a 1200      	move.b %d0,%d1
 1025 0b1c 202E FFF4 	move.l -12(%fp),%d0
 1026 0b20 2040      	move.l %d0,%a0
 1027 0b22 1081      	move.b %d1,(%a0)
 1028 0b24 202E FFF4 	move.l -12(%fp),%d0
 1029 0b28 5280      	addq.l #1,%d0
 1030 0b2a 222E 0010 	move.l 16(%fp),%d1
 1031 0b2e 3201      	move.w %d1,%d1
 1032 0b30 E049      	lsr.w #8,%d1
68K GAS   			page 20


 1033 0b32 1201      	move.b %d1,%d1
 1034 0b34 2040      	move.l %d0,%a0
 1035 0b36 1081      	move.b %d1,(%a0)
 1036 0b38 202E FFF4 	move.l -12(%fp),%d0
 1037 0b3c 5480      	addq.l #2,%d0
 1038 0b3e 222E 0010 	move.l 16(%fp),%d1
 1039 0b42 4241      	clr.w %d1
 1040 0b44 4841      	swap %d1
 1041 0b46 1201      	move.b %d1,%d1
 1042 0b48 2040      	move.l %d0,%a0
 1043 0b4a 1081      	move.b %d1,(%a0)
 1044 0b4c 202E FFF4 	move.l -12(%fp),%d0
 1045 0b50 5680      	addq.l #3,%d0
 1046 0b52 222E 0010 	move.l 16(%fp),%d1
 1047 0b56 7418      	moveq #24,%d2
 1048 0b58 E4A9      	lsr.l %d2,%d1
 1049 0b5a 1201      	move.b %d1,%d1
 1050 0b5c 2040      	move.l %d0,%a0
 1051 0b5e 1081      	move.b %d1,(%a0)
 1052 0b60 6016      	jra .L60
 1053               	.L68:
 1054 0b62 7002      	moveq #2,%d0
 1055 0b64 2D40 FFFC 	move.l %d0,-4(%fp)
 1056 0b68 600E      	jra .L60
 1057               	.L69:
 1058 0b6a 4E71      	nop
 1059 0b6c 600A      	jra .L60
 1060               	.L70:
 1061 0b6e 4E71      	nop
 1062 0b70 6006      	jra .L60
 1063               	.L71:
 1064 0b72 4E71      	nop
 1065 0b74 6002      	jra .L60
 1066               	.L72:
 1067 0b76 4E71      	nop
 1068               	.L60:
 1069 0b78 202E 0008 	move.l 8(%fp),%d0
 1070 0b7c 2040      	move.l %d0,%a0
 1071 0b7e 117C 0001 	move.b #1,4(%a0)
 1071      0004 
 1072               	.L54:
 1073 0b84 202E FFFC 	move.l -4(%fp),%d0
 1074 0b88 242E FFEC 	move.l -20(%fp),%d2
 1075 0b8c 262E FFF0 	move.l -16(%fp),%d3
 1076 0b90 4E5E      	unlk %fp
 1077 0b92 4E75      	rts
 1079               	.align2
 1081               	remove_chain:
 1082 0b94 4E56 FFF8 	link.w %fp,#-8
 1083 0b98 7001      	moveq #1,%d0
 1084 0b9a B0AE 000C 	cmp.l 12(%fp),%d0
 1085 0b9e 6410      	jcc .L74
 1086 0ba0 202E 0008 	move.l 8(%fp),%d0
 1087 0ba4 2040      	move.l %d0,%a0
 1088 0ba6 2028 0018 	move.l 24(%a0),%d0
 1089 0baa B0AE 000C 	cmp.l 12(%fp),%d0
 1090 0bae 620A      	jhi .L75
68K GAS   			page 21


 1091               	.L74:
 1092 0bb0 7002      	moveq #2,%d0
 1093 0bb2 2D40 FFFC 	move.l %d0,-4(%fp)
 1094 0bb6 6000 00C4 	jra .L76
 1095               	.L75:
 1096 0bba 42AE FFFC 	clr.l -4(%fp)
 1097 0bbe 6000 00A2 	jra .L77
 1098               	.L83:
 1099 0bc2 2F2E 000C 	move.l 12(%fp),-(%sp)
 1100 0bc6 2F2E 0008 	move.l 8(%fp),-(%sp)
 1101 0bca 4EBA F94A 	jsr get_fat
 1102 0bce 508F      	addq.l #8,%sp
 1103 0bd0 2D40 FFF8 	move.l %d0,-8(%fp)
 1104 0bd4 4AAE FFF8 	tst.l -8(%fp)
 1105 0bd8 6700 009C 	jeq .L84
 1106               	.L78:
 1107 0bdc 7201      	moveq #1,%d1
 1108 0bde B2AE FFF8 	cmp.l -8(%fp),%d1
 1109 0be2 660A      	jne .L79
 1110 0be4 7002      	moveq #2,%d0
 1111 0be6 2D40 FFFC 	move.l %d0,-4(%fp)
 1112 0bea 6000 0090 	jra .L76
 1113               	.L79:
 1114 0bee 72FF      	moveq #-1,%d1
 1115 0bf0 B2AE FFF8 	cmp.l -8(%fp),%d1
 1116 0bf4 6608      	jne .L80
 1117 0bf6 7001      	moveq #1,%d0
 1118 0bf8 2D40 FFFC 	move.l %d0,-4(%fp)
 1119 0bfc 607E      	jra .L76
 1120               	.L80:
 1121 0bfe 42A7      	clr.l -(%sp)
 1122 0c00 2F2E 000C 	move.l 12(%fp),-(%sp)
 1123 0c04 2F2E 0008 	move.l 8(%fp),-(%sp)
 1124 0c08 4EBA FBE6 	jsr put_fat
 1125 0c0c 4FEF 000C 	lea (12,%sp),%sp
 1126 0c10 2D40 FFFC 	move.l %d0,-4(%fp)
 1127 0c14 4AAE FFFC 	tst.l -4(%fp)
 1128 0c18 6660      	jne .L85
 1129               	.L81:
 1130 0c1a 202E 0008 	move.l 8(%fp),%d0
 1131 0c1e 2040      	move.l %d0,%a0
 1132 0c20 2028 0010 	move.l 16(%a0),%d0
 1133 0c24 72FF      	moveq #-1,%d1
 1134 0c26 B280      	cmp.l %d0,%d1
 1135 0c28 6732      	jeq .L82
 1136 0c2a 202E 0008 	move.l 8(%fp),%d0
 1137 0c2e 2040      	move.l %d0,%a0
 1138 0c30 2028 0010 	move.l 16(%a0),%d0
 1139 0c34 2200      	move.l %d0,%d1
 1140 0c36 5281      	addq.l #1,%d1
 1141 0c38 202E 0008 	move.l 8(%fp),%d0
 1142 0c3c 2040      	move.l %d0,%a0
 1143 0c3e 2141 0010 	move.l %d1,16(%a0)
 1144 0c42 202E 0008 	move.l 8(%fp),%d0
 1145 0c46 2040      	move.l %d0,%a0
 1146 0c48 1028 0005 	move.b 5(%a0),%d0
 1147 0c4c 1200      	move.b %d0,%d1
68K GAS   			page 22


 1148 0c4e 0001 0001 	or.b #1,%d1
 1149 0c52 202E 0008 	move.l 8(%fp),%d0
 1150 0c56 2040      	move.l %d0,%a0
 1151 0c58 1141 0005 	move.b %d1,5(%a0)
 1152               	.L82:
 1153 0c5c 2D6E FFF8 	move.l -8(%fp),12(%fp)
 1153      000C 
 1154               	.L77:
 1155 0c62 202E 0008 	move.l 8(%fp),%d0
 1156 0c66 2040      	move.l %d0,%a0
 1157 0c68 2028 0018 	move.l 24(%a0),%d0
 1158 0c6c B0AE 000C 	cmp.l 12(%fp),%d0
 1159 0c70 6200 FF50 	jhi .L83
 1160 0c74 6006      	jra .L76
 1161               	.L84:
 1162 0c76 4E71      	nop
 1163 0c78 6002      	jra .L76
 1164               	.L85:
 1165 0c7a 4E71      	nop
 1166               	.L76:
 1167 0c7c 202E FFFC 	move.l -4(%fp),%d0
 1168 0c80 4E5E      	unlk %fp
 1169 0c82 4E75      	rts
 1171               	.align2
 1173               	create_chain:
 1174 0c84 4E56 FFF0 	link.w %fp,#-16
 1175 0c88 4AAE 000C 	tst.l 12(%fp)
 1176 0c8c 662A      	jne .L87
 1177 0c8e 202E 0008 	move.l 8(%fp),%d0
 1178 0c92 2040      	move.l %d0,%a0
 1179 0c94 2D68 000C 	move.l 12(%a0),-8(%fp)
 1179      FFF8 
 1180 0c9a 4AAE FFF8 	tst.l -8(%fp)
 1181 0c9e 6710      	jeq .L88
 1182 0ca0 202E 0008 	move.l 8(%fp),%d0
 1183 0ca4 2040      	move.l %d0,%a0
 1184 0ca6 2028 0018 	move.l 24(%a0),%d0
 1185 0caa B0AE FFF8 	cmp.l -8(%fp),%d0
 1186 0cae 6256      	jhi .L89
 1187               	.L88:
 1188 0cb0 7001      	moveq #1,%d0
 1189 0cb2 2D40 FFF8 	move.l %d0,-8(%fp)
 1190 0cb6 604E      	jra .L89
 1191               	.L87:
 1192 0cb8 2F2E 000C 	move.l 12(%fp),-(%sp)
 1193 0cbc 2F2E 0008 	move.l 8(%fp),-(%sp)
 1194 0cc0 4EBA F854 	jsr get_fat
 1195 0cc4 508F      	addq.l #8,%sp
 1196 0cc6 2D40 FFF0 	move.l %d0,-16(%fp)
 1197 0cca 7201      	moveq #1,%d1
 1198 0ccc B2AE FFF0 	cmp.l -16(%fp),%d1
 1199 0cd0 6506      	jcs .L90
 1200 0cd2 7001      	moveq #1,%d0
 1201 0cd4 6000 0152 	jra .L91
 1202               	.L90:
 1203 0cd8 70FF      	moveq #-1,%d0
 1204 0cda B0AE FFF0 	cmp.l -16(%fp),%d0
68K GAS   			page 23


 1205 0cde 6608      	jne .L92
 1206 0ce0 202E FFF0 	move.l -16(%fp),%d0
 1207 0ce4 6000 0142 	jra .L91
 1208               	.L92:
 1209 0ce8 202E 0008 	move.l 8(%fp),%d0
 1210 0cec 2040      	move.l %d0,%a0
 1211 0cee 2028 0018 	move.l 24(%a0),%d0
 1212 0cf2 B0AE FFF0 	cmp.l -16(%fp),%d0
 1213 0cf6 6308      	jls .L93
 1214 0cf8 202E FFF0 	move.l -16(%fp),%d0
 1215 0cfc 6000 012A 	jra .L91
 1216               	.L93:
 1217 0d00 2D6E 000C 	move.l 12(%fp),-8(%fp)
 1217      FFF8 
 1218               	.L89:
 1219 0d06 2D6E FFF8 	move.l -8(%fp),-4(%fp)
 1219      FFFC 
 1220 0d0c 6002      	jra .L101
 1221               	.L106:
 1222 0d0e 4E71      	nop
 1223               	.L101:
 1224 0d10 52AE FFFC 	addq.l #1,-4(%fp)
 1225 0d14 202E 0008 	move.l 8(%fp),%d0
 1226 0d18 2040      	move.l %d0,%a0
 1227 0d1a 2028 0018 	move.l 24(%a0),%d0
 1228 0d1e B0AE FFFC 	cmp.l -4(%fp),%d0
 1229 0d22 6216      	jhi .L94
 1230 0d24 7002      	moveq #2,%d0
 1231 0d26 2D40 FFFC 	move.l %d0,-4(%fp)
 1232 0d2a 222E FFFC 	move.l -4(%fp),%d1
 1233 0d2e B2AE FFF8 	cmp.l -8(%fp),%d1
 1234 0d32 6306      	jls .L94
 1235 0d34 4280      	clr.l %d0
 1236 0d36 6000 00F0 	jra .L91
 1237               	.L94:
 1238 0d3a 2F2E FFFC 	move.l -4(%fp),-(%sp)
 1239 0d3e 2F2E 0008 	move.l 8(%fp),-(%sp)
 1240 0d42 4EBA F7D2 	jsr get_fat
 1241 0d46 508F      	addq.l #8,%sp
 1242 0d48 2D40 FFF0 	move.l %d0,-16(%fp)
 1243 0d4c 4AAE FFF0 	tst.l -16(%fp)
 1244 0d50 6622      	jne .L95
 1245 0d52 2F3C 0FFF 	move.l #268435455,-(%sp)
 1245      FFFF 
 1246 0d58 2F2E FFFC 	move.l -4(%fp),-(%sp)
 1247 0d5c 2F2E 0008 	move.l 8(%fp),-(%sp)
 1248 0d60 4EBA FA8E 	jsr put_fat
 1249 0d64 4FEF 000C 	lea (12,%sp),%sp
 1250 0d68 2D40 FFF4 	move.l %d0,-12(%fp)
 1251 0d6c 4AAE FFF4 	tst.l -12(%fp)
 1252 0d70 672C      	jeq .L96
 1253 0d72 6048      	jra .L97
 1254               	.L95:
 1255 0d74 70FF      	moveq #-1,%d0
 1256 0d76 B0AE FFF0 	cmp.l -16(%fp),%d0
 1257 0d7a 6708      	jeq .L98
 1258 0d7c 7201      	moveq #1,%d1
68K GAS   			page 24


 1259 0d7e B2AE FFF0 	cmp.l -16(%fp),%d1
 1260 0d82 6608      	jne .L99
 1261               	.L98:
 1262 0d84 202E FFF0 	move.l -16(%fp),%d0
 1263 0d88 6000 009E 	jra .L91
 1264               	.L99:
 1265 0d8c 206E FFFC 	move.l -4(%fp),%a0
 1266 0d90 B1EE FFF8 	cmp.l -8(%fp),%a0
 1267 0d94 6600 FF78 	jne .L106
 1268 0d98 4280      	clr.l %d0
 1269 0d9a 6000 008C 	jra .L91
 1270               	.L96:
 1271 0d9e 4AAE 000C 	tst.l 12(%fp)
 1272 0da2 6718      	jeq .L97
 1273 0da4 2F2E FFFC 	move.l -4(%fp),-(%sp)
 1274 0da8 2F2E 000C 	move.l 12(%fp),-(%sp)
 1275 0dac 2F2E 0008 	move.l 8(%fp),-(%sp)
 1276 0db0 4EBA FA3E 	jsr put_fat
 1277 0db4 4FEF 000C 	lea (12,%sp),%sp
 1278 0db8 2D40 FFF4 	move.l %d0,-12(%fp)
 1279               	.L97:
 1280 0dbc 4AAE FFF4 	tst.l -12(%fp)
 1281 0dc0 6650      	jne .L102
 1282 0dc2 202E 0008 	move.l 8(%fp),%d0
 1283 0dc6 2040      	move.l %d0,%a0
 1284 0dc8 216E FFFC 	move.l -4(%fp),12(%a0)
 1284      000C 
 1285 0dce 202E 0008 	move.l 8(%fp),%d0
 1286 0dd2 2040      	move.l %d0,%a0
 1287 0dd4 2028 0010 	move.l 16(%a0),%d0
 1288 0dd8 72FF      	moveq #-1,%d1
 1289 0dda B280      	cmp.l %d0,%d1
 1290 0ddc 6746      	jeq .L103
 1291 0dde 202E 0008 	move.l 8(%fp),%d0
 1292 0de2 2040      	move.l %d0,%a0
 1293 0de4 2028 0010 	move.l 16(%a0),%d0
 1294 0de8 2200      	move.l %d0,%d1
 1295 0dea 5381      	subq.l #1,%d1
 1296 0dec 202E 0008 	move.l 8(%fp),%d0
 1297 0df0 2040      	move.l %d0,%a0
 1298 0df2 2141 0010 	move.l %d1,16(%a0)
 1299 0df6 202E 0008 	move.l 8(%fp),%d0
 1300 0dfa 2040      	move.l %d0,%a0
 1301 0dfc 1028 0005 	move.b 5(%a0),%d0
 1302 0e00 1200      	move.b %d0,%d1
 1303 0e02 0001 0001 	or.b #1,%d1
 1304 0e06 202E 0008 	move.l 8(%fp),%d0
 1305 0e0a 2040      	move.l %d0,%a0
 1306 0e0c 1141 0005 	move.b %d1,5(%a0)
 1307 0e10 6012      	jra .L103
 1308               	.L102:
 1309 0e12 7001      	moveq #1,%d0
 1310 0e14 B0AE FFF4 	cmp.l -12(%fp),%d0
 1311 0e18 6604      	jne .L104
 1312 0e1a 70FF      	moveq #-1,%d0
 1313 0e1c 6002      	jra .L105
 1314               	.L104:
68K GAS   			page 25


 1315 0e1e 7001      	moveq #1,%d0
 1316               	.L105:
 1317 0e20 2D40 FFFC 	move.l %d0,-4(%fp)
 1318               	.L103:
 1319 0e24 202E FFFC 	move.l -4(%fp),%d0
 1320               	.L91:
 1321 0e28 4E5E      	unlk %fp
 1322 0e2a 4E75      	rts
 1324               	.align2
 1326               	dir_sdi:
 1327 0e2c 4E56 FFF4 	link.w %fp,#-12
 1328 0e30 2F02      	move.l %d2,-(%sp)
 1329 0e32 202E 000C 	move.l 12(%fp),%d0
 1330 0e36 3200      	move.w %d0,%d1
 1331 0e38 202E 0008 	move.l 8(%fp),%d0
 1332 0e3c 2040      	move.l %d0,%a0
 1333 0e3e 3141 0006 	move.w %d1,6(%a0)
 1334 0e42 202E 0008 	move.l 8(%fp),%d0
 1335 0e46 2040      	move.l %d0,%a0
 1336 0e48 2D68 0008 	move.l 8(%a0),-4(%fp)
 1336      FFFC 
 1337 0e4e 7001      	moveq #1,%d0
 1338 0e50 B0AE FFFC 	cmp.l -4(%fp),%d0
 1339 0e54 6714      	jeq .L108
 1340 0e56 202E 0008 	move.l 8(%fp),%d0
 1341 0e5a 2040      	move.l %d0,%a0
 1342 0e5c 2010      	move.l (%a0),%d0
 1343 0e5e 2040      	move.l %d0,%a0
 1344 0e60 2028 0018 	move.l 24(%a0),%d0
 1345 0e64 B0AE FFFC 	cmp.l -4(%fp),%d0
 1346 0e68 6206      	jhi .L109
 1347               	.L108:
 1348 0e6a 7002      	moveq #2,%d0
 1349 0e6c 6000 0192 	jra .L110
 1350               	.L109:
 1351 0e70 4AAE FFFC 	tst.l -4(%fp)
 1352 0e74 6622      	jne .L111
 1353 0e76 202E 0008 	move.l 8(%fp),%d0
 1354 0e7a 2040      	move.l %d0,%a0
 1355 0e7c 2010      	move.l (%a0),%d0
 1356 0e7e 2040      	move.l %d0,%a0
 1357 0e80 1010      	move.b (%a0),%d0
 1358 0e82 0C00 0003 	cmp.b #3,%d0
 1359 0e86 6610      	jne .L111
 1360 0e88 202E 0008 	move.l 8(%fp),%d0
 1361 0e8c 2040      	move.l %d0,%a0
 1362 0e8e 2010      	move.l (%a0),%d0
 1363 0e90 2040      	move.l %d0,%a0
 1364 0e92 2D68 0028 	move.l 40(%a0),-4(%fp)
 1364      FFFC 
 1365               	.L111:
 1366 0e98 4AAE FFFC 	tst.l -4(%fp)
 1367 0e9c 6636      	jne .L112
 1368 0e9e 202E 0008 	move.l 8(%fp),%d0
 1369 0ea2 2040      	move.l %d0,%a0
 1370 0ea4 2010      	move.l (%a0),%d0
 1371 0ea6 2040      	move.l %d0,%a0
68K GAS   			page 26


 1372 0ea8 3028 0008 	move.w 8(%a0),%d0
 1373 0eac 3000      	move.w %d0,%d0
 1374 0eae 0280 0000 	and.l #65535,%d0
 1374      FFFF 
 1375 0eb4 B0AE 000C 	cmp.l 12(%fp),%d0
 1376 0eb8 6206      	jhi .L113
 1377 0eba 7002      	moveq #2,%d0
 1378 0ebc 6000 0142 	jra .L110
 1379               	.L113:
 1380 0ec0 202E 0008 	move.l 8(%fp),%d0
 1381 0ec4 2040      	move.l %d0,%a0
 1382 0ec6 2010      	move.l (%a0),%d0
 1383 0ec8 2040      	move.l %d0,%a0
 1384 0eca 2D68 0028 	move.l 40(%a0),-8(%fp)
 1384      FFF8 
 1385 0ed0 6000 00A8 	jra .L114
 1386               	.L112:
 1387 0ed4 202E 0008 	move.l 8(%fp),%d0
 1388 0ed8 2040      	move.l %d0,%a0
 1389 0eda 2010      	move.l (%a0),%d0
 1390 0edc 2040      	move.l %d0,%a0
 1391 0ede 3028 000A 	move.w 10(%a0),%d0
 1392 0ee2 EA48      	lsr.w #5,%d0
 1393 0ee4 4281      	clr.l %d1
 1394 0ee6 3200      	move.w %d0,%d1
 1395 0ee8 202E 0008 	move.l 8(%fp),%d0
 1396 0eec 2040      	move.l %d0,%a0
 1397 0eee 2010      	move.l (%a0),%d0
 1398 0ef0 2040      	move.l %d0,%a0
 1399 0ef2 1028 0002 	move.b 2(%a0),%d0
 1400 0ef6 1000      	move.b %d0,%d0
 1401 0ef8 0280 0000 	and.l #255,%d0
 1401      00FF 
 1402 0efe 4C01 0800 	muls.l %d1,%d0
 1403 0f02 2D40 FFF4 	move.l %d0,-12(%fp)
 1404 0f06 6050      	jra .L115
 1405               	.L119:
 1406 0f08 202E 0008 	move.l 8(%fp),%d0
 1407 0f0c 2040      	move.l %d0,%a0
 1408 0f0e 2010      	move.l (%a0),%d0
 1409 0f10 2F2E FFFC 	move.l -4(%fp),-(%sp)
 1410 0f14 2F00      	move.l %d0,-(%sp)
 1411 0f16 4EBA F5FE 	jsr get_fat
 1412 0f1a 508F      	addq.l #8,%sp
 1413 0f1c 2D40 FFFC 	move.l %d0,-4(%fp)
 1414 0f20 70FF      	moveq #-1,%d0
 1415 0f22 B0AE FFFC 	cmp.l -4(%fp),%d0
 1416 0f26 6606      	jne .L116
 1417 0f28 7001      	moveq #1,%d0
 1418 0f2a 6000 00D4 	jra .L110
 1419               	.L116:
 1420 0f2e 7401      	moveq #1,%d2
 1421 0f30 B4AE FFFC 	cmp.l -4(%fp),%d2
 1422 0f34 6414      	jcc .L117
 1423 0f36 202E 0008 	move.l 8(%fp),%d0
 1424 0f3a 2040      	move.l %d0,%a0
 1425 0f3c 2010      	move.l (%a0),%d0
68K GAS   			page 27


 1426 0f3e 2040      	move.l %d0,%a0
 1427 0f40 2028 0018 	move.l 24(%a0),%d0
 1428 0f44 B0AE FFFC 	cmp.l -4(%fp),%d0
 1429 0f48 6206      	jhi .L118
 1430               	.L117:
 1431 0f4a 7002      	moveq #2,%d0
 1432 0f4c 6000 00B2 	jra .L110
 1433               	.L118:
 1434 0f50 202E FFF4 	move.l -12(%fp),%d0
 1435 0f54 91AE 000C 	sub.l %d0,12(%fp)
 1436               	.L115:
 1437 0f58 242E 000C 	move.l 12(%fp),%d2
 1438 0f5c B4AE FFF4 	cmp.l -12(%fp),%d2
 1439 0f60 64A6      	jcc .L119
 1440 0f62 202E 0008 	move.l 8(%fp),%d0
 1441 0f66 2040      	move.l %d0,%a0
 1442 0f68 2010      	move.l (%a0),%d0
 1443 0f6a 2F2E FFFC 	move.l -4(%fp),-(%sp)
 1444 0f6e 2F00      	move.l %d0,-(%sp)
 1445 0f70 4EBA F55E 	jsr clust2sect
 1446 0f74 508F      	addq.l #8,%sp
 1447 0f76 2D40 FFF8 	move.l %d0,-8(%fp)
 1448               	.L114:
 1449 0f7a 202E 0008 	move.l 8(%fp),%d0
 1450 0f7e 2040      	move.l %d0,%a0
 1451 0f80 216E FFFC 	move.l -4(%fp),12(%a0)
 1451      000C 
 1452 0f86 4AAE FFF8 	tst.l -8(%fp)
 1453 0f8a 6604      	jne .L120
 1454 0f8c 7002      	moveq #2,%d0
 1455 0f8e 6070      	jra .L110
 1456               	.L120:
 1457 0f90 202E 0008 	move.l 8(%fp),%d0
 1458 0f94 2040      	move.l %d0,%a0
 1459 0f96 2010      	move.l (%a0),%d0
 1460 0f98 2040      	move.l %d0,%a0
 1461 0f9a 3028 000A 	move.w 10(%a0),%d0
 1462 0f9e EA48      	lsr.w #5,%d0
 1463 0fa0 3000      	move.w %d0,%d0
 1464 0fa2 0280 0000 	and.l #65535,%d0
 1464      FFFF 
 1465 0fa8 242E 000C 	move.l 12(%fp),%d2
 1466 0fac 4C40 2001 	divul.l %d0,%d1:%d2
 1467 0fb0 2002      	move.l %d2,%d0
 1468 0fb2 2200      	move.l %d0,%d1
 1469 0fb4 D2AE FFF8 	add.l -8(%fp),%d1
 1470 0fb8 202E 0008 	move.l 8(%fp),%d0
 1471 0fbc 2040      	move.l %d0,%a0
 1472 0fbe 2141 0010 	move.l %d1,16(%a0)
 1473 0fc2 202E 0008 	move.l 8(%fp),%d0
 1474 0fc6 2040      	move.l %d0,%a0
 1475 0fc8 2010      	move.l (%a0),%d0
 1476 0fca 7234      	moveq #52,%d1
 1477 0fcc D280      	add.l %d0,%d1
 1478 0fce 202E 0008 	move.l 8(%fp),%d0
 1479 0fd2 2040      	move.l %d0,%a0
 1480 0fd4 2010      	move.l (%a0),%d0
68K GAS   			page 28


 1481 0fd6 2040      	move.l %d0,%a0
 1482 0fd8 3028 000A 	move.w 10(%a0),%d0
 1483 0fdc EA48      	lsr.w #5,%d0
 1484 0fde 3000      	move.w %d0,%d0
 1485 0fe0 0280 0000 	and.l #65535,%d0
 1485      FFFF 
 1486 0fe6 206E 000C 	move.l 12(%fp),%a0
 1487 0fea 2408      	move.l %a0,%d2
 1488 0fec 4C40 2000 	divul.l %d0,%d0:%d2
 1489 0ff0 EB88      	lsl.l #5,%d0
 1490 0ff2 D280      	add.l %d0,%d1
 1491 0ff4 202E 0008 	move.l 8(%fp),%d0
 1492 0ff8 2040      	move.l %d0,%a0
 1493 0ffa 2141 0014 	move.l %d1,20(%a0)
 1494 0ffe 4280      	clr.l %d0
 1495               	.L110:
 1496 1000 242E FFF0 	move.l -16(%fp),%d2
 1497 1004 4E5E      	unlk %fp
 1498 1006 4E75      	rts
 1500               	.align2
 1502               	dir_next:
 1503 1008 4E56 FFF4 	link.w %fp,#-12
 1504 100c 2F02      	move.l %d2,-(%sp)
 1505 100e 202E 0008 	move.l 8(%fp),%d0
 1506 1012 2040      	move.l %d0,%a0
 1507 1014 3028 0006 	move.w 6(%a0),%d0
 1508 1018 3000      	move.w %d0,%d0
 1509 101a 0280 0000 	and.l #65535,%d0
 1509      FFFF 
 1510 1020 5280      	addq.l #1,%d0
 1511 1022 2D40 FFF4 	move.l %d0,-12(%fp)
 1512 1026 202E FFF4 	move.l -12(%fp),%d0
 1513 102a 0280 0000 	and.l #65535,%d0
 1513      FFFF 
 1514 1030 4A80      	tst.l %d0
 1515 1032 670E      	jeq .L122
 1516 1034 202E 0008 	move.l 8(%fp),%d0
 1517 1038 2040      	move.l %d0,%a0
 1518 103a 2028 0010 	move.l 16(%a0),%d0
 1519 103e 4A80      	tst.l %d0
 1520 1040 6606      	jne .L123
 1521               	.L122:
 1522 1042 7004      	moveq #4,%d0
 1523 1044 6000 02C4 	jra .L124
 1524               	.L123:
 1525 1048 202E 0008 	move.l 8(%fp),%d0
 1526 104c 2040      	move.l %d0,%a0
 1527 104e 2010      	move.l (%a0),%d0
 1528 1050 2040      	move.l %d0,%a0
 1529 1052 3028 000A 	move.w 10(%a0),%d0
 1530 1056 EA48      	lsr.w #5,%d0
 1531 1058 3000      	move.w %d0,%d0
 1532 105a 0280 0000 	and.l #65535,%d0
 1532      FFFF 
 1533 1060 222E FFF4 	move.l -12(%fp),%d1
 1534 1064 4C40 1000 	divul.l %d0,%d0:%d1
 1535 1068 4A80      	tst.l %d0
68K GAS   			page 29


 1536 106a 6600 0250 	jne .L125
 1537 106e 202E 0008 	move.l 8(%fp),%d0
 1538 1072 2040      	move.l %d0,%a0
 1539 1074 2028 0010 	move.l 16(%a0),%d0
 1540 1078 2200      	move.l %d0,%d1
 1541 107a 5281      	addq.l #1,%d1
 1542 107c 202E 0008 	move.l 8(%fp),%d0
 1543 1080 2040      	move.l %d0,%a0
 1544 1082 2141 0010 	move.l %d1,16(%a0)
 1545 1086 202E 0008 	move.l 8(%fp),%d0
 1546 108a 2040      	move.l %d0,%a0
 1547 108c 2028 000C 	move.l 12(%a0),%d0
 1548 1090 4A80      	tst.l %d0
 1549 1092 6624      	jne .L126
 1550 1094 202E 0008 	move.l 8(%fp),%d0
 1551 1098 2040      	move.l %d0,%a0
 1552 109a 2010      	move.l (%a0),%d0
 1553 109c 2040      	move.l %d0,%a0
 1554 109e 3028 0008 	move.w 8(%a0),%d0
 1555 10a2 3000      	move.w %d0,%d0
 1556 10a4 0280 0000 	and.l #65535,%d0
 1556      FFFF 
 1557 10aa B0AE FFF4 	cmp.l -12(%fp),%d0
 1558 10ae 6200 020C 	jhi .L125
 1559 10b2 7004      	moveq #4,%d0
 1560 10b4 6000 0254 	jra .L124
 1561               	.L126:
 1562 10b8 202E 0008 	move.l 8(%fp),%d0
 1563 10bc 2040      	move.l %d0,%a0
 1564 10be 2010      	move.l (%a0),%d0
 1565 10c0 2040      	move.l %d0,%a0
 1566 10c2 3028 000A 	move.w 10(%a0),%d0
 1567 10c6 EA48      	lsr.w #5,%d0
 1568 10c8 3000      	move.w %d0,%d0
 1569 10ca 0280 0000 	and.l #65535,%d0
 1569      FFFF 
 1570 10d0 242E FFF4 	move.l -12(%fp),%d2
 1571 10d4 4C40 2001 	divul.l %d0,%d1:%d2
 1572 10d8 2002      	move.l %d2,%d0
 1573 10da 2200      	move.l %d0,%d1
 1574 10dc 202E 0008 	move.l 8(%fp),%d0
 1575 10e0 2040      	move.l %d0,%a0
 1576 10e2 2010      	move.l (%a0),%d0
 1577 10e4 2040      	move.l %d0,%a0
 1578 10e6 1028 0002 	move.b 2(%a0),%d0
 1579 10ea 1000      	move.b %d0,%d0
 1580 10ec 0280 0000 	and.l #255,%d0
 1580      00FF 
 1581 10f2 5380      	subq.l #1,%d0
 1582 10f4 C081      	and.l %d1,%d0
 1583 10f6 4A80      	tst.l %d0
 1584 10f8 6600 01C2 	jne .L125
 1585 10fc 202E 0008 	move.l 8(%fp),%d0
 1586 1100 2040      	move.l %d0,%a0
 1587 1102 2228 000C 	move.l 12(%a0),%d1
 1588 1106 202E 0008 	move.l 8(%fp),%d0
 1589 110a 2040      	move.l %d0,%a0
68K GAS   			page 30


 1590 110c 2010      	move.l (%a0),%d0
 1591 110e 2F01      	move.l %d1,-(%sp)
 1592 1110 2F00      	move.l %d0,-(%sp)
 1593 1112 4EBA F402 	jsr get_fat
 1594 1116 508F      	addq.l #8,%sp
 1595 1118 2D40 FFFC 	move.l %d0,-4(%fp)
 1596 111c 7001      	moveq #1,%d0
 1597 111e B0AE FFFC 	cmp.l -4(%fp),%d0
 1598 1122 6506      	jcs .L127
 1599 1124 7002      	moveq #2,%d0
 1600 1126 6000 01E2 	jra .L124
 1601               	.L127:
 1602 112a 74FF      	moveq #-1,%d2
 1603 112c B4AE FFFC 	cmp.l -4(%fp),%d2
 1604 1130 6606      	jne .L128
 1605 1132 7001      	moveq #1,%d0
 1606 1134 6000 01D4 	jra .L124
 1607               	.L128:
 1608 1138 202E 0008 	move.l 8(%fp),%d0
 1609 113c 2040      	move.l %d0,%a0
 1610 113e 2010      	move.l (%a0),%d0
 1611 1140 2040      	move.l %d0,%a0
 1612 1142 2028 0018 	move.l 24(%a0),%d0
 1613 1146 B0AE FFFC 	cmp.l -4(%fp),%d0
 1614 114a 6200 0144 	jhi .L129
 1615 114e 4AAE 000C 	tst.l 12(%fp)
 1616 1152 6606      	jne .L130
 1617 1154 7004      	moveq #4,%d0
 1618 1156 6000 01B2 	jra .L124
 1619               	.L130:
 1620 115a 202E 0008 	move.l 8(%fp),%d0
 1621 115e 2040      	move.l %d0,%a0
 1622 1160 2228 000C 	move.l 12(%a0),%d1
 1623 1164 202E 0008 	move.l 8(%fp),%d0
 1624 1168 2040      	move.l %d0,%a0
 1625 116a 2010      	move.l (%a0),%d0
 1626 116c 2F01      	move.l %d1,-(%sp)
 1627 116e 2F00      	move.l %d0,-(%sp)
 1628 1170 4EBA FB12 	jsr create_chain
 1629 1174 508F      	addq.l #8,%sp
 1630 1176 2D40 FFFC 	move.l %d0,-4(%fp)
 1631 117a 4AAE FFFC 	tst.l -4(%fp)
 1632 117e 6606      	jne .L131
 1633 1180 7007      	moveq #7,%d0
 1634 1182 6000 0186 	jra .L124
 1635               	.L131:
 1636 1186 7001      	moveq #1,%d0
 1637 1188 B0AE FFFC 	cmp.l -4(%fp),%d0
 1638 118c 6606      	jne .L132
 1639 118e 7002      	moveq #2,%d0
 1640 1190 6000 0178 	jra .L124
 1641               	.L132:
 1642 1194 74FF      	moveq #-1,%d2
 1643 1196 B4AE FFFC 	cmp.l -4(%fp),%d2
 1644 119a 6606      	jne .L133
 1645 119c 7001      	moveq #1,%d0
 1646 119e 6000 016A 	jra .L124
68K GAS   			page 31


 1647               	.L133:
 1648 11a2 202E 0008 	move.l 8(%fp),%d0
 1649 11a6 2040      	move.l %d0,%a0
 1650 11a8 2010      	move.l (%a0),%d0
 1651 11aa 2F00      	move.l %d0,-(%sp)
 1652 11ac 4EBA EF64 	jsr sync_window
 1653 11b0 588F      	addq.l #4,%sp
 1654 11b2 4A80      	tst.l %d0
 1655 11b4 6706      	jeq .L134
 1656 11b6 7001      	moveq #1,%d0
 1657 11b8 6000 0150 	jra .L124
 1658               	.L134:
 1659 11bc 202E 0008 	move.l 8(%fp),%d0
 1660 11c0 2040      	move.l %d0,%a0
 1661 11c2 2010      	move.l (%a0),%d0
 1662 11c4 2040      	move.l %d0,%a0
 1663 11c6 3028 000A 	move.w 10(%a0),%d0
 1664 11ca 4281      	clr.l %d1
 1665 11cc 3200      	move.w %d0,%d1
 1666 11ce 202E 0008 	move.l 8(%fp),%d0
 1667 11d2 2040      	move.l %d0,%a0
 1668 11d4 2010      	move.l (%a0),%d0
 1669 11d6 7434      	moveq #52,%d2
 1670 11d8 D082      	add.l %d2,%d0
 1671 11da 2F01      	move.l %d1,-(%sp)
 1672 11dc 42A7      	clr.l -(%sp)
 1673 11de 2F00      	move.l %d0,-(%sp)
 1674 11e0 4EBA EE5C 	jsr mem_set
 1675 11e4 4FEF 000C 	lea (12,%sp),%sp
 1676 11e8 202E 0008 	move.l 8(%fp),%d0
 1677 11ec 2040      	move.l %d0,%a0
 1678 11ee 2410      	move.l (%a0),%d2
 1679 11f0 202E 0008 	move.l 8(%fp),%d0
 1680 11f4 2040      	move.l %d0,%a0
 1681 11f6 2010      	move.l (%a0),%d0
 1682 11f8 2F2E FFFC 	move.l -4(%fp),-(%sp)
 1683 11fc 2F00      	move.l %d0,-(%sp)
 1684 11fe 4EBA F2D0 	jsr clust2sect
 1685 1202 508F      	addq.l #8,%sp
 1686 1204 2042      	move.l %d2,%a0
 1687 1206 2140 0030 	move.l %d0,48(%a0)
 1688 120a 42AE FFF8 	clr.l -8(%fp)
 1689 120e 6044      	jra .L135
 1690               	.L137:
 1691 1210 202E 0008 	move.l 8(%fp),%d0
 1692 1214 2040      	move.l %d0,%a0
 1693 1216 2010      	move.l (%a0),%d0
 1694 1218 2040      	move.l %d0,%a0
 1695 121a 117C 0001 	move.b #1,4(%a0)
 1695      0004 
 1696 1220 202E 0008 	move.l 8(%fp),%d0
 1697 1224 2040      	move.l %d0,%a0
 1698 1226 2010      	move.l (%a0),%d0
 1699 1228 2F00      	move.l %d0,-(%sp)
 1700 122a 4EBA EEE6 	jsr sync_window
 1701 122e 588F      	addq.l #4,%sp
 1702 1230 4A80      	tst.l %d0
68K GAS   			page 32


 1703 1232 6706      	jeq .L136
 1704 1234 7001      	moveq #1,%d0
 1705 1236 6000 00D2 	jra .L124
 1706               	.L136:
 1707 123a 202E 0008 	move.l 8(%fp),%d0
 1708 123e 2040      	move.l %d0,%a0
 1709 1240 2010      	move.l (%a0),%d0
 1710 1242 2040      	move.l %d0,%a0
 1711 1244 2228 0030 	move.l 48(%a0),%d1
 1712 1248 5281      	addq.l #1,%d1
 1713 124a 2040      	move.l %d0,%a0
 1714 124c 2141 0030 	move.l %d1,48(%a0)
 1715 1250 52AE FFF8 	addq.l #1,-8(%fp)
 1716               	.L135:
 1717 1254 202E 0008 	move.l 8(%fp),%d0
 1718 1258 2040      	move.l %d0,%a0
 1719 125a 2010      	move.l (%a0),%d0
 1720 125c 2040      	move.l %d0,%a0
 1721 125e 1028 0002 	move.b 2(%a0),%d0
 1722 1262 1000      	move.b %d0,%d0
 1723 1264 0280 0000 	and.l #255,%d0
 1723      00FF 
 1724 126a B0AE FFF8 	cmp.l -8(%fp),%d0
 1725 126e 62A0      	jhi .L137
 1726 1270 202E 0008 	move.l 8(%fp),%d0
 1727 1274 2040      	move.l %d0,%a0
 1728 1276 2010      	move.l (%a0),%d0
 1729 1278 222E 0008 	move.l 8(%fp),%d1
 1730 127c 2041      	move.l %d1,%a0
 1731 127e 2210      	move.l (%a0),%d1
 1732 1280 2041      	move.l %d1,%a0
 1733 1282 2228 0030 	move.l 48(%a0),%d1
 1734 1286 92AE FFF8 	sub.l -8(%fp),%d1
 1735 128a 2040      	move.l %d0,%a0
 1736 128c 2141 0030 	move.l %d1,48(%a0)
 1737               	.L129:
 1738 1290 202E 0008 	move.l 8(%fp),%d0
 1739 1294 2040      	move.l %d0,%a0
 1740 1296 216E FFFC 	move.l -4(%fp),12(%a0)
 1740      000C 
 1741 129c 202E 0008 	move.l 8(%fp),%d0
 1742 12a0 2040      	move.l %d0,%a0
 1743 12a2 2010      	move.l (%a0),%d0
 1744 12a4 2F2E FFFC 	move.l -4(%fp),-(%sp)
 1745 12a8 2F00      	move.l %d0,-(%sp)
 1746 12aa 4EBA F224 	jsr clust2sect
 1747 12ae 508F      	addq.l #8,%sp
 1748 12b0 2200      	move.l %d0,%d1
 1749 12b2 202E 0008 	move.l 8(%fp),%d0
 1750 12b6 2040      	move.l %d0,%a0
 1751 12b8 2141 0010 	move.l %d1,16(%a0)
 1752               	.L125:
 1753 12bc 202E FFF4 	move.l -12(%fp),%d0
 1754 12c0 3200      	move.w %d0,%d1
 1755 12c2 202E 0008 	move.l 8(%fp),%d0
 1756 12c6 2040      	move.l %d0,%a0
 1757 12c8 3141 0006 	move.w %d1,6(%a0)
68K GAS   			page 33


 1758 12cc 202E 0008 	move.l 8(%fp),%d0
 1759 12d0 2040      	move.l %d0,%a0
 1760 12d2 2010      	move.l (%a0),%d0
 1761 12d4 7234      	moveq #52,%d1
 1762 12d6 D280      	add.l %d0,%d1
 1763 12d8 202E 0008 	move.l 8(%fp),%d0
 1764 12dc 2040      	move.l %d0,%a0
 1765 12de 2010      	move.l (%a0),%d0
 1766 12e0 2040      	move.l %d0,%a0
 1767 12e2 3028 000A 	move.w 10(%a0),%d0
 1768 12e6 EA48      	lsr.w #5,%d0
 1769 12e8 3000      	move.w %d0,%d0
 1770 12ea 0280 0000 	and.l #65535,%d0
 1770      FFFF 
 1771 12f0 206E FFF4 	move.l -12(%fp),%a0
 1772 12f4 2408      	move.l %a0,%d2
 1773 12f6 4C40 2000 	divul.l %d0,%d0:%d2
 1774 12fa EB88      	lsl.l #5,%d0
 1775 12fc D280      	add.l %d0,%d1
 1776 12fe 202E 0008 	move.l 8(%fp),%d0
 1777 1302 2040      	move.l %d0,%a0
 1778 1304 2141 0014 	move.l %d1,20(%a0)
 1779 1308 4280      	clr.l %d0
 1780               	.L124:
 1781 130a 242E FFF0 	move.l -16(%fp),%d2
 1782 130e 4E5E      	unlk %fp
 1783 1310 4E75      	rts
 1785               	.align2
 1787               	dir_alloc:
 1788 1312 4E56 FFF8 	link.w %fp,#-8
 1789 1316 42A7      	clr.l -(%sp)
 1790 1318 2F2E 0008 	move.l 8(%fp),-(%sp)
 1791 131c 4EBA FB0E 	jsr dir_sdi
 1792 1320 508F      	addq.l #8,%sp
 1793 1322 2D40 FFFC 	move.l %d0,-4(%fp)
 1794 1326 4AAE FFFC 	tst.l -4(%fp)
 1795 132a 6600 0082 	jne .L139
 1796 132e 42AE FFF8 	clr.l -8(%fp)
 1797               	.L145:
 1798 1332 202E 0008 	move.l 8(%fp),%d0
 1799 1336 2040      	move.l %d0,%a0
 1800 1338 2228 0010 	move.l 16(%a0),%d1
 1801 133c 202E 0008 	move.l 8(%fp),%d0
 1802 1340 2040      	move.l %d0,%a0
 1803 1342 2010      	move.l (%a0),%d0
 1804 1344 2F01      	move.l %d1,-(%sp)
 1805 1346 2F00      	move.l %d0,-(%sp)
 1806 1348 4EBA EEB0 	jsr move_window
 1807 134c 508F      	addq.l #8,%sp
 1808 134e 2D40 FFFC 	move.l %d0,-4(%fp)
 1809 1352 4AAE FFFC 	tst.l -4(%fp)
 1810 1356 6654      	jne .L147
 1811               	.L140:
 1812 1358 202E 0008 	move.l 8(%fp),%d0
 1813 135c 2040      	move.l %d0,%a0
 1814 135e 2028 0014 	move.l 20(%a0),%d0
 1815 1362 2040      	move.l %d0,%a0
68K GAS   			page 34


 1816 1364 1010      	move.b (%a0),%d0
 1817 1366 0C00 FFE5 	cmp.b #-27,%d0
 1818 136a 6712      	jeq .L141
 1819 136c 202E 0008 	move.l 8(%fp),%d0
 1820 1370 2040      	move.l %d0,%a0
 1821 1372 2028 0014 	move.l 20(%a0),%d0
 1822 1376 2040      	move.l %d0,%a0
 1823 1378 1010      	move.b (%a0),%d0
 1824 137a 4A00      	tst.b %d0
 1825 137c 6610      	jne .L142
 1826               	.L141:
 1827 137e 52AE FFF8 	addq.l #1,-8(%fp)
 1828 1382 202E FFF8 	move.l -8(%fp),%d0
 1829 1386 B0AE 000C 	cmp.l 12(%fp),%d0
 1830 138a 6606      	jne .L144
 1831 138c 6020      	jra .L139
 1832               	.L142:
 1833 138e 42AE FFF8 	clr.l -8(%fp)
 1834               	.L144:
 1835 1392 4878 0001 	pea 1.w
 1836 1396 2F2E 0008 	move.l 8(%fp),-(%sp)
 1837 139a 4EBA FC6C 	jsr dir_next
 1838 139e 508F      	addq.l #8,%sp
 1839 13a0 2D40 FFFC 	move.l %d0,-4(%fp)
 1840 13a4 4AAE FFFC 	tst.l -4(%fp)
 1841 13a8 6788      	jeq .L145
 1842 13aa 6002      	jra .L139
 1843               	.L147:
 1844 13ac 4E71      	nop
 1845               	.L139:
 1846 13ae 7004      	moveq #4,%d0
 1847 13b0 B0AE FFFC 	cmp.l -4(%fp),%d0
 1848 13b4 6606      	jne .L146
 1849 13b6 7007      	moveq #7,%d0
 1850 13b8 2D40 FFFC 	move.l %d0,-4(%fp)
 1851               	.L146:
 1852 13bc 202E FFFC 	move.l -4(%fp),%d0
 1853 13c0 4E5E      	unlk %fp
 1854 13c2 4E75      	rts
 1856               	.align2
 1858               	ld_clust:
 1859 13c4 4E56 FFFC 	link.w %fp,#-4
 1860 13c8 701B      	moveq #27,%d0
 1861 13ca D0AE 000C 	add.l 12(%fp),%d0
 1862 13ce 2040      	move.l %d0,%a0
 1863 13d0 1010      	move.b (%a0),%d0
 1864 13d2 1000      	move.b %d0,%d0
 1865 13d4 0280 0000 	and.l #255,%d0
 1865      00FF 
 1866 13da E188      	lsl.l #8,%d0
 1867 13dc 3200      	move.w %d0,%d1
 1868 13de 701A      	moveq #26,%d0
 1869 13e0 D0AE 000C 	add.l 12(%fp),%d0
 1870 13e4 2040      	move.l %d0,%a0
 1871 13e6 1010      	move.b (%a0),%d0
 1872 13e8 1000      	move.b %d0,%d0
 1873 13ea 0240 00FF 	and.w #255,%d0
68K GAS   			page 35


 1874 13ee 8041      	or.w %d1,%d0
 1875 13f0 3000      	move.w %d0,%d0
 1876 13f2 0280 0000 	and.l #65535,%d0
 1876      FFFF 
 1877 13f8 2D40 FFFC 	move.l %d0,-4(%fp)
 1878 13fc 202E 0008 	move.l 8(%fp),%d0
 1879 1400 2040      	move.l %d0,%a0
 1880 1402 1010      	move.b (%a0),%d0
 1881 1404 0C00 0003 	cmp.b #3,%d0
 1882 1408 6638      	jne .L149
 1883 140a 7015      	moveq #21,%d0
 1884 140c D0AE 000C 	add.l 12(%fp),%d0
 1885 1410 2040      	move.l %d0,%a0
 1886 1412 1010      	move.b (%a0),%d0
 1887 1414 1000      	move.b %d0,%d0
 1888 1416 0280 0000 	and.l #255,%d0
 1888      00FF 
 1889 141c E188      	lsl.l #8,%d0
 1890 141e 3200      	move.w %d0,%d1
 1891 1420 7014      	moveq #20,%d0
 1892 1422 D0AE 000C 	add.l 12(%fp),%d0
 1893 1426 2040      	move.l %d0,%a0
 1894 1428 1010      	move.b (%a0),%d0
 1895 142a 1000      	move.b %d0,%d0
 1896 142c 0240 00FF 	and.w #255,%d0
 1897 1430 8041      	or.w %d1,%d0
 1898 1432 3000      	move.w %d0,%d0
 1899 1434 0280 0000 	and.l #65535,%d0
 1899      FFFF 
 1900 143a 4840      	swap %d0
 1901 143c 4240      	clr.w %d0
 1902 143e 81AE FFFC 	or.l %d0,-4(%fp)
 1903               	.L149:
 1904 1442 202E FFFC 	move.l -4(%fp),%d0
 1905 1446 4E5E      	unlk %fp
 1906 1448 4E75      	rts
 1908               	.align2
 1910               	st_clust:
 1911 144a 4E56 0000 	link.w %fp,#0
 1912 144e 701A      	moveq #26,%d0
 1913 1450 D0AE 0008 	add.l 8(%fp),%d0
 1914 1454 222E 000C 	move.l 12(%fp),%d1
 1915 1458 1201      	move.b %d1,%d1
 1916 145a 2040      	move.l %d0,%a0
 1917 145c 1081      	move.b %d1,(%a0)
 1918 145e 701B      	moveq #27,%d0
 1919 1460 D0AE 0008 	add.l 8(%fp),%d0
 1920 1464 222E 000C 	move.l 12(%fp),%d1
 1921 1468 3201      	move.w %d1,%d1
 1922 146a E049      	lsr.w #8,%d1
 1923 146c 1201      	move.b %d1,%d1
 1924 146e 2040      	move.l %d0,%a0
 1925 1470 1081      	move.b %d1,(%a0)
 1926 1472 7014      	moveq #20,%d0
 1927 1474 D0AE 0008 	add.l 8(%fp),%d0
 1928 1478 222E 000C 	move.l 12(%fp),%d1
 1929 147c 4241      	clr.w %d1
68K GAS   			page 36


 1930 147e 4841      	swap %d1
 1931 1480 1201      	move.b %d1,%d1
 1932 1482 2040      	move.l %d0,%a0
 1933 1484 1081      	move.b %d1,(%a0)
 1934 1486 7015      	moveq #21,%d0
 1935 1488 D0AE 0008 	add.l 8(%fp),%d0
 1936 148c 222E 000C 	move.l 12(%fp),%d1
 1937 1490 4241      	clr.w %d1
 1938 1492 4841      	swap %d1
 1939 1494 3201      	move.w %d1,%d1
 1940 1496 E049      	lsr.w #8,%d1
 1941 1498 1201      	move.b %d1,%d1
 1942 149a 2040      	move.l %d0,%a0
 1943 149c 1081      	move.b %d1,(%a0)
 1944 149e 4E5E      	unlk %fp
 1945 14a0 4E75      	rts
 1947               	.align2
 1949               	dir_find:
 1950 14a2 4E56 FFF4 	link.w %fp,#-12
 1951 14a6 42A7      	clr.l -(%sp)
 1952 14a8 2F2E 0008 	move.l 8(%fp),-(%sp)
 1953 14ac 4EBA F97E 	jsr dir_sdi
 1954 14b0 508F      	addq.l #8,%sp
 1955 14b2 2D40 FFFC 	move.l %d0,-4(%fp)
 1956 14b6 4AAE FFFC 	tst.l -4(%fp)
 1957 14ba 6708      	jeq .L152
 1958 14bc 202E FFFC 	move.l -4(%fp),%d0
 1959 14c0 6000 00AA 	jra .L153
 1960               	.L152:
 1961 14c4 202E 0008 	move.l 8(%fp),%d0
 1962 14c8 2040      	move.l %d0,%a0
 1963 14ca 2228 0010 	move.l 16(%a0),%d1
 1964 14ce 202E 0008 	move.l 8(%fp),%d0
 1965 14d2 2040      	move.l %d0,%a0
 1966 14d4 2010      	move.l (%a0),%d0
 1967 14d6 2F01      	move.l %d1,-(%sp)
 1968 14d8 2F00      	move.l %d0,-(%sp)
 1969 14da 4EBA ED1E 	jsr move_window
 1970 14de 508F      	addq.l #8,%sp
 1971 14e0 2D40 FFFC 	move.l %d0,-4(%fp)
 1972 14e4 4AAE FFFC 	tst.l -4(%fp)
 1973 14e8 6678      	jne .L158
 1974               	.L154:
 1975 14ea 202E 0008 	move.l 8(%fp),%d0
 1976 14ee 2040      	move.l %d0,%a0
 1977 14f0 2D68 0014 	move.l 20(%a0),-8(%fp)
 1977      FFF8 
 1978 14f6 202E FFF8 	move.l -8(%fp),%d0
 1979 14fa 2040      	move.l %d0,%a0
 1980 14fc 1D50 FFF7 	move.b (%a0),-9(%fp)
 1981 1500 4A2E FFF7 	tst.b -9(%fp)
 1982 1504 6608      	jne .L156
 1983 1506 7004      	moveq #4,%d0
 1984 1508 2D40 FFFC 	move.l %d0,-4(%fp)
 1985 150c 605A      	jra .L155
 1986               	.L156:
 1987 150e 700B      	moveq #11,%d0
68K GAS   			page 37


 1988 1510 D0AE FFF8 	add.l -8(%fp),%d0
 1989 1514 2040      	move.l %d0,%a0
 1990 1516 1010      	move.b (%a0),%d0
 1991 1518 1000      	move.b %d0,%d0
 1992 151a 0280 0000 	and.l #255,%d0
 1992      00FF 
 1993 1520 7208      	moveq #8,%d1
 1994 1522 C081      	and.l %d1,%d0
 1995 1524 4A80      	tst.l %d0
 1996 1526 6620      	jne .L157
 1997 1528 202E 0008 	move.l 8(%fp),%d0
 1998 152c 2040      	move.l %d0,%a0
 1999 152e 2028 0018 	move.l 24(%a0),%d0
 2000 1532 4878 000B 	pea 11.w
 2001 1536 2F00      	move.l %d0,-(%sp)
 2002 1538 2F2E FFF8 	move.l -8(%fp),-(%sp)
 2003 153c 4EBA EB32 	jsr mem_cmp
 2004 1540 4FEF 000C 	lea (12,%sp),%sp
 2005 1544 4A80      	tst.l %d0
 2006 1546 671E      	jeq .L159
 2007               	.L157:
 2008 1548 42A7      	clr.l -(%sp)
 2009 154a 2F2E 0008 	move.l 8(%fp),-(%sp)
 2010 154e 4EBA FAB8 	jsr dir_next
 2011 1552 508F      	addq.l #8,%sp
 2012 1554 2D40 FFFC 	move.l %d0,-4(%fp)
 2013 1558 4AAE FFFC 	tst.l -4(%fp)
 2014 155c 6700 FF66 	jeq .L152
 2015 1560 6006      	jra .L155
 2016               	.L158:
 2017 1562 4E71      	nop
 2018 1564 6002      	jra .L155
 2019               	.L159:
 2020 1566 4E71      	nop
 2021               	.L155:
 2022 1568 202E FFFC 	move.l -4(%fp),%d0
 2023               	.L153:
 2024 156c 4E5E      	unlk %fp
 2025 156e 4E75      	rts
 2027               	.align2
 2029               	dir_read:
 2030 1570 4E56 FFF4 	link.w %fp,#-12
 2031 1574 7004      	moveq #4,%d0
 2032 1576 2D40 FFFC 	move.l %d0,-4(%fp)
 2033 157a 6000 009A 	jra .L161
 2034               	.L166:
 2035 157e 202E 0008 	move.l 8(%fp),%d0
 2036 1582 2040      	move.l %d0,%a0
 2037 1584 2228 0010 	move.l 16(%a0),%d1
 2038 1588 202E 0008 	move.l 8(%fp),%d0
 2039 158c 2040      	move.l %d0,%a0
 2040 158e 2010      	move.l (%a0),%d0
 2041 1590 2F01      	move.l %d1,-(%sp)
 2042 1592 2F00      	move.l %d0,-(%sp)
 2043 1594 4EBA EC64 	jsr move_window
 2044 1598 508F      	addq.l #8,%sp
 2045 159a 2D40 FFFC 	move.l %d0,-4(%fp)
68K GAS   			page 38


 2046 159e 4AAE FFFC 	tst.l -4(%fp)
 2047 15a2 6600 0084 	jne .L168
 2048               	.L162:
 2049 15a6 202E 0008 	move.l 8(%fp),%d0
 2050 15aa 2040      	move.l %d0,%a0
 2051 15ac 2D68 0014 	move.l 20(%a0),-8(%fp)
 2051      FFF8 
 2052 15b2 202E FFF8 	move.l -8(%fp),%d0
 2053 15b6 2040      	move.l %d0,%a0
 2054 15b8 1D50 FFF7 	move.b (%a0),-9(%fp)
 2055 15bc 4A2E FFF7 	tst.b -9(%fp)
 2056 15c0 6608      	jne .L164
 2057 15c2 7004      	moveq #4,%d0
 2058 15c4 2D40 FFFC 	move.l %d0,-4(%fp)
 2059 15c8 6068      	jra .L163
 2060               	.L164:
 2061 15ca 700B      	moveq #11,%d0
 2062 15cc D0AE FFF8 	add.l -8(%fp),%d0
 2063 15d0 2040      	move.l %d0,%a0
 2064 15d2 1010      	move.b (%a0),%d0
 2065 15d4 1200      	move.b %d0,%d1
 2066 15d6 0201 003F 	and.b #63,%d1
 2067 15da 1D41 FFF6 	move.b %d1,-10(%fp)
 2068 15de 0C2E FFE5 	cmp.b #-27,-9(%fp)
 2068      FFF7 
 2069 15e4 671A      	jeq .L165
 2070 15e6 0C2E 000F 	cmp.b #15,-10(%fp)
 2070      FFF6 
 2071 15ec 6712      	jeq .L165
 2072 15ee 0C2E 0008 	cmp.b #8,-10(%fp)
 2072      FFF6 
 2073 15f4 57C0      	seq %d0
 2074 15f6 49C0      	extb.l %d0
 2075 15f8 4480      	neg.l %d0
 2076 15fa B0AE 000C 	cmp.l 12(%fp),%d0
 2077 15fe 672C      	jeq .L169
 2078               	.L165:
 2079 1600 42A7      	clr.l -(%sp)
 2080 1602 2F2E 0008 	move.l 8(%fp),-(%sp)
 2081 1606 4EBA FA00 	jsr dir_next
 2082 160a 508F      	addq.l #8,%sp
 2083 160c 2D40 FFFC 	move.l %d0,-4(%fp)
 2084 1610 4AAE FFFC 	tst.l -4(%fp)
 2085 1614 661A      	jne .L170
 2086               	.L161:
 2087 1616 202E 0008 	move.l 8(%fp),%d0
 2088 161a 2040      	move.l %d0,%a0
 2089 161c 2028 0010 	move.l 16(%a0),%d0
 2090 1620 4A80      	tst.l %d0
 2091 1622 6600 FF5A 	jne .L166
 2092 1626 600A      	jra .L163
 2093               	.L168:
 2094 1628 4E71      	nop
 2095 162a 6006      	jra .L163
 2096               	.L169:
 2097 162c 4E71      	nop
 2098 162e 6002      	jra .L163
68K GAS   			page 39


 2099               	.L170:
 2100 1630 4E71      	nop
 2101               	.L163:
 2102 1632 4AAE FFFC 	tst.l -4(%fp)
 2103 1636 670A      	jeq .L167
 2104 1638 202E 0008 	move.l 8(%fp),%d0
 2105 163c 2040      	move.l %d0,%a0
 2106 163e 42A8 0010 	clr.l 16(%a0)
 2107               	.L167:
 2108 1642 202E FFFC 	move.l -4(%fp),%d0
 2109 1646 4E5E      	unlk %fp
 2110 1648 4E75      	rts
 2112               	.align2
 2114               	dir_register:
 2115 164a 4E56 FFFC 	link.w %fp,#-4
 2116 164e 4878 0001 	pea 1.w
 2117 1652 2F2E 0008 	move.l 8(%fp),-(%sp)
 2118 1656 4EBA FCBA 	jsr dir_alloc
 2119 165a 508F      	addq.l #8,%sp
 2120 165c 2D40 FFFC 	move.l %d0,-4(%fp)
 2121 1660 4AAE FFFC 	tst.l -4(%fp)
 2122 1664 6674      	jne .L172
 2123 1666 202E 0008 	move.l 8(%fp),%d0
 2124 166a 2040      	move.l %d0,%a0
 2125 166c 2228 0010 	move.l 16(%a0),%d1
 2126 1670 202E 0008 	move.l 8(%fp),%d0
 2127 1674 2040      	move.l %d0,%a0
 2128 1676 2010      	move.l (%a0),%d0
 2129 1678 2F01      	move.l %d1,-(%sp)
 2130 167a 2F00      	move.l %d0,-(%sp)
 2131 167c 4EBA EB7C 	jsr move_window
 2132 1680 508F      	addq.l #8,%sp
 2133 1682 2D40 FFFC 	move.l %d0,-4(%fp)
 2134 1686 4AAE FFFC 	tst.l -4(%fp)
 2135 168a 664E      	jne .L172
 2136 168c 202E 0008 	move.l 8(%fp),%d0
 2137 1690 2040      	move.l %d0,%a0
 2138 1692 2028 0014 	move.l 20(%a0),%d0
 2139 1696 4878 0020 	pea 32.w
 2140 169a 42A7      	clr.l -(%sp)
 2141 169c 2F00      	move.l %d0,-(%sp)
 2142 169e 4EBA E99E 	jsr mem_set
 2143 16a2 4FEF 000C 	lea (12,%sp),%sp
 2144 16a6 202E 0008 	move.l 8(%fp),%d0
 2145 16aa 2040      	move.l %d0,%a0
 2146 16ac 2228 0018 	move.l 24(%a0),%d1
 2147 16b0 202E 0008 	move.l 8(%fp),%d0
 2148 16b4 2040      	move.l %d0,%a0
 2149 16b6 2028 0014 	move.l 20(%a0),%d0
 2150 16ba 4878 000B 	pea 11.w
 2151 16be 2F01      	move.l %d1,-(%sp)
 2152 16c0 2F00      	move.l %d0,-(%sp)
 2153 16c2 4EBA E93C 	jsr mem_cpy
 2154 16c6 4FEF 000C 	lea (12,%sp),%sp
 2155 16ca 202E 0008 	move.l 8(%fp),%d0
 2156 16ce 2040      	move.l %d0,%a0
 2157 16d0 2010      	move.l (%a0),%d0
68K GAS   			page 40


 2158 16d2 2040      	move.l %d0,%a0
 2159 16d4 117C 0001 	move.b #1,4(%a0)
 2159      0004 
 2160               	.L172:
 2161 16da 202E FFFC 	move.l -4(%fp),%d0
 2162 16de 4E5E      	unlk %fp
 2163 16e0 4E75      	rts
 2165               	.align2
 2167               	dir_remove:
 2168 16e2 4E56 FFFC 	link.w %fp,#-4
 2169 16e6 202E 0008 	move.l 8(%fp),%d0
 2170 16ea 2040      	move.l %d0,%a0
 2171 16ec 3028 0006 	move.w 6(%a0),%d0
 2172 16f0 3000      	move.w %d0,%d0
 2173 16f2 0280 0000 	and.l #65535,%d0
 2173      FFFF 
 2174 16f8 2F00      	move.l %d0,-(%sp)
 2175 16fa 2F2E 0008 	move.l 8(%fp),-(%sp)
 2176 16fe 4EBA F72C 	jsr dir_sdi
 2177 1702 508F      	addq.l #8,%sp
 2178 1704 2D40 FFFC 	move.l %d0,-4(%fp)
 2179 1708 4AAE FFFC 	tst.l -4(%fp)
 2180 170c 6660      	jne .L174
 2181 170e 202E 0008 	move.l 8(%fp),%d0
 2182 1712 2040      	move.l %d0,%a0
 2183 1714 2228 0010 	move.l 16(%a0),%d1
 2184 1718 202E 0008 	move.l 8(%fp),%d0
 2185 171c 2040      	move.l %d0,%a0
 2186 171e 2010      	move.l (%a0),%d0
 2187 1720 2F01      	move.l %d1,-(%sp)
 2188 1722 2F00      	move.l %d0,-(%sp)
 2189 1724 4EBA EAD4 	jsr move_window
 2190 1728 508F      	addq.l #8,%sp
 2191 172a 2D40 FFFC 	move.l %d0,-4(%fp)
 2192 172e 4AAE FFFC 	tst.l -4(%fp)
 2193 1732 663A      	jne .L174
 2194 1734 202E 0008 	move.l 8(%fp),%d0
 2195 1738 2040      	move.l %d0,%a0
 2196 173a 2028 0014 	move.l 20(%a0),%d0
 2197 173e 4878 0020 	pea 32.w
 2198 1742 42A7      	clr.l -(%sp)
 2199 1744 2F00      	move.l %d0,-(%sp)
 2200 1746 4EBA E8F6 	jsr mem_set
 2201 174a 4FEF 000C 	lea (12,%sp),%sp
 2202 174e 202E 0008 	move.l 8(%fp),%d0
 2203 1752 2040      	move.l %d0,%a0
 2204 1754 2028 0014 	move.l 20(%a0),%d0
 2205 1758 2040      	move.l %d0,%a0
 2206 175a 10BC FFE5 	move.b #-27,(%a0)
 2207 175e 202E 0008 	move.l 8(%fp),%d0
 2208 1762 2040      	move.l %d0,%a0
 2209 1764 2010      	move.l (%a0),%d0
 2210 1766 2040      	move.l %d0,%a0
 2211 1768 117C 0001 	move.b #1,4(%a0)
 2211      0004 
 2212               	.L174:
 2213 176e 202E FFFC 	move.l -4(%fp),%d0
68K GAS   			page 41


 2214 1772 4E5E      	unlk %fp
 2215 1774 4E75      	rts
 2217               	.align2
 2219               	get_fileinfo:
 2220 1776 4E56 FFF0 	link.w %fp,#-16
 2221 177a 2F02      	move.l %d2,-(%sp)
 2222 177c 7009      	moveq #9,%d0
 2223 177e D0AE 000C 	add.l 12(%fp),%d0
 2224 1782 2D40 FFF8 	move.l %d0,-8(%fp)
 2225 1786 202E 0008 	move.l 8(%fp),%d0
 2226 178a 2040      	move.l %d0,%a0
 2227 178c 2028 0010 	move.l 16(%a0),%d0
 2228 1790 4A80      	tst.l %d0
 2229 1792 6700 014C 	jeq .L176
 2230 1796 202E 0008 	move.l 8(%fp),%d0
 2231 179a 2040      	move.l %d0,%a0
 2232 179c 2D68 0014 	move.l 20(%a0),-14(%fp)
 2232      FFF2 
 2233 17a2 42AE FFFC 	clr.l -4(%fp)
 2234 17a6 6052      	jra .L177
 2235               	.L181:
 2236 17a8 202E FFF2 	move.l -14(%fp),%d0
 2237 17ac D0AE FFFC 	add.l -4(%fp),%d0
 2238 17b0 2040      	move.l %d0,%a0
 2239 17b2 1010      	move.b (%a0),%d0
 2240 17b4 1D40 FFF7 	move.b %d0,-9(%fp)
 2241 17b8 52AE FFFC 	addq.l #1,-4(%fp)
 2242 17bc 0C2E 0020 	cmp.b #32,-9(%fp)
 2242      FFF7 
 2243 17c2 6734      	jeq .L182
 2244               	.L178:
 2245 17c4 0C2E 0005 	cmp.b #5,-9(%fp)
 2245      FFF7 
 2246 17ca 6606      	jne .L179
 2247 17cc 1D7C FFE5 	move.b #-27,-9(%fp)
 2247      FFF7 
 2248               	.L179:
 2249 17d2 7009      	moveq #9,%d0
 2250 17d4 B0AE FFFC 	cmp.l -4(%fp),%d0
 2251 17d8 660E      	jne .L180
 2252 17da 202E FFF8 	move.l -8(%fp),%d0
 2253 17de 2040      	move.l %d0,%a0
 2254 17e0 10BC 002E 	move.b #46,(%a0)
 2255 17e4 52AE FFF8 	addq.l #1,-8(%fp)
 2256               	.L180:
 2257 17e8 202E FFF8 	move.l -8(%fp),%d0
 2258 17ec 2040      	move.l %d0,%a0
 2259 17ee 10AE FFF7 	move.b -9(%fp),(%a0)
 2260 17f2 52AE FFF8 	addq.l #1,-8(%fp)
 2261 17f6 6002      	jra .L177
 2262               	.L182:
 2263 17f8 4E71      	nop
 2264               	.L177:
 2265 17fa 700A      	moveq #10,%d0
 2266 17fc B0AE FFFC 	cmp.l -4(%fp),%d0
 2267 1800 64A6      	jcc .L181
 2268 1802 700B      	moveq #11,%d0
68K GAS   			page 42


 2269 1804 D0AE FFF2 	add.l -14(%fp),%d0
 2270 1808 2040      	move.l %d0,%a0
 2271 180a 1210      	move.b (%a0),%d1
 2272 180c 202E 000C 	move.l 12(%fp),%d0
 2273 1810 2040      	move.l %d0,%a0
 2274 1812 1141 0008 	move.b %d1,8(%a0)
 2275 1816 701F      	moveq #31,%d0
 2276 1818 D0AE FFF2 	add.l -14(%fp),%d0
 2277 181c 2040      	move.l %d0,%a0
 2278 181e 1010      	move.b (%a0),%d0
 2279 1820 1000      	move.b %d0,%d0
 2280 1822 0280 0000 	and.l #255,%d0
 2280      00FF 
 2281 1828 2200      	move.l %d0,%d1
 2282 182a 7418      	moveq #24,%d2
 2283 182c E5A9      	lsl.l %d2,%d1
 2284 182e 701E      	moveq #30,%d0
 2285 1830 D0AE FFF2 	add.l -14(%fp),%d0
 2286 1834 2040      	move.l %d0,%a0
 2287 1836 1010      	move.b (%a0),%d0
 2288 1838 1000      	move.b %d0,%d0
 2289 183a 0280 0000 	and.l #255,%d0
 2289      00FF 
 2290 1840 4840      	swap %d0
 2291 1842 4240      	clr.w %d0
 2292 1844 8280      	or.l %d0,%d1
 2293 1846 701D      	moveq #29,%d0
 2294 1848 D0AE FFF2 	add.l -14(%fp),%d0
 2295 184c 2040      	move.l %d0,%a0
 2296 184e 1010      	move.b (%a0),%d0
 2297 1850 1000      	move.b %d0,%d0
 2298 1852 0280 0000 	and.l #255,%d0
 2298      00FF 
 2299 1858 E188      	lsl.l #8,%d0
 2300 185a 8280      	or.l %d0,%d1
 2301 185c 701C      	moveq #28,%d0
 2302 185e D0AE FFF2 	add.l -14(%fp),%d0
 2303 1862 2040      	move.l %d0,%a0
 2304 1864 1010      	move.b (%a0),%d0
 2305 1866 1000      	move.b %d0,%d0
 2306 1868 0280 0000 	and.l #255,%d0
 2306      00FF 
 2307 186e 8280      	or.l %d0,%d1
 2308 1870 202E 000C 	move.l 12(%fp),%d0
 2309 1874 2040      	move.l %d0,%a0
 2310 1876 2081      	move.l %d1,(%a0)
 2311 1878 7019      	moveq #25,%d0
 2312 187a D0AE FFF2 	add.l -14(%fp),%d0
 2313 187e 2040      	move.l %d0,%a0
 2314 1880 1010      	move.b (%a0),%d0
 2315 1882 1000      	move.b %d0,%d0
 2316 1884 0280 0000 	and.l #255,%d0
 2316      00FF 
 2317 188a E188      	lsl.l #8,%d0
 2318 188c 3200      	move.w %d0,%d1
 2319 188e 7018      	moveq #24,%d0
 2320 1890 D0AE FFF2 	add.l -14(%fp),%d0
68K GAS   			page 43


 2321 1894 2040      	move.l %d0,%a0
 2322 1896 1010      	move.b (%a0),%d0
 2323 1898 1000      	move.b %d0,%d0
 2324 189a 0240 00FF 	and.w #255,%d0
 2325 189e 8041      	or.w %d1,%d0
 2326 18a0 3200      	move.w %d0,%d1
 2327 18a2 202E 000C 	move.l 12(%fp),%d0
 2328 18a6 2040      	move.l %d0,%a0
 2329 18a8 3141 0004 	move.w %d1,4(%a0)
 2330 18ac 7017      	moveq #23,%d0
 2331 18ae D0AE FFF2 	add.l -14(%fp),%d0
 2332 18b2 2040      	move.l %d0,%a0
 2333 18b4 1010      	move.b (%a0),%d0
 2334 18b6 1000      	move.b %d0,%d0
 2335 18b8 0280 0000 	and.l #255,%d0
 2335      00FF 
 2336 18be E188      	lsl.l #8,%d0
 2337 18c0 3200      	move.w %d0,%d1
 2338 18c2 7016      	moveq #22,%d0
 2339 18c4 D0AE FFF2 	add.l -14(%fp),%d0
 2340 18c8 2040      	move.l %d0,%a0
 2341 18ca 1010      	move.b (%a0),%d0
 2342 18cc 1000      	move.b %d0,%d0
 2343 18ce 0240 00FF 	and.w #255,%d0
 2344 18d2 8041      	or.w %d1,%d0
 2345 18d4 3200      	move.w %d0,%d1
 2346 18d6 202E 000C 	move.l 12(%fp),%d0
 2347 18da 2040      	move.l %d0,%a0
 2348 18dc 3141 0006 	move.w %d1,6(%a0)
 2349               	.L176:
 2350 18e0 202E FFF8 	move.l -8(%fp),%d0
 2351 18e4 2040      	move.l %d0,%a0
 2352 18e6 4210      	clr.b (%a0)
 2353 18e8 241F      	move.l (%sp)+,%d2
 2354 18ea 4E5E      	unlk %fp
 2355 18ec 4E75      	rts
 2357               	.section.rodata
 2358               	.LC0:
 2359 0000 222A 2B2C 	.string"\"*+,:;<=>?[]|\177"
 2359      3A3B 3C3D 
 2359      3E3F 5B5D 
 2359      7C7F 00
 2360               	.text
 2361               	.align2
 2363               	create_name:
 2364 18ee 4E56 FFE8 	link.w %fp,#-24
 2365 18f2 202E 000C 	move.l 12(%fp),%d0
 2366 18f6 2040      	move.l %d0,%a0
 2367 18f8 2D50 FFEE 	move.l (%a0),-18(%fp)
 2368 18fc 6004      	jra .L184
 2369               	.L185:
 2370 18fe 52AE FFEE 	addq.l #1,-18(%fp)
 2371               	.L184:
 2372 1902 202E FFEE 	move.l -18(%fp),%d0
 2373 1906 2040      	move.l %d0,%a0
 2374 1908 1010      	move.b (%a0),%d0
 2375 190a 0C00 002F 	cmp.b #47,%d0
68K GAS   			page 44


 2376 190e 67EE      	jeq .L185
 2377 1910 202E FFEE 	move.l -18(%fp),%d0
 2378 1914 2040      	move.l %d0,%a0
 2379 1916 1010      	move.b (%a0),%d0
 2380 1918 0C00 005C 	cmp.b #92,%d0
 2381 191c 67E0      	jeq .L185
 2382 191e 202E 0008 	move.l 8(%fp),%d0
 2383 1922 2040      	move.l %d0,%a0
 2384 1924 2D68 0018 	move.l 24(%a0),-22(%fp)
 2384      FFEA 
 2385 192a 4878 000B 	pea 11.w
 2386 192e 4878 0020 	pea 32.w
 2387 1932 2F2E FFEA 	move.l -22(%fp),-(%sp)
 2388 1936 4EBA E706 	jsr mem_set
 2389 193a 4FEF 000C 	lea (12,%sp),%sp
 2390 193e 422E FFFF 	clr.b -1(%fp)
 2391 1942 42AE FFF2 	clr.l -14(%fp)
 2392 1946 2D6E FFF2 	move.l -14(%fp),-10(%fp)
 2392      FFF6 
 2393 194c 7008      	moveq #8,%d0
 2394 194e 2D40 FFFA 	move.l %d0,-6(%fp)
 2395 1952 202E FFEE 	move.l -18(%fp),%d0
 2396 1956 D0AE FFF6 	add.l -10(%fp),%d0
 2397 195a 2040      	move.l %d0,%a0
 2398 195c 1010      	move.b (%a0),%d0
 2399 195e 0C00 002E 	cmp.b #46,%d0
 2400 1962 6600 0086 	jne .L186
 2401               	.L188:
 2402 1966 202E FFEE 	move.l -18(%fp),%d0
 2403 196a D0AE FFF6 	add.l -10(%fp),%d0
 2404 196e 2040      	move.l %d0,%a0
 2405 1970 1010      	move.b (%a0),%d0
 2406 1972 1D40 FFFE 	move.b %d0,-2(%fp)
 2407 1976 52AE FFF6 	addq.l #1,-10(%fp)
 2408 197a 0C2E 002E 	cmp.b #46,-2(%fp)
 2408      FFFE 
 2409 1980 661C      	jne .L187
 2410 1982 7002      	moveq #2,%d0
 2411 1984 B0AE FFF6 	cmp.l -10(%fp),%d0
 2412 1988 6514      	jcs .L187
 2413 198a 202E FFEA 	move.l -22(%fp),%d0
 2414 198e D0AE FFF2 	add.l -14(%fp),%d0
 2415 1992 2040      	move.l %d0,%a0
 2416 1994 10AE FFFE 	move.b -2(%fp),(%a0)
 2417 1998 52AE FFF2 	addq.l #1,-14(%fp)
 2418 199c 60C8      	jra .L188
 2419               	.L187:
 2420 199e 0C2E 002F 	cmp.b #47,-2(%fp)
 2420      FFFE 
 2421 19a4 6716      	jeq .L189
 2422 19a6 0C2E 005C 	cmp.b #92,-2(%fp)
 2422      FFFE 
 2423 19ac 670E      	jeq .L189
 2424 19ae 0C2E 0020 	cmp.b #32,-2(%fp)
 2424      FFFE 
 2425 19b4 6306      	jls .L189
 2426 19b6 7006      	moveq #6,%d0
68K GAS   			page 45


 2427 19b8 6000 023A 	jra .L190
 2428               	.L189:
 2429 19bc 222E FFEE 	move.l -18(%fp),%d1
 2430 19c0 D2AE FFF6 	add.l -10(%fp),%d1
 2431 19c4 202E 000C 	move.l 12(%fp),%d0
 2432 19c8 2040      	move.l %d0,%a0
 2433 19ca 2081      	move.l %d1,(%a0)
 2434 19cc 720B      	moveq #11,%d1
 2435 19ce D2AE FFEA 	add.l -22(%fp),%d1
 2436 19d2 0C2E 0020 	cmp.b #32,-2(%fp)
 2436      FFFE 
 2437 19d8 6204      	jhi .L191
 2438 19da 7024      	moveq #36,%d0
 2439 19dc 6002      	jra .L192
 2440               	.L191:
 2441 19de 7020      	moveq #32,%d0
 2442               	.L192:
 2443 19e0 2041      	move.l %d1,%a0
 2444 19e2 1080      	move.b %d0,(%a0)
 2445 19e4 4280      	clr.l %d0
 2446 19e6 6000 020C 	jra .L190
 2447               	.L186:
 2448 19ea 202E FFEE 	move.l -18(%fp),%d0
 2449 19ee D0AE FFF6 	add.l -10(%fp),%d0
 2450 19f2 2040      	move.l %d0,%a0
 2451 19f4 1010      	move.b (%a0),%d0
 2452 19f6 1D40 FFFE 	move.b %d0,-2(%fp)
 2453 19fa 52AE FFF6 	addq.l #1,-10(%fp)
 2454 19fe 0C2E 0020 	cmp.b #32,-2(%fp)
 2454      FFFE 
 2455 1a04 6300 015E 	jls .L193
 2456 1a08 0C2E 002F 	cmp.b #47,-2(%fp)
 2456      FFFE 
 2457 1a0e 6700 0154 	jeq .L193
 2458 1a12 0C2E 005C 	cmp.b #92,-2(%fp)
 2458      FFFE 
 2459 1a18 6700 014A 	jeq .L193
 2460 1a1c 0C2E 002E 	cmp.b #46,-2(%fp)
 2460      FFFE 
 2461 1a22 670A      	jeq .L194
 2462 1a24 202E FFF2 	move.l -14(%fp),%d0
 2463 1a28 B0AE FFFA 	cmp.l -6(%fp),%d0
 2464 1a2c 6530      	jcs .L195
 2465               	.L194:
 2466 1a2e 7208      	moveq #8,%d1
 2467 1a30 B2AE FFFA 	cmp.l -6(%fp),%d1
 2468 1a34 6608      	jne .L196
 2469 1a36 0C2E 002E 	cmp.b #46,-2(%fp)
 2469      FFFE 
 2470 1a3c 6706      	jeq .L197
 2471               	.L196:
 2472 1a3e 7006      	moveq #6,%d0
 2473 1a40 6000 01B2 	jra .L190
 2474               	.L197:
 2475 1a44 7008      	moveq #8,%d0
 2476 1a46 2D40 FFF2 	move.l %d0,-14(%fp)
 2477 1a4a 720B      	moveq #11,%d1
68K GAS   			page 46


 2478 1a4c 2D41 FFFA 	move.l %d1,-6(%fp)
 2479 1a50 102E FFFF 	move.b -1(%fp),%d0
 2480 1a54 E508      	lsl.b #2,%d0
 2481 1a56 1D40 FFFF 	move.b %d0,-1(%fp)
 2482 1a5a 6000 0104 	jra .L198
 2483               	.L195:
 2484 1a5e 102E FFFE 	move.b -2(%fp),%d0
 2485 1a62 4A00      	tst.b %d0
 2486 1a64 6C06      	jge .L199
 2487 1a66 002E 0003 	or.b #3,-1(%fp)
 2487      FFFF 
 2488               	.L199:
 2489 1a6c 0C2E FF80 	cmp.b #-128,-2(%fp)
 2489      FFFE 
 2490 1a72 6308      	jls .L200
 2491 1a74 0C2E FF9F 	cmp.b #-97,-2(%fp)
 2491      FFFE 
 2492 1a7a 6310      	jls .L201
 2493               	.L200:
 2494 1a7c 0C2E FFDF 	cmp.b #-33,-2(%fp)
 2494      FFFE 
 2495 1a82 6374      	jls .L202
 2496 1a84 0C2E FFFC 	cmp.b #-4,-2(%fp)
 2496      FFFE 
 2497 1a8a 626C      	jhi .L202
 2498               	.L201:
 2499 1a8c 202E FFEE 	move.l -18(%fp),%d0
 2500 1a90 D0AE FFF6 	add.l -10(%fp),%d0
 2501 1a94 2040      	move.l %d0,%a0
 2502 1a96 1010      	move.b (%a0),%d0
 2503 1a98 1D40 FFE9 	move.b %d0,-23(%fp)
 2504 1a9c 52AE FFF6 	addq.l #1,-10(%fp)
 2505 1aa0 0C2E 003F 	cmp.b #63,-23(%fp)
 2505      FFE9 
 2506 1aa6 6308      	jls .L203
 2507 1aa8 0C2E 007E 	cmp.b #126,-23(%fp)
 2507      FFE9 
 2508 1aae 6310      	jls .L204
 2509               	.L203:
 2510 1ab0 102E FFE9 	move.b -23(%fp),%d0
 2511 1ab4 4A00      	tst.b %d0
 2512 1ab6 6C14      	jge .L205
 2513 1ab8 0C2E FFFC 	cmp.b #-4,-23(%fp)
 2513      FFE9 
 2514 1abe 620C      	jhi .L205
 2515               	.L204:
 2516 1ac0 202E FFFA 	move.l -6(%fp),%d0
 2517 1ac4 5380      	subq.l #1,%d0
 2518 1ac6 B0AE FFF2 	cmp.l -14(%fp),%d0
 2519 1aca 6206      	jhi .L206
 2520               	.L205:
 2521 1acc 7006      	moveq #6,%d0
 2522 1ace 6000 0124 	jra .L190
 2523               	.L206:
 2524 1ad2 202E FFEA 	move.l -22(%fp),%d0
 2525 1ad6 D0AE FFF2 	add.l -14(%fp),%d0
 2526 1ada 2040      	move.l %d0,%a0
68K GAS   			page 47


 2527 1adc 10AE FFFE 	move.b -2(%fp),(%a0)
 2528 1ae0 52AE FFF2 	addq.l #1,-14(%fp)
 2529 1ae4 202E FFEA 	move.l -22(%fp),%d0
 2530 1ae8 D0AE FFF2 	add.l -14(%fp),%d0
 2531 1aec 2040      	move.l %d0,%a0
 2532 1aee 10AE FFE9 	move.b -23(%fp),(%a0)
 2533 1af2 52AE FFF2 	addq.l #1,-14(%fp)
 2534 1af6 6068      	jra .L198
 2535               	.L202:
 2536 1af8 4280      	clr.l %d0
 2537 1afa 102E FFFE 	move.b -2(%fp),%d0
 2538 1afe 2F00      	move.l %d0,-(%sp)
 2539 1b00 4879 0000 	pea .LC0
 2539      0000 
 2540 1b06 4EBA E5D6 	jsr chk_chr
 2541 1b0a 508F      	addq.l #8,%sp
 2542 1b0c 4A80      	tst.l %d0
 2543 1b0e 6706      	jeq .L207
 2544 1b10 7006      	moveq #6,%d0
 2545 1b12 6000 00E0 	jra .L190
 2546               	.L207:
 2547 1b16 0C2E 0040 	cmp.b #64,-2(%fp)
 2547      FFFE 
 2548 1b1c 6310      	jls .L208
 2549 1b1e 0C2E 005A 	cmp.b #90,-2(%fp)
 2549      FFFE 
 2550 1b24 6208      	jhi .L208
 2551 1b26 002E 0002 	or.b #2,-1(%fp)
 2551      FFFF 
 2552 1b2c 601C      	jra .L209
 2553               	.L208:
 2554 1b2e 0C2E 0060 	cmp.b #96,-2(%fp)
 2554      FFFE 
 2555 1b34 6314      	jls .L209
 2556 1b36 0C2E 007A 	cmp.b #122,-2(%fp)
 2556      FFFE 
 2557 1b3c 620C      	jhi .L209
 2558 1b3e 002E 0001 	or.b #1,-1(%fp)
 2558      FFFF 
 2559 1b44 062E FFE0 	add.b #-32,-2(%fp)
 2559      FFFE 
 2560               	.L209:
 2561 1b4a 202E FFEA 	move.l -22(%fp),%d0
 2562 1b4e D0AE FFF2 	add.l -14(%fp),%d0
 2563 1b52 2040      	move.l %d0,%a0
 2564 1b54 10AE FFFE 	move.b -2(%fp),(%a0)
 2565 1b58 52AE FFF2 	addq.l #1,-14(%fp)
 2566 1b5c 6000 FE8C 	jra .L186
 2567               	.L198:
 2568 1b60 6000 FE88 	jra .L186
 2569               	.L193:
 2570 1b64 222E FFEE 	move.l -18(%fp),%d1
 2571 1b68 D2AE FFF6 	add.l -10(%fp),%d1
 2572 1b6c 202E 000C 	move.l 12(%fp),%d0
 2573 1b70 2040      	move.l %d0,%a0
 2574 1b72 2081      	move.l %d1,(%a0)
 2575 1b74 0C2E 0020 	cmp.b #32,-2(%fp)
68K GAS   			page 48


 2575      FFFE 
 2576 1b7a 6204      	jhi .L210
 2577 1b7c 7004      	moveq #4,%d0
 2578 1b7e 6002      	jra .L211
 2579               	.L210:
 2580 1b80 4200      	clr.b %d0
 2581               	.L211:
 2582 1b82 1D40 FFFE 	move.b %d0,-2(%fp)
 2583 1b86 4AAE FFF2 	tst.l -14(%fp)
 2584 1b8a 6604      	jne .L212
 2585 1b8c 7006      	moveq #6,%d0
 2586 1b8e 6064      	jra .L190
 2587               	.L212:
 2588 1b90 202E FFEA 	move.l -22(%fp),%d0
 2589 1b94 2040      	move.l %d0,%a0
 2590 1b96 1010      	move.b (%a0),%d0
 2591 1b98 0C00 FFE5 	cmp.b #-27,%d0
 2592 1b9c 660A      	jne .L213
 2593 1b9e 202E FFEA 	move.l -22(%fp),%d0
 2594 1ba2 2040      	move.l %d0,%a0
 2595 1ba4 10BC 0005 	move.b #5,(%a0)
 2596               	.L213:
 2597 1ba8 7008      	moveq #8,%d0
 2598 1baa B0AE FFFA 	cmp.l -6(%fp),%d0
 2599 1bae 660A      	jne .L214
 2600 1bb0 102E FFFF 	move.b -1(%fp),%d0
 2601 1bb4 E508      	lsl.b #2,%d0
 2602 1bb6 1D40 FFFF 	move.b %d0,-1(%fp)
 2603               	.L214:
 2604 1bba 4280      	clr.l %d0
 2605 1bbc 102E FFFF 	move.b -1(%fp),%d0
 2606 1bc0 7203      	moveq #3,%d1
 2607 1bc2 C081      	and.l %d1,%d0
 2608 1bc4 7201      	moveq #1,%d1
 2609 1bc6 B280      	cmp.l %d0,%d1
 2610 1bc8 6606      	jne .L215
 2611 1bca 002E 0010 	or.b #16,-2(%fp)
 2611      FFFE 
 2612               	.L215:
 2613 1bd0 4280      	clr.l %d0
 2614 1bd2 102E FFFF 	move.b -1(%fp),%d0
 2615 1bd6 720C      	moveq #12,%d1
 2616 1bd8 C081      	and.l %d1,%d0
 2617 1bda 7204      	moveq #4,%d1
 2618 1bdc B280      	cmp.l %d0,%d1
 2619 1bde 6606      	jne .L216
 2620 1be0 002E 0008 	or.b #8,-2(%fp)
 2620      FFFE 
 2621               	.L216:
 2622 1be6 700B      	moveq #11,%d0
 2623 1be8 D0AE FFEA 	add.l -22(%fp),%d0
 2624 1bec 2040      	move.l %d0,%a0
 2625 1bee 10AE FFFE 	move.b -2(%fp),(%a0)
 2626 1bf2 4280      	clr.l %d0
 2627               	.L190:
 2628 1bf4 4E5E      	unlk %fp
 2629 1bf6 4E75      	rts
68K GAS   			page 49


 2631               	.align2
 2633               	follow_path:
 2634 1bf8 4E56 FFF4 	link.w %fp,#-12
 2635 1bfc 202E 000C 	move.l 12(%fp),%d0
 2636 1c00 2040      	move.l %d0,%a0
 2637 1c02 1010      	move.b (%a0),%d0
 2638 1c04 0C00 002F 	cmp.b #47,%d0
 2639 1c08 670E      	jeq .L218
 2640 1c0a 202E 000C 	move.l 12(%fp),%d0
 2641 1c0e 2040      	move.l %d0,%a0
 2642 1c10 1010      	move.b (%a0),%d0
 2643 1c12 0C00 005C 	cmp.b #92,%d0
 2644 1c16 6616      	jne .L219
 2645               	.L218:
 2646 1c18 202E 000C 	move.l 12(%fp),%d0
 2647 1c1c 5280      	addq.l #1,%d0
 2648 1c1e 2D40 000C 	move.l %d0,12(%fp)
 2649 1c22 202E 0008 	move.l 8(%fp),%d0
 2650 1c26 2040      	move.l %d0,%a0
 2651 1c28 42A8 0008 	clr.l 8(%a0)
 2652 1c2c 6018      	jra .L220
 2653               	.L219:
 2654 1c2e 202E 0008 	move.l 8(%fp),%d0
 2655 1c32 2040      	move.l %d0,%a0
 2656 1c34 2010      	move.l (%a0),%d0
 2657 1c36 2040      	move.l %d0,%a0
 2658 1c38 2228 0014 	move.l 20(%a0),%d1
 2659 1c3c 202E 0008 	move.l 8(%fp),%d0
 2660 1c40 2040      	move.l %d0,%a0
 2661 1c42 2141 0008 	move.l %d1,8(%a0)
 2662               	.L220:
 2663 1c46 202E 000C 	move.l 12(%fp),%d0
 2664 1c4a 2040      	move.l %d0,%a0
 2665 1c4c 1010      	move.b (%a0),%d0
 2666 1c4e 0C00 001F 	cmp.b #31,%d0
 2667 1c52 621E      	jhi .L221
 2668 1c54 42A7      	clr.l -(%sp)
 2669 1c56 2F2E 0008 	move.l 8(%fp),-(%sp)
 2670 1c5a 4EBA F1D0 	jsr dir_sdi
 2671 1c5e 508F      	addq.l #8,%sp
 2672 1c60 2D40 FFFC 	move.l %d0,-4(%fp)
 2673 1c64 202E 0008 	move.l 8(%fp),%d0
 2674 1c68 2040      	move.l %d0,%a0
 2675 1c6a 42A8 0014 	clr.l 20(%a0)
 2676 1c6e 6000 0112 	jra .L222
 2677               	.L221:
 2678 1c72 700C      	moveq #12,%d0
 2679 1c74 D08E      	add.l %fp,%d0
 2680 1c76 2F00      	move.l %d0,-(%sp)
 2681 1c78 2F2E 0008 	move.l 8(%fp),-(%sp)
 2682 1c7c 4EBA FC70 	jsr create_name
 2683 1c80 508F      	addq.l #8,%sp
 2684 1c82 2D40 FFFC 	move.l %d0,-4(%fp)
 2685 1c86 4AAE FFFC 	tst.l -4(%fp)
 2686 1c8a 6600 00E8 	jne .L231
 2687               	.L223:
 2688 1c8e 2F2E 0008 	move.l 8(%fp),-(%sp)
68K GAS   			page 50


 2689 1c92 4EBA F80E 	jsr dir_find
 2690 1c96 588F      	addq.l #4,%sp
 2691 1c98 2D40 FFFC 	move.l %d0,-4(%fp)
 2692 1c9c 202E 0008 	move.l 8(%fp),%d0
 2693 1ca0 2040      	move.l %d0,%a0
 2694 1ca2 2028 0018 	move.l 24(%a0),%d0
 2695 1ca6 720B      	moveq #11,%d1
 2696 1ca8 D081      	add.l %d1,%d0
 2697 1caa 2040      	move.l %d0,%a0
 2698 1cac 1D50 FFFB 	move.b (%a0),-5(%fp)
 2699 1cb0 4AAE FFFC 	tst.l -4(%fp)
 2700 1cb4 675E      	jeq .L224
 2701 1cb6 7004      	moveq #4,%d0
 2702 1cb8 B0AE FFFC 	cmp.l -4(%fp),%d0
 2703 1cbc 6600 00BA 	jne .L232
 2704 1cc0 4280      	clr.l %d0
 2705 1cc2 102E FFFB 	move.b -5(%fp),%d0
 2706 1cc6 7220      	moveq #32,%d1
 2707 1cc8 C081      	and.l %d1,%d0
 2708 1cca 4A80      	tst.l %d0
 2709 1ccc 6730      	jeq .L226
 2710 1cce 202E 0008 	move.l 8(%fp),%d0
 2711 1cd2 2040      	move.l %d0,%a0
 2712 1cd4 42A8 0008 	clr.l 8(%a0)
 2713 1cd8 202E 0008 	move.l 8(%fp),%d0
 2714 1cdc 2040      	move.l %d0,%a0
 2715 1cde 42A8 0014 	clr.l 20(%a0)
 2716 1ce2 4280      	clr.l %d0
 2717 1ce4 102E FFFB 	move.b -5(%fp),%d0
 2718 1ce8 7204      	moveq #4,%d1
 2719 1cea C081      	and.l %d1,%d0
 2720 1cec 4A80      	tst.l %d0
 2721 1cee 6606      	jne .L227
 2722 1cf0 4E71      	nop
 2723 1cf2 6000 FF7E 	jra .L221
 2724               	.L227:
 2725 1cf6 42AE FFFC 	clr.l -4(%fp)
 2726 1cfa 6000 0086 	jra .L222
 2727               	.L226:
 2728 1cfe 4280      	clr.l %d0
 2729 1d00 102E FFFB 	move.b -5(%fp),%d0
 2730 1d04 7204      	moveq #4,%d1
 2731 1d06 C081      	and.l %d1,%d0
 2732 1d08 4A80      	tst.l %d0
 2733 1d0a 6670      	jne .L233
 2734 1d0c 7005      	moveq #5,%d0
 2735 1d0e 2D40 FFFC 	move.l %d0,-4(%fp)
 2736 1d12 606E      	jra .L222
 2737               	.L224:
 2738 1d14 4280      	clr.l %d0
 2739 1d16 102E FFFB 	move.b -5(%fp),%d0
 2740 1d1a 7204      	moveq #4,%d1
 2741 1d1c C081      	and.l %d1,%d0
 2742 1d1e 4A80      	tst.l %d0
 2743 1d20 665E      	jne .L234
 2744               	.L229:
 2745 1d22 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 51


 2746 1d26 2040      	move.l %d0,%a0
 2747 1d28 2D68 0014 	move.l 20(%a0),-10(%fp)
 2747      FFF6 
 2748 1d2e 700B      	moveq #11,%d0
 2749 1d30 D0AE FFF6 	add.l -10(%fp),%d0
 2750 1d34 2040      	move.l %d0,%a0
 2751 1d36 1010      	move.b (%a0),%d0
 2752 1d38 1000      	move.b %d0,%d0
 2753 1d3a 0280 0000 	and.l #255,%d0
 2753      00FF 
 2754 1d40 7210      	moveq #16,%d1
 2755 1d42 C081      	and.l %d1,%d0
 2756 1d44 4A80      	tst.l %d0
 2757 1d46 6608      	jne .L230
 2758 1d48 7005      	moveq #5,%d0
 2759 1d4a 2D40 FFFC 	move.l %d0,-4(%fp)
 2760 1d4e 6032      	jra .L222
 2761               	.L230:
 2762 1d50 202E 0008 	move.l 8(%fp),%d0
 2763 1d54 2040      	move.l %d0,%a0
 2764 1d56 2010      	move.l (%a0),%d0
 2765 1d58 2F2E FFF6 	move.l -10(%fp),-(%sp)
 2766 1d5c 2F00      	move.l %d0,-(%sp)
 2767 1d5e 4EBA F664 	jsr ld_clust
 2768 1d62 508F      	addq.l #8,%sp
 2769 1d64 2200      	move.l %d0,%d1
 2770 1d66 202E 0008 	move.l 8(%fp),%d0
 2771 1d6a 2040      	move.l %d0,%a0
 2772 1d6c 2141 0008 	move.l %d1,8(%a0)
 2773 1d70 6000 FF00 	jra .L221
 2774               	.L231:
 2775 1d74 4E71      	nop
 2776 1d76 600A      	jra .L222
 2777               	.L232:
 2778 1d78 4E71      	nop
 2779 1d7a 6006      	jra .L222
 2780               	.L233:
 2781 1d7c 4E71      	nop
 2782 1d7e 6002      	jra .L222
 2783               	.L234:
 2784 1d80 4E71      	nop
 2785               	.L222:
 2786 1d82 202E FFFC 	move.l -4(%fp),%d0
 2787 1d86 4E5E      	unlk %fp
 2788 1d88 4E75      	rts
 2790               	.align2
 2792               	get_ldnumber:
 2793 1d8a 4E56 FFE8 	link.w %fp,#-24
 2794 1d8e 70FF      	moveq #-1,%d0
 2795 1d90 2D40 FFF0 	move.l %d0,-16(%fp)
 2796 1d94 202E 0008 	move.l 8(%fp),%d0
 2797 1d98 2040      	move.l %d0,%a0
 2798 1d9a 2010      	move.l (%a0),%d0
 2799 1d9c 4A80      	tst.l %d0
 2800 1d9e 6700 0146 	jeq .L236
 2801 1da2 202E 0008 	move.l 8(%fp),%d0
 2802 1da6 2040      	move.l %d0,%a0
68K GAS   			page 52


 2803 1da8 2D50 FFF8 	move.l (%a0),-8(%fp)
 2804 1dac 6004      	jra .L237
 2805               	.L239:
 2806 1dae 52AE FFF8 	addq.l #1,-8(%fp)
 2807               	.L237:
 2808 1db2 202E FFF8 	move.l -8(%fp),%d0
 2809 1db6 2040      	move.l %d0,%a0
 2810 1db8 1010      	move.b (%a0),%d0
 2811 1dba 0C00 0020 	cmp.b #32,%d0
 2812 1dbe 630E      	jls .L238
 2813 1dc0 202E FFF8 	move.l -8(%fp),%d0
 2814 1dc4 2040      	move.l %d0,%a0
 2815 1dc6 1010      	move.b (%a0),%d0
 2816 1dc8 0C00 003A 	cmp.b #58,%d0
 2817 1dcc 66E0      	jne .L239
 2818               	.L238:
 2819 1dce 202E FFF8 	move.l -8(%fp),%d0
 2820 1dd2 2040      	move.l %d0,%a0
 2821 1dd4 1010      	move.b (%a0),%d0
 2822 1dd6 0C00 003A 	cmp.b #58,%d0
 2823 1dda 6600 00F8 	jne .L240
 2824 1dde 202E 0008 	move.l 8(%fp),%d0
 2825 1de2 2040      	move.l %d0,%a0
 2826 1de4 2D50 FFFC 	move.l (%a0),-4(%fp)
 2827 1de8 202E FFFC 	move.l -4(%fp),%d0
 2828 1dec 2040      	move.l %d0,%a0
 2829 1dee 1010      	move.b (%a0),%d0
 2830 1df0 49C0      	extb.l %d0
 2831 1df2 72D0      	moveq #-48,%d1
 2832 1df4 D081      	add.l %d1,%d0
 2833 1df6 2D40 FFF4 	move.l %d0,-12(%fp)
 2834 1dfa 52AE FFFC 	addq.l #1,-4(%fp)
 2835 1dfe 7009      	moveq #9,%d0
 2836 1e00 B0AE FFF4 	cmp.l -12(%fp),%d0
 2837 1e04 652C      	jcs .L241
 2838 1e06 222E FFFC 	move.l -4(%fp),%d1
 2839 1e0a B2AE FFF8 	cmp.l -8(%fp),%d1
 2840 1e0e 6622      	jne .L241
 2841 1e10 7007      	moveq #7,%d0
 2842 1e12 B0AE FFF4 	cmp.l -12(%fp),%d0
 2843 1e16 6500 00B6 	jcs .L243
 2844 1e1a 2D6E FFF4 	move.l -12(%fp),-16(%fp)
 2844      FFF0 
 2845 1e20 52AE FFF8 	addq.l #1,-8(%fp)
 2846 1e24 202E 0008 	move.l 8(%fp),%d0
 2847 1e28 2040      	move.l %d0,%a0
 2848 1e2a 20AE FFF8 	move.l -8(%fp),(%a0)
 2849 1e2e 6000 009E 	jra .L243
 2850               	.L241:
 2851 1e32 42AE FFF4 	clr.l -12(%fp)
 2852 1e36 52AE FFF8 	addq.l #1,-8(%fp)
 2853               	.L249:
 2854 1e3a 202E FFF4 	move.l -12(%fp),%d0
 2855 1e3e 2D70 0DB0 	move.l str.1255(%d0.l*4),-20(%fp)
 2855      0000 0000 
 2855      FFEC 
 2856 1e48 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 53


 2857 1e4c 2040      	move.l %d0,%a0
 2858 1e4e 2D50 FFFC 	move.l (%a0),-4(%fp)
 2859               	.L246:
 2860 1e52 202E FFEC 	move.l -20(%fp),%d0
 2861 1e56 2040      	move.l %d0,%a0
 2862 1e58 1D50 FFEA 	move.b (%a0),-22(%fp)
 2863 1e5c 52AE FFEC 	addq.l #1,-20(%fp)
 2864 1e60 202E FFFC 	move.l -4(%fp),%d0
 2865 1e64 2040      	move.l %d0,%a0
 2866 1e66 1D50 FFEB 	move.b (%a0),-21(%fp)
 2867 1e6a 52AE FFFC 	addq.l #1,-4(%fp)
 2868 1e6e 0C2E 0060 	cmp.b #96,-21(%fp)
 2868      FFEB 
 2869 1e74 6F14      	jle .L244
 2870 1e76 0C2E 007A 	cmp.b #122,-21(%fp)
 2870      FFEB 
 2871 1e7c 6E0C      	jgt .L244
 2872 1e7e 102E FFEB 	move.b -21(%fp),%d0
 2873 1e82 0600 FFE0 	add.b #-32,%d0
 2874 1e86 1D40 FFEB 	move.b %d0,-21(%fp)
 2875               	.L244:
 2876 1e8a 4A2E FFEA 	tst.b -22(%fp)
 2877 1e8e 670A      	jeq .L245
 2878 1e90 102E FFEA 	move.b -22(%fp),%d0
 2879 1e94 B02E FFEB 	cmp.b -21(%fp),%d0
 2880 1e98 67B8      	jeq .L246
 2881               	.L245:
 2882 1e9a 4A2E FFEA 	tst.b -22(%fp)
 2883 1e9e 660A      	jne .L247
 2884 1ea0 222E FFFC 	move.l -4(%fp),%d1
 2885 1ea4 B2AE FFF8 	cmp.l -8(%fp),%d1
 2886 1ea8 670C      	jeq .L248
 2887               	.L247:
 2888 1eaa 52AE FFF4 	addq.l #1,-12(%fp)
 2889 1eae 7007      	moveq #7,%d0
 2890 1eb0 B0AE FFF4 	cmp.l -12(%fp),%d0
 2891 1eb4 6484      	jcc .L249
 2892               	.L248:
 2893 1eb6 7207      	moveq #7,%d1
 2894 1eb8 B2AE FFF4 	cmp.l -12(%fp),%d1
 2895 1ebc 6510      	jcs .L243
 2896 1ebe 2D6E FFF4 	move.l -12(%fp),-16(%fp)
 2896      FFF0 
 2897 1ec4 202E 0008 	move.l 8(%fp),%d0
 2898 1ec8 2040      	move.l %d0,%a0
 2899 1eca 20AE FFF8 	move.l -8(%fp),(%a0)
 2900               	.L243:
 2901 1ece 202E FFF0 	move.l -16(%fp),%d0
 2902 1ed2 6016      	jra .L250
 2903               	.L240:
 2904 1ed4 1039 0000 	move.b CurrVol,%d0
 2904      0000 
 2905 1eda 1000      	move.b %d0,%d0
 2906 1edc 0280 0000 	and.l #255,%d0
 2906      00FF 
 2907 1ee2 2D40 FFF0 	move.l %d0,-16(%fp)
 2908               	.L236:
68K GAS   			page 54


 2909 1ee6 202E FFF0 	move.l -16(%fp),%d0
 2910               	.L250:
 2911 1eea 4E5E      	unlk %fp
 2912 1eec 4E75      	rts
 2914               	.align2
 2916               	check_fs:
 2917 1eee 4E56 0000 	link.w %fp,#0
 2918 1ef2 2F02      	move.l %d2,-(%sp)
 2919 1ef4 202E 0008 	move.l 8(%fp),%d0
 2920 1ef8 2040      	move.l %d0,%a0
 2921 1efa 4228 0004 	clr.b 4(%a0)
 2922 1efe 202E 0008 	move.l 8(%fp),%d0
 2923 1f02 72FF      	moveq #-1,%d1
 2924 1f04 2040      	move.l %d0,%a0
 2925 1f06 2141 0030 	move.l %d1,48(%a0)
 2926 1f0a 2F2E 000C 	move.l 12(%fp),-(%sp)
 2927 1f0e 2F2E 0008 	move.l 8(%fp),-(%sp)
 2928 1f12 4EBA E2E6 	jsr move_window
 2929 1f16 508F      	addq.l #8,%sp
 2930 1f18 4A80      	tst.l %d0
 2931 1f1a 6706      	jeq .L252
 2932 1f1c 7003      	moveq #3,%d0
 2933 1f1e 6000 0128 	jra .L253
 2934               	.L252:
 2935 1f22 202E 0008 	move.l 8(%fp),%d0
 2936 1f26 0680 0000 	add.l #563,%d0
 2936      0233 
 2937 1f2c 2040      	move.l %d0,%a0
 2938 1f2e 1010      	move.b (%a0),%d0
 2939 1f30 1000      	move.b %d0,%d0
 2940 1f32 0280 0000 	and.l #255,%d0
 2940      00FF 
 2941 1f38 E188      	lsl.l #8,%d0
 2942 1f3a 3200      	move.w %d0,%d1
 2943 1f3c 202E 0008 	move.l 8(%fp),%d0
 2944 1f40 0680 0000 	add.l #562,%d0
 2944      0232 
 2945 1f46 2040      	move.l %d0,%a0
 2946 1f48 1010      	move.b (%a0),%d0
 2947 1f4a 1000      	move.b %d0,%d0
 2948 1f4c 0240 00FF 	and.w #255,%d0
 2949 1f50 8041      	or.w %d1,%d0
 2950 1f52 0C40 AA55 	cmp.w #-21931,%d0
 2951 1f56 6706      	jeq .L254
 2952 1f58 7002      	moveq #2,%d0
 2953 1f5a 6000 00EC 	jra .L253
 2954               	.L254:
 2955 1f5e 706D      	moveq #109,%d0
 2956 1f60 D0AE 0008 	add.l 8(%fp),%d0
 2957 1f64 2040      	move.l %d0,%a0
 2958 1f66 1010      	move.b (%a0),%d0
 2959 1f68 1000      	move.b %d0,%d0
 2960 1f6a 0280 0000 	and.l #255,%d0
 2960      00FF 
 2961 1f70 2200      	move.l %d0,%d1
 2962 1f72 7418      	moveq #24,%d2
 2963 1f74 E5A9      	lsl.l %d2,%d1
68K GAS   			page 55


 2964 1f76 706C      	moveq #108,%d0
 2965 1f78 D0AE 0008 	add.l 8(%fp),%d0
 2966 1f7c 2040      	move.l %d0,%a0
 2967 1f7e 1010      	move.b (%a0),%d0
 2968 1f80 1000      	move.b %d0,%d0
 2969 1f82 0280 0000 	and.l #255,%d0
 2969      00FF 
 2970 1f88 4840      	swap %d0
 2971 1f8a 4240      	clr.w %d0
 2972 1f8c 8280      	or.l %d0,%d1
 2973 1f8e 706B      	moveq #107,%d0
 2974 1f90 D0AE 0008 	add.l 8(%fp),%d0
 2975 1f94 2040      	move.l %d0,%a0
 2976 1f96 1010      	move.b (%a0),%d0
 2977 1f98 1000      	move.b %d0,%d0
 2978 1f9a 0280 0000 	and.l #255,%d0
 2978      00FF 
 2979 1fa0 E188      	lsl.l #8,%d0
 2980 1fa2 8280      	or.l %d0,%d1
 2981 1fa4 706A      	moveq #106,%d0
 2982 1fa6 D0AE 0008 	add.l 8(%fp),%d0
 2983 1faa 2040      	move.l %d0,%a0
 2984 1fac 1010      	move.b (%a0),%d0
 2985 1fae 1000      	move.b %d0,%d0
 2986 1fb0 0280 0000 	and.l #255,%d0
 2986      00FF 
 2987 1fb6 8081      	or.l %d1,%d0
 2988 1fb8 0280 00FF 	and.l #16777215,%d0
 2988      FFFF 
 2989 1fbe 0C80 0054 	cmp.l #5521734,%d0
 2989      4146 
 2990 1fc4 6604      	jne .L255
 2991 1fc6 4200      	clr.b %d0
 2992 1fc8 607E      	jra .L253
 2993               	.L255:
 2994 1fca 202E 0008 	move.l 8(%fp),%d0
 2995 1fce 0680 0000 	add.l #137,%d0
 2995      0089 
 2996 1fd4 2040      	move.l %d0,%a0
 2997 1fd6 1010      	move.b (%a0),%d0
 2998 1fd8 1000      	move.b %d0,%d0
 2999 1fda 0280 0000 	and.l #255,%d0
 2999      00FF 
 3000 1fe0 2200      	move.l %d0,%d1
 3001 1fe2 7418      	moveq #24,%d2
 3002 1fe4 E5A9      	lsl.l %d2,%d1
 3003 1fe6 202E 0008 	move.l 8(%fp),%d0
 3004 1fea 0680 0000 	add.l #136,%d0
 3004      0088 
 3005 1ff0 2040      	move.l %d0,%a0
 3006 1ff2 1010      	move.b (%a0),%d0
 3007 1ff4 1000      	move.b %d0,%d0
 3008 1ff6 0280 0000 	and.l #255,%d0
 3008      00FF 
 3009 1ffc 4840      	swap %d0
 3010 1ffe 4240      	clr.w %d0
 3011 2000 8280      	or.l %d0,%d1
68K GAS   			page 56


 3012 2002 202E 0008 	move.l 8(%fp),%d0
 3013 2006 0680 0000 	add.l #135,%d0
 3013      0087 
 3014 200c 2040      	move.l %d0,%a0
 3015 200e 1010      	move.b (%a0),%d0
 3016 2010 1000      	move.b %d0,%d0
 3017 2012 0280 0000 	and.l #255,%d0
 3017      00FF 
 3018 2018 E188      	lsl.l #8,%d0
 3019 201a 8280      	or.l %d0,%d1
 3020 201c 202E 0008 	move.l 8(%fp),%d0
 3021 2020 0680 0000 	add.l #134,%d0
 3021      0086 
 3022 2026 2040      	move.l %d0,%a0
 3023 2028 1010      	move.b (%a0),%d0
 3024 202a 1000      	move.b %d0,%d0
 3025 202c 0280 0000 	and.l #255,%d0
 3025      00FF 
 3026 2032 8081      	or.l %d1,%d0
 3027 2034 0280 00FF 	and.l #16777215,%d0
 3027      FFFF 
 3028 203a 0C80 0054 	cmp.l #5521734,%d0
 3028      4146 
 3029 2040 6604      	jne .L256
 3030 2042 4200      	clr.b %d0
 3031 2044 6002      	jra .L253
 3032               	.L256:
 3033 2046 7001      	moveq #1,%d0
 3034               	.L253:
 3035 2048 242E FFFC 	move.l -4(%fp),%d2
 3036 204c 4E5E      	unlk %fp
 3037 204e 4E75      	rts
 3039               	.align2
 3041               	find_volume:
 3042 2050 4E56 FFBC 	link.w %fp,#-68
 3043 2054 2F03      	move.l %d3,-(%sp)
 3044 2056 2F02      	move.l %d2,-(%sp)
 3045 2058 202E 0010 	move.l 16(%fp),%d0
 3046 205c 1D40 FFBE 	move.b %d0,-66(%fp)
 3047 2060 202E 0008 	move.l 8(%fp),%d0
 3048 2064 2040      	move.l %d0,%a0
 3049 2066 4290      	clr.l (%a0)
 3050 2068 2F2E 000C 	move.l 12(%fp),-(%sp)
 3051 206c 4EBA FD1C 	jsr get_ldnumber
 3052 2070 588F      	addq.l #4,%sp
 3053 2072 2D40 FFE6 	move.l %d0,-26(%fp)
 3054 2076 4AAE FFE6 	tst.l -26(%fp)
 3055 207a 6C06      	jge .L258
 3056 207c 700B      	moveq #11,%d0
 3057 207e 6000 0A52 	jra .L259
 3058               	.L258:
 3059 2082 202E FFE6 	move.l -26(%fp),%d0
 3060 2086 2D70 0DB0 	move.l FatFs(%d0.l*4),-30(%fp)
 3060      0000 0000 
 3060      FFE2 
 3061 2090 4AAE FFE2 	tst.l -30(%fp)
 3062 2094 6606      	jne .L260
68K GAS   			page 57


 3063 2096 700C      	moveq #12,%d0
 3064 2098 6000 0A38 	jra .L259
 3065               	.L260:
 3066 209c 202E 0008 	move.l 8(%fp),%d0
 3067 20a0 2240      	move.l %d0,%a1
 3068 20a2 22AE FFE2 	move.l -30(%fp),(%a1)
 3069 20a6 202E FFE2 	move.l -30(%fp),%d0
 3070 20aa 2040      	move.l %d0,%a0
 3071 20ac 1010      	move.b (%a0),%d0
 3072 20ae 4A00      	tst.b %d0
 3073 20b0 674E      	jeq .L261
 3074 20b2 202E FFE2 	move.l -30(%fp),%d0
 3075 20b6 2240      	move.l %d0,%a1
 3076 20b8 1029 0001 	move.b 1(%a1),%d0
 3077 20bc 1000      	move.b %d0,%d0
 3078 20be 0280 0000 	and.l #255,%d0
 3078      00FF 
 3079 20c4 2F00      	move.l %d0,-(%sp)
 3080 20c6 4EB9 0000 	jsr disk_status
 3080      0000 
 3081 20cc 588F      	addq.l #4,%sp
 3082 20ce 1D40 FFE1 	move.b %d0,-31(%fp)
 3083 20d2 4280      	clr.l %d0
 3084 20d4 102E FFE1 	move.b -31(%fp),%d0
 3085 20d8 7201      	moveq #1,%d1
 3086 20da C081      	and.l %d1,%d0
 3087 20dc 4A80      	tst.l %d0
 3088 20de 6620      	jne .L261
 3089 20e0 4A2E FFBE 	tst.b -66(%fp)
 3090 20e4 6714      	jeq .L262
 3091 20e6 4280      	clr.l %d0
 3092 20e8 102E FFE1 	move.b -31(%fp),%d0
 3093 20ec 7404      	moveq #4,%d2
 3094 20ee C082      	and.l %d2,%d0
 3095 20f0 4A80      	tst.l %d0
 3096 20f2 6706      	jeq .L262
 3097 20f4 700A      	moveq #10,%d0
 3098 20f6 6000 09DA 	jra .L259
 3099               	.L262:
 3100 20fa 4280      	clr.l %d0
 3101 20fc 6000 09D4 	jra .L259
 3102               	.L261:
 3103 2100 202E FFE2 	move.l -30(%fp),%d0
 3104 2104 2040      	move.l %d0,%a0
 3105 2106 4210      	clr.b (%a0)
 3106 2108 202E FFE6 	move.l -26(%fp),%d0
 3107 210c 1230 0BB0 	move.b VolToPart(%d0.l*2),%d1
 3107      0000 0000 
 3108 2114 202E FFE2 	move.l -30(%fp),%d0
 3109 2118 2240      	move.l %d0,%a1
 3110 211a 1341 0001 	move.b %d1,1(%a1)
 3111 211e 202E FFE2 	move.l -30(%fp),%d0
 3112 2122 2040      	move.l %d0,%a0
 3113 2124 1028 0001 	move.b 1(%a0),%d0
 3114 2128 1000      	move.b %d0,%d0
 3115 212a 0280 0000 	and.l #255,%d0
 3115      00FF 
68K GAS   			page 58


 3116 2130 2F00      	move.l %d0,-(%sp)
 3117 2132 4EB9 0000 	jsr disk_initialize
 3117      0000 
 3118 2138 588F      	addq.l #4,%sp
 3119 213a 1D40 FFE1 	move.b %d0,-31(%fp)
 3120 213e 4280      	clr.l %d0
 3121 2140 102E FFE1 	move.b -31(%fp),%d0
 3122 2144 7201      	moveq #1,%d1
 3123 2146 C081      	and.l %d1,%d0
 3124 2148 1000      	move.b %d0,%d0
 3125 214a 4A00      	tst.b %d0
 3126 214c 6706      	jeq .L263
 3127 214e 7003      	moveq #3,%d0
 3128 2150 6000 0980 	jra .L259
 3129               	.L263:
 3130 2154 4A2E FFBE 	tst.b -66(%fp)
 3131 2158 6714      	jeq .L264
 3132 215a 4280      	clr.l %d0
 3133 215c 102E FFE1 	move.b -31(%fp),%d0
 3134 2160 7404      	moveq #4,%d2
 3135 2162 C082      	and.l %d2,%d0
 3136 2164 4A80      	tst.l %d0
 3137 2166 6706      	jeq .L264
 3138 2168 700A      	moveq #10,%d0
 3139 216a 6000 0966 	jra .L259
 3140               	.L264:
 3141 216e 720A      	moveq #10,%d1
 3142 2170 D2AE FFE2 	add.l -30(%fp),%d1
 3143 2174 202E FFE2 	move.l -30(%fp),%d0
 3144 2178 2040      	move.l %d0,%a0
 3145 217a 1028 0001 	move.b 1(%a0),%d0
 3146 217e 1000      	move.b %d0,%d0
 3147 2180 0280 0000 	and.l #255,%d0
 3147      00FF 
 3148 2186 2F01      	move.l %d1,-(%sp)
 3149 2188 4878 0002 	pea 2.w
 3150 218c 2F00      	move.l %d0,-(%sp)
 3151 218e 4EB9 0000 	jsr disk_ioctl
 3151      0000 
 3152 2194 4FEF 000C 	lea (12,%sp),%sp
 3153 2198 4A80      	tst.l %d0
 3154 219a 6620      	jne .L265
 3155 219c 202E FFE2 	move.l -30(%fp),%d0
 3156 21a0 2240      	move.l %d0,%a1
 3157 21a2 3029 000A 	move.w 10(%a1),%d0
 3158 21a6 0C40 01FF 	cmp.w #511,%d0
 3159 21aa 6310      	jls .L265
 3160 21ac 202E FFE2 	move.l -30(%fp),%d0
 3161 21b0 2040      	move.l %d0,%a0
 3162 21b2 3028 000A 	move.w 10(%a0),%d0
 3163 21b6 0C40 0800 	cmp.w #2048,%d0
 3164 21ba 6306      	jls .L266
 3165               	.L265:
 3166 21bc 7001      	moveq #1,%d0
 3167 21be 6000 0912 	jra .L259
 3168               	.L266:
 3169 21c2 42AE FFFA 	clr.l -6(%fp)
68K GAS   			page 59


 3170 21c6 2F2E FFFA 	move.l -6(%fp),-(%sp)
 3171 21ca 2F2E FFE2 	move.l -30(%fp),-(%sp)
 3172 21ce 4EBA FD1E 	jsr check_fs
 3173 21d2 508F      	addq.l #8,%sp
 3174 21d4 1D40 FFFF 	move.b %d0,-1(%fp)
 3175 21d8 0C2E 0001 	cmp.b #1,-1(%fp)
 3175      FFFF 
 3176 21de 6720      	jeq .L267
 3177 21e0 4A2E FFFF 	tst.b -1(%fp)
 3178 21e4 6600 0134 	jne .L268
 3179 21e8 222E FFE6 	move.l -26(%fp),%d1
 3180 21ec 203C 0000 	move.l #VolToPart,%d0
 3180      0000 
 3181 21f2 5280      	addq.l #1,%d0
 3182 21f4 2240      	move.l %d0,%a1
 3183 21f6 1031 1A00 	move.b (%a1,%d1.l*2),%d0
 3184 21fa 4A00      	tst.b %d0
 3185 21fc 6700 011C 	jeq .L268
 3186               	.L267:
 3187 2200 42AE FFEA 	clr.l -22(%fp)
 3188 2204 6000 0094 	jra .L269
 3189               	.L272:
 3190 2208 7234      	moveq #52,%d1
 3191 220a D2AE FFE2 	add.l -30(%fp),%d1
 3192 220e 202E FFEA 	move.l -22(%fp),%d0
 3193 2212 E988      	lsl.l #4,%d0
 3194 2214 0680 0000 	add.l #446,%d0
 3194      01BE 
 3195 221a 2401      	move.l %d1,%d2
 3196 221c D480      	add.l %d0,%d2
 3197 221e 2D42 FFDC 	move.l %d2,-36(%fp)
 3198 2222 202E FFDC 	move.l -36(%fp),%d0
 3199 2226 5880      	addq.l #4,%d0
 3200 2228 2040      	move.l %d0,%a0
 3201 222a 1010      	move.b (%a0),%d0
 3202 222c 4A00      	tst.b %d0
 3203 222e 675C      	jeq .L270
 3204 2230 700B      	moveq #11,%d0
 3205 2232 D0AE FFDC 	add.l -36(%fp),%d0
 3206 2236 2240      	move.l %d0,%a1
 3207 2238 1011      	move.b (%a1),%d0
 3208 223a 1000      	move.b %d0,%d0
 3209 223c 0280 0000 	and.l #255,%d0
 3209      00FF 
 3210 2242 2200      	move.l %d0,%d1
 3211 2244 7418      	moveq #24,%d2
 3212 2246 E5A9      	lsl.l %d2,%d1
 3213 2248 700A      	moveq #10,%d0
 3214 224a D0AE FFDC 	add.l -36(%fp),%d0
 3215 224e 2040      	move.l %d0,%a0
 3216 2250 1010      	move.b (%a0),%d0
 3217 2252 1000      	move.b %d0,%d0
 3218 2254 0280 0000 	and.l #255,%d0
 3218      00FF 
 3219 225a 4840      	swap %d0
 3220 225c 4240      	clr.w %d0
 3221 225e 8280      	or.l %d0,%d1
68K GAS   			page 60


 3222 2260 7009      	moveq #9,%d0
 3223 2262 D0AE FFDC 	add.l -36(%fp),%d0
 3224 2266 2240      	move.l %d0,%a1
 3225 2268 1011      	move.b (%a1),%d0
 3226 226a 1000      	move.b %d0,%d0
 3227 226c 0280 0000 	and.l #255,%d0
 3227      00FF 
 3228 2272 E188      	lsl.l #8,%d0
 3229 2274 8280      	or.l %d0,%d1
 3230 2276 202E FFDC 	move.l -36(%fp),%d0
 3231 227a 5080      	addq.l #8,%d0
 3232 227c 2040      	move.l %d0,%a0
 3233 227e 1010      	move.b (%a0),%d0
 3234 2280 1000      	move.b %d0,%d0
 3235 2282 0280 0000 	and.l #255,%d0
 3235      00FF 
 3236 2288 8081      	or.l %d1,%d0
 3237 228a 6002      	jra .L271
 3238               	.L270:
 3239 228c 4280      	clr.l %d0
 3240               	.L271:
 3241 228e 222E FFEA 	move.l -22(%fp),%d1
 3242 2292 2D80 1CC2 	move.l %d0,-62(%fp,%d1.l*4)
 3243 2296 52AE FFEA 	addq.l #1,-22(%fp)
 3244               	.L269:
 3245 229a 7003      	moveq #3,%d0
 3246 229c B0AE FFEA 	cmp.l -22(%fp),%d0
 3247 22a0 6400 FF66 	jcc .L272
 3248 22a4 222E FFE6 	move.l -26(%fp),%d1
 3249 22a8 203C 0000 	move.l #VolToPart,%d0
 3249      0000 
 3250 22ae 5280      	addq.l #1,%d0
 3251 22b0 2040      	move.l %d0,%a0
 3252 22b2 1030 1A00 	move.b (%a0,%d1.l*2),%d0
 3253 22b6 1000      	move.b %d0,%d0
 3254 22b8 0280 0000 	and.l #255,%d0
 3254      00FF 
 3255 22be 2D40 FFEA 	move.l %d0,-22(%fp)
 3256 22c2 4AAE FFEA 	tst.l -22(%fp)
 3257 22c6 6704      	jeq .L273
 3258 22c8 53AE FFEA 	subq.l #1,-22(%fp)
 3259               	.L273:
 3260 22cc 202E FFEA 	move.l -22(%fp),%d0
 3261 22d0 2D76 0CC2 	move.l -62(%fp,%d0.l*4),-6(%fp)
 3261      FFFA 
 3262 22d6 4AAE FFFA 	tst.l -6(%fp)
 3263 22da 6710      	jeq .L274
 3264 22dc 2F2E FFFA 	move.l -6(%fp),-(%sp)
 3265 22e0 2F2E FFE2 	move.l -30(%fp),-(%sp)
 3266 22e4 4EBA FC08 	jsr check_fs
 3267 22e8 508F      	addq.l #8,%sp
 3268 22ea 6002      	jra .L275
 3269               	.L274:
 3270 22ec 7002      	moveq #2,%d0
 3271               	.L275:
 3272 22ee 1D40 FFFF 	move.b %d0,-1(%fp)
 3273 22f2 222E FFE6 	move.l -26(%fp),%d1
68K GAS   			page 61


 3274 22f6 203C 0000 	move.l #VolToPart,%d0
 3274      0000 
 3275 22fc 5280      	addq.l #1,%d0
 3276 22fe 2240      	move.l %d0,%a1
 3277 2300 1031 1A00 	move.b (%a1,%d1.l*2),%d0
 3278 2304 4A00      	tst.b %d0
 3279 2306 6612      	jne .L268
 3280 2308 4A2E FFFF 	tst.b -1(%fp)
 3281 230c 670C      	jeq .L268
 3282 230e 52AE FFEA 	addq.l #1,-22(%fp)
 3283 2312 7003      	moveq #3,%d0
 3284 2314 B0AE FFEA 	cmp.l -22(%fp),%d0
 3285 2318 64B2      	jcc .L273
 3286               	.L268:
 3287 231a 0C2E 0003 	cmp.b #3,-1(%fp)
 3287      FFFF 
 3288 2320 6606      	jne .L276
 3289 2322 7001      	moveq #1,%d0
 3290 2324 6000 07AC 	jra .L259
 3291               	.L276:
 3292 2328 4A2E FFFF 	tst.b -1(%fp)
 3293 232c 6706      	jeq .L277
 3294 232e 700D      	moveq #13,%d0
 3295 2330 6000 07A0 	jra .L259
 3296               	.L277:
 3297 2334 7040      	moveq #64,%d0
 3298 2336 D0AE FFE2 	add.l -30(%fp),%d0
 3299 233a 2040      	move.l %d0,%a0
 3300 233c 1010      	move.b (%a0),%d0
 3301 233e 1000      	move.b %d0,%d0
 3302 2340 0280 0000 	and.l #255,%d0
 3302      00FF 
 3303 2346 E188      	lsl.l #8,%d0
 3304 2348 3200      	move.w %d0,%d1
 3305 234a 703F      	moveq #63,%d0
 3306 234c D0AE FFE2 	add.l -30(%fp),%d0
 3307 2350 2240      	move.l %d0,%a1
 3308 2352 1011      	move.b (%a1),%d0
 3309 2354 1000      	move.b %d0,%d0
 3310 2356 0240 00FF 	and.w #255,%d0
 3311 235a 8041      	or.w %d1,%d0
 3312 235c 3200      	move.w %d0,%d1
 3313 235e 202E FFE2 	move.l -30(%fp),%d0
 3314 2362 2040      	move.l %d0,%a0
 3315 2364 3028 000A 	move.w 10(%a0),%d0
 3316 2368 B041      	cmp.w %d1,%d0
 3317 236a 6706      	jeq .L278
 3318 236c 700D      	moveq #13,%d0
 3319 236e 6000 0762 	jra .L259
 3320               	.L278:
 3321 2372 704B      	moveq #75,%d0
 3322 2374 D0AE FFE2 	add.l -30(%fp),%d0
 3323 2378 2240      	move.l %d0,%a1
 3324 237a 1011      	move.b (%a1),%d0
 3325 237c 1000      	move.b %d0,%d0
 3326 237e 0280 0000 	and.l #255,%d0
 3326      00FF 
68K GAS   			page 62


 3327 2384 E188      	lsl.l #8,%d0
 3328 2386 3200      	move.w %d0,%d1
 3329 2388 704A      	moveq #74,%d0
 3330 238a D0AE FFE2 	add.l -30(%fp),%d0
 3331 238e 2040      	move.l %d0,%a0
 3332 2390 1010      	move.b (%a0),%d0
 3333 2392 1000      	move.b %d0,%d0
 3334 2394 0240 00FF 	and.w #255,%d0
 3335 2398 8041      	or.w %d1,%d0
 3336 239a 3000      	move.w %d0,%d0
 3337 239c 0280 0000 	and.l #65535,%d0
 3337      FFFF 
 3338 23a2 2D40 FFF6 	move.l %d0,-10(%fp)
 3339 23a6 4AAE FFF6 	tst.l -10(%fp)
 3340 23aa 6660      	jne .L279
 3341 23ac 705B      	moveq #91,%d0
 3342 23ae D0AE FFE2 	add.l -30(%fp),%d0
 3343 23b2 2240      	move.l %d0,%a1
 3344 23b4 1011      	move.b (%a1),%d0
 3345 23b6 1000      	move.b %d0,%d0
 3346 23b8 0280 0000 	and.l #255,%d0
 3346      00FF 
 3347 23be 2200      	move.l %d0,%d1
 3348 23c0 7418      	moveq #24,%d2
 3349 23c2 E5A9      	lsl.l %d2,%d1
 3350 23c4 705A      	moveq #90,%d0
 3351 23c6 D0AE FFE2 	add.l -30(%fp),%d0
 3352 23ca 2040      	move.l %d0,%a0
 3353 23cc 1010      	move.b (%a0),%d0
 3354 23ce 1000      	move.b %d0,%d0
 3355 23d0 0280 0000 	and.l #255,%d0
 3355      00FF 
 3356 23d6 4840      	swap %d0
 3357 23d8 4240      	clr.w %d0
 3358 23da 8280      	or.l %d0,%d1
 3359 23dc 7059      	moveq #89,%d0
 3360 23de D0AE FFE2 	add.l -30(%fp),%d0
 3361 23e2 2240      	move.l %d0,%a1
 3362 23e4 1011      	move.b (%a1),%d0
 3363 23e6 1000      	move.b %d0,%d0
 3364 23e8 0280 0000 	and.l #255,%d0
 3364      00FF 
 3365 23ee E188      	lsl.l #8,%d0
 3366 23f0 8280      	or.l %d0,%d1
 3367 23f2 7058      	moveq #88,%d0
 3368 23f4 D0AE FFE2 	add.l -30(%fp),%d0
 3369 23f8 2040      	move.l %d0,%a0
 3370 23fa 1010      	move.b (%a0),%d0
 3371 23fc 1000      	move.b %d0,%d0
 3372 23fe 0280 0000 	and.l #255,%d0
 3372      00FF 
 3373 2404 2401      	move.l %d1,%d2
 3374 2406 8480      	or.l %d0,%d2
 3375 2408 2D42 FFF6 	move.l %d2,-10(%fp)
 3376               	.L279:
 3377 240c 202E FFE2 	move.l -30(%fp),%d0
 3378 2410 2040      	move.l %d0,%a0
68K GAS   			page 63


 3379 2412 216E FFF6 	move.l -10(%fp),28(%a0)
 3379      001C 
 3380 2418 202E FFE2 	move.l -30(%fp),%d0
 3381 241c 2240      	move.l %d0,%a1
 3382 241e 1229 0044 	move.b 68(%a1),%d1
 3383 2422 202E FFE2 	move.l -30(%fp),%d0
 3384 2426 2040      	move.l %d0,%a0
 3385 2428 1141 0003 	move.b %d1,3(%a0)
 3386 242c 202E FFE2 	move.l -30(%fp),%d0
 3387 2430 2240      	move.l %d0,%a1
 3388 2432 1029 0003 	move.b 3(%a1),%d0
 3389 2436 0C00 0001 	cmp.b #1,%d0
 3390 243a 6716      	jeq .L280
 3391 243c 202E FFE2 	move.l -30(%fp),%d0
 3392 2440 2040      	move.l %d0,%a0
 3393 2442 1028 0003 	move.b 3(%a0),%d0
 3394 2446 0C00 0002 	cmp.b #2,%d0
 3395 244a 6706      	jeq .L280
 3396 244c 700D      	moveq #13,%d0
 3397 244e 6000 0682 	jra .L259
 3398               	.L280:
 3399 2452 202E FFE2 	move.l -30(%fp),%d0
 3400 2456 2240      	move.l %d0,%a1
 3401 2458 1029 0003 	move.b 3(%a1),%d0
 3402 245c 1000      	move.b %d0,%d0
 3403 245e 0280 0000 	and.l #255,%d0
 3403      00FF 
 3404 2464 222E FFF6 	move.l -10(%fp),%d1
 3405 2468 4C00 1800 	muls.l %d0,%d1
 3406 246c 2D41 FFF6 	move.l %d1,-10(%fp)
 3407 2470 202E FFE2 	move.l -30(%fp),%d0
 3408 2474 2040      	move.l %d0,%a0
 3409 2476 1228 0041 	move.b 65(%a0),%d1
 3410 247a 202E FFE2 	move.l -30(%fp),%d0
 3411 247e 2240      	move.l %d0,%a1
 3412 2480 1341 0002 	move.b %d1,2(%a1)
 3413 2484 202E FFE2 	move.l -30(%fp),%d0
 3414 2488 2040      	move.l %d0,%a0
 3415 248a 1028 0002 	move.b 2(%a0),%d0
 3416 248e 4A00      	tst.b %d0
 3417 2490 6728      	jeq .L281
 3418 2492 202E FFE2 	move.l -30(%fp),%d0
 3419 2496 2240      	move.l %d0,%a1
 3420 2498 1029 0002 	move.b 2(%a1),%d0
 3421 249c 4281      	clr.l %d1
 3422 249e 1200      	move.b %d0,%d1
 3423 24a0 202E FFE2 	move.l -30(%fp),%d0
 3424 24a4 2040      	move.l %d0,%a0
 3425 24a6 1028 0002 	move.b 2(%a0),%d0
 3426 24aa 1000      	move.b %d0,%d0
 3427 24ac 0280 0000 	and.l #255,%d0
 3427      00FF 
 3428 24b2 5380      	subq.l #1,%d0
 3429 24b4 C081      	and.l %d1,%d0
 3430 24b6 4A80      	tst.l %d0
 3431 24b8 6706      	jeq .L282
 3432               	.L281:
68K GAS   			page 64


 3433 24ba 700D      	moveq #13,%d0
 3434 24bc 6000 0614 	jra .L259
 3435               	.L282:
 3436 24c0 7046      	moveq #70,%d0
 3437 24c2 D0AE FFE2 	add.l -30(%fp),%d0
 3438 24c6 2240      	move.l %d0,%a1
 3439 24c8 1011      	move.b (%a1),%d0
 3440 24ca 1000      	move.b %d0,%d0
 3441 24cc 0280 0000 	and.l #255,%d0
 3441      00FF 
 3442 24d2 E188      	lsl.l #8,%d0
 3443 24d4 3200      	move.w %d0,%d1
 3444 24d6 7045      	moveq #69,%d0
 3445 24d8 D0AE FFE2 	add.l -30(%fp),%d0
 3446 24dc 2040      	move.l %d0,%a0
 3447 24de 1010      	move.b (%a0),%d0
 3448 24e0 1000      	move.b %d0,%d0
 3449 24e2 0240 00FF 	and.w #255,%d0
 3450 24e6 8041      	or.w %d1,%d0
 3451 24e8 3200      	move.w %d0,%d1
 3452 24ea 202E FFE2 	move.l -30(%fp),%d0
 3453 24ee 2240      	move.l %d0,%a1
 3454 24f0 3341 0008 	move.w %d1,8(%a1)
 3455 24f4 202E FFE2 	move.l -30(%fp),%d0
 3456 24f8 2040      	move.l %d0,%a0
 3457 24fa 3228 0008 	move.w 8(%a0),%d1
 3458 24fe 202E FFE2 	move.l -30(%fp),%d0
 3459 2502 2240      	move.l %d0,%a1
 3460 2504 3029 000A 	move.w 10(%a1),%d0
 3461 2508 EA48      	lsr.w #5,%d0
 3462 250a 0281 0000 	and.l #0xFFFF,%d1
 3462      FFFF 
 3463 2510 82C0      	divu.w %d0,%d1
 3464 2512 2001      	move.l %d1,%d0
 3465 2514 4840      	swap %d0
 3466 2516 4A40      	tst.w %d0
 3467 2518 6706      	jeq .L283
 3468 251a 700D      	moveq #13,%d0
 3469 251c 6000 05B4 	jra .L259
 3470               	.L283:
 3471 2520 7048      	moveq #72,%d0
 3472 2522 D0AE FFE2 	add.l -30(%fp),%d0
 3473 2526 2040      	move.l %d0,%a0
 3474 2528 1010      	move.b (%a0),%d0
 3475 252a 1000      	move.b %d0,%d0
 3476 252c 0280 0000 	and.l #255,%d0
 3476      00FF 
 3477 2532 E188      	lsl.l #8,%d0
 3478 2534 3200      	move.w %d0,%d1
 3479 2536 7047      	moveq #71,%d0
 3480 2538 D0AE FFE2 	add.l -30(%fp),%d0
 3481 253c 2240      	move.l %d0,%a1
 3482 253e 1011      	move.b (%a1),%d0
 3483 2540 1000      	move.b %d0,%d0
 3484 2542 0240 00FF 	and.w #255,%d0
 3485 2546 8041      	or.w %d1,%d0
 3486 2548 3000      	move.w %d0,%d0
68K GAS   			page 65


 3487 254a 0280 0000 	and.l #65535,%d0
 3487      FFFF 
 3488 2550 2D40 FFF2 	move.l %d0,-14(%fp)
 3489 2554 4AAE FFF2 	tst.l -14(%fp)
 3490 2558 6660      	jne .L284
 3491 255a 7057      	moveq #87,%d0
 3492 255c D0AE FFE2 	add.l -30(%fp),%d0
 3493 2560 2040      	move.l %d0,%a0
 3494 2562 1010      	move.b (%a0),%d0
 3495 2564 1000      	move.b %d0,%d0
 3496 2566 0280 0000 	and.l #255,%d0
 3496      00FF 
 3497 256c 2200      	move.l %d0,%d1
 3498 256e 7418      	moveq #24,%d2
 3499 2570 E5A9      	lsl.l %d2,%d1
 3500 2572 7056      	moveq #86,%d0
 3501 2574 D0AE FFE2 	add.l -30(%fp),%d0
 3502 2578 2040      	move.l %d0,%a0
 3503 257a 1010      	move.b (%a0),%d0
 3504 257c 1000      	move.b %d0,%d0
 3505 257e 0280 0000 	and.l #255,%d0
 3505      00FF 
 3506 2584 4840      	swap %d0
 3507 2586 4240      	clr.w %d0
 3508 2588 8280      	or.l %d0,%d1
 3509 258a 7055      	moveq #85,%d0
 3510 258c D0AE FFE2 	add.l -30(%fp),%d0
 3511 2590 2240      	move.l %d0,%a1
 3512 2592 1011      	move.b (%a1),%d0
 3513 2594 1000      	move.b %d0,%d0
 3514 2596 0280 0000 	and.l #255,%d0
 3514      00FF 
 3515 259c E188      	lsl.l #8,%d0
 3516 259e 8280      	or.l %d0,%d1
 3517 25a0 7054      	moveq #84,%d0
 3518 25a2 D0AE FFE2 	add.l -30(%fp),%d0
 3519 25a6 2040      	move.l %d0,%a0
 3520 25a8 1010      	move.b (%a0),%d0
 3521 25aa 1000      	move.b %d0,%d0
 3522 25ac 0280 0000 	and.l #255,%d0
 3522      00FF 
 3523 25b2 2401      	move.l %d1,%d2
 3524 25b4 8480      	or.l %d0,%d2
 3525 25b6 2D42 FFF2 	move.l %d2,-14(%fp)
 3526               	.L284:
 3527 25ba 7043      	moveq #67,%d0
 3528 25bc D0AE FFE2 	add.l -30(%fp),%d0
 3529 25c0 2040      	move.l %d0,%a0
 3530 25c2 1010      	move.b (%a0),%d0
 3531 25c4 1000      	move.b %d0,%d0
 3532 25c6 0280 0000 	and.l #255,%d0
 3532      00FF 
 3533 25cc E188      	lsl.l #8,%d0
 3534 25ce 3200      	move.w %d0,%d1
 3535 25d0 7042      	moveq #66,%d0
 3536 25d2 D0AE FFE2 	add.l -30(%fp),%d0
 3537 25d6 2240      	move.l %d0,%a1
68K GAS   			page 66


 3538 25d8 1011      	move.b (%a1),%d0
 3539 25da 1000      	move.b %d0,%d0
 3540 25dc 0240 00FF 	and.w #255,%d0
 3541 25e0 8041      	or.w %d1,%d0
 3542 25e2 3D40 FFDA 	move.w %d0,-38(%fp)
 3543 25e6 4A6E FFDA 	tst.w -38(%fp)
 3544 25ea 6606      	jne .L285
 3545 25ec 700D      	moveq #13,%d0
 3546 25ee 6000 04E2 	jra .L259
 3547               	.L285:
 3548 25f2 4280      	clr.l %d0
 3549 25f4 302E FFDA 	move.w -38(%fp),%d0
 3550 25f8 2200      	move.l %d0,%d1
 3551 25fa D2AE FFF6 	add.l -10(%fp),%d1
 3552 25fe 202E FFE2 	move.l -30(%fp),%d0
 3553 2602 2240      	move.l %d0,%a1
 3554 2604 3069 0008 	move.w 8(%a1),%a0
 3555 2608 202E FFE2 	move.l -30(%fp),%d0
 3556 260c 2240      	move.l %d0,%a1
 3557 260e 3029 000A 	move.w 10(%a1),%d0
 3558 2612 EA48      	lsr.w #5,%d0
 3559 2614 3408      	move.w %a0,%d2
 3560 2616 0282 0000 	and.l #0xFFFF,%d2
 3560      FFFF 
 3561 261c 84C0      	divu.w %d0,%d2
 3562 261e 2602      	move.l %d2,%d3
 3563 2620 4843      	swap %d3
 3564 2622 3002      	move.w %d2,%d0
 3565 2624 3000      	move.w %d0,%d0
 3566 2626 0280 0000 	and.l #65535,%d0
 3566      FFFF 
 3567 262c 2401      	move.l %d1,%d2
 3568 262e D480      	add.l %d0,%d2
 3569 2630 2D42 FFD6 	move.l %d2,-42(%fp)
 3570 2634 262E FFF2 	move.l -14(%fp),%d3
 3571 2638 B6AE FFD6 	cmp.l -42(%fp),%d3
 3572 263c 6406      	jcc .L286
 3573 263e 700D      	moveq #13,%d0
 3574 2640 6000 0490 	jra .L259
 3575               	.L286:
 3576 2644 202E FFF2 	move.l -14(%fp),%d0
 3577 2648 90AE FFD6 	sub.l -42(%fp),%d0
 3578 264c 222E FFE2 	move.l -30(%fp),%d1
 3579 2650 2041      	move.l %d1,%a0
 3580 2652 1228 0002 	move.b 2(%a0),%d1
 3581 2656 1201      	move.b %d1,%d1
 3582 2658 0281 0000 	and.l #255,%d1
 3582      00FF 
 3583 265e 4C41 0001 	divul.l %d1,%d1:%d0
 3584 2662 2D40 FFD2 	move.l %d0,-46(%fp)
 3585 2666 4AAE FFD2 	tst.l -46(%fp)
 3586 266a 6606      	jne .L287
 3587 266c 700D      	moveq #13,%d0
 3588 266e 6000 0462 	jra .L259
 3589               	.L287:
 3590 2672 1D7C 0001 	move.b #1,-1(%fp)
 3590      FFFF 
68K GAS   			page 67


 3591 2678 0CAE 0000 	cmp.l #4085,-46(%fp)
 3591      0FF5 FFD2 
 3592 2680 6306      	jls .L288
 3593 2682 1D7C 0002 	move.b #2,-1(%fp)
 3593      FFFF 
 3594               	.L288:
 3595 2688 0CAE 0000 	cmp.l #65525,-46(%fp)
 3595      FFF5 FFD2 
 3596 2690 6306      	jls .L289
 3597 2692 1D7C 0003 	move.b #3,-1(%fp)
 3597      FFFF 
 3598               	.L289:
 3599 2698 222E FFD2 	move.l -46(%fp),%d1
 3600 269c 5481      	addq.l #2,%d1
 3601 269e 202E FFE2 	move.l -30(%fp),%d0
 3602 26a2 2240      	move.l %d0,%a1
 3603 26a4 2341 0018 	move.l %d1,24(%a1)
 3604 26a8 202E FFE2 	move.l -30(%fp),%d0
 3605 26ac 2040      	move.l %d0,%a0
 3606 26ae 216E FFFA 	move.l -6(%fp),32(%a0)
 3606      0020 
 3607 26b4 4280      	clr.l %d0
 3608 26b6 302E FFDA 	move.w -38(%fp),%d0
 3609 26ba 2200      	move.l %d0,%d1
 3610 26bc D2AE FFFA 	add.l -6(%fp),%d1
 3611 26c0 202E FFE2 	move.l -30(%fp),%d0
 3612 26c4 2240      	move.l %d0,%a1
 3613 26c6 2341 0024 	move.l %d1,36(%a1)
 3614 26ca 222E FFFA 	move.l -6(%fp),%d1
 3615 26ce D2AE FFD6 	add.l -42(%fp),%d1
 3616 26d2 202E FFE2 	move.l -30(%fp),%d0
 3617 26d6 2040      	move.l %d0,%a0
 3618 26d8 2141 002C 	move.l %d1,44(%a0)
 3619 26dc 0C2E 0003 	cmp.b #3,-1(%fp)
 3619      FFFF 
 3620 26e2 6600 008C 	jne .L290
 3621 26e6 202E FFE2 	move.l -30(%fp),%d0
 3622 26ea 2240      	move.l %d0,%a1
 3623 26ec 3029 0008 	move.w 8(%a1),%d0
 3624 26f0 4A40      	tst.w %d0
 3625 26f2 6706      	jeq .L291
 3626 26f4 700D      	moveq #13,%d0
 3627 26f6 6000 03DA 	jra .L259
 3628               	.L291:
 3629 26fa 7063      	moveq #99,%d0
 3630 26fc D0AE FFE2 	add.l -30(%fp),%d0
 3631 2700 2040      	move.l %d0,%a0
 3632 2702 1010      	move.b (%a0),%d0
 3633 2704 1000      	move.b %d0,%d0
 3634 2706 0280 0000 	and.l #255,%d0
 3634      00FF 
 3635 270c 2200      	move.l %d0,%d1
 3636 270e 7418      	moveq #24,%d2
 3637 2710 E5A9      	lsl.l %d2,%d1
 3638 2712 7062      	moveq #98,%d0
 3639 2714 D0AE FFE2 	add.l -30(%fp),%d0
 3640 2718 2040      	move.l %d0,%a0
68K GAS   			page 68


 3641 271a 1010      	move.b (%a0),%d0
 3642 271c 1000      	move.b %d0,%d0
 3643 271e 0280 0000 	and.l #255,%d0
 3643      00FF 
 3644 2724 4840      	swap %d0
 3645 2726 4240      	clr.w %d0
 3646 2728 8280      	or.l %d0,%d1
 3647 272a 7061      	moveq #97,%d0
 3648 272c D0AE FFE2 	add.l -30(%fp),%d0
 3649 2730 2240      	move.l %d0,%a1
 3650 2732 1011      	move.b (%a1),%d0
 3651 2734 1000      	move.b %d0,%d0
 3652 2736 0280 0000 	and.l #255,%d0
 3652      00FF 
 3653 273c E188      	lsl.l #8,%d0
 3654 273e 8280      	or.l %d0,%d1
 3655 2740 7060      	moveq #96,%d0
 3656 2742 D0AE FFE2 	add.l -30(%fp),%d0
 3657 2746 2040      	move.l %d0,%a0
 3658 2748 1010      	move.b (%a0),%d0
 3659 274a 1000      	move.b %d0,%d0
 3660 274c 0280 0000 	and.l #255,%d0
 3660      00FF 
 3661 2752 8280      	or.l %d0,%d1
 3662 2754 202E FFE2 	move.l -30(%fp),%d0
 3663 2758 2240      	move.l %d0,%a1
 3664 275a 2341 0028 	move.l %d1,40(%a1)
 3665 275e 202E FFE2 	move.l -30(%fp),%d0
 3666 2762 2040      	move.l %d0,%a0
 3667 2764 2028 0018 	move.l 24(%a0),%d0
 3668 2768 E588      	lsl.l #2,%d0
 3669 276a 2D40 FFEE 	move.l %d0,-18(%fp)
 3670 276e 606C      	jra .L292
 3671               	.L290:
 3672 2770 202E FFE2 	move.l -30(%fp),%d0
 3673 2774 2240      	move.l %d0,%a1
 3674 2776 3029 0008 	move.w 8(%a1),%d0
 3675 277a 4A40      	tst.w %d0
 3676 277c 6606      	jne .L293
 3677 277e 700D      	moveq #13,%d0
 3678 2780 6000 0350 	jra .L259
 3679               	.L293:
 3680 2784 202E FFE2 	move.l -30(%fp),%d0
 3681 2788 2040      	move.l %d0,%a0
 3682 278a 2028 0024 	move.l 36(%a0),%d0
 3683 278e 2200      	move.l %d0,%d1
 3684 2790 D2AE FFF6 	add.l -10(%fp),%d1
 3685 2794 202E FFE2 	move.l -30(%fp),%d0
 3686 2798 2240      	move.l %d0,%a1
 3687 279a 2341 0028 	move.l %d1,40(%a1)
 3688 279e 0C2E 0002 	cmp.b #2,-1(%fp)
 3688      FFFF 
 3689 27a4 660E      	jne .L294
 3690 27a6 202E FFE2 	move.l -30(%fp),%d0
 3691 27aa 2040      	move.l %d0,%a0
 3692 27ac 2028 0018 	move.l 24(%a0),%d0
 3693 27b0 D080      	add.l %d0,%d0
68K GAS   			page 69


 3694 27b2 6024      	jra .L295
 3695               	.L294:
 3696 27b4 202E FFE2 	move.l -30(%fp),%d0
 3697 27b8 2240      	move.l %d0,%a1
 3698 27ba 2029 0018 	move.l 24(%a1),%d0
 3699 27be 2200      	move.l %d0,%d1
 3700 27c0 D281      	add.l %d1,%d1
 3701 27c2 D081      	add.l %d1,%d0
 3702 27c4 2200      	move.l %d0,%d1
 3703 27c6 E289      	lsr.l #1,%d1
 3704 27c8 202E FFE2 	move.l -30(%fp),%d0
 3705 27cc 2040      	move.l %d0,%a0
 3706 27ce 2028 0018 	move.l 24(%a0),%d0
 3707 27d2 7401      	moveq #1,%d2
 3708 27d4 C082      	and.l %d2,%d0
 3709 27d6 D081      	add.l %d1,%d0
 3710               	.L295:
 3711 27d8 2D40 FFEE 	move.l %d0,-18(%fp)
 3712               	.L292:
 3713 27dc 202E FFE2 	move.l -30(%fp),%d0
 3714 27e0 2240      	move.l %d0,%a1
 3715 27e2 2069 001C 	move.l 28(%a1),%a0
 3716 27e6 202E FFE2 	move.l -30(%fp),%d0
 3717 27ea 2240      	move.l %d0,%a1
 3718 27ec 3029 000A 	move.w 10(%a1),%d0
 3719 27f0 3000      	move.w %d0,%d0
 3720 27f2 0280 0000 	and.l #65535,%d0
 3720      FFFF 
 3721 27f8 D0AE FFEE 	add.l -18(%fp),%d0
 3722 27fc 5380      	subq.l #1,%d0
 3723 27fe 222E FFE2 	move.l -30(%fp),%d1
 3724 2802 2241      	move.l %d1,%a1
 3725 2804 3229 000A 	move.w 10(%a1),%d1
 3726 2808 3201      	move.w %d1,%d1
 3727 280a 0281 0000 	and.l #65535,%d1
 3727      FFFF 
 3728 2810 4C41 0001 	divul.l %d1,%d1:%d0
 3729 2814 B088      	cmp.l %a0,%d0
 3730 2816 6306      	jls .L296
 3731 2818 700D      	moveq #13,%d0
 3732 281a 6000 02B6 	jra .L259
 3733               	.L296:
 3734 281e 202E FFE2 	move.l -30(%fp),%d0
 3735 2822 72FF      	moveq #-1,%d1
 3736 2824 2040      	move.l %d0,%a0
 3737 2826 2141 0010 	move.l %d1,16(%a0)
 3738 282a 202E FFE2 	move.l -30(%fp),%d0
 3739 282e 2240      	move.l %d0,%a1
 3740 2830 2229 0010 	move.l 16(%a1),%d1
 3741 2834 202E FFE2 	move.l -30(%fp),%d0
 3742 2838 2040      	move.l %d0,%a0
 3743 283a 2141 000C 	move.l %d1,12(%a0)
 3744 283e 202E FFE2 	move.l -30(%fp),%d0
 3745 2842 2240      	move.l %d0,%a1
 3746 2844 137C FF80 	move.b #-128,5(%a1)
 3746      0005 
 3747 284a 0C2E 0003 	cmp.b #3,-1(%fp)
68K GAS   			page 70


 3747      FFFF 
 3748 2850 6600 024C 	jne .L297
 3749 2854 7065      	moveq #101,%d0
 3750 2856 D0AE FFE2 	add.l -30(%fp),%d0
 3751 285a 2040      	move.l %d0,%a0
 3752 285c 1010      	move.b (%a0),%d0
 3753 285e 1000      	move.b %d0,%d0
 3754 2860 0280 0000 	and.l #255,%d0
 3754      00FF 
 3755 2866 E188      	lsl.l #8,%d0
 3756 2868 3200      	move.w %d0,%d1
 3757 286a 7064      	moveq #100,%d0
 3758 286c D0AE FFE2 	add.l -30(%fp),%d0
 3759 2870 2240      	move.l %d0,%a1
 3760 2872 1011      	move.b (%a1),%d0
 3761 2874 1000      	move.b %d0,%d0
 3762 2876 0240 00FF 	and.w #255,%d0
 3763 287a 8041      	or.w %d1,%d0
 3764 287c 0C40 0001 	cmp.w #1,%d0
 3765 2880 6600 021C 	jne .L297
 3766 2884 202E FFFA 	move.l -6(%fp),%d0
 3767 2888 5280      	addq.l #1,%d0
 3768 288a 2F00      	move.l %d0,-(%sp)
 3769 288c 2F2E FFE2 	move.l -30(%fp),-(%sp)
 3770 2890 4EBA D968 	jsr move_window
 3771 2894 508F      	addq.l #8,%sp
 3772 2896 4A80      	tst.l %d0
 3773 2898 6600 0204 	jne .L297
 3774 289c 202E FFE2 	move.l -30(%fp),%d0
 3775 28a0 2040      	move.l %d0,%a0
 3776 28a2 4228 0005 	clr.b 5(%a0)
 3777 28a6 202E FFE2 	move.l -30(%fp),%d0
 3778 28aa 0680 0000 	add.l #563,%d0
 3778      0233 
 3779 28b0 2240      	move.l %d0,%a1
 3780 28b2 1011      	move.b (%a1),%d0
 3781 28b4 1000      	move.b %d0,%d0
 3782 28b6 0280 0000 	and.l #255,%d0
 3782      00FF 
 3783 28bc E188      	lsl.l #8,%d0
 3784 28be 3200      	move.w %d0,%d1
 3785 28c0 202E FFE2 	move.l -30(%fp),%d0
 3786 28c4 0680 0000 	add.l #562,%d0
 3786      0232 
 3787 28ca 2040      	move.l %d0,%a0
 3788 28cc 1010      	move.b (%a0),%d0
 3789 28ce 1000      	move.b %d0,%d0
 3790 28d0 0240 00FF 	and.w #255,%d0
 3791 28d4 8041      	or.w %d1,%d0
 3792 28d6 0C40 AA55 	cmp.w #-21931,%d0
 3793 28da 6600 01C2 	jne .L297
 3794 28de 7037      	moveq #55,%d0
 3795 28e0 D0AE FFE2 	add.l -30(%fp),%d0
 3796 28e4 2240      	move.l %d0,%a1
 3797 28e6 1011      	move.b (%a1),%d0
 3798 28e8 1000      	move.b %d0,%d0
 3799 28ea 0280 0000 	and.l #255,%d0
68K GAS   			page 71


 3799      00FF 
 3800 28f0 2200      	move.l %d0,%d1
 3801 28f2 7418      	moveq #24,%d2
 3802 28f4 E5A9      	lsl.l %d2,%d1
 3803 28f6 7036      	moveq #54,%d0
 3804 28f8 D0AE FFE2 	add.l -30(%fp),%d0
 3805 28fc 2040      	move.l %d0,%a0
 3806 28fe 1010      	move.b (%a0),%d0
 3807 2900 1000      	move.b %d0,%d0
 3808 2902 0280 0000 	and.l #255,%d0
 3808      00FF 
 3809 2908 4840      	swap %d0
 3810 290a 4240      	clr.w %d0
 3811 290c 8280      	or.l %d0,%d1
 3812 290e 7035      	moveq #53,%d0
 3813 2910 D0AE FFE2 	add.l -30(%fp),%d0
 3814 2914 2240      	move.l %d0,%a1
 3815 2916 1011      	move.b (%a1),%d0
 3816 2918 1000      	move.b %d0,%d0
 3817 291a 0280 0000 	and.l #255,%d0
 3817      00FF 
 3818 2920 E188      	lsl.l #8,%d0
 3819 2922 8280      	or.l %d0,%d1
 3820 2924 202E FFE2 	move.l -30(%fp),%d0
 3821 2928 2040      	move.l %d0,%a0
 3822 292a 1028 0034 	move.b 52(%a0),%d0
 3823 292e 1000      	move.b %d0,%d0
 3824 2930 0280 0000 	and.l #255,%d0
 3824      00FF 
 3825 2936 8081      	or.l %d1,%d0
 3826 2938 0C80 4161 	cmp.l #1096897106,%d0
 3826      5252 
 3827 293e 6600 015E 	jne .L297
 3828 2942 202E FFE2 	move.l -30(%fp),%d0
 3829 2946 0680 0000 	add.l #539,%d0
 3829      021B 
 3830 294c 2240      	move.l %d0,%a1
 3831 294e 1011      	move.b (%a1),%d0
 3832 2950 1000      	move.b %d0,%d0
 3833 2952 0280 0000 	and.l #255,%d0
 3833      00FF 
 3834 2958 2200      	move.l %d0,%d1
 3835 295a 7418      	moveq #24,%d2
 3836 295c E5A9      	lsl.l %d2,%d1
 3837 295e 202E FFE2 	move.l -30(%fp),%d0
 3838 2962 0680 0000 	add.l #538,%d0
 3838      021A 
 3839 2968 2040      	move.l %d0,%a0
 3840 296a 1010      	move.b (%a0),%d0
 3841 296c 1000      	move.b %d0,%d0
 3842 296e 0280 0000 	and.l #255,%d0
 3842      00FF 
 3843 2974 4840      	swap %d0
 3844 2976 4240      	clr.w %d0
 3845 2978 8280      	or.l %d0,%d1
 3846 297a 202E FFE2 	move.l -30(%fp),%d0
 3847 297e 0680 0000 	add.l #537,%d0
68K GAS   			page 72


 3847      0219 
 3848 2984 2240      	move.l %d0,%a1
 3849 2986 1011      	move.b (%a1),%d0
 3850 2988 1000      	move.b %d0,%d0
 3851 298a 0280 0000 	and.l #255,%d0
 3851      00FF 
 3852 2990 E188      	lsl.l #8,%d0
 3853 2992 8280      	or.l %d0,%d1
 3854 2994 202E FFE2 	move.l -30(%fp),%d0
 3855 2998 0680 0000 	add.l #536,%d0
 3855      0218 
 3856 299e 2040      	move.l %d0,%a0
 3857 29a0 1010      	move.b (%a0),%d0
 3858 29a2 1000      	move.b %d0,%d0
 3859 29a4 0280 0000 	and.l #255,%d0
 3859      00FF 
 3860 29aa 8081      	or.l %d1,%d0
 3861 29ac 0C80 6141 	cmp.l #1631679090,%d0
 3861      7272 
 3862 29b2 6600 00EA 	jne .L297
 3863 29b6 202E FFE2 	move.l -30(%fp),%d0
 3864 29ba 0680 0000 	add.l #543,%d0
 3864      021F 
 3865 29c0 2240      	move.l %d0,%a1
 3866 29c2 1011      	move.b (%a1),%d0
 3867 29c4 1000      	move.b %d0,%d0
 3868 29c6 0280 0000 	and.l #255,%d0
 3868      00FF 
 3869 29cc 2200      	move.l %d0,%d1
 3870 29ce 7418      	moveq #24,%d2
 3871 29d0 E5A9      	lsl.l %d2,%d1
 3872 29d2 202E FFE2 	move.l -30(%fp),%d0
 3873 29d6 0680 0000 	add.l #542,%d0
 3873      021E 
 3874 29dc 2040      	move.l %d0,%a0
 3875 29de 1010      	move.b (%a0),%d0
 3876 29e0 1000      	move.b %d0,%d0
 3877 29e2 0280 0000 	and.l #255,%d0
 3877      00FF 
 3878 29e8 4840      	swap %d0
 3879 29ea 4240      	clr.w %d0
 3880 29ec 8280      	or.l %d0,%d1
 3881 29ee 202E FFE2 	move.l -30(%fp),%d0
 3882 29f2 0680 0000 	add.l #541,%d0
 3882      021D 
 3883 29f8 2240      	move.l %d0,%a1
 3884 29fa 1011      	move.b (%a1),%d0
 3885 29fc 1000      	move.b %d0,%d0
 3886 29fe 0280 0000 	and.l #255,%d0
 3886      00FF 
 3887 2a04 E188      	lsl.l #8,%d0
 3888 2a06 8280      	or.l %d0,%d1
 3889 2a08 202E FFE2 	move.l -30(%fp),%d0
 3890 2a0c 0680 0000 	add.l #540,%d0
 3890      021C 
 3891 2a12 2040      	move.l %d0,%a0
 3892 2a14 1010      	move.b (%a0),%d0
68K GAS   			page 73


 3893 2a16 1000      	move.b %d0,%d0
 3894 2a18 0280 0000 	and.l #255,%d0
 3894      00FF 
 3895 2a1e 8280      	or.l %d0,%d1
 3896 2a20 202E FFE2 	move.l -30(%fp),%d0
 3897 2a24 2240      	move.l %d0,%a1
 3898 2a26 2341 0010 	move.l %d1,16(%a1)
 3899 2a2a 202E FFE2 	move.l -30(%fp),%d0
 3900 2a2e 0680 0000 	add.l #547,%d0
 3900      0223 
 3901 2a34 2040      	move.l %d0,%a0
 3902 2a36 1010      	move.b (%a0),%d0
 3903 2a38 1000      	move.b %d0,%d0
 3904 2a3a 0280 0000 	and.l #255,%d0
 3904      00FF 
 3905 2a40 2200      	move.l %d0,%d1
 3906 2a42 7418      	moveq #24,%d2
 3907 2a44 E5A9      	lsl.l %d2,%d1
 3908 2a46 202E FFE2 	move.l -30(%fp),%d0
 3909 2a4a 0680 0000 	add.l #546,%d0
 3909      0222 
 3910 2a50 2040      	move.l %d0,%a0
 3911 2a52 1010      	move.b (%a0),%d0
 3912 2a54 1000      	move.b %d0,%d0
 3913 2a56 0280 0000 	and.l #255,%d0
 3913      00FF 
 3914 2a5c 4840      	swap %d0
 3915 2a5e 4240      	clr.w %d0
 3916 2a60 8280      	or.l %d0,%d1
 3917 2a62 202E FFE2 	move.l -30(%fp),%d0
 3918 2a66 0680 0000 	add.l #545,%d0
 3918      0221 
 3919 2a6c 2240      	move.l %d0,%a1
 3920 2a6e 1011      	move.b (%a1),%d0
 3921 2a70 1000      	move.b %d0,%d0
 3922 2a72 0280 0000 	and.l #255,%d0
 3922      00FF 
 3923 2a78 E188      	lsl.l #8,%d0
 3924 2a7a 8280      	or.l %d0,%d1
 3925 2a7c 202E FFE2 	move.l -30(%fp),%d0
 3926 2a80 0680 0000 	add.l #544,%d0
 3926      0220 
 3927 2a86 2040      	move.l %d0,%a0
 3928 2a88 1010      	move.b (%a0),%d0
 3929 2a8a 1000      	move.b %d0,%d0
 3930 2a8c 0280 0000 	and.l #255,%d0
 3930      00FF 
 3931 2a92 8280      	or.l %d0,%d1
 3932 2a94 202E FFE2 	move.l -30(%fp),%d0
 3933 2a98 2240      	move.l %d0,%a1
 3934 2a9a 2341 000C 	move.l %d1,12(%a1)
 3935               	.L297:
 3936 2a9e 202E FFE2 	move.l -30(%fp),%d0
 3937 2aa2 2040      	move.l %d0,%a0
 3938 2aa4 10AE FFFF 	move.b -1(%fp),(%a0)
 3939 2aa8 3039 0000 	move.w Fsid,%d0
 3939      0000 
68K GAS   			page 74


 3940 2aae 5240      	addq.w #1,%d0
 3941 2ab0 33C0 0000 	move.w %d0,Fsid
 3941      0000 
 3942 2ab6 3239 0000 	move.w Fsid,%d1
 3942      0000 
 3943 2abc 202E FFE2 	move.l -30(%fp),%d0
 3944 2ac0 2240      	move.l %d0,%a1
 3945 2ac2 3341 0006 	move.w %d1,6(%a1)
 3946 2ac6 202E FFE2 	move.l -30(%fp),%d0
 3947 2aca 2040      	move.l %d0,%a0
 3948 2acc 42A8 0014 	clr.l 20(%a0)
 3949 2ad0 4280      	clr.l %d0
 3950               	.L259:
 3951 2ad2 242E FFB4 	move.l -76(%fp),%d2
 3952 2ad6 262E FFB8 	move.l -72(%fp),%d3
 3953 2ada 4E5E      	unlk %fp
 3954 2adc 4E75      	rts
 3956               	.align2
 3958               	validate:
 3959 2ade 4E56 FFFC 	link.w %fp,#-4
 3960 2ae2 2D6E 0008 	move.l 8(%fp),-4(%fp)
 3960      FFFC 
 3961 2ae8 4AAE FFFC 	tst.l -4(%fp)
 3962 2aec 6738      	jeq .L299
 3963 2aee 202E FFFC 	move.l -4(%fp),%d0
 3964 2af2 2040      	move.l %d0,%a0
 3965 2af4 2010      	move.l (%a0),%d0
 3966 2af6 4A80      	tst.l %d0
 3967 2af8 672C      	jeq .L299
 3968 2afa 202E FFFC 	move.l -4(%fp),%d0
 3969 2afe 2040      	move.l %d0,%a0
 3970 2b00 2010      	move.l (%a0),%d0
 3971 2b02 2040      	move.l %d0,%a0
 3972 2b04 1010      	move.b (%a0),%d0
 3973 2b06 4A00      	tst.b %d0
 3974 2b08 671C      	jeq .L299
 3975 2b0a 202E FFFC 	move.l -4(%fp),%d0
 3976 2b0e 2040      	move.l %d0,%a0
 3977 2b10 2010      	move.l (%a0),%d0
 3978 2b12 2040      	move.l %d0,%a0
 3979 2b14 3228 0006 	move.w 6(%a0),%d1
 3980 2b18 202E FFFC 	move.l -4(%fp),%d0
 3981 2b1c 2040      	move.l %d0,%a0
 3982 2b1e 3028 0004 	move.w 4(%a0),%d0
 3983 2b22 B041      	cmp.w %d1,%d0
 3984 2b24 6704      	jeq .L300
 3985               	.L299:
 3986 2b26 7009      	moveq #9,%d0
 3987 2b28 6038      	jra .L301
 3988               	.L300:
 3989 2b2a 202E FFFC 	move.l -4(%fp),%d0
 3990 2b2e 2040      	move.l %d0,%a0
 3991 2b30 2010      	move.l (%a0),%d0
 3992 2b32 2040      	move.l %d0,%a0
 3993 2b34 1028 0001 	move.b 1(%a0),%d0
 3994 2b38 1000      	move.b %d0,%d0
 3995 2b3a 0280 0000 	and.l #255,%d0
68K GAS   			page 75


 3995      00FF 
 3996 2b40 2F00      	move.l %d0,-(%sp)
 3997 2b42 4EB9 0000 	jsr disk_status
 3997      0000 
 3998 2b48 588F      	addq.l #4,%sp
 3999 2b4a 1000      	move.b %d0,%d0
 4000 2b4c 0280 0000 	and.l #255,%d0
 4000      00FF 
 4001 2b52 7201      	moveq #1,%d1
 4002 2b54 C081      	and.l %d1,%d0
 4003 2b56 1000      	move.b %d0,%d0
 4004 2b58 4A00      	tst.b %d0
 4005 2b5a 6704      	jeq .L302
 4006 2b5c 7003      	moveq #3,%d0
 4007 2b5e 6002      	jra .L301
 4008               	.L302:
 4009 2b60 4280      	clr.l %d0
 4010               	.L301:
 4011 2b62 4E5E      	unlk %fp
 4012 2b64 4E75      	rts
 4014               	.align2
 4015               	.globlf_mount
 4017               	f_mount:
 4018 2b66 4E56 FFEC 	link.w %fp,#-20
 4019 2b6a 202E 0010 	move.l 16(%fp),%d0
 4020 2b6e 1D40 FFEE 	move.b %d0,-18(%fp)
 4021 2b72 202E 000C 	move.l 12(%fp),%d0
 4022 2b76 2D40 FFF0 	move.l %d0,-16(%fp)
 4023 2b7a 70F0      	moveq #-16,%d0
 4024 2b7c D08E      	add.l %fp,%d0
 4025 2b7e 2F00      	move.l %d0,-(%sp)
 4026 2b80 4EBA F208 	jsr get_ldnumber
 4027 2b84 588F      	addq.l #4,%sp
 4028 2b86 2D40 FFFC 	move.l %d0,-4(%fp)
 4029 2b8a 4AAE FFFC 	tst.l -4(%fp)
 4030 2b8e 6C04      	jge .L304
 4031 2b90 700B      	moveq #11,%d0
 4032 2b92 606E      	jra .L305
 4033               	.L304:
 4034 2b94 202E FFFC 	move.l -4(%fp),%d0
 4035 2b98 2D70 0DB0 	move.l FatFs(%d0.l*4),-8(%fp)
 4035      0000 0000 
 4035      FFF8 
 4036 2ba2 4AAE FFF8 	tst.l -8(%fp)
 4037 2ba6 6708      	jeq .L306
 4038 2ba8 202E FFF8 	move.l -8(%fp),%d0
 4039 2bac 2040      	move.l %d0,%a0
 4040 2bae 4210      	clr.b (%a0)
 4041               	.L306:
 4042 2bb0 202E 0008 	move.l 8(%fp),%d0
 4043 2bb4 4A80      	tst.l %d0
 4044 2bb6 6708      	jeq .L307
 4045 2bb8 202E 0008 	move.l 8(%fp),%d0
 4046 2bbc 2040      	move.l %d0,%a0
 4047 2bbe 4210      	clr.b (%a0)
 4048               	.L307:
 4049 2bc0 222E 0008 	move.l 8(%fp),%d1
68K GAS   			page 76


 4050 2bc4 202E FFFC 	move.l -4(%fp),%d0
 4051 2bc8 2181 0DB0 	move.l %d1,FatFs(%d0.l*4)
 4051      0000 0000 
 4052 2bd0 202E 0008 	move.l 8(%fp),%d0
 4053 2bd4 4A80      	tst.l %d0
 4054 2bd6 6708      	jeq .L308
 4055 2bd8 0C2E 0001 	cmp.b #1,-18(%fp)
 4055      FFEE 
 4056 2bde 6704      	jeq .L309
 4057               	.L308:
 4058 2be0 4280      	clr.l %d0
 4059 2be2 601E      	jra .L305
 4060               	.L309:
 4061 2be4 42A7      	clr.l -(%sp)
 4062 2be6 700C      	moveq #12,%d0
 4063 2be8 D08E      	add.l %fp,%d0
 4064 2bea 2F00      	move.l %d0,-(%sp)
 4065 2bec 200E      	move.l %fp,%d0
 4066 2bee 5080      	addq.l #8,%d0
 4067 2bf0 2F00      	move.l %d0,-(%sp)
 4068 2bf2 4EBA F45C 	jsr find_volume
 4069 2bf6 4FEF 000C 	lea (12,%sp),%sp
 4070 2bfa 2D40 FFF4 	move.l %d0,-12(%fp)
 4071 2bfe 202E FFF4 	move.l -12(%fp),%d0
 4072               	.L305:
 4073 2c02 4E5E      	unlk %fp
 4074 2c04 4E75      	rts
 4076               	.align2
 4077               	.globlf_open
 4079               	f_open:
 4080 2c06 4E56 FFC4 	link.w %fp,#-60
 4081 2c0a 2F02      	move.l %d2,-(%sp)
 4082 2c0c 202E 0010 	move.l 16(%fp),%d0
 4083 2c10 1D40 FFC6 	move.b %d0,-58(%fp)
 4084 2c14 4AAE 0008 	tst.l 8(%fp)
 4085 2c18 6606      	jne .L311
 4086 2c1a 7009      	moveq #9,%d0
 4087 2c1c 6000 0372 	jra .L312
 4088               	.L311:
 4089 2c20 202E 0008 	move.l 8(%fp),%d0
 4090 2c24 2040      	move.l %d0,%a0
 4091 2c26 4290      	clr.l (%a0)
 4092 2c28 022E 001F 	and.b #31,-58(%fp)
 4092      FFC6 
 4093 2c2e 4280      	clr.l %d0
 4094 2c30 102E FFC6 	move.b -58(%fp),%d0
 4095 2c34 7201      	moveq #1,%d1
 4096 2c36 4601      	not.b %d1
 4097 2c38 C081      	and.l %d1,%d0
 4098 2c3a 2F00      	move.l %d0,-(%sp)
 4099 2c3c 700C      	moveq #12,%d0
 4100 2c3e D08E      	add.l %fp,%d0
 4101 2c40 2F00      	move.l %d0,-(%sp)
 4102 2c42 70D4      	moveq #-44,%d0
 4103 2c44 D08E      	add.l %fp,%d0
 4104 2c46 2F00      	move.l %d0,-(%sp)
 4105 2c48 4EBA F406 	jsr find_volume
68K GAS   			page 77


 4106 2c4c 4FEF 000C 	lea (12,%sp),%sp
 4107 2c50 2D40 FFFC 	move.l %d0,-4(%fp)
 4108 2c54 4AAE FFFC 	tst.l -4(%fp)
 4109 2c58 6600 0332 	jne .L313
 4110 2c5c 41EE FFC8 	lea (-56,%fp),%a0
 4111 2c60 2D48 FFEC 	move.l %a0,-20(%fp)
 4112 2c64 202E 000C 	move.l 12(%fp),%d0
 4113 2c68 2F00      	move.l %d0,-(%sp)
 4114 2c6a 70D4      	moveq #-44,%d0
 4115 2c6c D08E      	add.l %fp,%d0
 4116 2c6e 2F00      	move.l %d0,-(%sp)
 4117 2c70 4EBA EF86 	jsr follow_path
 4118 2c74 508F      	addq.l #8,%sp
 4119 2c76 2D40 FFFC 	move.l %d0,-4(%fp)
 4120 2c7a 2D6E FFE8 	move.l -24(%fp),-8(%fp)
 4120      FFF8 
 4121 2c80 4AAE FFFC 	tst.l -4(%fp)
 4122 2c84 660C      	jne .L314
 4123 2c86 4AAE FFF8 	tst.l -8(%fp)
 4124 2c8a 6606      	jne .L314
 4125 2c8c 7006      	moveq #6,%d0
 4126 2c8e 2D40 FFFC 	move.l %d0,-4(%fp)
 4127               	.L314:
 4128 2c92 4280      	clr.l %d0
 4129 2c94 102E FFC6 	move.b -58(%fp),%d0
 4130 2c98 721C      	moveq #28,%d1
 4131 2c9a C081      	and.l %d1,%d0
 4132 2c9c 4A80      	tst.l %d0
 4133 2c9e 6700 0184 	jeq .L315
 4134 2ca2 4AAE FFFC 	tst.l -4(%fp)
 4135 2ca6 6726      	jeq .L316
 4136 2ca8 7404      	moveq #4,%d2
 4137 2caa B4AE FFFC 	cmp.l -4(%fp),%d2
 4138 2cae 6610      	jne .L317
 4139 2cb0 70D4      	moveq #-44,%d0
 4140 2cb2 D08E      	add.l %fp,%d0
 4141 2cb4 2F00      	move.l %d0,-(%sp)
 4142 2cb6 4EBA E992 	jsr dir_register
 4143 2cba 588F      	addq.l #4,%sp
 4144 2cbc 2D40 FFFC 	move.l %d0,-4(%fp)
 4145               	.L317:
 4146 2cc0 002E 0008 	or.b #8,-58(%fp)
 4146      FFC6 
 4147 2cc6 2D6E FFE8 	move.l -24(%fp),-8(%fp)
 4147      FFF8 
 4148 2ccc 6036      	jra .L318
 4149               	.L316:
 4150 2cce 700B      	moveq #11,%d0
 4151 2cd0 D0AE FFF8 	add.l -8(%fp),%d0
 4152 2cd4 2040      	move.l %d0,%a0
 4153 2cd6 1010      	move.b (%a0),%d0
 4154 2cd8 1000      	move.b %d0,%d0
 4155 2cda 0280 0000 	and.l #255,%d0
 4155      00FF 
 4156 2ce0 7211      	moveq #17,%d1
 4157 2ce2 C081      	and.l %d1,%d0
 4158 2ce4 4A80      	tst.l %d0
68K GAS   			page 78


 4159 2ce6 6708      	jeq .L319
 4160 2ce8 7407      	moveq #7,%d2
 4161 2cea 2D42 FFFC 	move.l %d2,-4(%fp)
 4162 2cee 6014      	jra .L318
 4163               	.L319:
 4164 2cf0 4280      	clr.l %d0
 4165 2cf2 102E FFC6 	move.b -58(%fp),%d0
 4166 2cf6 7204      	moveq #4,%d1
 4167 2cf8 C081      	and.l %d1,%d0
 4168 2cfa 4A80      	tst.l %d0
 4169 2cfc 6706      	jeq .L318
 4170 2cfe 7408      	moveq #8,%d2
 4171 2d00 2D42 FFFC 	move.l %d2,-4(%fp)
 4172               	.L318:
 4173 2d04 4AAE FFFC 	tst.l -4(%fp)
 4174 2d08 6600 0172 	jne .L320
 4175 2d0c 4280      	clr.l %d0
 4176 2d0e 102E FFC6 	move.b -58(%fp),%d0
 4177 2d12 7208      	moveq #8,%d1
 4178 2d14 C081      	and.l %d1,%d0
 4179 2d16 4A80      	tst.l %d0
 4180 2d18 6700 0162 	jeq .L320
 4181 2d1c 4EB9 0000 	jsr get_fattime
 4181      0000 
 4182 2d22 2D40 FFF4 	move.l %d0,-12(%fp)
 4183 2d26 700E      	moveq #14,%d0
 4184 2d28 D0AE FFF8 	add.l -8(%fp),%d0
 4185 2d2c 222E FFF4 	move.l -12(%fp),%d1
 4186 2d30 1201      	move.b %d1,%d1
 4187 2d32 2040      	move.l %d0,%a0
 4188 2d34 1081      	move.b %d1,(%a0)
 4189 2d36 700F      	moveq #15,%d0
 4190 2d38 D0AE FFF8 	add.l -8(%fp),%d0
 4191 2d3c 222E FFF4 	move.l -12(%fp),%d1
 4192 2d40 3201      	move.w %d1,%d1
 4193 2d42 E049      	lsr.w #8,%d1
 4194 2d44 1201      	move.b %d1,%d1
 4195 2d46 2040      	move.l %d0,%a0
 4196 2d48 1081      	move.b %d1,(%a0)
 4197 2d4a 7010      	moveq #16,%d0
 4198 2d4c D0AE FFF8 	add.l -8(%fp),%d0
 4199 2d50 222E FFF4 	move.l -12(%fp),%d1
 4200 2d54 4241      	clr.w %d1
 4201 2d56 4841      	swap %d1
 4202 2d58 1201      	move.b %d1,%d1
 4203 2d5a 2040      	move.l %d0,%a0
 4204 2d5c 1081      	move.b %d1,(%a0)
 4205 2d5e 7011      	moveq #17,%d0
 4206 2d60 D0AE FFF8 	add.l -8(%fp),%d0
 4207 2d64 222E FFF4 	move.l -12(%fp),%d1
 4208 2d68 7418      	moveq #24,%d2
 4209 2d6a E4A9      	lsr.l %d2,%d1
 4210 2d6c 1201      	move.b %d1,%d1
 4211 2d6e 2040      	move.l %d0,%a0
 4212 2d70 1081      	move.b %d1,(%a0)
 4213 2d72 700B      	moveq #11,%d0
 4214 2d74 D0AE FFF8 	add.l -8(%fp),%d0
68K GAS   			page 79


 4215 2d78 2040      	move.l %d0,%a0
 4216 2d7a 4210      	clr.b (%a0)
 4217 2d7c 701C      	moveq #28,%d0
 4218 2d7e D0AE FFF8 	add.l -8(%fp),%d0
 4219 2d82 2040      	move.l %d0,%a0
 4220 2d84 4210      	clr.b (%a0)
 4221 2d86 701D      	moveq #29,%d0
 4222 2d88 D0AE FFF8 	add.l -8(%fp),%d0
 4223 2d8c 2040      	move.l %d0,%a0
 4224 2d8e 4210      	clr.b (%a0)
 4225 2d90 701E      	moveq #30,%d0
 4226 2d92 D0AE FFF8 	add.l -8(%fp),%d0
 4227 2d96 2040      	move.l %d0,%a0
 4228 2d98 4210      	clr.b (%a0)
 4229 2d9a 701F      	moveq #31,%d0
 4230 2d9c D0AE FFF8 	add.l -8(%fp),%d0
 4231 2da0 2040      	move.l %d0,%a0
 4232 2da2 4210      	clr.b (%a0)
 4233 2da4 202E FFD4 	move.l -44(%fp),%d0
 4234 2da8 2F2E FFF8 	move.l -8(%fp),-(%sp)
 4235 2dac 2F00      	move.l %d0,-(%sp)
 4236 2dae 4EBA E614 	jsr ld_clust
 4237 2db2 508F      	addq.l #8,%sp
 4238 2db4 2D40 FFF0 	move.l %d0,-16(%fp)
 4239 2db8 42A7      	clr.l -(%sp)
 4240 2dba 2F2E FFF8 	move.l -8(%fp),-(%sp)
 4241 2dbe 4EBA E68A 	jsr st_clust
 4242 2dc2 508F      	addq.l #8,%sp
 4243 2dc4 202E FFD4 	move.l -44(%fp),%d0
 4244 2dc8 2040      	move.l %d0,%a0
 4245 2dca 117C 0001 	move.b #1,4(%a0)
 4245      0004 
 4246 2dd0 4AAE FFF0 	tst.l -16(%fp)
 4247 2dd4 6700 00A6 	jeq .L320
 4248 2dd8 202E FFD4 	move.l -44(%fp),%d0
 4249 2ddc 2040      	move.l %d0,%a0
 4250 2dde 2D68 0030 	move.l 48(%a0),-12(%fp)
 4250      FFF4 
 4251 2de4 202E FFD4 	move.l -44(%fp),%d0
 4252 2de8 2F2E FFF0 	move.l -16(%fp),-(%sp)
 4253 2dec 2F00      	move.l %d0,-(%sp)
 4254 2dee 4EBA DDA4 	jsr remove_chain
 4255 2df2 508F      	addq.l #8,%sp
 4256 2df4 2D40 FFFC 	move.l %d0,-4(%fp)
 4257 2df8 4AAE FFFC 	tst.l -4(%fp)
 4258 2dfc 667E      	jne .L320
 4259 2dfe 202E FFD4 	move.l -44(%fp),%d0
 4260 2e02 222E FFF0 	move.l -16(%fp),%d1
 4261 2e06 5381      	subq.l #1,%d1
 4262 2e08 2040      	move.l %d0,%a0
 4263 2e0a 2141 000C 	move.l %d1,12(%a0)
 4264 2e0e 202E FFD4 	move.l -44(%fp),%d0
 4265 2e12 2F2E FFF4 	move.l -12(%fp),-(%sp)
 4266 2e16 2F00      	move.l %d0,-(%sp)
 4267 2e18 4EBA D3E0 	jsr move_window
 4268 2e1c 508F      	addq.l #8,%sp
 4269 2e1e 2D40 FFFC 	move.l %d0,-4(%fp)
68K GAS   			page 80


 4270 2e22 6058      	jra .L320
 4271               	.L315:
 4272 2e24 4AAE FFFC 	tst.l -4(%fp)
 4273 2e28 6652      	jne .L320
 4274 2e2a 700B      	moveq #11,%d0
 4275 2e2c D0AE FFF8 	add.l -8(%fp),%d0
 4276 2e30 2040      	move.l %d0,%a0
 4277 2e32 1010      	move.b (%a0),%d0
 4278 2e34 1000      	move.b %d0,%d0
 4279 2e36 0280 0000 	and.l #255,%d0
 4279      00FF 
 4280 2e3c 7210      	moveq #16,%d1
 4281 2e3e C081      	and.l %d1,%d0
 4282 2e40 4A80      	tst.l %d0
 4283 2e42 6708      	jeq .L321
 4284 2e44 7404      	moveq #4,%d2
 4285 2e46 2D42 FFFC 	move.l %d2,-4(%fp)
 4286 2e4a 6030      	jra .L320
 4287               	.L321:
 4288 2e4c 4280      	clr.l %d0
 4289 2e4e 102E FFC6 	move.b -58(%fp),%d0
 4290 2e52 7202      	moveq #2,%d1
 4291 2e54 C081      	and.l %d1,%d0
 4292 2e56 4A80      	tst.l %d0
 4293 2e58 6722      	jeq .L320
 4294 2e5a 700B      	moveq #11,%d0
 4295 2e5c D0AE FFF8 	add.l -8(%fp),%d0
 4296 2e60 2040      	move.l %d0,%a0
 4297 2e62 1010      	move.b (%a0),%d0
 4298 2e64 1000      	move.b %d0,%d0
 4299 2e66 0280 0000 	and.l #255,%d0
 4299      00FF 
 4300 2e6c 7201      	moveq #1,%d1
 4301 2e6e C081      	and.l %d1,%d0
 4302 2e70 1000      	move.b %d0,%d0
 4303 2e72 4A00      	tst.b %d0
 4304 2e74 6706      	jeq .L320
 4305 2e76 7407      	moveq #7,%d2
 4306 2e78 2D42 FFFC 	move.l %d2,-4(%fp)
 4307               	.L320:
 4308 2e7c 4AAE FFFC 	tst.l -4(%fp)
 4309 2e80 6634      	jne .L322
 4310 2e82 4280      	clr.l %d0
 4311 2e84 102E FFC6 	move.b -58(%fp),%d0
 4312 2e88 7208      	moveq #8,%d1
 4313 2e8a C081      	and.l %d1,%d0
 4314 2e8c 4A80      	tst.l %d0
 4315 2e8e 6706      	jeq .L323
 4316 2e90 002E 0020 	or.b #32,-58(%fp)
 4316      FFC6 
 4317               	.L323:
 4318 2e96 202E FFD4 	move.l -44(%fp),%d0
 4319 2e9a 2040      	move.l %d0,%a0
 4320 2e9c 2228 0030 	move.l 48(%a0),%d1
 4321 2ea0 202E 0008 	move.l 8(%fp),%d0
 4322 2ea4 2040      	move.l %d0,%a0
 4323 2ea6 2141 001C 	move.l %d1,28(%a0)
68K GAS   			page 81


 4324 2eaa 202E 0008 	move.l 8(%fp),%d0
 4325 2eae 2040      	move.l %d0,%a0
 4326 2eb0 216E FFF8 	move.l -8(%fp),32(%a0)
 4326      0020 
 4327               	.L322:
 4328 2eb6 4AAE FFFC 	tst.l -4(%fp)
 4329 2eba 6600 00D0 	jne .L313
 4330 2ebe 202E 0008 	move.l 8(%fp),%d0
 4331 2ec2 2040      	move.l %d0,%a0
 4332 2ec4 116E FFC6 	move.b -58(%fp),6(%a0)
 4332      0006 
 4333 2eca 202E 0008 	move.l 8(%fp),%d0
 4334 2ece 2040      	move.l %d0,%a0
 4335 2ed0 4228 0007 	clr.b 7(%a0)
 4336 2ed4 202E FFD4 	move.l -44(%fp),%d0
 4337 2ed8 2F2E FFF8 	move.l -8(%fp),-(%sp)
 4338 2edc 2F00      	move.l %d0,-(%sp)
 4339 2ede 4EBA E4E4 	jsr ld_clust
 4340 2ee2 508F      	addq.l #8,%sp
 4341 2ee4 2200      	move.l %d0,%d1
 4342 2ee6 202E 0008 	move.l 8(%fp),%d0
 4343 2eea 2040      	move.l %d0,%a0
 4344 2eec 2141 0010 	move.l %d1,16(%a0)
 4345 2ef0 701F      	moveq #31,%d0
 4346 2ef2 D0AE FFF8 	add.l -8(%fp),%d0
 4347 2ef6 2040      	move.l %d0,%a0
 4348 2ef8 1010      	move.b (%a0),%d0
 4349 2efa 1000      	move.b %d0,%d0
 4350 2efc 0280 0000 	and.l #255,%d0
 4350      00FF 
 4351 2f02 2200      	move.l %d0,%d1
 4352 2f04 7418      	moveq #24,%d2
 4353 2f06 E5A9      	lsl.l %d2,%d1
 4354 2f08 701E      	moveq #30,%d0
 4355 2f0a D0AE FFF8 	add.l -8(%fp),%d0
 4356 2f0e 2040      	move.l %d0,%a0
 4357 2f10 1010      	move.b (%a0),%d0
 4358 2f12 1000      	move.b %d0,%d0
 4359 2f14 0280 0000 	and.l #255,%d0
 4359      00FF 
 4360 2f1a 4840      	swap %d0
 4361 2f1c 4240      	clr.w %d0
 4362 2f1e 8280      	or.l %d0,%d1
 4363 2f20 701D      	moveq #29,%d0
 4364 2f22 D0AE FFF8 	add.l -8(%fp),%d0
 4365 2f26 2040      	move.l %d0,%a0
 4366 2f28 1010      	move.b (%a0),%d0
 4367 2f2a 1000      	move.b %d0,%d0
 4368 2f2c 0280 0000 	and.l #255,%d0
 4368      00FF 
 4369 2f32 E188      	lsl.l #8,%d0
 4370 2f34 8280      	or.l %d0,%d1
 4371 2f36 701C      	moveq #28,%d0
 4372 2f38 D0AE FFF8 	add.l -8(%fp),%d0
 4373 2f3c 2040      	move.l %d0,%a0
 4374 2f3e 1010      	move.b (%a0),%d0
 4375 2f40 1000      	move.b %d0,%d0
68K GAS   			page 82


 4376 2f42 0280 0000 	and.l #255,%d0
 4376      00FF 
 4377 2f48 8280      	or.l %d0,%d1
 4378 2f4a 202E 0008 	move.l 8(%fp),%d0
 4379 2f4e 2040      	move.l %d0,%a0
 4380 2f50 2141 000C 	move.l %d1,12(%a0)
 4381 2f54 202E 0008 	move.l 8(%fp),%d0
 4382 2f58 2040      	move.l %d0,%a0
 4383 2f5a 42A8 0008 	clr.l 8(%a0)
 4384 2f5e 202E 0008 	move.l 8(%fp),%d0
 4385 2f62 2040      	move.l %d0,%a0
 4386 2f64 42A8 0018 	clr.l 24(%a0)
 4387 2f68 222E FFD4 	move.l -44(%fp),%d1
 4388 2f6c 202E 0008 	move.l 8(%fp),%d0
 4389 2f70 2040      	move.l %d0,%a0
 4390 2f72 2081      	move.l %d1,(%a0)
 4391 2f74 202E 0008 	move.l 8(%fp),%d0
 4392 2f78 2040      	move.l %d0,%a0
 4393 2f7a 2010      	move.l (%a0),%d0
 4394 2f7c 2040      	move.l %d0,%a0
 4395 2f7e 3228 0006 	move.w 6(%a0),%d1
 4396 2f82 202E 0008 	move.l 8(%fp),%d0
 4397 2f86 2040      	move.l %d0,%a0
 4398 2f88 3141 0004 	move.w %d1,4(%a0)
 4399               	.L313:
 4400 2f8c 202E FFFC 	move.l -4(%fp),%d0
 4401               	.L312:
 4402 2f90 242E FFC0 	move.l -64(%fp),%d2
 4403 2f94 4E5E      	unlk %fp
 4404 2f96 4E75      	rts
 4406               	.align2
 4407               	.globlf_read
 4409               	f_read:
 4410 2f98 4E56 FFE0 	link.w %fp,#-32
 4411 2f9c 2F0A      	move.l %a2,-(%sp)
 4412 2f9e 2F02      	move.l %d2,-(%sp)
 4413 2fa0 2D6E 000C 	move.l 12(%fp),-16(%fp)
 4413      FFF0 
 4414 2fa6 202E 0014 	move.l 20(%fp),%d0
 4415 2faa 2040      	move.l %d0,%a0
 4416 2fac 4290      	clr.l (%a0)
 4417 2fae 2F2E 0008 	move.l 8(%fp),-(%sp)
 4418 2fb2 4EBA FB2A 	jsr validate
 4419 2fb6 588F      	addq.l #4,%sp
 4420 2fb8 2D40 FFEC 	move.l %d0,-20(%fp)
 4421 2fbc 4AAE FFEC 	tst.l -20(%fp)
 4422 2fc0 6708      	jeq .L325
 4423 2fc2 202E FFEC 	move.l -20(%fp),%d0
 4424 2fc6 6000 04D8 	jra .L326
 4425               	.L325:
 4426 2fca 202E 0008 	move.l 8(%fp),%d0
 4427 2fce 2240      	move.l %d0,%a1
 4428 2fd0 1029 0007 	move.b 7(%a1),%d0
 4429 2fd4 4A00      	tst.b %d0
 4430 2fd6 6716      	jeq .L327
 4431 2fd8 202E 0008 	move.l 8(%fp),%d0
 4432 2fdc 2440      	move.l %d0,%a2
68K GAS   			page 83


 4433 2fde 102A 0007 	move.b 7(%a2),%d0
 4434 2fe2 1000      	move.b %d0,%d0
 4435 2fe4 0280 0000 	and.l #255,%d0
 4435      00FF 
 4436 2fea 6000 04B4 	jra .L326
 4437               	.L327:
 4438 2fee 202E 0008 	move.l 8(%fp),%d0
 4439 2ff2 2040      	move.l %d0,%a0
 4440 2ff4 1028 0006 	move.b 6(%a0),%d0
 4441 2ff8 1000      	move.b %d0,%d0
 4442 2ffa 0280 0000 	and.l #255,%d0
 4442      00FF 
 4443 3000 7201      	moveq #1,%d1
 4444 3002 C081      	and.l %d1,%d0
 4445 3004 4A80      	tst.l %d0
 4446 3006 6606      	jne .L328
 4447 3008 7007      	moveq #7,%d0
 4448 300a 6000 0494 	jra .L326
 4449               	.L328:
 4450 300e 202E 0008 	move.l 8(%fp),%d0
 4451 3012 2040      	move.l %d0,%a0
 4452 3014 2028 000C 	move.l 12(%a0),%d0
 4453 3018 222E 0008 	move.l 8(%fp),%d1
 4454 301c 2241      	move.l %d1,%a1
 4455 301e 2229 0008 	move.l 8(%a1),%d1
 4456 3022 2400      	move.l %d0,%d2
 4457 3024 9481      	sub.l %d1,%d2
 4458 3026 2D42 FFE8 	move.l %d2,-24(%fp)
 4459 302a 206E 0010 	move.l 16(%fp),%a0
 4460 302e B1EE FFE8 	cmp.l -24(%fp),%a0
 4461 3032 6300 0462 	jls .L330
 4462 3036 2D6E FFE8 	move.l -24(%fp),16(%fp)
 4462      0010 
 4463 303c 6000 0458 	jra .L330
 4464               	.L347:
 4465 3040 202E 0008 	move.l 8(%fp),%d0
 4466 3044 2240      	move.l %d0,%a1
 4467 3046 2229 0008 	move.l 8(%a1),%d1
 4468 304a 202E 0008 	move.l 8(%fp),%d0
 4469 304e 2440      	move.l %d0,%a2
 4470 3050 2012      	move.l (%a2),%d0
 4471 3052 2040      	move.l %d0,%a0
 4472 3054 3028 000A 	move.w 10(%a0),%d0
 4473 3058 3000      	move.w %d0,%d0
 4474 305a 0280 0000 	and.l #65535,%d0
 4474      FFFF 
 4475 3060 4C40 1000 	divul.l %d0,%d0:%d1
 4476 3064 4A80      	tst.l %d0
 4477 3066 6600 035A 	jne .L331
 4478 306a 202E 0008 	move.l 8(%fp),%d0
 4479 306e 2240      	move.l %d0,%a1
 4480 3070 2229 0008 	move.l 8(%a1),%d1
 4481 3074 202E 0008 	move.l 8(%fp),%d0
 4482 3078 2440      	move.l %d0,%a2
 4483 307a 2012      	move.l (%a2),%d0
 4484 307c 2040      	move.l %d0,%a0
 4485 307e 3028 000A 	move.w 10(%a0),%d0
68K GAS   			page 84


 4486 3082 3000      	move.w %d0,%d0
 4487 3084 0280 0000 	and.l #65535,%d0
 4487      FFFF 
 4488 308a 2401      	move.l %d1,%d2
 4489 308c 4C40 2001 	divul.l %d0,%d1:%d2
 4490 3090 2002      	move.l %d2,%d0
 4491 3092 1200      	move.b %d0,%d1
 4492 3094 202E 0008 	move.l 8(%fp),%d0
 4493 3098 2040      	move.l %d0,%a0
 4494 309a 2010      	move.l (%a0),%d0
 4495 309c 2240      	move.l %d0,%a1
 4496 309e 1029 0002 	move.b 2(%a1),%d0
 4497 30a2 5300      	subq.b #1,%d0
 4498 30a4 1401      	move.b %d1,%d2
 4499 30a6 C400      	and.b %d0,%d2
 4500 30a8 1D42 FFE7 	move.b %d2,-25(%fp)
 4501 30ac 4A2E FFE7 	tst.b -25(%fp)
 4502 30b0 667C      	jne .L332
 4503 30b2 202E 0008 	move.l 8(%fp),%d0
 4504 30b6 2040      	move.l %d0,%a0
 4505 30b8 2028 0008 	move.l 8(%a0),%d0
 4506 30bc 4A80      	tst.l %d0
 4507 30be 660E      	jne .L333
 4508 30c0 202E 0008 	move.l 8(%fp),%d0
 4509 30c4 2240      	move.l %d0,%a1
 4510 30c6 2D69 0010 	move.l 16(%a1),-4(%fp)
 4510      FFFC 
 4511 30cc 6020      	jra .L334
 4512               	.L333:
 4513 30ce 202E 0008 	move.l 8(%fp),%d0
 4514 30d2 2440      	move.l %d0,%a2
 4515 30d4 222A 0014 	move.l 20(%a2),%d1
 4516 30d8 202E 0008 	move.l 8(%fp),%d0
 4517 30dc 2040      	move.l %d0,%a0
 4518 30de 2010      	move.l (%a0),%d0
 4519 30e0 2F01      	move.l %d1,-(%sp)
 4520 30e2 2F00      	move.l %d0,-(%sp)
 4521 30e4 4EBA D430 	jsr get_fat
 4522 30e8 508F      	addq.l #8,%sp
 4523 30ea 2D40 FFFC 	move.l %d0,-4(%fp)
 4524               	.L334:
 4525 30ee 7001      	moveq #1,%d0
 4526 30f0 B0AE FFFC 	cmp.l -4(%fp),%d0
 4527 30f4 6512      	jcs .L335
 4528 30f6 202E 0008 	move.l 8(%fp),%d0
 4529 30fa 2040      	move.l %d0,%a0
 4530 30fc 117C 0002 	move.b #2,7(%a0)
 4530      0007 
 4531 3102 7002      	moveq #2,%d0
 4532 3104 6000 039A 	jra .L326
 4533               	.L335:
 4534 3108 70FF      	moveq #-1,%d0
 4535 310a B0AE FFFC 	cmp.l -4(%fp),%d0
 4536 310e 6612      	jne .L336
 4537 3110 202E 0008 	move.l 8(%fp),%d0
 4538 3114 2040      	move.l %d0,%a0
 4539 3116 117C 0001 	move.b #1,7(%a0)
68K GAS   			page 85


 4539      0007 
 4540 311c 7001      	moveq #1,%d0
 4541 311e 6000 0380 	jra .L326
 4542               	.L336:
 4543 3122 202E 0008 	move.l 8(%fp),%d0
 4544 3126 2240      	move.l %d0,%a1
 4545 3128 236E FFFC 	move.l -4(%fp),20(%a1)
 4545      0014 
 4546               	.L332:
 4547 312e 202E 0008 	move.l 8(%fp),%d0
 4548 3132 2440      	move.l %d0,%a2
 4549 3134 222A 0014 	move.l 20(%a2),%d1
 4550 3138 202E 0008 	move.l 8(%fp),%d0
 4551 313c 2040      	move.l %d0,%a0
 4552 313e 2010      	move.l (%a0),%d0
 4553 3140 2F01      	move.l %d1,-(%sp)
 4554 3142 2F00      	move.l %d0,-(%sp)
 4555 3144 4EBA D38A 	jsr clust2sect
 4556 3148 508F      	addq.l #8,%sp
 4557 314a 2D40 FFE2 	move.l %d0,-30(%fp)
 4558 314e 4AAE FFE2 	tst.l -30(%fp)
 4559 3152 6612      	jne .L337
 4560 3154 202E 0008 	move.l 8(%fp),%d0
 4561 3158 2240      	move.l %d0,%a1
 4562 315a 137C 0002 	move.b #2,7(%a1)
 4562      0007 
 4563 3160 7002      	moveq #2,%d0
 4564 3162 6000 033C 	jra .L326
 4565               	.L337:
 4566 3166 4280      	clr.l %d0
 4567 3168 102E FFE7 	move.b -25(%fp),%d0
 4568 316c D1AE FFE2 	add.l %d0,-30(%fp)
 4569 3170 202E 0008 	move.l 8(%fp),%d0
 4570 3174 2440      	move.l %d0,%a2
 4571 3176 2012      	move.l (%a2),%d0
 4572 3178 2040      	move.l %d0,%a0
 4573 317a 3028 000A 	move.w 10(%a0),%d0
 4574 317e 3000      	move.w %d0,%d0
 4575 3180 0280 0000 	and.l #65535,%d0
 4575      FFFF 
 4576 3186 242E 0010 	move.l 16(%fp),%d2
 4577 318a 4C40 2001 	divul.l %d0,%d1:%d2
 4578 318e 2002      	move.l %d2,%d0
 4579 3190 2D40 FFF4 	move.l %d0,-12(%fp)
 4580 3194 4AAE FFF4 	tst.l -12(%fp)
 4581 3198 6700 013E 	jeq .L338
 4582 319c 4280      	clr.l %d0
 4583 319e 102E FFE7 	move.b -25(%fp),%d0
 4584 31a2 2200      	move.l %d0,%d1
 4585 31a4 D2AE FFF4 	add.l -12(%fp),%d1
 4586 31a8 202E 0008 	move.l 8(%fp),%d0
 4587 31ac 2040      	move.l %d0,%a0
 4588 31ae 2010      	move.l (%a0),%d0
 4589 31b0 2240      	move.l %d0,%a1
 4590 31b2 1029 0002 	move.b 2(%a1),%d0
 4591 31b6 1000      	move.b %d0,%d0
 4592 31b8 0280 0000 	and.l #255,%d0
68K GAS   			page 86


 4592      00FF 
 4593 31be B081      	cmp.l %d1,%d0
 4594 31c0 6422      	jcc .L339
 4595 31c2 202E 0008 	move.l 8(%fp),%d0
 4596 31c6 2440      	move.l %d0,%a2
 4597 31c8 2012      	move.l (%a2),%d0
 4598 31ca 2040      	move.l %d0,%a0
 4599 31cc 1028 0002 	move.b 2(%a0),%d0
 4600 31d0 1000      	move.b %d0,%d0
 4601 31d2 0280 0000 	and.l #255,%d0
 4601      00FF 
 4602 31d8 4281      	clr.l %d1
 4603 31da 122E FFE7 	move.b -25(%fp),%d1
 4604 31de 9081      	sub.l %d1,%d0
 4605 31e0 2D40 FFF4 	move.l %d0,-12(%fp)
 4606               	.L339:
 4607 31e4 202E 0008 	move.l 8(%fp),%d0
 4608 31e8 2240      	move.l %d0,%a1
 4609 31ea 2011      	move.l (%a1),%d0
 4610 31ec 2440      	move.l %d0,%a2
 4611 31ee 102A 0001 	move.b 1(%a2),%d0
 4612 31f2 1000      	move.b %d0,%d0
 4613 31f4 0280 0000 	and.l #255,%d0
 4613      00FF 
 4614 31fa 2F2E FFF4 	move.l -12(%fp),-(%sp)
 4615 31fe 2F2E FFE2 	move.l -30(%fp),-(%sp)
 4616 3202 2F2E FFF0 	move.l -16(%fp),-(%sp)
 4617 3206 2F00      	move.l %d0,-(%sp)
 4618 3208 4EB9 0000 	jsr disk_read
 4618      0000 
 4619 320e 4FEF 0010 	lea (16,%sp),%sp
 4620 3212 4A80      	tst.l %d0
 4621 3214 6712      	jeq .L340
 4622 3216 202E 0008 	move.l 8(%fp),%d0
 4623 321a 2040      	move.l %d0,%a0
 4624 321c 117C 0001 	move.b #1,7(%a0)
 4624      0007 
 4625 3222 7001      	moveq #1,%d0
 4626 3224 6000 027A 	jra .L326
 4627               	.L340:
 4628 3228 202E 0008 	move.l 8(%fp),%d0
 4629 322c 2240      	move.l %d0,%a1
 4630 322e 1029 0006 	move.b 6(%a1),%d0
 4631 3232 1000      	move.b %d0,%d0
 4632 3234 0280 0000 	and.l #255,%d0
 4632      00FF 
 4633 323a 7240      	moveq #64,%d1
 4634 323c C081      	and.l %d1,%d0
 4635 323e 4A80      	tst.l %d0
 4636 3240 6770      	jeq .L341
 4637 3242 202E 0008 	move.l 8(%fp),%d0
 4638 3246 2040      	move.l %d0,%a0
 4639 3248 2028 0018 	move.l 24(%a0),%d0
 4640 324c 90AE FFE2 	sub.l -30(%fp),%d0
 4641 3250 B0AE FFF4 	cmp.l -12(%fp),%d0
 4642 3254 645C      	jcc .L341
 4643 3256 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 87


 4644 325a 2240      	move.l %d0,%a1
 4645 325c 2011      	move.l (%a1),%d0
 4646 325e 2440      	move.l %d0,%a2
 4647 3260 302A 000A 	move.w 10(%a2),%d0
 4648 3264 3000      	move.w %d0,%d0
 4649 3266 0280 0000 	and.l #65535,%d0
 4649      FFFF 
 4650 326c 2040      	move.l %d0,%a0
 4651 326e 7224      	moveq #36,%d1
 4652 3270 D2AE 0008 	add.l 8(%fp),%d1
 4653 3274 202E 0008 	move.l 8(%fp),%d0
 4654 3278 2240      	move.l %d0,%a1
 4655 327a 2029 0018 	move.l 24(%a1),%d0
 4656 327e 2240      	move.l %d0,%a1
 4657 3280 93EE FFE2 	sub.l -30(%fp),%a1
 4658 3284 202E 0008 	move.l 8(%fp),%d0
 4659 3288 2440      	move.l %d0,%a2
 4660 328a 2012      	move.l (%a2),%d0
 4661 328c 2440      	move.l %d0,%a2
 4662 328e 302A 000A 	move.w 10(%a2),%d0
 4663 3292 3000      	move.w %d0,%d0
 4664 3294 0280 0000 	and.l #65535,%d0
 4664      FFFF 
 4665 329a 2409      	move.l %a1,%d2
 4666 329c 4C02 0800 	muls.l %d2,%d0
 4667 32a0 D0AE FFF0 	add.l -16(%fp),%d0
 4668 32a4 2F08      	move.l %a0,-(%sp)
 4669 32a6 2F01      	move.l %d1,-(%sp)
 4670 32a8 2F00      	move.l %d0,-(%sp)
 4671 32aa 4EBA CD54 	jsr mem_cpy
 4672 32ae 4FEF 000C 	lea (12,%sp),%sp
 4673               	.L341:
 4674 32b2 202E 0008 	move.l 8(%fp),%d0
 4675 32b6 2040      	move.l %d0,%a0
 4676 32b8 2010      	move.l (%a0),%d0
 4677 32ba 2240      	move.l %d0,%a1
 4678 32bc 3029 000A 	move.w 10(%a1),%d0
 4679 32c0 3000      	move.w %d0,%d0
 4680 32c2 0280 0000 	and.l #65535,%d0
 4680      FFFF 
 4681 32c8 2200      	move.l %d0,%d1
 4682 32ca 4C2E 1800 	muls.l -12(%fp),%d1
 4682      FFF4 
 4683 32d0 2D41 FFF8 	move.l %d1,-8(%fp)
 4684 32d4 6000 0180 	jra .L342
 4685               	.L338:
 4686 32d8 202E 0008 	move.l 8(%fp),%d0
 4687 32dc 2040      	move.l %d0,%a0
 4688 32de 2028 0018 	move.l 24(%a0),%d0
 4689 32e2 B0AE FFE2 	cmp.l -30(%fp),%d0
 4690 32e6 6700 00CE 	jeq .L343
 4691 32ea 202E 0008 	move.l 8(%fp),%d0
 4692 32ee 2240      	move.l %d0,%a1
 4693 32f0 1029 0006 	move.b 6(%a1),%d0
 4694 32f4 1000      	move.b %d0,%d0
 4695 32f6 0280 0000 	and.l #255,%d0
 4695      00FF 
68K GAS   			page 88


 4696 32fc 7240      	moveq #64,%d1
 4697 32fe C081      	and.l %d1,%d0
 4698 3300 4A80      	tst.l %d0
 4699 3302 676A      	jeq .L344
 4700 3304 202E 0008 	move.l 8(%fp),%d0
 4701 3308 2240      	move.l %d0,%a1
 4702 330a 2069 0018 	move.l 24(%a1),%a0
 4703 330e 7224      	moveq #36,%d1
 4704 3310 D2AE 0008 	add.l 8(%fp),%d1
 4705 3314 202E 0008 	move.l 8(%fp),%d0
 4706 3318 2440      	move.l %d0,%a2
 4707 331a 2012      	move.l (%a2),%d0
 4708 331c 2240      	move.l %d0,%a1
 4709 331e 1029 0001 	move.b 1(%a1),%d0
 4710 3322 1000      	move.b %d0,%d0
 4711 3324 0280 0000 	and.l #255,%d0
 4711      00FF 
 4712 332a 4878 0001 	pea 1.w
 4713 332e 2F08      	move.l %a0,-(%sp)
 4714 3330 2F01      	move.l %d1,-(%sp)
 4715 3332 2F00      	move.l %d0,-(%sp)
 4716 3334 4EB9 0000 	jsr disk_write
 4716      0000 
 4717 333a 4FEF 0010 	lea (16,%sp),%sp
 4718 333e 4A80      	tst.l %d0
 4719 3340 6712      	jeq .L345
 4720 3342 202E 0008 	move.l 8(%fp),%d0
 4721 3346 2440      	move.l %d0,%a2
 4722 3348 157C 0001 	move.b #1,7(%a2)
 4722      0007 
 4723 334e 7001      	moveq #1,%d0
 4724 3350 6000 014E 	jra .L326
 4725               	.L345:
 4726 3354 202E 0008 	move.l 8(%fp),%d0
 4727 3358 2040      	move.l %d0,%a0
 4728 335a 1028 0006 	move.b 6(%a0),%d0
 4729 335e 1200      	move.b %d0,%d1
 4730 3360 0201 FFBF 	and.b #-65,%d1
 4731 3364 202E 0008 	move.l 8(%fp),%d0
 4732 3368 2240      	move.l %d0,%a1
 4733 336a 1341 0006 	move.b %d1,6(%a1)
 4734               	.L344:
 4735 336e 7224      	moveq #36,%d1
 4736 3370 D2AE 0008 	add.l 8(%fp),%d1
 4737 3374 202E 0008 	move.l 8(%fp),%d0
 4738 3378 2440      	move.l %d0,%a2
 4739 337a 2012      	move.l (%a2),%d0
 4740 337c 2040      	move.l %d0,%a0
 4741 337e 1028 0001 	move.b 1(%a0),%d0
 4742 3382 1000      	move.b %d0,%d0
 4743 3384 0280 0000 	and.l #255,%d0
 4743      00FF 
 4744 338a 4878 0001 	pea 1.w
 4745 338e 2F2E FFE2 	move.l -30(%fp),-(%sp)
 4746 3392 2F01      	move.l %d1,-(%sp)
 4747 3394 2F00      	move.l %d0,-(%sp)
 4748 3396 4EB9 0000 	jsr disk_read
68K GAS   			page 89


 4748      0000 
 4749 339c 4FEF 0010 	lea (16,%sp),%sp
 4750 33a0 4A80      	tst.l %d0
 4751 33a2 6712      	jeq .L343
 4752 33a4 202E 0008 	move.l 8(%fp),%d0
 4753 33a8 2240      	move.l %d0,%a1
 4754 33aa 137C 0001 	move.b #1,7(%a1)
 4754      0007 
 4755 33b0 7001      	moveq #1,%d0
 4756 33b2 6000 00EC 	jra .L326
 4757               	.L343:
 4758 33b6 202E 0008 	move.l 8(%fp),%d0
 4759 33ba 2440      	move.l %d0,%a2
 4760 33bc 256E FFE2 	move.l -30(%fp),24(%a2)
 4760      0018 
 4761               	.L331:
 4762 33c2 202E 0008 	move.l 8(%fp),%d0
 4763 33c6 2040      	move.l %d0,%a0
 4764 33c8 2010      	move.l (%a0),%d0
 4765 33ca 2240      	move.l %d0,%a1
 4766 33cc 3029 000A 	move.w 10(%a1),%d0
 4767 33d0 3000      	move.w %d0,%d0
 4768 33d2 0280 0000 	and.l #65535,%d0
 4768      FFFF 
 4769 33d8 222E 0008 	move.l 8(%fp),%d1
 4770 33dc 2441      	move.l %d1,%a2
 4771 33de 206A 0008 	move.l 8(%a2),%a0
 4772 33e2 222E 0008 	move.l 8(%fp),%d1
 4773 33e6 2241      	move.l %d1,%a1
 4774 33e8 2211      	move.l (%a1),%d1
 4775 33ea 2441      	move.l %d1,%a2
 4776 33ec 322A 000A 	move.w 10(%a2),%d1
 4777 33f0 3201      	move.w %d1,%d1
 4778 33f2 0281 0000 	and.l #65535,%d1
 4778      FFFF 
 4779 33f8 2408      	move.l %a0,%d2
 4780 33fa 4C41 2001 	divul.l %d1,%d1:%d2
 4781 33fe 2400      	move.l %d0,%d2
 4782 3400 9481      	sub.l %d1,%d2
 4783 3402 2D42 FFF8 	move.l %d2,-8(%fp)
 4784 3406 206E FFF8 	move.l -8(%fp),%a0
 4785 340a B1EE 0010 	cmp.l 16(%fp),%a0
 4786 340e 6306      	jls .L346
 4787 3410 2D6E 0010 	move.l 16(%fp),-8(%fp)
 4787      FFF8 
 4788               	.L346:
 4789 3416 7024      	moveq #36,%d0
 4790 3418 D0AE 0008 	add.l 8(%fp),%d0
 4791 341c 222E 0008 	move.l 8(%fp),%d1
 4792 3420 2241      	move.l %d1,%a1
 4793 3422 2069 0008 	move.l 8(%a1),%a0
 4794 3426 222E 0008 	move.l 8(%fp),%d1
 4795 342a 2441      	move.l %d1,%a2
 4796 342c 2212      	move.l (%a2),%d1
 4797 342e 2241      	move.l %d1,%a1
 4798 3430 3229 000A 	move.w 10(%a1),%d1
 4799 3434 3201      	move.w %d1,%d1
68K GAS   			page 90


 4800 3436 0281 0000 	and.l #65535,%d1
 4800      FFFF 
 4801 343c 2408      	move.l %a0,%d2
 4802 343e 4C41 2001 	divul.l %d1,%d1:%d2
 4803 3442 D081      	add.l %d1,%d0
 4804 3444 2F2E FFF8 	move.l -8(%fp),-(%sp)
 4805 3448 2F00      	move.l %d0,-(%sp)
 4806 344a 2F2E FFF0 	move.l -16(%fp),-(%sp)
 4807 344e 4EBA CBB0 	jsr mem_cpy
 4808 3452 4FEF 000C 	lea (12,%sp),%sp
 4809               	.L342:
 4810 3456 202E FFF8 	move.l -8(%fp),%d0
 4811 345a D1AE FFF0 	add.l %d0,-16(%fp)
 4812 345e 202E 0008 	move.l 8(%fp),%d0
 4813 3462 2040      	move.l %d0,%a0
 4814 3464 2028 0008 	move.l 8(%a0),%d0
 4815 3468 2200      	move.l %d0,%d1
 4816 346a D2AE FFF8 	add.l -8(%fp),%d1
 4817 346e 202E 0008 	move.l 8(%fp),%d0
 4818 3472 2240      	move.l %d0,%a1
 4819 3474 2341 0008 	move.l %d1,8(%a1)
 4820 3478 202E 0014 	move.l 20(%fp),%d0
 4821 347c 2440      	move.l %d0,%a2
 4822 347e 2012      	move.l (%a2),%d0
 4823 3480 2200      	move.l %d0,%d1
 4824 3482 D2AE FFF8 	add.l -8(%fp),%d1
 4825 3486 202E 0014 	move.l 20(%fp),%d0
 4826 348a 2040      	move.l %d0,%a0
 4827 348c 2081      	move.l %d1,(%a0)
 4828 348e 202E FFF8 	move.l -8(%fp),%d0
 4829 3492 91AE 0010 	sub.l %d0,16(%fp)
 4830               	.L330:
 4831 3496 4AAE 0010 	tst.l 16(%fp)
 4832 349a 6600 FBA4 	jne .L347
 4833 349e 4280      	clr.l %d0
 4834               	.L326:
 4835 34a0 242E FFD8 	move.l -40(%fp),%d2
 4836 34a4 246E FFDC 	move.l -36(%fp),%a2
 4837 34a8 4E5E      	unlk %fp
 4838 34aa 4E75      	rts
 4840               	.align2
 4841               	.globlf_write
 4843               	f_write:
 4844 34ac 4E56 FFE4 	link.w %fp,#-28
 4845 34b0 2F02      	move.l %d2,-(%sp)
 4846 34b2 2D6E 000C 	move.l 12(%fp),-16(%fp)
 4846      FFF0 
 4847 34b8 202E 0014 	move.l 20(%fp),%d0
 4848 34bc 2040      	move.l %d0,%a0
 4849 34be 4290      	clr.l (%a0)
 4850 34c0 2F2E 0008 	move.l 8(%fp),-(%sp)
 4851 34c4 4EBA F618 	jsr validate
 4852 34c8 588F      	addq.l #4,%sp
 4853 34ca 2D40 FFEC 	move.l %d0,-20(%fp)
 4854 34ce 4AAE FFEC 	tst.l -20(%fp)
 4855 34d2 6708      	jeq .L349
 4856 34d4 202E FFEC 	move.l -20(%fp),%d0
68K GAS   			page 91


 4857 34d8 6000 0578 	jra .L350
 4858               	.L349:
 4859 34dc 202E 0008 	move.l 8(%fp),%d0
 4860 34e0 2240      	move.l %d0,%a1
 4861 34e2 1029 0007 	move.b 7(%a1),%d0
 4862 34e6 4A00      	tst.b %d0
 4863 34e8 6716      	jeq .L351
 4864 34ea 202E 0008 	move.l 8(%fp),%d0
 4865 34ee 2040      	move.l %d0,%a0
 4866 34f0 1028 0007 	move.b 7(%a0),%d0
 4867 34f4 1000      	move.b %d0,%d0
 4868 34f6 0280 0000 	and.l #255,%d0
 4868      00FF 
 4869 34fc 6000 0554 	jra .L350
 4870               	.L351:
 4871 3500 202E 0008 	move.l 8(%fp),%d0
 4872 3504 2240      	move.l %d0,%a1
 4873 3506 1029 0006 	move.b 6(%a1),%d0
 4874 350a 1000      	move.b %d0,%d0
 4875 350c 0280 0000 	and.l #255,%d0
 4875      00FF 
 4876 3512 7202      	moveq #2,%d1
 4877 3514 C081      	and.l %d1,%d0
 4878 3516 4A80      	tst.l %d0
 4879 3518 6606      	jne .L352
 4880 351a 7007      	moveq #7,%d0
 4881 351c 6000 0534 	jra .L350
 4882               	.L352:
 4883 3520 202E 0008 	move.l 8(%fp),%d0
 4884 3524 2040      	move.l %d0,%a0
 4885 3526 2028 0008 	move.l 8(%a0),%d0
 4886 352a D0AE 0010 	add.l 16(%fp),%d0
 4887 352e 222E 0008 	move.l 8(%fp),%d1
 4888 3532 2241      	move.l %d1,%a1
 4889 3534 2229 0008 	move.l 8(%a1),%d1
 4890 3538 B280      	cmp.l %d0,%d1
 4891 353a 6300 04C2 	jls .L354
 4892 353e 42AE 0010 	clr.l 16(%fp)
 4893 3542 6000 04BA 	jra .L354
 4894               	.L373:
 4895 3546 202E 0008 	move.l 8(%fp),%d0
 4896 354a 2040      	move.l %d0,%a0
 4897 354c 2228 0008 	move.l 8(%a0),%d1
 4898 3550 202E 0008 	move.l 8(%fp),%d0
 4899 3554 2240      	move.l %d0,%a1
 4900 3556 2011      	move.l (%a1),%d0
 4901 3558 2040      	move.l %d0,%a0
 4902 355a 3028 000A 	move.w 10(%a0),%d0
 4903 355e 3000      	move.w %d0,%d0
 4904 3560 0280 0000 	and.l #65535,%d0
 4904      FFFF 
 4905 3566 4C40 1000 	divul.l %d0,%d0:%d1
 4906 356a 4A80      	tst.l %d0
 4907 356c 6600 03A2 	jne .L355
 4908 3570 202E 0008 	move.l 8(%fp),%d0
 4909 3574 2240      	move.l %d0,%a1
 4910 3576 2229 0008 	move.l 8(%a1),%d1
68K GAS   			page 92


 4911 357a 202E 0008 	move.l 8(%fp),%d0
 4912 357e 2040      	move.l %d0,%a0
 4913 3580 2010      	move.l (%a0),%d0
 4914 3582 2240      	move.l %d0,%a1
 4915 3584 3029 000A 	move.w 10(%a1),%d0
 4916 3588 3000      	move.w %d0,%d0
 4917 358a 0280 0000 	and.l #65535,%d0
 4917      FFFF 
 4918 3590 2401      	move.l %d1,%d2
 4919 3592 4C40 2001 	divul.l %d0,%d1:%d2
 4920 3596 2002      	move.l %d2,%d0
 4921 3598 1200      	move.b %d0,%d1
 4922 359a 202E 0008 	move.l 8(%fp),%d0
 4923 359e 2040      	move.l %d0,%a0
 4924 35a0 2010      	move.l (%a0),%d0
 4925 35a2 2240      	move.l %d0,%a1
 4926 35a4 1029 0002 	move.b 2(%a1),%d0
 4927 35a8 5300      	subq.b #1,%d0
 4928 35aa 1401      	move.b %d1,%d2
 4929 35ac C400      	and.b %d0,%d2
 4930 35ae 1D42 FFEB 	move.b %d2,-21(%fp)
 4931 35b2 4A2E FFEB 	tst.b -21(%fp)
 4932 35b6 6600 00AE 	jne .L356
 4933 35ba 202E 0008 	move.l 8(%fp),%d0
 4934 35be 2040      	move.l %d0,%a0
 4935 35c0 2028 0008 	move.l 8(%a0),%d0
 4936 35c4 4A80      	tst.l %d0
 4937 35c6 6636      	jne .L357
 4938 35c8 202E 0008 	move.l 8(%fp),%d0
 4939 35cc 2240      	move.l %d0,%a1
 4940 35ce 2D69 0010 	move.l 16(%a1),-4(%fp)
 4940      FFFC 
 4941 35d4 4AAE FFFC 	tst.l -4(%fp)
 4942 35d8 6644      	jne .L358
 4943 35da 202E 0008 	move.l 8(%fp),%d0
 4944 35de 2040      	move.l %d0,%a0
 4945 35e0 2010      	move.l (%a0),%d0
 4946 35e2 42A7      	clr.l -(%sp)
 4947 35e4 2F00      	move.l %d0,-(%sp)
 4948 35e6 4EBA D69C 	jsr create_chain
 4949 35ea 508F      	addq.l #8,%sp
 4950 35ec 2D40 FFFC 	move.l %d0,-4(%fp)
 4951 35f0 202E 0008 	move.l 8(%fp),%d0
 4952 35f4 2240      	move.l %d0,%a1
 4953 35f6 236E FFFC 	move.l -4(%fp),16(%a1)
 4953      0010 
 4954 35fc 6020      	jra .L358
 4955               	.L357:
 4956 35fe 202E 0008 	move.l 8(%fp),%d0
 4957 3602 2040      	move.l %d0,%a0
 4958 3604 2228 0014 	move.l 20(%a0),%d1
 4959 3608 202E 0008 	move.l 8(%fp),%d0
 4960 360c 2240      	move.l %d0,%a1
 4961 360e 2011      	move.l (%a1),%d0
 4962 3610 2F01      	move.l %d1,-(%sp)
 4963 3612 2F00      	move.l %d0,-(%sp)
 4964 3614 4EBA D66E 	jsr create_chain
68K GAS   			page 93


 4965 3618 508F      	addq.l #8,%sp
 4966 361a 2D40 FFFC 	move.l %d0,-4(%fp)
 4967               	.L358:
 4968 361e 4AAE FFFC 	tst.l -4(%fp)
 4969 3622 6700 03E4 	jeq .L375
 4970               	.L359:
 4971 3626 7001      	moveq #1,%d0
 4972 3628 B0AE FFFC 	cmp.l -4(%fp),%d0
 4973 362c 6612      	jne .L361
 4974 362e 202E 0008 	move.l 8(%fp),%d0
 4975 3632 2040      	move.l %d0,%a0
 4976 3634 117C 0002 	move.b #2,7(%a0)
 4976      0007 
 4977 363a 7002      	moveq #2,%d0
 4978 363c 6000 0414 	jra .L350
 4979               	.L361:
 4980 3640 70FF      	moveq #-1,%d0
 4981 3642 B0AE FFFC 	cmp.l -4(%fp),%d0
 4982 3646 6612      	jne .L362
 4983 3648 202E 0008 	move.l 8(%fp),%d0
 4984 364c 2040      	move.l %d0,%a0
 4985 364e 117C 0001 	move.b #1,7(%a0)
 4985      0007 
 4986 3654 7001      	moveq #1,%d0
 4987 3656 6000 03FA 	jra .L350
 4988               	.L362:
 4989 365a 202E 0008 	move.l 8(%fp),%d0
 4990 365e 2240      	move.l %d0,%a1
 4991 3660 236E FFFC 	move.l -4(%fp),20(%a1)
 4991      0014 
 4992               	.L356:
 4993 3666 202E 0008 	move.l 8(%fp),%d0
 4994 366a 2040      	move.l %d0,%a0
 4995 366c 1028 0006 	move.b 6(%a0),%d0
 4996 3670 1000      	move.b %d0,%d0
 4997 3672 0280 0000 	and.l #255,%d0
 4997      00FF 
 4998 3678 7240      	moveq #64,%d1
 4999 367a C081      	and.l %d1,%d0
 5000 367c 4A80      	tst.l %d0
 5001 367e 676A      	jeq .L363
 5002 3680 202E 0008 	move.l 8(%fp),%d0
 5003 3684 2240      	move.l %d0,%a1
 5004 3686 2069 0018 	move.l 24(%a1),%a0
 5005 368a 7224      	moveq #36,%d1
 5006 368c D2AE 0008 	add.l 8(%fp),%d1
 5007 3690 202E 0008 	move.l 8(%fp),%d0
 5008 3694 2240      	move.l %d0,%a1
 5009 3696 2011      	move.l (%a1),%d0
 5010 3698 2240      	move.l %d0,%a1
 5011 369a 1029 0001 	move.b 1(%a1),%d0
 5012 369e 1000      	move.b %d0,%d0
 5013 36a0 0280 0000 	and.l #255,%d0
 5013      00FF 
 5014 36a6 4878 0001 	pea 1.w
 5015 36aa 2F08      	move.l %a0,-(%sp)
 5016 36ac 2F01      	move.l %d1,-(%sp)
68K GAS   			page 94


 5017 36ae 2F00      	move.l %d0,-(%sp)
 5018 36b0 4EB9 0000 	jsr disk_write
 5018      0000 
 5019 36b6 4FEF 0010 	lea (16,%sp),%sp
 5020 36ba 4A80      	tst.l %d0
 5021 36bc 6712      	jeq .L364
 5022 36be 202E 0008 	move.l 8(%fp),%d0
 5023 36c2 2040      	move.l %d0,%a0
 5024 36c4 117C 0001 	move.b #1,7(%a0)
 5024      0007 
 5025 36ca 7001      	moveq #1,%d0
 5026 36cc 6000 0384 	jra .L350
 5027               	.L364:
 5028 36d0 202E 0008 	move.l 8(%fp),%d0
 5029 36d4 2240      	move.l %d0,%a1
 5030 36d6 1029 0006 	move.b 6(%a1),%d0
 5031 36da 1200      	move.b %d0,%d1
 5032 36dc 0201 FFBF 	and.b #-65,%d1
 5033 36e0 202E 0008 	move.l 8(%fp),%d0
 5034 36e4 2040      	move.l %d0,%a0
 5035 36e6 1141 0006 	move.b %d1,6(%a0)
 5036               	.L363:
 5037 36ea 202E 0008 	move.l 8(%fp),%d0
 5038 36ee 2240      	move.l %d0,%a1
 5039 36f0 2229 0014 	move.l 20(%a1),%d1
 5040 36f4 202E 0008 	move.l 8(%fp),%d0
 5041 36f8 2040      	move.l %d0,%a0
 5042 36fa 2010      	move.l (%a0),%d0
 5043 36fc 2F01      	move.l %d1,-(%sp)
 5044 36fe 2F00      	move.l %d0,-(%sp)
 5045 3700 4EBA CDCE 	jsr clust2sect
 5046 3704 508F      	addq.l #8,%sp
 5047 3706 2D40 FFE6 	move.l %d0,-26(%fp)
 5048 370a 4AAE FFE6 	tst.l -26(%fp)
 5049 370e 6612      	jne .L365
 5050 3710 202E 0008 	move.l 8(%fp),%d0
 5051 3714 2240      	move.l %d0,%a1
 5052 3716 137C 0002 	move.b #2,7(%a1)
 5052      0007 
 5053 371c 7002      	moveq #2,%d0
 5054 371e 6000 0332 	jra .L350
 5055               	.L365:
 5056 3722 4280      	clr.l %d0
 5057 3724 102E FFEB 	move.b -21(%fp),%d0
 5058 3728 D1AE FFE6 	add.l %d0,-26(%fp)
 5059 372c 202E 0008 	move.l 8(%fp),%d0
 5060 3730 2040      	move.l %d0,%a0
 5061 3732 2010      	move.l (%a0),%d0
 5062 3734 2240      	move.l %d0,%a1
 5063 3736 3029 000A 	move.w 10(%a1),%d0
 5064 373a 3000      	move.w %d0,%d0
 5065 373c 0280 0000 	and.l #65535,%d0
 5065      FFFF 
 5066 3742 242E 0010 	move.l 16(%fp),%d2
 5067 3746 4C40 2001 	divul.l %d0,%d1:%d2
 5068 374a 2002      	move.l %d2,%d0
 5069 374c 2D40 FFF4 	move.l %d0,-12(%fp)
68K GAS   			page 95


 5070 3750 4AAE FFF4 	tst.l -12(%fp)
 5071 3754 6700 013E 	jeq .L366
 5072 3758 4280      	clr.l %d0
 5073 375a 102E FFEB 	move.b -21(%fp),%d0
 5074 375e 2200      	move.l %d0,%d1
 5075 3760 D2AE FFF4 	add.l -12(%fp),%d1
 5076 3764 202E 0008 	move.l 8(%fp),%d0
 5077 3768 2040      	move.l %d0,%a0
 5078 376a 2010      	move.l (%a0),%d0
 5079 376c 2240      	move.l %d0,%a1
 5080 376e 1029 0002 	move.b 2(%a1),%d0
 5081 3772 1000      	move.b %d0,%d0
 5082 3774 0280 0000 	and.l #255,%d0
 5082      00FF 
 5083 377a B081      	cmp.l %d1,%d0
 5084 377c 6422      	jcc .L367
 5085 377e 202E 0008 	move.l 8(%fp),%d0
 5086 3782 2040      	move.l %d0,%a0
 5087 3784 2010      	move.l (%a0),%d0
 5088 3786 2240      	move.l %d0,%a1
 5089 3788 1029 0002 	move.b 2(%a1),%d0
 5090 378c 1000      	move.b %d0,%d0
 5091 378e 0280 0000 	and.l #255,%d0
 5091      00FF 
 5092 3794 4281      	clr.l %d1
 5093 3796 122E FFEB 	move.b -21(%fp),%d1
 5094 379a 9081      	sub.l %d1,%d0
 5095 379c 2D40 FFF4 	move.l %d0,-12(%fp)
 5096               	.L367:
 5097 37a0 202E 0008 	move.l 8(%fp),%d0
 5098 37a4 2040      	move.l %d0,%a0
 5099 37a6 2010      	move.l (%a0),%d0
 5100 37a8 2240      	move.l %d0,%a1
 5101 37aa 1029 0001 	move.b 1(%a1),%d0
 5102 37ae 1000      	move.b %d0,%d0
 5103 37b0 0280 0000 	and.l #255,%d0
 5103      00FF 
 5104 37b6 2F2E FFF4 	move.l -12(%fp),-(%sp)
 5105 37ba 2F2E FFE6 	move.l -26(%fp),-(%sp)
 5106 37be 2F2E FFF0 	move.l -16(%fp),-(%sp)
 5107 37c2 2F00      	move.l %d0,-(%sp)
 5108 37c4 4EB9 0000 	jsr disk_write
 5108      0000 
 5109 37ca 4FEF 0010 	lea (16,%sp),%sp
 5110 37ce 4A80      	tst.l %d0
 5111 37d0 6712      	jeq .L368
 5112 37d2 202E 0008 	move.l 8(%fp),%d0
 5113 37d6 2040      	move.l %d0,%a0
 5114 37d8 117C 0001 	move.b #1,7(%a0)
 5114      0007 
 5115 37de 7001      	moveq #1,%d0
 5116 37e0 6000 0270 	jra .L350
 5117               	.L368:
 5118 37e4 202E 0008 	move.l 8(%fp),%d0
 5119 37e8 2240      	move.l %d0,%a1
 5120 37ea 2029 0018 	move.l 24(%a1),%d0
 5121 37ee 90AE FFE6 	sub.l -26(%fp),%d0
68K GAS   			page 96


 5122 37f2 B0AE FFF4 	cmp.l -12(%fp),%d0
 5123 37f6 6476      	jcc .L369
 5124 37f8 202E 0008 	move.l 8(%fp),%d0
 5125 37fc 2040      	move.l %d0,%a0
 5126 37fe 2010      	move.l (%a0),%d0
 5127 3800 2240      	move.l %d0,%a1
 5128 3802 3029 000A 	move.w 10(%a1),%d0
 5129 3806 3000      	move.w %d0,%d0
 5130 3808 0280 0000 	and.l #65535,%d0
 5130      FFFF 
 5131 380e 2040      	move.l %d0,%a0
 5132 3810 202E 0008 	move.l 8(%fp),%d0
 5133 3814 2240      	move.l %d0,%a1
 5134 3816 2029 0018 	move.l 24(%a1),%d0
 5135 381a 2200      	move.l %d0,%d1
 5136 381c 92AE FFE6 	sub.l -26(%fp),%d1
 5137 3820 202E 0008 	move.l 8(%fp),%d0
 5138 3824 2240      	move.l %d0,%a1
 5139 3826 2011      	move.l (%a1),%d0
 5140 3828 2240      	move.l %d0,%a1
 5141 382a 3029 000A 	move.w 10(%a1),%d0
 5142 382e 3000      	move.w %d0,%d0
 5143 3830 0280 0000 	and.l #65535,%d0
 5143      FFFF 
 5144 3836 4C01 0800 	muls.l %d1,%d0
 5145 383a 222E FFF0 	move.l -16(%fp),%d1
 5146 383e D280      	add.l %d0,%d1
 5147 3840 7024      	moveq #36,%d0
 5148 3842 D0AE 0008 	add.l 8(%fp),%d0
 5149 3846 2F08      	move.l %a0,-(%sp)
 5150 3848 2F01      	move.l %d1,-(%sp)
 5151 384a 2F00      	move.l %d0,-(%sp)
 5152 384c 4EBA C7B2 	jsr mem_cpy
 5153 3850 4FEF 000C 	lea (12,%sp),%sp
 5154 3854 202E 0008 	move.l 8(%fp),%d0
 5155 3858 2040      	move.l %d0,%a0
 5156 385a 1028 0006 	move.b 6(%a0),%d0
 5157 385e 1200      	move.b %d0,%d1
 5158 3860 0201 FFBF 	and.b #-65,%d1
 5159 3864 202E 0008 	move.l 8(%fp),%d0
 5160 3868 2240      	move.l %d0,%a1
 5161 386a 1341 0006 	move.b %d1,6(%a1)
 5162               	.L369:
 5163 386e 202E 0008 	move.l 8(%fp),%d0
 5164 3872 2040      	move.l %d0,%a0
 5165 3874 2010      	move.l (%a0),%d0
 5166 3876 2240      	move.l %d0,%a1
 5167 3878 3029 000A 	move.w 10(%a1),%d0
 5168 387c 3000      	move.w %d0,%d0
 5169 387e 0280 0000 	and.l #65535,%d0
 5169      FFFF 
 5170 3884 2200      	move.l %d0,%d1
 5171 3886 4C2E 1800 	muls.l -12(%fp),%d1
 5171      FFF4 
 5172 388c 2D41 FFF8 	move.l %d1,-8(%fp)
 5173 3890 6000 012C 	jra .L370
 5174               	.L366:
68K GAS   			page 97


 5175 3894 202E 0008 	move.l 8(%fp),%d0
 5176 3898 2040      	move.l %d0,%a0
 5177 389a 2028 0018 	move.l 24(%a0),%d0
 5178 389e B0AE FFE6 	cmp.l -26(%fp),%d0
 5179 38a2 6760      	jeq .L371
 5180 38a4 202E 0008 	move.l 8(%fp),%d0
 5181 38a8 2240      	move.l %d0,%a1
 5182 38aa 2229 0008 	move.l 8(%a1),%d1
 5183 38ae 202E 0008 	move.l 8(%fp),%d0
 5184 38b2 2040      	move.l %d0,%a0
 5185 38b4 2028 000C 	move.l 12(%a0),%d0
 5186 38b8 B081      	cmp.l %d1,%d0
 5187 38ba 6348      	jls .L371
 5188 38bc 7224      	moveq #36,%d1
 5189 38be D2AE 0008 	add.l 8(%fp),%d1
 5190 38c2 202E 0008 	move.l 8(%fp),%d0
 5191 38c6 2240      	move.l %d0,%a1
 5192 38c8 2011      	move.l (%a1),%d0
 5193 38ca 2040      	move.l %d0,%a0
 5194 38cc 1028 0001 	move.b 1(%a0),%d0
 5195 38d0 1000      	move.b %d0,%d0
 5196 38d2 0280 0000 	and.l #255,%d0
 5196      00FF 
 5197 38d8 4878 0001 	pea 1.w
 5198 38dc 2F2E FFE6 	move.l -26(%fp),-(%sp)
 5199 38e0 2F01      	move.l %d1,-(%sp)
 5200 38e2 2F00      	move.l %d0,-(%sp)
 5201 38e4 4EB9 0000 	jsr disk_read
 5201      0000 
 5202 38ea 4FEF 0010 	lea (16,%sp),%sp
 5203 38ee 4A80      	tst.l %d0
 5204 38f0 6712      	jeq .L371
 5205 38f2 202E 0008 	move.l 8(%fp),%d0
 5206 38f6 2240      	move.l %d0,%a1
 5207 38f8 137C 0001 	move.b #1,7(%a1)
 5207      0007 
 5208 38fe 7001      	moveq #1,%d0
 5209 3900 6000 0150 	jra .L350
 5210               	.L371:
 5211 3904 202E 0008 	move.l 8(%fp),%d0
 5212 3908 2040      	move.l %d0,%a0
 5213 390a 216E FFE6 	move.l -26(%fp),24(%a0)
 5213      0018 
 5214               	.L355:
 5215 3910 202E 0008 	move.l 8(%fp),%d0
 5216 3914 2240      	move.l %d0,%a1
 5217 3916 2011      	move.l (%a1),%d0
 5218 3918 2040      	move.l %d0,%a0
 5219 391a 3028 000A 	move.w 10(%a0),%d0
 5220 391e 3000      	move.w %d0,%d0
 5221 3920 0280 0000 	and.l #65535,%d0
 5221      FFFF 
 5222 3926 222E 0008 	move.l 8(%fp),%d1
 5223 392a 2241      	move.l %d1,%a1
 5224 392c 2069 0008 	move.l 8(%a1),%a0
 5225 3930 222E 0008 	move.l 8(%fp),%d1
 5226 3934 2241      	move.l %d1,%a1
68K GAS   			page 98


 5227 3936 2211      	move.l (%a1),%d1
 5228 3938 2241      	move.l %d1,%a1
 5229 393a 3229 000A 	move.w 10(%a1),%d1
 5230 393e 3201      	move.w %d1,%d1
 5231 3940 0281 0000 	and.l #65535,%d1
 5231      FFFF 
 5232 3946 2408      	move.l %a0,%d2
 5233 3948 4C41 2001 	divul.l %d1,%d1:%d2
 5234 394c 2400      	move.l %d0,%d2
 5235 394e 9481      	sub.l %d1,%d2
 5236 3950 2D42 FFF8 	move.l %d2,-8(%fp)
 5237 3954 206E FFF8 	move.l -8(%fp),%a0
 5238 3958 B1EE 0010 	cmp.l 16(%fp),%a0
 5239 395c 6306      	jls .L372
 5240 395e 2D6E 0010 	move.l 16(%fp),-8(%fp)
 5240      FFF8 
 5241               	.L372:
 5242 3964 7024      	moveq #36,%d0
 5243 3966 D0AE 0008 	add.l 8(%fp),%d0
 5244 396a 222E 0008 	move.l 8(%fp),%d1
 5245 396e 2241      	move.l %d1,%a1
 5246 3970 2069 0008 	move.l 8(%a1),%a0
 5247 3974 222E 0008 	move.l 8(%fp),%d1
 5248 3978 2241      	move.l %d1,%a1
 5249 397a 2211      	move.l (%a1),%d1
 5250 397c 2241      	move.l %d1,%a1
 5251 397e 3229 000A 	move.w 10(%a1),%d1
 5252 3982 3201      	move.w %d1,%d1
 5253 3984 0281 0000 	and.l #65535,%d1
 5253      FFFF 
 5254 398a 2408      	move.l %a0,%d2
 5255 398c 4C41 2001 	divul.l %d1,%d1:%d2
 5256 3990 D081      	add.l %d1,%d0
 5257 3992 2F2E FFF8 	move.l -8(%fp),-(%sp)
 5258 3996 2F2E FFF0 	move.l -16(%fp),-(%sp)
 5259 399a 2F00      	move.l %d0,-(%sp)
 5260 399c 4EBA C662 	jsr mem_cpy
 5261 39a0 4FEF 000C 	lea (12,%sp),%sp
 5262 39a4 202E 0008 	move.l 8(%fp),%d0
 5263 39a8 2040      	move.l %d0,%a0
 5264 39aa 1028 0006 	move.b 6(%a0),%d0
 5265 39ae 1200      	move.b %d0,%d1
 5266 39b0 0001 0040 	or.b #64,%d1
 5267 39b4 202E 0008 	move.l 8(%fp),%d0
 5268 39b8 2240      	move.l %d0,%a1
 5269 39ba 1341 0006 	move.b %d1,6(%a1)
 5270               	.L370:
 5271 39be 202E FFF8 	move.l -8(%fp),%d0
 5272 39c2 D1AE FFF0 	add.l %d0,-16(%fp)
 5273 39c6 202E 0008 	move.l 8(%fp),%d0
 5274 39ca 2040      	move.l %d0,%a0
 5275 39cc 2028 0008 	move.l 8(%a0),%d0
 5276 39d0 2200      	move.l %d0,%d1
 5277 39d2 D2AE FFF8 	add.l -8(%fp),%d1
 5278 39d6 202E 0008 	move.l 8(%fp),%d0
 5279 39da 2240      	move.l %d0,%a1
 5280 39dc 2341 0008 	move.l %d1,8(%a1)
68K GAS   			page 99


 5281 39e0 202E 0014 	move.l 20(%fp),%d0
 5282 39e4 2040      	move.l %d0,%a0
 5283 39e6 2010      	move.l (%a0),%d0
 5284 39e8 2200      	move.l %d0,%d1
 5285 39ea D2AE FFF8 	add.l -8(%fp),%d1
 5286 39ee 202E 0014 	move.l 20(%fp),%d0
 5287 39f2 2240      	move.l %d0,%a1
 5288 39f4 2281      	move.l %d1,(%a1)
 5289 39f6 202E FFF8 	move.l -8(%fp),%d0
 5290 39fa 91AE 0010 	sub.l %d0,16(%fp)
 5291               	.L354:
 5292 39fe 4AAE 0010 	tst.l 16(%fp)
 5293 3a02 6600 FB42 	jne .L373
 5294 3a06 6002      	jra .L360
 5295               	.L375:
 5296 3a08 4E71      	nop
 5297               	.L360:
 5298 3a0a 202E 0008 	move.l 8(%fp),%d0
 5299 3a0e 2040      	move.l %d0,%a0
 5300 3a10 2228 0008 	move.l 8(%a0),%d1
 5301 3a14 202E 0008 	move.l 8(%fp),%d0
 5302 3a18 2240      	move.l %d0,%a1
 5303 3a1a 2029 000C 	move.l 12(%a1),%d0
 5304 3a1e B081      	cmp.l %d1,%d0
 5305 3a20 6414      	jcc .L374
 5306 3a22 202E 0008 	move.l 8(%fp),%d0
 5307 3a26 2040      	move.l %d0,%a0
 5308 3a28 2228 0008 	move.l 8(%a0),%d1
 5309 3a2c 202E 0008 	move.l 8(%fp),%d0
 5310 3a30 2240      	move.l %d0,%a1
 5311 3a32 2341 000C 	move.l %d1,12(%a1)
 5312               	.L374:
 5313 3a36 202E 0008 	move.l 8(%fp),%d0
 5314 3a3a 2040      	move.l %d0,%a0
 5315 3a3c 1028 0006 	move.b 6(%a0),%d0
 5316 3a40 1200      	move.b %d0,%d1
 5317 3a42 0001 0020 	or.b #32,%d1
 5318 3a46 202E 0008 	move.l 8(%fp),%d0
 5319 3a4a 2240      	move.l %d0,%a1
 5320 3a4c 1341 0006 	move.b %d1,6(%a1)
 5321 3a50 4280      	clr.l %d0
 5322               	.L350:
 5323 3a52 242E FFE0 	move.l -32(%fp),%d2
 5324 3a56 4E5E      	unlk %fp
 5325 3a58 4E75      	rts
 5327               	.align2
 5328               	.globlf_sync
 5330               	f_sync:
 5331 3a5a 4E56 FFF4 	link.w %fp,#-12
 5332 3a5e 2F02      	move.l %d2,-(%sp)
 5333 3a60 2F2E 0008 	move.l 8(%fp),-(%sp)
 5334 3a64 4EBA F078 	jsr validate
 5335 3a68 588F      	addq.l #4,%sp
 5336 3a6a 2D40 FFFC 	move.l %d0,-4(%fp)
 5337 3a6e 4AAE FFFC 	tst.l -4(%fp)
 5338 3a72 6600 0204 	jne .L377
 5339 3a76 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 100


 5340 3a7a 2040      	move.l %d0,%a0
 5341 3a7c 1028 0006 	move.b 6(%a0),%d0
 5342 3a80 1000      	move.b %d0,%d0
 5343 3a82 0280 0000 	and.l #255,%d0
 5343      00FF 
 5344 3a88 7220      	moveq #32,%d1
 5345 3a8a C081      	and.l %d1,%d0
 5346 3a8c 4A80      	tst.l %d0
 5347 3a8e 6700 01E8 	jeq .L377
 5348 3a92 202E 0008 	move.l 8(%fp),%d0
 5349 3a96 2040      	move.l %d0,%a0
 5350 3a98 1028 0006 	move.b 6(%a0),%d0
 5351 3a9c 1000      	move.b %d0,%d0
 5352 3a9e 0280 0000 	and.l #255,%d0
 5352      00FF 
 5353 3aa4 7240      	moveq #64,%d1
 5354 3aa6 C081      	and.l %d1,%d0
 5355 3aa8 4A80      	tst.l %d0
 5356 3aaa 675E      	jeq .L378
 5357 3aac 202E 0008 	move.l 8(%fp),%d0
 5358 3ab0 2240      	move.l %d0,%a1
 5359 3ab2 2069 0018 	move.l 24(%a1),%a0
 5360 3ab6 7224      	moveq #36,%d1
 5361 3ab8 D2AE 0008 	add.l 8(%fp),%d1
 5362 3abc 202E 0008 	move.l 8(%fp),%d0
 5363 3ac0 2240      	move.l %d0,%a1
 5364 3ac2 2011      	move.l (%a1),%d0
 5365 3ac4 2240      	move.l %d0,%a1
 5366 3ac6 1029 0001 	move.b 1(%a1),%d0
 5367 3aca 1000      	move.b %d0,%d0
 5368 3acc 0280 0000 	and.l #255,%d0
 5368      00FF 
 5369 3ad2 4878 0001 	pea 1.w
 5370 3ad6 2F08      	move.l %a0,-(%sp)
 5371 3ad8 2F01      	move.l %d1,-(%sp)
 5372 3ada 2F00      	move.l %d0,-(%sp)
 5373 3adc 4EB9 0000 	jsr disk_write
 5373      0000 
 5374 3ae2 4FEF 0010 	lea (16,%sp),%sp
 5375 3ae6 4A80      	tst.l %d0
 5376 3ae8 6706      	jeq .L379
 5377 3aea 7001      	moveq #1,%d0
 5378 3aec 6000 018E 	jra .L380
 5379               	.L379:
 5380 3af0 202E 0008 	move.l 8(%fp),%d0
 5381 3af4 2040      	move.l %d0,%a0
 5382 3af6 1028 0006 	move.b 6(%a0),%d0
 5383 3afa 1200      	move.b %d0,%d1
 5384 3afc 0201 FFBF 	and.b #-65,%d1
 5385 3b00 202E 0008 	move.l 8(%fp),%d0
 5386 3b04 2240      	move.l %d0,%a1
 5387 3b06 1341 0006 	move.b %d1,6(%a1)
 5388               	.L378:
 5389 3b0a 202E 0008 	move.l 8(%fp),%d0
 5390 3b0e 2040      	move.l %d0,%a0
 5391 3b10 2228 001C 	move.l 28(%a0),%d1
 5392 3b14 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 101


 5393 3b18 2240      	move.l %d0,%a1
 5394 3b1a 2011      	move.l (%a1),%d0
 5395 3b1c 2F01      	move.l %d1,-(%sp)
 5396 3b1e 2F00      	move.l %d0,-(%sp)
 5397 3b20 4EBA C6D8 	jsr move_window
 5398 3b24 508F      	addq.l #8,%sp
 5399 3b26 2D40 FFFC 	move.l %d0,-4(%fp)
 5400 3b2a 4AAE FFFC 	tst.l -4(%fp)
 5401 3b2e 6600 0148 	jne .L377
 5402 3b32 202E 0008 	move.l 8(%fp),%d0
 5403 3b36 2040      	move.l %d0,%a0
 5404 3b38 2D68 0020 	move.l 32(%a0),-8(%fp)
 5404      FFF8 
 5405 3b3e 700B      	moveq #11,%d0
 5406 3b40 D0AE FFF8 	add.l -8(%fp),%d0
 5407 3b44 720B      	moveq #11,%d1
 5408 3b46 D2AE FFF8 	add.l -8(%fp),%d1
 5409 3b4a 2241      	move.l %d1,%a1
 5410 3b4c 1211      	move.b (%a1),%d1
 5411 3b4e 0001 0020 	or.b #32,%d1
 5412 3b52 2040      	move.l %d0,%a0
 5413 3b54 1081      	move.b %d1,(%a0)
 5414 3b56 701C      	moveq #28,%d0
 5415 3b58 D0AE FFF8 	add.l -8(%fp),%d0
 5416 3b5c 222E 0008 	move.l 8(%fp),%d1
 5417 3b60 2241      	move.l %d1,%a1
 5418 3b62 2229 000C 	move.l 12(%a1),%d1
 5419 3b66 1201      	move.b %d1,%d1
 5420 3b68 2040      	move.l %d0,%a0
 5421 3b6a 1081      	move.b %d1,(%a0)
 5422 3b6c 701D      	moveq #29,%d0
 5423 3b6e D0AE FFF8 	add.l -8(%fp),%d0
 5424 3b72 222E 0008 	move.l 8(%fp),%d1
 5425 3b76 2241      	move.l %d1,%a1
 5426 3b78 2229 000C 	move.l 12(%a1),%d1
 5427 3b7c 3201      	move.w %d1,%d1
 5428 3b7e E049      	lsr.w #8,%d1
 5429 3b80 1201      	move.b %d1,%d1
 5430 3b82 2040      	move.l %d0,%a0
 5431 3b84 1081      	move.b %d1,(%a0)
 5432 3b86 701E      	moveq #30,%d0
 5433 3b88 D0AE FFF8 	add.l -8(%fp),%d0
 5434 3b8c 222E 0008 	move.l 8(%fp),%d1
 5435 3b90 2241      	move.l %d1,%a1
 5436 3b92 2229 000C 	move.l 12(%a1),%d1
 5437 3b96 4241      	clr.w %d1
 5438 3b98 4841      	swap %d1
 5439 3b9a 1201      	move.b %d1,%d1
 5440 3b9c 2040      	move.l %d0,%a0
 5441 3b9e 1081      	move.b %d1,(%a0)
 5442 3ba0 701F      	moveq #31,%d0
 5443 3ba2 D0AE FFF8 	add.l -8(%fp),%d0
 5444 3ba6 222E 0008 	move.l 8(%fp),%d1
 5445 3baa 2241      	move.l %d1,%a1
 5446 3bac 2229 000C 	move.l 12(%a1),%d1
 5447 3bb0 7418      	moveq #24,%d2
 5448 3bb2 E4A9      	lsr.l %d2,%d1
68K GAS   			page 102


 5449 3bb4 1201      	move.b %d1,%d1
 5450 3bb6 2040      	move.l %d0,%a0
 5451 3bb8 1081      	move.b %d1,(%a0)
 5452 3bba 202E 0008 	move.l 8(%fp),%d0
 5453 3bbe 2240      	move.l %d0,%a1
 5454 3bc0 2029 0010 	move.l 16(%a1),%d0
 5455 3bc4 2F00      	move.l %d0,-(%sp)
 5456 3bc6 2F2E FFF8 	move.l -8(%fp),-(%sp)
 5457 3bca 4EBA D87E 	jsr st_clust
 5458 3bce 508F      	addq.l #8,%sp
 5459 3bd0 4EB9 0000 	jsr get_fattime
 5459      0000 
 5460 3bd6 2D40 FFF4 	move.l %d0,-12(%fp)
 5461 3bda 7016      	moveq #22,%d0
 5462 3bdc D0AE FFF8 	add.l -8(%fp),%d0
 5463 3be0 222E FFF4 	move.l -12(%fp),%d1
 5464 3be4 1201      	move.b %d1,%d1
 5465 3be6 2040      	move.l %d0,%a0
 5466 3be8 1081      	move.b %d1,(%a0)
 5467 3bea 7017      	moveq #23,%d0
 5468 3bec D0AE FFF8 	add.l -8(%fp),%d0
 5469 3bf0 222E FFF4 	move.l -12(%fp),%d1
 5470 3bf4 3201      	move.w %d1,%d1
 5471 3bf6 E049      	lsr.w #8,%d1
 5472 3bf8 1201      	move.b %d1,%d1
 5473 3bfa 2240      	move.l %d0,%a1
 5474 3bfc 1281      	move.b %d1,(%a1)
 5475 3bfe 7018      	moveq #24,%d0
 5476 3c00 D0AE FFF8 	add.l -8(%fp),%d0
 5477 3c04 222E FFF4 	move.l -12(%fp),%d1
 5478 3c08 4241      	clr.w %d1
 5479 3c0a 4841      	swap %d1
 5480 3c0c 1201      	move.b %d1,%d1
 5481 3c0e 2040      	move.l %d0,%a0
 5482 3c10 1081      	move.b %d1,(%a0)
 5483 3c12 7019      	moveq #25,%d0
 5484 3c14 D0AE FFF8 	add.l -8(%fp),%d0
 5485 3c18 222E FFF4 	move.l -12(%fp),%d1
 5486 3c1c 7418      	moveq #24,%d2
 5487 3c1e E4A9      	lsr.l %d2,%d1
 5488 3c20 1201      	move.b %d1,%d1
 5489 3c22 2040      	move.l %d0,%a0
 5490 3c24 1081      	move.b %d1,(%a0)
 5491 3c26 7012      	moveq #18,%d0
 5492 3c28 D0AE FFF8 	add.l -8(%fp),%d0
 5493 3c2c 2240      	move.l %d0,%a1
 5494 3c2e 4211      	clr.b (%a1)
 5495 3c30 7013      	moveq #19,%d0
 5496 3c32 D0AE FFF8 	add.l -8(%fp),%d0
 5497 3c36 2040      	move.l %d0,%a0
 5498 3c38 4210      	clr.b (%a0)
 5499 3c3a 202E 0008 	move.l 8(%fp),%d0
 5500 3c3e 2240      	move.l %d0,%a1
 5501 3c40 1029 0006 	move.b 6(%a1),%d0
 5502 3c44 1200      	move.b %d0,%d1
 5503 3c46 0201 FFDF 	and.b #-33,%d1
 5504 3c4a 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 103


 5505 3c4e 2040      	move.l %d0,%a0
 5506 3c50 1141 0006 	move.b %d1,6(%a0)
 5507 3c54 202E 0008 	move.l 8(%fp),%d0
 5508 3c58 2240      	move.l %d0,%a1
 5509 3c5a 2011      	move.l (%a1),%d0
 5510 3c5c 2040      	move.l %d0,%a0
 5511 3c5e 117C 0001 	move.b #1,4(%a0)
 5511      0004 
 5512 3c64 202E 0008 	move.l 8(%fp),%d0
 5513 3c68 2240      	move.l %d0,%a1
 5514 3c6a 2011      	move.l (%a1),%d0
 5515 3c6c 2F00      	move.l %d0,-(%sp)
 5516 3c6e 4EBA C5F8 	jsr sync_fs
 5517 3c72 588F      	addq.l #4,%sp
 5518 3c74 2D40 FFFC 	move.l %d0,-4(%fp)
 5519               	.L377:
 5520 3c78 202E FFFC 	move.l -4(%fp),%d0
 5521               	.L380:
 5522 3c7c 242E FFF0 	move.l -16(%fp),%d2
 5523 3c80 4E5E      	unlk %fp
 5524 3c82 4E75      	rts
 5526               	.align2
 5527               	.globlf_close
 5529               	f_close:
 5530 3c84 4E56 FFFC 	link.w %fp,#-4
 5531 3c88 2F2E 0008 	move.l 8(%fp),-(%sp)
 5532 3c8c 4EBA FDCC 	jsr f_sync
 5533 3c90 588F      	addq.l #4,%sp
 5534 3c92 2D40 FFFC 	move.l %d0,-4(%fp)
 5535 3c96 4AAE FFFC 	tst.l -4(%fp)
 5536 3c9a 661C      	jne .L382
 5537 3c9c 2F2E 0008 	move.l 8(%fp),-(%sp)
 5538 3ca0 4EBA EE3C 	jsr validate
 5539 3ca4 588F      	addq.l #4,%sp
 5540 3ca6 2D40 FFFC 	move.l %d0,-4(%fp)
 5541 3caa 4AAE FFFC 	tst.l -4(%fp)
 5542 3cae 6608      	jne .L382
 5543 3cb0 202E 0008 	move.l 8(%fp),%d0
 5544 3cb4 2040      	move.l %d0,%a0
 5545 3cb6 4290      	clr.l (%a0)
 5546               	.L382:
 5547 3cb8 202E FFFC 	move.l -4(%fp),%d0
 5548 3cbc 4E5E      	unlk %fp
 5549 3cbe 4E75      	rts
 5551               	.align2
 5552               	.globlf_chdrive
 5554               	f_chdrive:
 5555 3cc0 4E56 FFFC 	link.w %fp,#-4
 5556 3cc4 200E      	move.l %fp,%d0
 5557 3cc6 5080      	addq.l #8,%d0
 5558 3cc8 2F00      	move.l %d0,-(%sp)
 5559 3cca 4EBA E0BE 	jsr get_ldnumber
 5560 3cce 588F      	addq.l #4,%sp
 5561 3cd0 2D40 FFFC 	move.l %d0,-4(%fp)
 5562 3cd4 4AAE FFFC 	tst.l -4(%fp)
 5563 3cd8 6C04      	jge .L384
 5564 3cda 700B      	moveq #11,%d0
68K GAS   			page 104


 5565 3cdc 600E      	jra .L385
 5566               	.L384:
 5567 3cde 202E FFFC 	move.l -4(%fp),%d0
 5568 3ce2 1000      	move.b %d0,%d0
 5569 3ce4 13C0 0000 	move.b %d0,CurrVol
 5569      0000 
 5570 3cea 4280      	clr.l %d0
 5571               	.L385:
 5572 3cec 4E5E      	unlk %fp
 5573 3cee 4E75      	rts
 5575               	.align2
 5576               	.globlf_chdir
 5578               	f_chdir:
 5579 3cf0 4E56 FFD4 	link.w %fp,#-44
 5580 3cf4 2F02      	move.l %d2,-(%sp)
 5581 3cf6 42A7      	clr.l -(%sp)
 5582 3cf8 200E      	move.l %fp,%d0
 5583 3cfa 5080      	addq.l #8,%d0
 5584 3cfc 2F00      	move.l %d0,-(%sp)
 5585 3cfe 70E0      	moveq #-32,%d0
 5586 3d00 D08E      	add.l %fp,%d0
 5587 3d02 2F00      	move.l %d0,-(%sp)
 5588 3d04 4EBA E34A 	jsr find_volume
 5589 3d08 4FEF 000C 	lea (12,%sp),%sp
 5590 3d0c 2D40 FFFC 	move.l %d0,-4(%fp)
 5591 3d10 4AAE FFFC 	tst.l -4(%fp)
 5592 3d14 6600 008C 	jne .L387
 5593 3d18 41EE FFD4 	lea (-44,%fp),%a0
 5594 3d1c 2D48 FFF8 	move.l %a0,-8(%fp)
 5595 3d20 202E 0008 	move.l 8(%fp),%d0
 5596 3d24 2F00      	move.l %d0,-(%sp)
 5597 3d26 70E0      	moveq #-32,%d0
 5598 3d28 D08E      	add.l %fp,%d0
 5599 3d2a 2F00      	move.l %d0,-(%sp)
 5600 3d2c 4EBA DECA 	jsr follow_path
 5601 3d30 508F      	addq.l #8,%sp
 5602 3d32 2D40 FFFC 	move.l %d0,-4(%fp)
 5603 3d36 4AAE FFFC 	tst.l -4(%fp)
 5604 3d3a 6658      	jne .L388
 5605 3d3c 202E FFF4 	move.l -12(%fp),%d0
 5606 3d40 4A80      	tst.l %d0
 5607 3d42 6610      	jne .L389
 5608 3d44 202E FFE0 	move.l -32(%fp),%d0
 5609 3d48 222E FFE8 	move.l -24(%fp),%d1
 5610 3d4c 2040      	move.l %d0,%a0
 5611 3d4e 2141 0014 	move.l %d1,20(%a0)
 5612 3d52 6040      	jra .L388
 5613               	.L389:
 5614 3d54 202E FFF4 	move.l -12(%fp),%d0
 5615 3d58 720B      	moveq #11,%d1
 5616 3d5a D081      	add.l %d1,%d0
 5617 3d5c 2040      	move.l %d0,%a0
 5618 3d5e 1010      	move.b (%a0),%d0
 5619 3d60 1000      	move.b %d0,%d0
 5620 3d62 0280 0000 	and.l #255,%d0
 5620      00FF 
 5621 3d68 7210      	moveq #16,%d1
68K GAS   			page 105


 5622 3d6a C081      	and.l %d1,%d0
 5623 3d6c 4A80      	tst.l %d0
 5624 3d6e 671E      	jeq .L390
 5625 3d70 242E FFE0 	move.l -32(%fp),%d2
 5626 3d74 222E FFF4 	move.l -12(%fp),%d1
 5627 3d78 202E FFE0 	move.l -32(%fp),%d0
 5628 3d7c 2F01      	move.l %d1,-(%sp)
 5629 3d7e 2F00      	move.l %d0,-(%sp)
 5630 3d80 4EBA D642 	jsr ld_clust
 5631 3d84 508F      	addq.l #8,%sp
 5632 3d86 2042      	move.l %d2,%a0
 5633 3d88 2140 0014 	move.l %d0,20(%a0)
 5634 3d8c 6006      	jra .L388
 5635               	.L390:
 5636 3d8e 7005      	moveq #5,%d0
 5637 3d90 2D40 FFFC 	move.l %d0,-4(%fp)
 5638               	.L388:
 5639 3d94 7204      	moveq #4,%d1
 5640 3d96 B2AE FFFC 	cmp.l -4(%fp),%d1
 5641 3d9a 6606      	jne .L387
 5642 3d9c 7005      	moveq #5,%d0
 5643 3d9e 2D40 FFFC 	move.l %d0,-4(%fp)
 5644               	.L387:
 5645 3da2 202E FFFC 	move.l -4(%fp),%d0
 5646 3da6 242E FFD0 	move.l -48(%fp),%d2
 5647 3daa 4E5E      	unlk %fp
 5648 3dac 4E75      	rts
 5650               	.align2
 5651               	.globlf_getcwd
 5653               	f_getcwd:
 5654 3dae 4E56 FFAC 	link.w %fp,#-84
 5655 3db2 202E 0008 	move.l 8(%fp),%d0
 5656 3db6 2040      	move.l %d0,%a0
 5657 3db8 4210      	clr.b (%a0)
 5658 3dba 42A7      	clr.l -(%sp)
 5659 3dbc 200E      	move.l %fp,%d0
 5660 3dbe 5080      	addq.l #8,%d0
 5661 3dc0 2F00      	move.l %d0,-(%sp)
 5662 3dc2 70D0      	moveq #-48,%d0
 5663 3dc4 D08E      	add.l %fp,%d0
 5664 3dc6 2F00      	move.l %d0,-(%sp)
 5665 3dc8 4EBA E286 	jsr find_volume
 5666 3dcc 4FEF 000C 	lea (12,%sp),%sp
 5667 3dd0 2D40 FFFC 	move.l %d0,-4(%fp)
 5668 3dd4 4AAE FFFC 	tst.l -4(%fp)
 5669 3dd8 6600 020A 	jne .L392
 5670 3ddc 41EE FFAE 	lea (-82,%fp),%a0
 5671 3de0 2D48 FFE8 	move.l %a0,-24(%fp)
 5672 3de4 2D6E 000C 	move.l 12(%fp),-8(%fp)
 5672      FFF8 
 5673 3dea 202E FFD0 	move.l -48(%fp),%d0
 5674 3dee 2040      	move.l %d0,%a0
 5675 3df0 2028 0014 	move.l 20(%a0),%d0
 5676 3df4 2D40 FFD8 	move.l %d0,-40(%fp)
 5677 3df8 6000 0152 	jra .L393
 5678               	.L408:
 5679 3dfc 4878 0001 	pea 1.w
68K GAS   			page 106


 5680 3e00 70D0      	moveq #-48,%d0
 5681 3e02 D08E      	add.l %fp,%d0
 5682 3e04 2F00      	move.l %d0,-(%sp)
 5683 3e06 4EBA D024 	jsr dir_sdi
 5684 3e0a 508F      	addq.l #8,%sp
 5685 3e0c 2D40 FFFC 	move.l %d0,-4(%fp)
 5686 3e10 4AAE FFFC 	tst.l -4(%fp)
 5687 3e14 6600 0146 	jne .L411
 5688               	.L394:
 5689 3e18 42A7      	clr.l -(%sp)
 5690 3e1a 70D0      	moveq #-48,%d0
 5691 3e1c D08E      	add.l %fp,%d0
 5692 3e1e 2F00      	move.l %d0,-(%sp)
 5693 3e20 4EBA D74E 	jsr dir_read
 5694 3e24 508F      	addq.l #8,%sp
 5695 3e26 2D40 FFFC 	move.l %d0,-4(%fp)
 5696 3e2a 4AAE FFFC 	tst.l -4(%fp)
 5697 3e2e 6600 0130 	jne .L412
 5698               	.L396:
 5699 3e32 222E FFE4 	move.l -28(%fp),%d1
 5700 3e36 202E FFD0 	move.l -48(%fp),%d0
 5701 3e3a 2F01      	move.l %d1,-(%sp)
 5702 3e3c 2F00      	move.l %d0,-(%sp)
 5703 3e3e 4EBA D584 	jsr ld_clust
 5704 3e42 508F      	addq.l #8,%sp
 5705 3e44 2D40 FFD8 	move.l %d0,-40(%fp)
 5706 3e48 42A7      	clr.l -(%sp)
 5707 3e4a 70D0      	moveq #-48,%d0
 5708 3e4c D08E      	add.l %fp,%d0
 5709 3e4e 2F00      	move.l %d0,-(%sp)
 5710 3e50 4EBA CFDA 	jsr dir_sdi
 5711 3e54 508F      	addq.l #8,%sp
 5712 3e56 2D40 FFFC 	move.l %d0,-4(%fp)
 5713 3e5a 4AAE FFFC 	tst.l -4(%fp)
 5714 3e5e 6600 0104 	jne .L413
 5715               	.L397:
 5716 3e62 42A7      	clr.l -(%sp)
 5717 3e64 70D0      	moveq #-48,%d0
 5718 3e66 D08E      	add.l %fp,%d0
 5719 3e68 2F00      	move.l %d0,-(%sp)
 5720 3e6a 4EBA D704 	jsr dir_read
 5721 3e6e 508F      	addq.l #8,%sp
 5722 3e70 2D40 FFFC 	move.l %d0,-4(%fp)
 5723 3e74 4AAE FFFC 	tst.l -4(%fp)
 5724 3e78 6632      	jne .L414
 5725               	.L398:
 5726 3e7a 222E FFE4 	move.l -28(%fp),%d1
 5727 3e7e 202E FFD0 	move.l -48(%fp),%d0
 5728 3e82 2F01      	move.l %d1,-(%sp)
 5729 3e84 2F00      	move.l %d0,-(%sp)
 5730 3e86 4EBA D53C 	jsr ld_clust
 5731 3e8a 508F      	addq.l #8,%sp
 5732 3e8c B0AE FFEC 	cmp.l -20(%fp),%d0
 5733 3e90 671E      	jeq .L415
 5734               	.L400:
 5735 3e92 42A7      	clr.l -(%sp)
 5736 3e94 70D0      	moveq #-48,%d0
68K GAS   			page 107


 5737 3e96 D08E      	add.l %fp,%d0
 5738 3e98 2F00      	move.l %d0,-(%sp)
 5739 3e9a 4EBA D16C 	jsr dir_next
 5740 3e9e 508F      	addq.l #8,%sp
 5741 3ea0 2D40 FFFC 	move.l %d0,-4(%fp)
 5742 3ea4 4AAE FFFC 	tst.l -4(%fp)
 5743 3ea8 67B8      	jeq .L397
 5744 3eaa 6006      	jra .L399
 5745               	.L414:
 5746 3eac 4E71      	nop
 5747 3eae 6002      	jra .L399
 5748               	.L415:
 5749 3eb0 4E71      	nop
 5750               	.L399:
 5751 3eb2 7004      	moveq #4,%d0
 5752 3eb4 B0AE FFFC 	cmp.l -4(%fp),%d0
 5753 3eb8 6606      	jne .L401
 5754 3eba 7202      	moveq #2,%d1
 5755 3ebc 2D41 FFFC 	move.l %d1,-4(%fp)
 5756               	.L401:
 5757 3ec0 4AAE FFFC 	tst.l -4(%fp)
 5758 3ec4 6600 00A2 	jne .L416
 5759               	.L402:
 5760 3ec8 70BA      	moveq #-70,%d0
 5761 3eca D08E      	add.l %fp,%d0
 5762 3ecc 2F00      	move.l %d0,-(%sp)
 5763 3ece 70D0      	moveq #-48,%d0
 5764 3ed0 D08E      	add.l %fp,%d0
 5765 3ed2 2F00      	move.l %d0,-(%sp)
 5766 3ed4 4EBA D8A0 	jsr get_fileinfo
 5767 3ed8 508F      	addq.l #8,%sp
 5768 3eda 70BA      	moveq #-70,%d0
 5769 3edc D08E      	add.l %fp,%d0
 5770 3ede 7209      	moveq #9,%d1
 5771 3ee0 D280      	add.l %d0,%d1
 5772 3ee2 2D41 FFF0 	move.l %d1,-16(%fp)
 5773 3ee6 42AE FFF4 	clr.l -12(%fp)
 5774 3eea 6004      	jra .L403
 5775               	.L404:
 5776 3eec 52AE FFF4 	addq.l #1,-12(%fp)
 5777               	.L403:
 5778 3ef0 202E FFF0 	move.l -16(%fp),%d0
 5779 3ef4 D0AE FFF4 	add.l -12(%fp),%d0
 5780 3ef8 2040      	move.l %d0,%a0
 5781 3efa 1010      	move.b (%a0),%d0
 5782 3efc 4A00      	tst.b %d0
 5783 3efe 66EC      	jne .L404
 5784 3f00 202E FFF4 	move.l -12(%fp),%d0
 5785 3f04 5680      	addq.l #3,%d0
 5786 3f06 B0AE FFF8 	cmp.l -8(%fp),%d0
 5787 3f0a 6328      	jls .L406
 5788 3f0c 7011      	moveq #17,%d0
 5789 3f0e 2D40 FFFC 	move.l %d0,-4(%fp)
 5790 3f12 6056      	jra .L395
 5791               	.L407:
 5792 3f14 202E 0008 	move.l 8(%fp),%d0
 5793 3f18 53AE FFF8 	subq.l #1,-8(%fp)
68K GAS   			page 108


 5794 3f1c D0AE FFF8 	add.l -8(%fp),%d0
 5795 3f20 53AE FFF4 	subq.l #1,-12(%fp)
 5796 3f24 222E FFF0 	move.l -16(%fp),%d1
 5797 3f28 D2AE FFF4 	add.l -12(%fp),%d1
 5798 3f2c 2041      	move.l %d1,%a0
 5799 3f2e 1210      	move.b (%a0),%d1
 5800 3f30 2040      	move.l %d0,%a0
 5801 3f32 1081      	move.b %d1,(%a0)
 5802               	.L406:
 5803 3f34 4AAE FFF4 	tst.l -12(%fp)
 5804 3f38 66DA      	jne .L407
 5805 3f3a 202E 0008 	move.l 8(%fp),%d0
 5806 3f3e 53AE FFF8 	subq.l #1,-8(%fp)
 5807 3f42 D0AE FFF8 	add.l -8(%fp),%d0
 5808 3f46 2040      	move.l %d0,%a0
 5809 3f48 10BC 002F 	move.b #47,(%a0)
 5810               	.L393:
 5811 3f4c 2D6E FFD8 	move.l -40(%fp),-20(%fp)
 5811      FFEC 
 5812 3f52 4AAE FFEC 	tst.l -20(%fp)
 5813 3f56 6600 FEA4 	jne .L408
 5814 3f5a 600E      	jra .L395
 5815               	.L411:
 5816 3f5c 4E71      	nop
 5817 3f5e 600A      	jra .L395
 5818               	.L412:
 5819 3f60 4E71      	nop
 5820 3f62 6006      	jra .L395
 5821               	.L413:
 5822 3f64 4E71      	nop
 5823 3f66 6002      	jra .L395
 5824               	.L416:
 5825 3f68 4E71      	nop
 5826               	.L395:
 5827 3f6a 2D6E 0008 	move.l 8(%fp),-16(%fp)
 5827      FFF0 
 5828 3f70 4AAE FFFC 	tst.l -4(%fp)
 5829 3f74 6666      	jne .L409
 5830 3f76 1039 0000 	move.b CurrVol,%d0
 5830      0000 
 5831 3f7c 0600 0030 	add.b #48,%d0
 5832 3f80 1200      	move.b %d0,%d1
 5833 3f82 202E FFF0 	move.l -16(%fp),%d0
 5834 3f86 2040      	move.l %d0,%a0
 5835 3f88 1081      	move.b %d1,(%a0)
 5836 3f8a 52AE FFF0 	addq.l #1,-16(%fp)
 5837 3f8e 202E FFF0 	move.l -16(%fp),%d0
 5838 3f92 2040      	move.l %d0,%a0
 5839 3f94 10BC 003A 	move.b #58,(%a0)
 5840 3f98 52AE FFF0 	addq.l #1,-16(%fp)
 5841 3f9c 202E FFF8 	move.l -8(%fp),%d0
 5842 3fa0 B0AE 000C 	cmp.l 12(%fp),%d0
 5843 3fa4 6610      	jne .L410
 5844 3fa6 202E FFF0 	move.l -16(%fp),%d0
 5845 3faa 2040      	move.l %d0,%a0
 5846 3fac 10BC 002F 	move.b #47,(%a0)
 5847 3fb0 52AE FFF0 	addq.l #1,-16(%fp)
68K GAS   			page 109


 5848 3fb4 6026      	jra .L409
 5849               	.L410:
 5850 3fb6 202E 0008 	move.l 8(%fp),%d0
 5851 3fba D0AE FFF8 	add.l -8(%fp),%d0
 5852 3fbe 2040      	move.l %d0,%a0
 5853 3fc0 1210      	move.b (%a0),%d1
 5854 3fc2 202E FFF0 	move.l -16(%fp),%d0
 5855 3fc6 2040      	move.l %d0,%a0
 5856 3fc8 1081      	move.b %d1,(%a0)
 5857 3fca 52AE FFF0 	addq.l #1,-16(%fp)
 5858 3fce 52AE FFF8 	addq.l #1,-8(%fp)
 5859 3fd2 202E FFF8 	move.l -8(%fp),%d0
 5860 3fd6 B0AE 000C 	cmp.l 12(%fp),%d0
 5861 3fda 65DA      	jcs .L410
 5862               	.L409:
 5863 3fdc 202E FFF0 	move.l -16(%fp),%d0
 5864 3fe0 2040      	move.l %d0,%a0
 5865 3fe2 4210      	clr.b (%a0)
 5866               	.L392:
 5867 3fe4 202E FFFC 	move.l -4(%fp),%d0
 5868 3fe8 4E5E      	unlk %fp
 5869 3fea 4E75      	rts
 5871               	.align2
 5872               	.globlf_lseek
 5874               	f_lseek:
 5875 3fec 4E56 FFEC 	link.w %fp,#-20
 5876 3ff0 2F02      	move.l %d2,-(%sp)
 5877 3ff2 2F2E 0008 	move.l 8(%fp),-(%sp)
 5878 3ff6 4EBA EAE6 	jsr validate
 5879 3ffa 588F      	addq.l #4,%sp
 5880 3ffc 2D40 FFF4 	move.l %d0,-12(%fp)
 5881 4000 4AAE FFF4 	tst.l -12(%fp)
 5882 4004 6708      	jeq .L418
 5883 4006 202E FFF4 	move.l -12(%fp),%d0
 5884 400a 6000 0452 	jra .L419
 5885               	.L418:
 5886 400e 202E 0008 	move.l 8(%fp),%d0
 5887 4012 2040      	move.l %d0,%a0
 5888 4014 1028 0007 	move.b 7(%a0),%d0
 5889 4018 4A00      	tst.b %d0
 5890 401a 6716      	jeq .L420
 5891 401c 202E 0008 	move.l 8(%fp),%d0
 5892 4020 2240      	move.l %d0,%a1
 5893 4022 1029 0007 	move.b 7(%a1),%d0
 5894 4026 1000      	move.b %d0,%d0
 5895 4028 0280 0000 	and.l #255,%d0
 5895      00FF 
 5896 402e 6000 042E 	jra .L419
 5897               	.L420:
 5898 4032 202E 0008 	move.l 8(%fp),%d0
 5899 4036 2040      	move.l %d0,%a0
 5900 4038 2028 000C 	move.l 12(%a0),%d0
 5901 403c B0AE 000C 	cmp.l 12(%fp),%d0
 5902 4040 6426      	jcc .L421
 5903 4042 202E 0008 	move.l 8(%fp),%d0
 5904 4046 2240      	move.l %d0,%a1
 5905 4048 1029 0006 	move.b 6(%a1),%d0
68K GAS   			page 110


 5906 404c 1000      	move.b %d0,%d0
 5907 404e 0280 0000 	and.l #255,%d0
 5907      00FF 
 5908 4054 7202      	moveq #2,%d1
 5909 4056 C081      	and.l %d1,%d0
 5910 4058 4A80      	tst.l %d0
 5911 405a 660C      	jne .L421
 5912 405c 202E 0008 	move.l 8(%fp),%d0
 5913 4060 2040      	move.l %d0,%a0
 5914 4062 2D68 000C 	move.l 12(%a0),12(%fp)
 5914      000C 
 5915               	.L421:
 5916 4068 202E 0008 	move.l 8(%fp),%d0
 5917 406c 2240      	move.l %d0,%a1
 5918 406e 2D69 0008 	move.l 8(%a1),-16(%fp)
 5918      FFF0 
 5919 4074 42AE FFF8 	clr.l -8(%fp)
 5920 4078 202E 0008 	move.l 8(%fp),%d0
 5921 407c 2040      	move.l %d0,%a0
 5922 407e 216E FFF8 	move.l -8(%fp),8(%a0)
 5922      0008 
 5923 4084 4AAE 000C 	tst.l 12(%fp)
 5924 4088 6700 0278 	jeq .L422
 5925 408c 202E 0008 	move.l 8(%fp),%d0
 5926 4090 2240      	move.l %d0,%a1
 5927 4092 2011      	move.l (%a1),%d0
 5928 4094 2040      	move.l %d0,%a0
 5929 4096 1028 0002 	move.b 2(%a0),%d0
 5930 409a 4281      	clr.l %d1
 5931 409c 1200      	move.b %d0,%d1
 5932 409e 202E 0008 	move.l 8(%fp),%d0
 5933 40a2 2240      	move.l %d0,%a1
 5934 40a4 2011      	move.l (%a1),%d0
 5935 40a6 2040      	move.l %d0,%a0
 5936 40a8 3028 000A 	move.w 10(%a0),%d0
 5937 40ac 3000      	move.w %d0,%d0
 5938 40ae 0280 0000 	and.l #65535,%d0
 5938      FFFF 
 5939 40b4 2401      	move.l %d1,%d2
 5940 40b6 4C00 2800 	muls.l %d0,%d2
 5941 40ba 2D42 FFEC 	move.l %d2,-20(%fp)
 5942 40be 4AAE FFF0 	tst.l -16(%fp)
 5943 40c2 6752      	jeq .L423
 5944 40c4 202E 000C 	move.l 12(%fp),%d0
 5945 40c8 5380      	subq.l #1,%d0
 5946 40ca 4C6E 0001 	divul.l -20(%fp),%d1:%d0
 5946      FFEC 
 5947 40d0 2200      	move.l %d0,%d1
 5948 40d2 202E FFF0 	move.l -16(%fp),%d0
 5949 40d6 5380      	subq.l #1,%d0
 5950 40d8 4C6E 0002 	divul.l -20(%fp),%d2:%d0
 5950      FFEC 
 5951 40de B081      	cmp.l %d1,%d0
 5952 40e0 6234      	jhi .L423
 5953 40e2 202E FFF0 	move.l -16(%fp),%d0
 5954 40e6 5380      	subq.l #1,%d0
 5955 40e8 222E FFEC 	move.l -20(%fp),%d1
68K GAS   			page 111


 5956 40ec 4481      	neg.l %d1
 5957 40ee C280      	and.l %d0,%d1
 5958 40f0 202E 0008 	move.l 8(%fp),%d0
 5959 40f4 2040      	move.l %d0,%a0
 5960 40f6 2141 0008 	move.l %d1,8(%a0)
 5961 40fa 202E 0008 	move.l 8(%fp),%d0
 5962 40fe 2240      	move.l %d0,%a1
 5963 4100 2029 0008 	move.l 8(%a1),%d0
 5964 4104 91AE 000C 	sub.l %d0,12(%fp)
 5965 4108 202E 0008 	move.l 8(%fp),%d0
 5966 410c 2040      	move.l %d0,%a0
 5967 410e 2D68 0014 	move.l 20(%a0),-4(%fp)
 5967      FFFC 
 5968 4114 6074      	jra .L424
 5969               	.L423:
 5970 4116 202E 0008 	move.l 8(%fp),%d0
 5971 411a 2240      	move.l %d0,%a1
 5972 411c 2D69 0010 	move.l 16(%a1),-4(%fp)
 5972      FFFC 
 5973 4122 4AAE FFFC 	tst.l -4(%fp)
 5974 4126 6656      	jne .L425
 5975 4128 202E 0008 	move.l 8(%fp),%d0
 5976 412c 2040      	move.l %d0,%a0
 5977 412e 2010      	move.l (%a0),%d0
 5978 4130 42A7      	clr.l -(%sp)
 5979 4132 2F00      	move.l %d0,-(%sp)
 5980 4134 4EBA CB4E 	jsr create_chain
 5981 4138 508F      	addq.l #8,%sp
 5982 413a 2D40 FFFC 	move.l %d0,-4(%fp)
 5983 413e 7001      	moveq #1,%d0
 5984 4140 B0AE FFFC 	cmp.l -4(%fp),%d0
 5985 4144 6612      	jne .L426
 5986 4146 202E 0008 	move.l 8(%fp),%d0
 5987 414a 2040      	move.l %d0,%a0
 5988 414c 117C 0002 	move.b #2,7(%a0)
 5988      0007 
 5989 4152 7002      	moveq #2,%d0
 5990 4154 6000 0308 	jra .L419
 5991               	.L426:
 5992 4158 70FF      	moveq #-1,%d0
 5993 415a B0AE FFFC 	cmp.l -4(%fp),%d0
 5994 415e 6612      	jne .L427
 5995 4160 202E 0008 	move.l 8(%fp),%d0
 5996 4164 2040      	move.l %d0,%a0
 5997 4166 117C 0001 	move.b #1,7(%a0)
 5997      0007 
 5998 416c 7001      	moveq #1,%d0
 5999 416e 6000 02EE 	jra .L419
 6000               	.L427:
 6001 4172 202E 0008 	move.l 8(%fp),%d0
 6002 4176 2240      	move.l %d0,%a1
 6003 4178 236E FFFC 	move.l -4(%fp),16(%a1)
 6003      0010 
 6004               	.L425:
 6005 417e 202E 0008 	move.l 8(%fp),%d0
 6006 4182 2040      	move.l %d0,%a0
 6007 4184 216E FFFC 	move.l -4(%fp),20(%a0)
68K GAS   			page 112


 6007      0014 
 6008               	.L424:
 6009 418a 4AAE FFFC 	tst.l -4(%fp)
 6010 418e 6700 0172 	jeq .L422
 6011 4192 6000 00D2 	jra .L428
 6012               	.L435:
 6013 4196 202E 0008 	move.l 8(%fp),%d0
 6014 419a 2240      	move.l %d0,%a1
 6015 419c 1029 0006 	move.b 6(%a1),%d0
 6016 41a0 1000      	move.b %d0,%d0
 6017 41a2 0280 0000 	and.l #255,%d0
 6017      00FF 
 6018 41a8 7202      	moveq #2,%d1
 6019 41aa C081      	and.l %d1,%d0
 6020 41ac 4A80      	tst.l %d0
 6021 41ae 6728      	jeq .L429
 6022 41b0 202E 0008 	move.l 8(%fp),%d0
 6023 41b4 2040      	move.l %d0,%a0
 6024 41b6 2010      	move.l (%a0),%d0
 6025 41b8 2F2E FFFC 	move.l -4(%fp),-(%sp)
 6026 41bc 2F00      	move.l %d0,-(%sp)
 6027 41be 4EBA CAC4 	jsr create_chain
 6028 41c2 508F      	addq.l #8,%sp
 6029 41c4 2D40 FFFC 	move.l %d0,-4(%fp)
 6030 41c8 4AAE FFFC 	tst.l -4(%fp)
 6031 41cc 6622      	jne .L430
 6032 41ce 2D6E FFEC 	move.l -20(%fp),12(%fp)
 6032      000C 
 6033 41d4 6000 009C 	jra .L431
 6034               	.L429:
 6035 41d8 202E 0008 	move.l 8(%fp),%d0
 6036 41dc 2240      	move.l %d0,%a1
 6037 41de 2011      	move.l (%a1),%d0
 6038 41e0 2F2E FFFC 	move.l -4(%fp),-(%sp)
 6039 41e4 2F00      	move.l %d0,-(%sp)
 6040 41e6 4EBA C32E 	jsr get_fat
 6041 41ea 508F      	addq.l #8,%sp
 6042 41ec 2D40 FFFC 	move.l %d0,-4(%fp)
 6043               	.L430:
 6044 41f0 70FF      	moveq #-1,%d0
 6045 41f2 B0AE FFFC 	cmp.l -4(%fp),%d0
 6046 41f6 6612      	jne .L432
 6047 41f8 202E 0008 	move.l 8(%fp),%d0
 6048 41fc 2040      	move.l %d0,%a0
 6049 41fe 117C 0001 	move.b #1,7(%a0)
 6049      0007 
 6050 4204 7001      	moveq #1,%d0
 6051 4206 6000 0256 	jra .L419
 6052               	.L432:
 6053 420a 7001      	moveq #1,%d0
 6054 420c B0AE FFFC 	cmp.l -4(%fp),%d0
 6055 4210 6414      	jcc .L433
 6056 4212 202E 0008 	move.l 8(%fp),%d0
 6057 4216 2040      	move.l %d0,%a0
 6058 4218 2010      	move.l (%a0),%d0
 6059 421a 2240      	move.l %d0,%a1
 6060 421c 2029 0018 	move.l 24(%a1),%d0
68K GAS   			page 113


 6061 4220 B0AE FFFC 	cmp.l -4(%fp),%d0
 6062 4224 6212      	jhi .L434
 6063               	.L433:
 6064 4226 202E 0008 	move.l 8(%fp),%d0
 6065 422a 2040      	move.l %d0,%a0
 6066 422c 117C 0002 	move.b #2,7(%a0)
 6066      0007 
 6067 4232 7002      	moveq #2,%d0
 6068 4234 6000 0228 	jra .L419
 6069               	.L434:
 6070 4238 202E 0008 	move.l 8(%fp),%d0
 6071 423c 2240      	move.l %d0,%a1
 6072 423e 236E FFFC 	move.l -4(%fp),20(%a1)
 6072      0014 
 6073 4244 202E 0008 	move.l 8(%fp),%d0
 6074 4248 2040      	move.l %d0,%a0
 6075 424a 2028 0008 	move.l 8(%a0),%d0
 6076 424e 2200      	move.l %d0,%d1
 6077 4250 D2AE FFEC 	add.l -20(%fp),%d1
 6078 4254 202E 0008 	move.l 8(%fp),%d0
 6079 4258 2240      	move.l %d0,%a1
 6080 425a 2341 0008 	move.l %d1,8(%a1)
 6081 425e 202E FFEC 	move.l -20(%fp),%d0
 6082 4262 91AE 000C 	sub.l %d0,12(%fp)
 6083               	.L428:
 6084 4266 222E 000C 	move.l 12(%fp),%d1
 6085 426a B2AE FFEC 	cmp.l -20(%fp),%d1
 6086 426e 6200 FF26 	jhi .L435
 6087               	.L431:
 6088 4272 202E 0008 	move.l 8(%fp),%d0
 6089 4276 2040      	move.l %d0,%a0
 6090 4278 2028 0008 	move.l 8(%a0),%d0
 6091 427c 2200      	move.l %d0,%d1
 6092 427e D2AE 000C 	add.l 12(%fp),%d1
 6093 4282 202E 0008 	move.l 8(%fp),%d0
 6094 4286 2240      	move.l %d0,%a1
 6095 4288 2341 0008 	move.l %d1,8(%a1)
 6096 428c 202E 0008 	move.l 8(%fp),%d0
 6097 4290 2040      	move.l %d0,%a0
 6098 4292 2010      	move.l (%a0),%d0
 6099 4294 2240      	move.l %d0,%a1
 6100 4296 3029 000A 	move.w 10(%a1),%d0
 6101 429a 3000      	move.w %d0,%d0
 6102 429c 0280 0000 	and.l #65535,%d0
 6102      FFFF 
 6103 42a2 222E 000C 	move.l 12(%fp),%d1
 6104 42a6 4C40 1000 	divul.l %d0,%d0:%d1
 6105 42aa 4A80      	tst.l %d0
 6106 42ac 6754      	jeq .L422
 6107 42ae 202E 0008 	move.l 8(%fp),%d0
 6108 42b2 2040      	move.l %d0,%a0
 6109 42b4 2010      	move.l (%a0),%d0
 6110 42b6 2F2E FFFC 	move.l -4(%fp),-(%sp)
 6111 42ba 2F00      	move.l %d0,-(%sp)
 6112 42bc 4EBA C212 	jsr clust2sect
 6113 42c0 508F      	addq.l #8,%sp
 6114 42c2 2D40 FFF8 	move.l %d0,-8(%fp)
68K GAS   			page 114


 6115 42c6 4AAE FFF8 	tst.l -8(%fp)
 6116 42ca 6612      	jne .L436
 6117 42cc 202E 0008 	move.l 8(%fp),%d0
 6118 42d0 2240      	move.l %d0,%a1
 6119 42d2 137C 0002 	move.b #2,7(%a1)
 6119      0007 
 6120 42d8 7002      	moveq #2,%d0
 6121 42da 6000 0182 	jra .L419
 6122               	.L436:
 6123 42de 202E 0008 	move.l 8(%fp),%d0
 6124 42e2 2040      	move.l %d0,%a0
 6125 42e4 2010      	move.l (%a0),%d0
 6126 42e6 2240      	move.l %d0,%a1
 6127 42e8 3029 000A 	move.w 10(%a1),%d0
 6128 42ec 3000      	move.w %d0,%d0
 6129 42ee 0280 0000 	and.l #65535,%d0
 6129      FFFF 
 6130 42f4 242E 000C 	move.l 12(%fp),%d2
 6131 42f8 4C40 2001 	divul.l %d0,%d1:%d2
 6132 42fc 2002      	move.l %d2,%d0
 6133 42fe D1AE FFF8 	add.l %d0,-8(%fp)
 6134               	.L422:
 6135 4302 202E 0008 	move.l 8(%fp),%d0
 6136 4306 2040      	move.l %d0,%a0
 6137 4308 2228 0008 	move.l 8(%a0),%d1
 6138 430c 202E 0008 	move.l 8(%fp),%d0
 6139 4310 2240      	move.l %d0,%a1
 6140 4312 2011      	move.l (%a1),%d0
 6141 4314 2040      	move.l %d0,%a0
 6142 4316 3028 000A 	move.w 10(%a0),%d0
 6143 431a 3000      	move.w %d0,%d0
 6144 431c 0280 0000 	and.l #65535,%d0
 6144      FFFF 
 6145 4322 4C40 1000 	divul.l %d0,%d0:%d1
 6146 4326 4A80      	tst.l %d0
 6147 4328 6700 00EA 	jeq .L437
 6148 432c 202E 0008 	move.l 8(%fp),%d0
 6149 4330 2240      	move.l %d0,%a1
 6150 4332 2029 0018 	move.l 24(%a1),%d0
 6151 4336 B0AE FFF8 	cmp.l -8(%fp),%d0
 6152 433a 6700 00D8 	jeq .L437
 6153 433e 202E 0008 	move.l 8(%fp),%d0
 6154 4342 2040      	move.l %d0,%a0
 6155 4344 1028 0006 	move.b 6(%a0),%d0
 6156 4348 1000      	move.b %d0,%d0
 6157 434a 0280 0000 	and.l #255,%d0
 6157      00FF 
 6158 4350 7240      	moveq #64,%d1
 6159 4352 C081      	and.l %d1,%d0
 6160 4354 4A80      	tst.l %d0
 6161 4356 676A      	jeq .L438
 6162 4358 202E 0008 	move.l 8(%fp),%d0
 6163 435c 2240      	move.l %d0,%a1
 6164 435e 2069 0018 	move.l 24(%a1),%a0
 6165 4362 7224      	moveq #36,%d1
 6166 4364 D2AE 0008 	add.l 8(%fp),%d1
 6167 4368 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 115


 6168 436c 2240      	move.l %d0,%a1
 6169 436e 2011      	move.l (%a1),%d0
 6170 4370 2240      	move.l %d0,%a1
 6171 4372 1029 0001 	move.b 1(%a1),%d0
 6172 4376 1000      	move.b %d0,%d0
 6173 4378 0280 0000 	and.l #255,%d0
 6173      00FF 
 6174 437e 4878 0001 	pea 1.w
 6175 4382 2F08      	move.l %a0,-(%sp)
 6176 4384 2F01      	move.l %d1,-(%sp)
 6177 4386 2F00      	move.l %d0,-(%sp)
 6178 4388 4EB9 0000 	jsr disk_write
 6178      0000 
 6179 438e 4FEF 0010 	lea (16,%sp),%sp
 6180 4392 4A80      	tst.l %d0
 6181 4394 6712      	jeq .L439
 6182 4396 202E 0008 	move.l 8(%fp),%d0
 6183 439a 2040      	move.l %d0,%a0
 6184 439c 117C 0001 	move.b #1,7(%a0)
 6184      0007 
 6185 43a2 7001      	moveq #1,%d0
 6186 43a4 6000 00B8 	jra .L419
 6187               	.L439:
 6188 43a8 202E 0008 	move.l 8(%fp),%d0
 6189 43ac 2240      	move.l %d0,%a1
 6190 43ae 1029 0006 	move.b 6(%a1),%d0
 6191 43b2 1200      	move.b %d0,%d1
 6192 43b4 0201 FFBF 	and.b #-65,%d1
 6193 43b8 202E 0008 	move.l 8(%fp),%d0
 6194 43bc 2040      	move.l %d0,%a0
 6195 43be 1141 0006 	move.b %d1,6(%a0)
 6196               	.L438:
 6197 43c2 7224      	moveq #36,%d1
 6198 43c4 D2AE 0008 	add.l 8(%fp),%d1
 6199 43c8 202E 0008 	move.l 8(%fp),%d0
 6200 43cc 2240      	move.l %d0,%a1
 6201 43ce 2011      	move.l (%a1),%d0
 6202 43d0 2040      	move.l %d0,%a0
 6203 43d2 1028 0001 	move.b 1(%a0),%d0
 6204 43d6 1000      	move.b %d0,%d0
 6205 43d8 0280 0000 	and.l #255,%d0
 6205      00FF 
 6206 43de 4878 0001 	pea 1.w
 6207 43e2 2F2E FFF8 	move.l -8(%fp),-(%sp)
 6208 43e6 2F01      	move.l %d1,-(%sp)
 6209 43e8 2F00      	move.l %d0,-(%sp)
 6210 43ea 4EB9 0000 	jsr disk_read
 6210      0000 
 6211 43f0 4FEF 0010 	lea (16,%sp),%sp
 6212 43f4 4A80      	tst.l %d0
 6213 43f6 6710      	jeq .L440
 6214 43f8 202E 0008 	move.l 8(%fp),%d0
 6215 43fc 2240      	move.l %d0,%a1
 6216 43fe 137C 0001 	move.b #1,7(%a1)
 6216      0007 
 6217 4404 7001      	moveq #1,%d0
 6218 4406 6056      	jra .L419
68K GAS   			page 116


 6219               	.L440:
 6220 4408 202E 0008 	move.l 8(%fp),%d0
 6221 440c 2040      	move.l %d0,%a0
 6222 440e 216E FFF8 	move.l -8(%fp),24(%a0)
 6222      0018 
 6223               	.L437:
 6224 4414 202E 0008 	move.l 8(%fp),%d0
 6225 4418 2240      	move.l %d0,%a1
 6226 441a 2229 0008 	move.l 8(%a1),%d1
 6227 441e 202E 0008 	move.l 8(%fp),%d0
 6228 4422 2040      	move.l %d0,%a0
 6229 4424 2028 000C 	move.l 12(%a0),%d0
 6230 4428 B081      	cmp.l %d1,%d0
 6231 442a 642E      	jcc .L441
 6232 442c 202E 0008 	move.l 8(%fp),%d0
 6233 4430 2240      	move.l %d0,%a1
 6234 4432 2229 0008 	move.l 8(%a1),%d1
 6235 4436 202E 0008 	move.l 8(%fp),%d0
 6236 443a 2040      	move.l %d0,%a0
 6237 443c 2141 000C 	move.l %d1,12(%a0)
 6238 4440 202E 0008 	move.l 8(%fp),%d0
 6239 4444 2240      	move.l %d0,%a1
 6240 4446 1029 0006 	move.b 6(%a1),%d0
 6241 444a 1200      	move.b %d0,%d1
 6242 444c 0001 0020 	or.b #32,%d1
 6243 4450 202E 0008 	move.l 8(%fp),%d0
 6244 4454 2040      	move.l %d0,%a0
 6245 4456 1141 0006 	move.b %d1,6(%a0)
 6246               	.L441:
 6247 445a 202E FFF4 	move.l -12(%fp),%d0
 6248               	.L419:
 6249 445e 242E FFE8 	move.l -24(%fp),%d2
 6250 4462 4E5E      	unlk %fp
 6251 4464 4E75      	rts
 6253               	.align2
 6254               	.globlf_opendir
 6256               	f_opendir:
 6257 4466 4E56 FFEC 	link.w %fp,#-20
 6258 446a 4AAE 0008 	tst.l 8(%fp)
 6259 446e 6606      	jne .L443
 6260 4470 7009      	moveq #9,%d0
 6261 4472 6000 0100 	jra .L444
 6262               	.L443:
 6263 4476 42A7      	clr.l -(%sp)
 6264 4478 700C      	moveq #12,%d0
 6265 447a D08E      	add.l %fp,%d0
 6266 447c 2F00      	move.l %d0,-(%sp)
 6267 447e 200E      	move.l %fp,%d0
 6268 4480 5180      	subq.l #8,%d0
 6269 4482 2F00      	move.l %d0,-(%sp)
 6270 4484 4EBA DBCA 	jsr find_volume
 6271 4488 4FEF 000C 	lea (12,%sp),%sp
 6272 448c 2D40 FFFC 	move.l %d0,-4(%fp)
 6273 4490 4AAE FFFC 	tst.l -4(%fp)
 6274 4494 6600 00CC 	jne .L445
 6275 4498 222E FFF8 	move.l -8(%fp),%d1
 6276 449c 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 117


 6277 44a0 2040      	move.l %d0,%a0
 6278 44a2 2081      	move.l %d1,(%a0)
 6279 44a4 202E 0008 	move.l 8(%fp),%d0
 6280 44a8 41EE FFEC 	lea (-20,%fp),%a0
 6281 44ac 2240      	move.l %d0,%a1
 6282 44ae 2348 0018 	move.l %a0,24(%a1)
 6283 44b2 202E 000C 	move.l 12(%fp),%d0
 6284 44b6 2F00      	move.l %d0,-(%sp)
 6285 44b8 2F2E 0008 	move.l 8(%fp),-(%sp)
 6286 44bc 4EBA D73A 	jsr follow_path
 6287 44c0 508F      	addq.l #8,%sp
 6288 44c2 2D40 FFFC 	move.l %d0,-4(%fp)
 6289 44c6 4AAE FFFC 	tst.l -4(%fp)
 6290 44ca 6600 0088 	jne .L446
 6291 44ce 202E 0008 	move.l 8(%fp),%d0
 6292 44d2 2240      	move.l %d0,%a1
 6293 44d4 2029 0014 	move.l 20(%a1),%d0
 6294 44d8 4A80      	tst.l %d0
 6295 44da 674E      	jeq .L447
 6296 44dc 202E 0008 	move.l 8(%fp),%d0
 6297 44e0 2040      	move.l %d0,%a0
 6298 44e2 2028 0014 	move.l 20(%a0),%d0
 6299 44e6 720B      	moveq #11,%d1
 6300 44e8 D081      	add.l %d1,%d0
 6301 44ea 2040      	move.l %d0,%a0
 6302 44ec 1010      	move.b (%a0),%d0
 6303 44ee 1000      	move.b %d0,%d0
 6304 44f0 0280 0000 	and.l #255,%d0
 6304      00FF 
 6305 44f6 7210      	moveq #16,%d1
 6306 44f8 C081      	and.l %d1,%d0
 6307 44fa 4A80      	tst.l %d0
 6308 44fc 6726      	jeq .L448
 6309 44fe 202E 0008 	move.l 8(%fp),%d0
 6310 4502 2040      	move.l %d0,%a0
 6311 4504 2228 0014 	move.l 20(%a0),%d1
 6312 4508 202E FFF8 	move.l -8(%fp),%d0
 6313 450c 2F01      	move.l %d1,-(%sp)
 6314 450e 2F00      	move.l %d0,-(%sp)
 6315 4510 4EBA CEB2 	jsr ld_clust
 6316 4514 508F      	addq.l #8,%sp
 6317 4516 2200      	move.l %d0,%d1
 6318 4518 202E 0008 	move.l 8(%fp),%d0
 6319 451c 2240      	move.l %d0,%a1
 6320 451e 2341 0008 	move.l %d1,8(%a1)
 6321 4522 6006      	jra .L447
 6322               	.L448:
 6323 4524 7005      	moveq #5,%d0
 6324 4526 2D40 FFFC 	move.l %d0,-4(%fp)
 6325               	.L447:
 6326 452a 4AAE FFFC 	tst.l -4(%fp)
 6327 452e 6624      	jne .L446
 6328 4530 202E FFF8 	move.l -8(%fp),%d0
 6329 4534 2040      	move.l %d0,%a0
 6330 4536 3228 0006 	move.w 6(%a0),%d1
 6331 453a 202E 0008 	move.l 8(%fp),%d0
 6332 453e 2240      	move.l %d0,%a1
68K GAS   			page 118


 6333 4540 3341 0004 	move.w %d1,4(%a1)
 6334 4544 42A7      	clr.l -(%sp)
 6335 4546 2F2E 0008 	move.l 8(%fp),-(%sp)
 6336 454a 4EBA C8E0 	jsr dir_sdi
 6337 454e 508F      	addq.l #8,%sp
 6338 4550 2D40 FFFC 	move.l %d0,-4(%fp)
 6339               	.L446:
 6340 4554 7004      	moveq #4,%d0
 6341 4556 B0AE FFFC 	cmp.l -4(%fp),%d0
 6342 455a 6606      	jne .L445
 6343 455c 7205      	moveq #5,%d1
 6344 455e 2D41 FFFC 	move.l %d1,-4(%fp)
 6345               	.L445:
 6346 4562 4AAE FFFC 	tst.l -4(%fp)
 6347 4566 6708      	jeq .L449
 6348 4568 202E 0008 	move.l 8(%fp),%d0
 6349 456c 2040      	move.l %d0,%a0
 6350 456e 4290      	clr.l (%a0)
 6351               	.L449:
 6352 4570 202E FFFC 	move.l -4(%fp),%d0
 6353               	.L444:
 6354 4574 4E5E      	unlk %fp
 6355 4576 4E75      	rts
 6357               	.align2
 6358               	.globlf_closedir
 6360               	f_closedir:
 6361 4578 4E56 FFFC 	link.w %fp,#-4
 6362 457c 2F2E 0008 	move.l 8(%fp),-(%sp)
 6363 4580 4EBA E55C 	jsr validate
 6364 4584 588F      	addq.l #4,%sp
 6365 4586 2D40 FFFC 	move.l %d0,-4(%fp)
 6366 458a 4AAE FFFC 	tst.l -4(%fp)
 6367 458e 6608      	jne .L451
 6368 4590 202E 0008 	move.l 8(%fp),%d0
 6369 4594 2040      	move.l %d0,%a0
 6370 4596 4290      	clr.l (%a0)
 6371               	.L451:
 6372 4598 202E FFFC 	move.l -4(%fp),%d0
 6373 459c 4E5E      	unlk %fp
 6374 459e 4E75      	rts
 6376               	.align2
 6377               	.globlf_readdir
 6379               	f_readdir:
 6380 45a0 4E56 FFF0 	link.w %fp,#-16
 6381 45a4 2F2E 0008 	move.l 8(%fp),-(%sp)
 6382 45a8 4EBA E534 	jsr validate
 6383 45ac 588F      	addq.l #4,%sp
 6384 45ae 2D40 FFFC 	move.l %d0,-4(%fp)
 6385 45b2 4AAE FFFC 	tst.l -4(%fp)
 6386 45b6 6600 0088 	jne .L453
 6387 45ba 4AAE 000C 	tst.l 12(%fp)
 6388 45be 6612      	jne .L454
 6389 45c0 42A7      	clr.l -(%sp)
 6390 45c2 2F2E 0008 	move.l 8(%fp),-(%sp)
 6391 45c6 4EBA C864 	jsr dir_sdi
 6392 45ca 508F      	addq.l #8,%sp
 6393 45cc 2D40 FFFC 	move.l %d0,-4(%fp)
68K GAS   			page 119


 6394 45d0 606E      	jra .L453
 6395               	.L454:
 6396 45d2 202E 0008 	move.l 8(%fp),%d0
 6397 45d6 43EE FFF0 	lea (-16,%fp),%a1
 6398 45da 2040      	move.l %d0,%a0
 6399 45dc 2149 0018 	move.l %a1,24(%a0)
 6400 45e0 42A7      	clr.l -(%sp)
 6401 45e2 2F2E 0008 	move.l 8(%fp),-(%sp)
 6402 45e6 4EBA CF88 	jsr dir_read
 6403 45ea 508F      	addq.l #8,%sp
 6404 45ec 2D40 FFFC 	move.l %d0,-4(%fp)
 6405 45f0 7004      	moveq #4,%d0
 6406 45f2 B0AE FFFC 	cmp.l -4(%fp),%d0
 6407 45f6 660E      	jne .L455
 6408 45f8 202E 0008 	move.l 8(%fp),%d0
 6409 45fc 2040      	move.l %d0,%a0
 6410 45fe 42A8 0010 	clr.l 16(%a0)
 6411 4602 42AE FFFC 	clr.l -4(%fp)
 6412               	.L455:
 6413 4606 4AAE FFFC 	tst.l -4(%fp)
 6414 460a 6634      	jne .L453
 6415 460c 2F2E 000C 	move.l 12(%fp),-(%sp)
 6416 4610 2F2E 0008 	move.l 8(%fp),-(%sp)
 6417 4614 4EBA D160 	jsr get_fileinfo
 6418 4618 508F      	addq.l #8,%sp
 6419 461a 42A7      	clr.l -(%sp)
 6420 461c 2F2E 0008 	move.l 8(%fp),-(%sp)
 6421 4620 4EBA C9E6 	jsr dir_next
 6422 4624 508F      	addq.l #8,%sp
 6423 4626 2D40 FFFC 	move.l %d0,-4(%fp)
 6424 462a 7004      	moveq #4,%d0
 6425 462c B0AE FFFC 	cmp.l -4(%fp),%d0
 6426 4630 660E      	jne .L453
 6427 4632 202E 0008 	move.l 8(%fp),%d0
 6428 4636 2040      	move.l %d0,%a0
 6429 4638 42A8 0010 	clr.l 16(%a0)
 6430 463c 42AE FFFC 	clr.l -4(%fp)
 6431               	.L453:
 6432 4640 202E FFFC 	move.l -4(%fp),%d0
 6433 4644 4E5E      	unlk %fp
 6434 4646 4E75      	rts
 6436               	.align2
 6437               	.globlf_stat
 6439               	f_stat:
 6440 4648 4E56 FFD4 	link.w %fp,#-44
 6441 464c 42A7      	clr.l -(%sp)
 6442 464e 200E      	move.l %fp,%d0
 6443 4650 5080      	addq.l #8,%d0
 6444 4652 2F00      	move.l %d0,-(%sp)
 6445 4654 70E0      	moveq #-32,%d0
 6446 4656 D08E      	add.l %fp,%d0
 6447 4658 2F00      	move.l %d0,-(%sp)
 6448 465a 4EBA D9F4 	jsr find_volume
 6449 465e 4FEF 000C 	lea (12,%sp),%sp
 6450 4662 2D40 FFFC 	move.l %d0,-4(%fp)
 6451 4666 4AAE FFFC 	tst.l -4(%fp)
 6452 466a 664A      	jne .L457
68K GAS   			page 120


 6453 466c 41EE FFD4 	lea (-44,%fp),%a0
 6454 4670 2D48 FFF8 	move.l %a0,-8(%fp)
 6455 4674 202E 0008 	move.l 8(%fp),%d0
 6456 4678 2F00      	move.l %d0,-(%sp)
 6457 467a 70E0      	moveq #-32,%d0
 6458 467c D08E      	add.l %fp,%d0
 6459 467e 2F00      	move.l %d0,-(%sp)
 6460 4680 4EBA D576 	jsr follow_path
 6461 4684 508F      	addq.l #8,%sp
 6462 4686 2D40 FFFC 	move.l %d0,-4(%fp)
 6463 468a 4AAE FFFC 	tst.l -4(%fp)
 6464 468e 6626      	jne .L457
 6465 4690 202E FFF4 	move.l -12(%fp),%d0
 6466 4694 4A80      	tst.l %d0
 6467 4696 6718      	jeq .L458
 6468 4698 4AAE 000C 	tst.l 12(%fp)
 6469 469c 6718      	jeq .L457
 6470 469e 2F2E 000C 	move.l 12(%fp),-(%sp)
 6471 46a2 70E0      	moveq #-32,%d0
 6472 46a4 D08E      	add.l %fp,%d0
 6473 46a6 2F00      	move.l %d0,-(%sp)
 6474 46a8 4EBA D0CC 	jsr get_fileinfo
 6475 46ac 508F      	addq.l #8,%sp
 6476 46ae 6006      	jra .L457
 6477               	.L458:
 6478 46b0 7006      	moveq #6,%d0
 6479 46b2 2D40 FFFC 	move.l %d0,-4(%fp)
 6480               	.L457:
 6481 46b6 202E FFFC 	move.l -4(%fp),%d0
 6482 46ba 4E5E      	unlk %fp
 6483 46bc 4E75      	rts
 6485               	.align2
 6486               	.globlf_getfree
 6488               	f_getfree:
 6489 46be 4E56 FFDC 	link.w %fp,#-36
 6490 46c2 2F02      	move.l %d2,-(%sp)
 6491 46c4 42A7      	clr.l -(%sp)
 6492 46c6 200E      	move.l %fp,%d0
 6493 46c8 5080      	addq.l #8,%d0
 6494 46ca 2F00      	move.l %d0,-(%sp)
 6495 46cc 2F2E 0010 	move.l 16(%fp),-(%sp)
 6496 46d0 4EBA D97E 	jsr find_volume
 6497 46d4 4FEF 000C 	lea (12,%sp),%sp
 6498 46d8 2D40 FFFC 	move.l %d0,-4(%fp)
 6499 46dc 202E 0010 	move.l 16(%fp),%d0
 6500 46e0 2040      	move.l %d0,%a0
 6501 46e2 2D50 FFE4 	move.l (%a0),-28(%fp)
 6502 46e6 4AAE FFFC 	tst.l -4(%fp)
 6503 46ea 6600 01FC 	jne .L460
 6504 46ee 202E FFE4 	move.l -28(%fp),%d0
 6505 46f2 2040      	move.l %d0,%a0
 6506 46f4 2228 0010 	move.l 16(%a0),%d1
 6507 46f8 202E FFE4 	move.l -28(%fp),%d0
 6508 46fc 2040      	move.l %d0,%a0
 6509 46fe 2028 0018 	move.l 24(%a0),%d0
 6510 4702 5580      	subq.l #2,%d0
 6511 4704 B081      	cmp.l %d1,%d0
68K GAS   			page 121


 6512 4706 6516      	jcs .L461
 6513 4708 202E FFE4 	move.l -28(%fp),%d0
 6514 470c 2040      	move.l %d0,%a0
 6515 470e 2228 0010 	move.l 16(%a0),%d1
 6516 4712 202E 000C 	move.l 12(%fp),%d0
 6517 4716 2040      	move.l %d0,%a0
 6518 4718 2081      	move.l %d1,(%a0)
 6519 471a 6000 01CC 	jra .L460
 6520               	.L461:
 6521 471e 202E FFE4 	move.l -28(%fp),%d0
 6522 4722 2040      	move.l %d0,%a0
 6523 4724 1D50 FFE3 	move.b (%a0),-29(%fp)
 6524 4728 42AE FFF8 	clr.l -8(%fp)
 6525 472c 0C2E 0001 	cmp.b #1,-29(%fp)
 6525      FFE3 
 6526 4732 6660      	jne .L462
 6527 4734 7002      	moveq #2,%d0
 6528 4736 2D40 FFF4 	move.l %d0,-12(%fp)
 6529               	.L467:
 6530 473a 2F2E FFF4 	move.l -12(%fp),-(%sp)
 6531 473e 2F2E FFE4 	move.l -28(%fp),-(%sp)
 6532 4742 4EBA BDD2 	jsr get_fat
 6533 4746 508F      	addq.l #8,%sp
 6534 4748 2D40 FFDE 	move.l %d0,-34(%fp)
 6535 474c 74FF      	moveq #-1,%d2
 6536 474e B4AE FFDE 	cmp.l -34(%fp),%d2
 6537 4752 660A      	jne .L463
 6538 4754 7001      	moveq #1,%d0
 6539 4756 2D40 FFFC 	move.l %d0,-4(%fp)
 6540 475a 6000 015C 	jra .L468
 6541               	.L463:
 6542 475e 7401      	moveq #1,%d2
 6543 4760 B4AE FFDE 	cmp.l -34(%fp),%d2
 6544 4764 660C      	jne .L465
 6545 4766 7002      	moveq #2,%d0
 6546 4768 2D40 FFFC 	move.l %d0,-4(%fp)
 6547 476c 4E71      	nop
 6548 476e 6000 0148 	jra .L468
 6549               	.L465:
 6550 4772 4AAE FFDE 	tst.l -34(%fp)
 6551 4776 6604      	jne .L466
 6552 4778 52AE FFF8 	addq.l #1,-8(%fp)
 6553               	.L466:
 6554 477c 52AE FFF4 	addq.l #1,-12(%fp)
 6555 4780 202E FFE4 	move.l -28(%fp),%d0
 6556 4784 2040      	move.l %d0,%a0
 6557 4786 2028 0018 	move.l 24(%a0),%d0
 6558 478a B0AE FFF4 	cmp.l -12(%fp),%d0
 6559 478e 62AA      	jhi .L467
 6560 4790 6000 0126 	jra .L468
 6561               	.L462:
 6562 4794 202E FFE4 	move.l -28(%fp),%d0
 6563 4798 2040      	move.l %d0,%a0
 6564 479a 2D68 0018 	move.l 24(%a0),-12(%fp)
 6564      FFF4 
 6565 47a0 202E FFE4 	move.l -28(%fp),%d0
 6566 47a4 2040      	move.l %d0,%a0
68K GAS   			page 122


 6567 47a6 2D68 0024 	move.l 36(%a0),-16(%fp)
 6567      FFF0 
 6568 47ac 42AE FFEC 	clr.l -20(%fp)
 6569 47b0 42AE FFE8 	clr.l -24(%fp)
 6570               	.L475:
 6571 47b4 4AAE FFEC 	tst.l -20(%fp)
 6572 47b8 6640      	jne .L469
 6573 47ba 202E FFF0 	move.l -16(%fp),%d0
 6574 47be 52AE FFF0 	addq.l #1,-16(%fp)
 6575 47c2 2F00      	move.l %d0,-(%sp)
 6576 47c4 2F2E FFE4 	move.l -28(%fp),-(%sp)
 6577 47c8 4EBA BA30 	jsr move_window
 6578 47cc 508F      	addq.l #8,%sp
 6579 47ce 2D40 FFFC 	move.l %d0,-4(%fp)
 6580 47d2 4AAE FFFC 	tst.l -4(%fp)
 6581 47d6 6600 00DE 	jne .L476
 6582               	.L470:
 6583 47da 7034      	moveq #52,%d0
 6584 47dc D0AE FFE4 	add.l -28(%fp),%d0
 6585 47e0 2D40 FFE8 	move.l %d0,-24(%fp)
 6586 47e4 202E FFE4 	move.l -28(%fp),%d0
 6587 47e8 2040      	move.l %d0,%a0
 6588 47ea 3028 000A 	move.w 10(%a0),%d0
 6589 47ee 3000      	move.w %d0,%d0
 6590 47f0 0280 0000 	and.l #65535,%d0
 6590      FFFF 
 6591 47f6 2D40 FFEC 	move.l %d0,-20(%fp)
 6592               	.L469:
 6593 47fa 0C2E 0002 	cmp.b #2,-29(%fp)
 6593      FFE3 
 6594 4800 6638      	jne .L471
 6595 4802 202E FFE8 	move.l -24(%fp),%d0
 6596 4806 5280      	addq.l #1,%d0
 6597 4808 2040      	move.l %d0,%a0
 6598 480a 1010      	move.b (%a0),%d0
 6599 480c 1000      	move.b %d0,%d0
 6600 480e 0280 0000 	and.l #255,%d0
 6600      00FF 
 6601 4814 E188      	lsl.l #8,%d0
 6602 4816 3200      	move.w %d0,%d1
 6603 4818 202E FFE8 	move.l -24(%fp),%d0
 6604 481c 2040      	move.l %d0,%a0
 6605 481e 1010      	move.b (%a0),%d0
 6606 4820 1000      	move.b %d0,%d0
 6607 4822 0240 00FF 	and.w #255,%d0
 6608 4826 8041      	or.w %d1,%d0
 6609 4828 4A40      	tst.w %d0
 6610 482a 6604      	jne .L472
 6611 482c 52AE FFF8 	addq.l #1,-8(%fp)
 6612               	.L472:
 6613 4830 54AE FFE8 	addq.l #2,-24(%fp)
 6614 4834 55AE FFEC 	subq.l #2,-20(%fp)
 6615 4838 606E      	jra .L473
 6616               	.L471:
 6617 483a 202E FFE8 	move.l -24(%fp),%d0
 6618 483e 5680      	addq.l #3,%d0
 6619 4840 2040      	move.l %d0,%a0
68K GAS   			page 123


 6620 4842 1010      	move.b (%a0),%d0
 6621 4844 1000      	move.b %d0,%d0
 6622 4846 0280 0000 	and.l #255,%d0
 6622      00FF 
 6623 484c 2200      	move.l %d0,%d1
 6624 484e 7418      	moveq #24,%d2
 6625 4850 E5A9      	lsl.l %d2,%d1
 6626 4852 202E FFE8 	move.l -24(%fp),%d0
 6627 4856 5480      	addq.l #2,%d0
 6628 4858 2040      	move.l %d0,%a0
 6629 485a 1010      	move.b (%a0),%d0
 6630 485c 1000      	move.b %d0,%d0
 6631 485e 0280 0000 	and.l #255,%d0
 6631      00FF 
 6632 4864 4840      	swap %d0
 6633 4866 4240      	clr.w %d0
 6634 4868 8280      	or.l %d0,%d1
 6635 486a 202E FFE8 	move.l -24(%fp),%d0
 6636 486e 5280      	addq.l #1,%d0
 6637 4870 2040      	move.l %d0,%a0
 6638 4872 1010      	move.b (%a0),%d0
 6639 4874 1000      	move.b %d0,%d0
 6640 4876 0280 0000 	and.l #255,%d0
 6640      00FF 
 6641 487c E188      	lsl.l #8,%d0
 6642 487e 8280      	or.l %d0,%d1
 6643 4880 202E FFE8 	move.l -24(%fp),%d0
 6644 4884 2040      	move.l %d0,%a0
 6645 4886 1010      	move.b (%a0),%d0
 6646 4888 1000      	move.b %d0,%d0
 6647 488a 0280 0000 	and.l #255,%d0
 6647      00FF 
 6648 4890 8081      	or.l %d1,%d0
 6649 4892 0280 0FFF 	and.l #268435455,%d0
 6649      FFFF 
 6650 4898 4A80      	tst.l %d0
 6651 489a 6604      	jne .L474
 6652 489c 52AE FFF8 	addq.l #1,-8(%fp)
 6653               	.L474:
 6654 48a0 58AE FFE8 	addq.l #4,-24(%fp)
 6655 48a4 59AE FFEC 	subq.l #4,-20(%fp)
 6656               	.L473:
 6657 48a8 53AE FFF4 	subq.l #1,-12(%fp)
 6658 48ac 4AAE FFF4 	tst.l -12(%fp)
 6659 48b0 6600 FF02 	jne .L475
 6660 48b4 6002      	jra .L468
 6661               	.L476:
 6662 48b6 4E71      	nop
 6663               	.L468:
 6664 48b8 202E FFE4 	move.l -28(%fp),%d0
 6665 48bc 2040      	move.l %d0,%a0
 6666 48be 216E FFF8 	move.l -8(%fp),16(%a0)
 6666      0010 
 6667 48c4 202E FFE4 	move.l -28(%fp),%d0
 6668 48c8 2040      	move.l %d0,%a0
 6669 48ca 1028 0005 	move.b 5(%a0),%d0
 6670 48ce 1200      	move.b %d0,%d1
68K GAS   			page 124


 6671 48d0 0001 0001 	or.b #1,%d1
 6672 48d4 202E FFE4 	move.l -28(%fp),%d0
 6673 48d8 2040      	move.l %d0,%a0
 6674 48da 1141 0005 	move.b %d1,5(%a0)
 6675 48de 202E 000C 	move.l 12(%fp),%d0
 6676 48e2 2040      	move.l %d0,%a0
 6677 48e4 20AE FFF8 	move.l -8(%fp),(%a0)
 6678               	.L460:
 6679 48e8 202E FFFC 	move.l -4(%fp),%d0
 6680 48ec 242E FFD8 	move.l -40(%fp),%d2
 6681 48f0 4E5E      	unlk %fp
 6682 48f2 4E75      	rts
 6684               	.align2
 6685               	.globlf_truncate
 6687               	f_truncate:
 6688 48f4 4E56 FFF8 	link.w %fp,#-8
 6689 48f8 2F2E 0008 	move.l 8(%fp),-(%sp)
 6690 48fc 4EBA E1E0 	jsr validate
 6691 4900 588F      	addq.l #4,%sp
 6692 4902 2D40 FFFC 	move.l %d0,-4(%fp)
 6693 4906 4AAE FFFC 	tst.l -4(%fp)
 6694 490a 6646      	jne .L478
 6695 490c 202E 0008 	move.l 8(%fp),%d0
 6696 4910 2040      	move.l %d0,%a0
 6697 4912 1028 0007 	move.b 7(%a0),%d0
 6698 4916 4A00      	tst.b %d0
 6699 4918 6718      	jeq .L479
 6700 491a 202E 0008 	move.l 8(%fp),%d0
 6701 491e 2240      	move.l %d0,%a1
 6702 4920 1029 0007 	move.b 7(%a1),%d0
 6703 4924 1000      	move.b %d0,%d0
 6704 4926 0280 0000 	and.l #255,%d0
 6704      00FF 
 6705 492c 2D40 FFFC 	move.l %d0,-4(%fp)
 6706 4930 6020      	jra .L478
 6707               	.L479:
 6708 4932 202E 0008 	move.l 8(%fp),%d0
 6709 4936 2040      	move.l %d0,%a0
 6710 4938 1028 0006 	move.b 6(%a0),%d0
 6711 493c 1000      	move.b %d0,%d0
 6712 493e 0280 0000 	and.l #255,%d0
 6712      00FF 
 6713 4944 7202      	moveq #2,%d1
 6714 4946 C081      	and.l %d1,%d0
 6715 4948 4A80      	tst.l %d0
 6716 494a 6606      	jne .L478
 6717 494c 7007      	moveq #7,%d0
 6718 494e 2D40 FFFC 	move.l %d0,-4(%fp)
 6719               	.L478:
 6720 4952 4AAE FFFC 	tst.l -4(%fp)
 6721 4956 6600 01BC 	jne .L480
 6722 495a 202E 0008 	move.l 8(%fp),%d0
 6723 495e 2040      	move.l %d0,%a0
 6724 4960 2228 000C 	move.l 12(%a0),%d1
 6725 4964 202E 0008 	move.l 8(%fp),%d0
 6726 4968 2240      	move.l %d0,%a1
 6727 496a 2029 0008 	move.l 8(%a1),%d0
68K GAS   			page 125


 6728 496e B081      	cmp.l %d1,%d0
 6729 4970 6400 018C 	jcc .L481
 6730 4974 202E 0008 	move.l 8(%fp),%d0
 6731 4978 2040      	move.l %d0,%a0
 6732 497a 2228 0008 	move.l 8(%a0),%d1
 6733 497e 202E 0008 	move.l 8(%fp),%d0
 6734 4982 2240      	move.l %d0,%a1
 6735 4984 2341 000C 	move.l %d1,12(%a1)
 6736 4988 202E 0008 	move.l 8(%fp),%d0
 6737 498c 2040      	move.l %d0,%a0
 6738 498e 1028 0006 	move.b 6(%a0),%d0
 6739 4992 1200      	move.b %d0,%d1
 6740 4994 0001 0020 	or.b #32,%d1
 6741 4998 202E 0008 	move.l 8(%fp),%d0
 6742 499c 2240      	move.l %d0,%a1
 6743 499e 1341 0006 	move.b %d1,6(%a1)
 6744 49a2 202E 0008 	move.l 8(%fp),%d0
 6745 49a6 2040      	move.l %d0,%a0
 6746 49a8 2028 0008 	move.l 8(%a0),%d0
 6747 49ac 4A80      	tst.l %d0
 6748 49ae 662E      	jne .L482
 6749 49b0 202E 0008 	move.l 8(%fp),%d0
 6750 49b4 2240      	move.l %d0,%a1
 6751 49b6 2229 0010 	move.l 16(%a1),%d1
 6752 49ba 202E 0008 	move.l 8(%fp),%d0
 6753 49be 2040      	move.l %d0,%a0
 6754 49c0 2010      	move.l (%a0),%d0
 6755 49c2 2F01      	move.l %d1,-(%sp)
 6756 49c4 2F00      	move.l %d0,-(%sp)
 6757 49c6 4EBA C1CC 	jsr remove_chain
 6758 49ca 508F      	addq.l #8,%sp
 6759 49cc 2D40 FFFC 	move.l %d0,-4(%fp)
 6760 49d0 202E 0008 	move.l 8(%fp),%d0
 6761 49d4 2240      	move.l %d0,%a1
 6762 49d6 42A9 0010 	clr.l 16(%a1)
 6763 49da 6000 00A2 	jra .L483
 6764               	.L482:
 6765 49de 202E 0008 	move.l 8(%fp),%d0
 6766 49e2 2040      	move.l %d0,%a0
 6767 49e4 2228 0014 	move.l 20(%a0),%d1
 6768 49e8 202E 0008 	move.l 8(%fp),%d0
 6769 49ec 2240      	move.l %d0,%a1
 6770 49ee 2011      	move.l (%a1),%d0
 6771 49f0 2F01      	move.l %d1,-(%sp)
 6772 49f2 2F00      	move.l %d0,-(%sp)
 6773 49f4 4EBA BB20 	jsr get_fat
 6774 49f8 508F      	addq.l #8,%sp
 6775 49fa 2D40 FFF8 	move.l %d0,-8(%fp)
 6776 49fe 42AE FFFC 	clr.l -4(%fp)
 6777 4a02 70FF      	moveq #-1,%d0
 6778 4a04 B0AE FFF8 	cmp.l -8(%fp),%d0
 6779 4a08 6606      	jne .L484
 6780 4a0a 7201      	moveq #1,%d1
 6781 4a0c 2D41 FFFC 	move.l %d1,-4(%fp)
 6782               	.L484:
 6783 4a10 7001      	moveq #1,%d0
 6784 4a12 B0AE FFF8 	cmp.l -8(%fp),%d0
68K GAS   			page 126


 6785 4a16 6606      	jne .L485
 6786 4a18 7202      	moveq #2,%d1
 6787 4a1a 2D41 FFFC 	move.l %d1,-4(%fp)
 6788               	.L485:
 6789 4a1e 4AAE FFFC 	tst.l -4(%fp)
 6790 4a22 665A      	jne .L483
 6791 4a24 202E 0008 	move.l 8(%fp),%d0
 6792 4a28 2040      	move.l %d0,%a0
 6793 4a2a 2010      	move.l (%a0),%d0
 6794 4a2c 2240      	move.l %d0,%a1
 6795 4a2e 2029 0018 	move.l 24(%a1),%d0
 6796 4a32 B0AE FFF8 	cmp.l -8(%fp),%d0
 6797 4a36 6346      	jls .L483
 6798 4a38 202E 0008 	move.l 8(%fp),%d0
 6799 4a3c 2040      	move.l %d0,%a0
 6800 4a3e 2228 0014 	move.l 20(%a0),%d1
 6801 4a42 202E 0008 	move.l 8(%fp),%d0
 6802 4a46 2240      	move.l %d0,%a1
 6803 4a48 2011      	move.l (%a1),%d0
 6804 4a4a 2F3C 0FFF 	move.l #268435455,-(%sp)
 6804      FFFF 
 6805 4a50 2F01      	move.l %d1,-(%sp)
 6806 4a52 2F00      	move.l %d0,-(%sp)
 6807 4a54 4EBA BD9A 	jsr put_fat
 6808 4a58 4FEF 000C 	lea (12,%sp),%sp
 6809 4a5c 2D40 FFFC 	move.l %d0,-4(%fp)
 6810 4a60 4AAE FFFC 	tst.l -4(%fp)
 6811 4a64 6618      	jne .L483
 6812 4a66 202E 0008 	move.l 8(%fp),%d0
 6813 4a6a 2040      	move.l %d0,%a0
 6814 4a6c 2010      	move.l (%a0),%d0
 6815 4a6e 2F2E FFF8 	move.l -8(%fp),-(%sp)
 6816 4a72 2F00      	move.l %d0,-(%sp)
 6817 4a74 4EBA C11E 	jsr remove_chain
 6818 4a78 508F      	addq.l #8,%sp
 6819 4a7a 2D40 FFFC 	move.l %d0,-4(%fp)
 6820               	.L483:
 6821 4a7e 4AAE FFFC 	tst.l -4(%fp)
 6822 4a82 667A      	jne .L481
 6823 4a84 202E 0008 	move.l 8(%fp),%d0
 6824 4a88 2240      	move.l %d0,%a1
 6825 4a8a 1029 0006 	move.b 6(%a1),%d0
 6826 4a8e 1000      	move.b %d0,%d0
 6827 4a90 0280 0000 	and.l #255,%d0
 6827      00FF 
 6828 4a96 7240      	moveq #64,%d1
 6829 4a98 C081      	and.l %d1,%d0
 6830 4a9a 4A80      	tst.l %d0
 6831 4a9c 6760      	jeq .L481
 6832 4a9e 202E 0008 	move.l 8(%fp),%d0
 6833 4aa2 2240      	move.l %d0,%a1
 6834 4aa4 2069 0018 	move.l 24(%a1),%a0
 6835 4aa8 7224      	moveq #36,%d1
 6836 4aaa D2AE 0008 	add.l 8(%fp),%d1
 6837 4aae 202E 0008 	move.l 8(%fp),%d0
 6838 4ab2 2240      	move.l %d0,%a1
 6839 4ab4 2011      	move.l (%a1),%d0
68K GAS   			page 127


 6840 4ab6 2240      	move.l %d0,%a1
 6841 4ab8 1029 0001 	move.b 1(%a1),%d0
 6842 4abc 1000      	move.b %d0,%d0
 6843 4abe 0280 0000 	and.l #255,%d0
 6843      00FF 
 6844 4ac4 4878 0001 	pea 1.w
 6845 4ac8 2F08      	move.l %a0,-(%sp)
 6846 4aca 2F01      	move.l %d1,-(%sp)
 6847 4acc 2F00      	move.l %d0,-(%sp)
 6848 4ace 4EB9 0000 	jsr disk_write
 6848      0000 
 6849 4ad4 4FEF 0010 	lea (16,%sp),%sp
 6850 4ad8 4A80      	tst.l %d0
 6851 4ada 6708      	jeq .L486
 6852 4adc 7001      	moveq #1,%d0
 6853 4ade 2D40 FFFC 	move.l %d0,-4(%fp)
 6854 4ae2 601A      	jra .L481
 6855               	.L486:
 6856 4ae4 202E 0008 	move.l 8(%fp),%d0
 6857 4ae8 2040      	move.l %d0,%a0
 6858 4aea 1028 0006 	move.b 6(%a0),%d0
 6859 4aee 1200      	move.b %d0,%d1
 6860 4af0 0201 FFBF 	and.b #-65,%d1
 6861 4af4 202E 0008 	move.l 8(%fp),%d0
 6862 4af8 2240      	move.l %d0,%a1
 6863 4afa 1341 0006 	move.b %d1,6(%a1)
 6864               	.L481:
 6865 4afe 4AAE FFFC 	tst.l -4(%fp)
 6866 4b02 6710      	jeq .L480
 6867 4b04 202E FFFC 	move.l -4(%fp),%d0
 6868 4b08 1200      	move.b %d0,%d1
 6869 4b0a 202E 0008 	move.l 8(%fp),%d0
 6870 4b0e 2040      	move.l %d0,%a0
 6871 4b10 1141 0007 	move.b %d1,7(%a0)
 6872               	.L480:
 6873 4b14 202E FFFC 	move.l -4(%fp),%d0
 6874 4b18 4E5E      	unlk %fp
 6875 4b1a 4E75      	rts
 6877               	.align2
 6878               	.globlf_unlink
 6880               	f_unlink:
 6881 4b1c 4E56 FFB0 	link.w %fp,#-80
 6882 4b20 4878 0001 	pea 1.w
 6883 4b24 200E      	move.l %fp,%d0
 6884 4b26 5080      	addq.l #8,%d0
 6885 4b28 2F00      	move.l %d0,-(%sp)
 6886 4b2a 70D8      	moveq #-40,%d0
 6887 4b2c D08E      	add.l %fp,%d0
 6888 4b2e 2F00      	move.l %d0,-(%sp)
 6889 4b30 4EBA D51E 	jsr find_volume
 6890 4b34 4FEF 000C 	lea (12,%sp),%sp
 6891 4b38 2D40 FFFC 	move.l %d0,-4(%fp)
 6892 4b3c 4AAE FFFC 	tst.l -4(%fp)
 6893 4b40 6600 018C 	jne .L488
 6894 4b44 41EE FFB0 	lea (-80,%fp),%a0
 6895 4b48 2D48 FFF0 	move.l %a0,-16(%fp)
 6896 4b4c 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 128


 6897 4b50 2F00      	move.l %d0,-(%sp)
 6898 4b52 70D8      	moveq #-40,%d0
 6899 4b54 D08E      	add.l %fp,%d0
 6900 4b56 2F00      	move.l %d0,-(%sp)
 6901 4b58 4EBA D09E 	jsr follow_path
 6902 4b5c 508F      	addq.l #8,%sp
 6903 4b5e 2D40 FFFC 	move.l %d0,-4(%fp)
 6904 4b62 4AAE FFFC 	tst.l -4(%fp)
 6905 4b66 6622      	jne .L489
 6906 4b68 202E FFF0 	move.l -16(%fp),%d0
 6907 4b6c 720B      	moveq #11,%d1
 6908 4b6e D081      	add.l %d1,%d0
 6909 4b70 2040      	move.l %d0,%a0
 6910 4b72 1010      	move.b (%a0),%d0
 6911 4b74 1000      	move.b %d0,%d0
 6912 4b76 0280 0000 	and.l #255,%d0
 6912      00FF 
 6913 4b7c 7220      	moveq #32,%d1
 6914 4b7e C081      	and.l %d1,%d0
 6915 4b80 4A80      	tst.l %d0
 6916 4b82 6706      	jeq .L489
 6917 4b84 7006      	moveq #6,%d0
 6918 4b86 2D40 FFFC 	move.l %d0,-4(%fp)
 6919               	.L489:
 6920 4b8a 4AAE FFFC 	tst.l -4(%fp)
 6921 4b8e 6600 013E 	jne .L488
 6922 4b92 2D6E FFEC 	move.l -20(%fp),-8(%fp)
 6922      FFF8 
 6923 4b98 4AAE FFF8 	tst.l -8(%fp)
 6924 4b9c 6608      	jne .L490
 6925 4b9e 7206      	moveq #6,%d1
 6926 4ba0 2D41 FFFC 	move.l %d1,-4(%fp)
 6927 4ba4 6022      	jra .L491
 6928               	.L490:
 6929 4ba6 700B      	moveq #11,%d0
 6930 4ba8 D0AE FFF8 	add.l -8(%fp),%d0
 6931 4bac 2040      	move.l %d0,%a0
 6932 4bae 1010      	move.b (%a0),%d0
 6933 4bb0 1000      	move.b %d0,%d0
 6934 4bb2 0280 0000 	and.l #255,%d0
 6934      00FF 
 6935 4bb8 7201      	moveq #1,%d1
 6936 4bba C081      	and.l %d1,%d0
 6937 4bbc 1000      	move.b %d0,%d0
 6938 4bbe 4A00      	tst.b %d0
 6939 4bc0 6706      	jeq .L491
 6940 4bc2 7007      	moveq #7,%d0
 6941 4bc4 2D40 FFFC 	move.l %d0,-4(%fp)
 6942               	.L491:
 6943 4bc8 202E FFD8 	move.l -40(%fp),%d0
 6944 4bcc 2F2E FFF8 	move.l -8(%fp),-(%sp)
 6945 4bd0 2F00      	move.l %d0,-(%sp)
 6946 4bd2 4EBA C7F0 	jsr ld_clust
 6947 4bd6 508F      	addq.l #8,%sp
 6948 4bd8 2D40 FFF4 	move.l %d0,-12(%fp)
 6949 4bdc 4AAE FFFC 	tst.l -4(%fp)
 6950 4be0 6600 00A0 	jne .L492
68K GAS   			page 129


 6951 4be4 700B      	moveq #11,%d0
 6952 4be6 D0AE FFF8 	add.l -8(%fp),%d0
 6953 4bea 2040      	move.l %d0,%a0
 6954 4bec 1010      	move.b (%a0),%d0
 6955 4bee 1000      	move.b %d0,%d0
 6956 4bf0 0280 0000 	and.l #255,%d0
 6956      00FF 
 6957 4bf6 7210      	moveq #16,%d1
 6958 4bf8 C081      	and.l %d1,%d0
 6959 4bfa 4A80      	tst.l %d0
 6960 4bfc 6700 0084 	jeq .L492
 6961 4c00 7001      	moveq #1,%d0
 6962 4c02 B0AE FFF4 	cmp.l -12(%fp),%d0
 6963 4c06 6508      	jcs .L493
 6964 4c08 7202      	moveq #2,%d1
 6965 4c0a 2D41 FFFC 	move.l %d1,-4(%fp)
 6966 4c0e 6072      	jra .L492
 6967               	.L493:
 6968 4c10 4878 001C 	pea 28.w
 6969 4c14 70D8      	moveq #-40,%d0
 6970 4c16 D08E      	add.l %fp,%d0
 6971 4c18 2F00      	move.l %d0,-(%sp)
 6972 4c1a 70BC      	moveq #-68,%d0
 6973 4c1c D08E      	add.l %fp,%d0
 6974 4c1e 2F00      	move.l %d0,-(%sp)
 6975 4c20 4EBA B3DE 	jsr mem_cpy
 6976 4c24 4FEF 000C 	lea (12,%sp),%sp
 6977 4c28 2D6E FFF4 	move.l -12(%fp),-60(%fp)
 6977      FFC4 
 6978 4c2e 4878 0002 	pea 2.w
 6979 4c32 70BC      	moveq #-68,%d0
 6980 4c34 D08E      	add.l %fp,%d0
 6981 4c36 2F00      	move.l %d0,-(%sp)
 6982 4c38 4EBA C1F2 	jsr dir_sdi
 6983 4c3c 508F      	addq.l #8,%sp
 6984 4c3e 2D40 FFFC 	move.l %d0,-4(%fp)
 6985 4c42 4AAE FFFC 	tst.l -4(%fp)
 6986 4c46 663A      	jne .L492
 6987 4c48 42A7      	clr.l -(%sp)
 6988 4c4a 70BC      	moveq #-68,%d0
 6989 4c4c D08E      	add.l %fp,%d0
 6990 4c4e 2F00      	move.l %d0,-(%sp)
 6991 4c50 4EBA C91E 	jsr dir_read
 6992 4c54 508F      	addq.l #8,%sp
 6993 4c56 2D40 FFFC 	move.l %d0,-4(%fp)
 6994 4c5a 4AAE FFFC 	tst.l -4(%fp)
 6995 4c5e 6710      	jeq .L494
 6996 4c60 202E FFD8 	move.l -40(%fp),%d0
 6997 4c64 2040      	move.l %d0,%a0
 6998 4c66 2028 0014 	move.l 20(%a0),%d0
 6999 4c6a B0AE FFF4 	cmp.l -12(%fp),%d0
 7000 4c6e 6606      	jne .L495
 7001               	.L494:
 7002 4c70 7007      	moveq #7,%d0
 7003 4c72 2D40 FFFC 	move.l %d0,-4(%fp)
 7004               	.L495:
 7005 4c76 7204      	moveq #4,%d1
68K GAS   			page 130


 7006 4c78 B2AE FFFC 	cmp.l -4(%fp),%d1
 7007 4c7c 6604      	jne .L492
 7008 4c7e 42AE FFFC 	clr.l -4(%fp)
 7009               	.L492:
 7010 4c82 4AAE FFFC 	tst.l -4(%fp)
 7011 4c86 6646      	jne .L488
 7012 4c88 70D8      	moveq #-40,%d0
 7013 4c8a D08E      	add.l %fp,%d0
 7014 4c8c 2F00      	move.l %d0,-(%sp)
 7015 4c8e 4EBA CA52 	jsr dir_remove
 7016 4c92 588F      	addq.l #4,%sp
 7017 4c94 2D40 FFFC 	move.l %d0,-4(%fp)
 7018 4c98 4AAE FFFC 	tst.l -4(%fp)
 7019 4c9c 6630      	jne .L488
 7020 4c9e 4AAE FFF4 	tst.l -12(%fp)
 7021 4ca2 6714      	jeq .L496
 7022 4ca4 202E FFD8 	move.l -40(%fp),%d0
 7023 4ca8 2F2E FFF4 	move.l -12(%fp),-(%sp)
 7024 4cac 2F00      	move.l %d0,-(%sp)
 7025 4cae 4EBA BEE4 	jsr remove_chain
 7026 4cb2 508F      	addq.l #8,%sp
 7027 4cb4 2D40 FFFC 	move.l %d0,-4(%fp)
 7028               	.L496:
 7029 4cb8 4AAE FFFC 	tst.l -4(%fp)
 7030 4cbc 6610      	jne .L488
 7031 4cbe 202E FFD8 	move.l -40(%fp),%d0
 7032 4cc2 2F00      	move.l %d0,-(%sp)
 7033 4cc4 4EBA B5A2 	jsr sync_fs
 7034 4cc8 588F      	addq.l #4,%sp
 7035 4cca 2D40 FFFC 	move.l %d0,-4(%fp)
 7036               	.L488:
 7037 4cce 202E FFFC 	move.l -4(%fp),%d0
 7038 4cd2 4E5E      	unlk %fp
 7039 4cd4 4E75      	rts
 7041               	.align2
 7042               	.globlf_mkdir
 7044               	f_mkdir:
 7045 4cd6 4E56 FFBC 	link.w %fp,#-68
 7046 4cda 2F02      	move.l %d2,-(%sp)
 7047 4cdc 4EB9 0000 	jsr get_fattime
 7047      0000 
 7048 4ce2 2D40 FFEE 	move.l %d0,-18(%fp)
 7049 4ce6 4878 0001 	pea 1.w
 7050 4cea 200E      	move.l %fp,%d0
 7051 4cec 5080      	addq.l #8,%d0
 7052 4cee 2F00      	move.l %d0,-(%sp)
 7053 4cf0 70CA      	moveq #-54,%d0
 7054 4cf2 D08E      	add.l %fp,%d0
 7055 4cf4 2F00      	move.l %d0,-(%sp)
 7056 4cf6 4EBA D358 	jsr find_volume
 7057 4cfa 4FEF 000C 	lea (12,%sp),%sp
 7058 4cfe 2D40 FFFC 	move.l %d0,-4(%fp)
 7059 4d02 4AAE FFFC 	tst.l -4(%fp)
 7060 4d06 6600 0308 	jne .L498
 7061 4d0a 41EE FFBE 	lea (-66,%fp),%a0
 7062 4d0e 2D48 FFE2 	move.l %a0,-30(%fp)
 7063 4d12 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 131


 7064 4d16 2F00      	move.l %d0,-(%sp)
 7065 4d18 70CA      	moveq #-54,%d0
 7066 4d1a D08E      	add.l %fp,%d0
 7067 4d1c 2F00      	move.l %d0,-(%sp)
 7068 4d1e 4EBA CED8 	jsr follow_path
 7069 4d22 508F      	addq.l #8,%sp
 7070 4d24 2D40 FFFC 	move.l %d0,-4(%fp)
 7071 4d28 4AAE FFFC 	tst.l -4(%fp)
 7072 4d2c 6606      	jne .L499
 7073 4d2e 7008      	moveq #8,%d0
 7074 4d30 2D40 FFFC 	move.l %d0,-4(%fp)
 7075               	.L499:
 7076 4d34 7204      	moveq #4,%d1
 7077 4d36 B2AE FFFC 	cmp.l -4(%fp),%d1
 7078 4d3a 6622      	jne .L500
 7079 4d3c 202E FFE2 	move.l -30(%fp),%d0
 7080 4d40 740B      	moveq #11,%d2
 7081 4d42 D082      	add.l %d2,%d0
 7082 4d44 2040      	move.l %d0,%a0
 7083 4d46 1010      	move.b (%a0),%d0
 7084 4d48 1000      	move.b %d0,%d0
 7085 4d4a 0280 0000 	and.l #255,%d0
 7085      00FF 
 7086 4d50 7220      	moveq #32,%d1
 7087 4d52 C081      	and.l %d1,%d0
 7088 4d54 4A80      	tst.l %d0
 7089 4d56 6706      	jeq .L500
 7090 4d58 7406      	moveq #6,%d2
 7091 4d5a 2D42 FFFC 	move.l %d2,-4(%fp)
 7092               	.L500:
 7093 4d5e 7004      	moveq #4,%d0
 7094 4d60 B0AE FFFC 	cmp.l -4(%fp),%d0
 7095 4d64 6600 02AA 	jne .L498
 7096 4d68 202E FFCA 	move.l -54(%fp),%d0
 7097 4d6c 42A7      	clr.l -(%sp)
 7098 4d6e 2F00      	move.l %d0,-(%sp)
 7099 4d70 4EBA BF12 	jsr create_chain
 7100 4d74 508F      	addq.l #8,%sp
 7101 4d76 2D40 FFEA 	move.l %d0,-22(%fp)
 7102 4d7a 42AE FFFC 	clr.l -4(%fp)
 7103 4d7e 4AAE FFEA 	tst.l -22(%fp)
 7104 4d82 6606      	jne .L501
 7105 4d84 7207      	moveq #7,%d1
 7106 4d86 2D41 FFFC 	move.l %d1,-4(%fp)
 7107               	.L501:
 7108 4d8a 7401      	moveq #1,%d2
 7109 4d8c B4AE FFEA 	cmp.l -22(%fp),%d2
 7110 4d90 6606      	jne .L502
 7111 4d92 7002      	moveq #2,%d0
 7112 4d94 2D40 FFFC 	move.l %d0,-4(%fp)
 7113               	.L502:
 7114 4d98 72FF      	moveq #-1,%d1
 7115 4d9a B2AE FFEA 	cmp.l -22(%fp),%d1
 7116 4d9e 6606      	jne .L503
 7117 4da0 7401      	moveq #1,%d2
 7118 4da2 2D42 FFFC 	move.l %d2,-4(%fp)
 7119               	.L503:
68K GAS   			page 132


 7120 4da6 4AAE FFFC 	tst.l -4(%fp)
 7121 4daa 6610      	jne .L504
 7122 4dac 202E FFCA 	move.l -54(%fp),%d0
 7123 4db0 2F00      	move.l %d0,-(%sp)
 7124 4db2 4EBA B35E 	jsr sync_window
 7125 4db6 588F      	addq.l #4,%sp
 7126 4db8 2D40 FFFC 	move.l %d0,-4(%fp)
 7127               	.L504:
 7128 4dbc 4AAE FFFC 	tst.l -4(%fp)
 7129 4dc0 6600 0196 	jne .L505
 7130 4dc4 202E FFCA 	move.l -54(%fp),%d0
 7131 4dc8 2F2E FFEA 	move.l -22(%fp),-(%sp)
 7132 4dcc 2F00      	move.l %d0,-(%sp)
 7133 4dce 4EBA B700 	jsr clust2sect
 7134 4dd2 508F      	addq.l #8,%sp
 7135 4dd4 2D40 FFF6 	move.l %d0,-10(%fp)
 7136 4dd8 202E FFCA 	move.l -54(%fp),%d0
 7137 4ddc 7234      	moveq #52,%d1
 7138 4dde D280      	add.l %d0,%d1
 7139 4de0 2D41 FFE6 	move.l %d1,-26(%fp)
 7140 4de4 202E FFCA 	move.l -54(%fp),%d0
 7141 4de8 2040      	move.l %d0,%a0
 7142 4dea 3028 000A 	move.w 10(%a0),%d0
 7143 4dee 3000      	move.w %d0,%d0
 7144 4df0 0280 0000 	and.l #65535,%d0
 7144      FFFF 
 7145 4df6 2F00      	move.l %d0,-(%sp)
 7146 4df8 42A7      	clr.l -(%sp)
 7147 4dfa 2F2E FFE6 	move.l -26(%fp),-(%sp)
 7148 4dfe 4EBA B23E 	jsr mem_set
 7149 4e02 4FEF 000C 	lea (12,%sp),%sp
 7150 4e06 4878 000B 	pea 11.w
 7151 4e0a 4878 0020 	pea 32.w
 7152 4e0e 2F2E FFE6 	move.l -26(%fp),-(%sp)
 7153 4e12 4EBA B22A 	jsr mem_set
 7154 4e16 4FEF 000C 	lea (12,%sp),%sp
 7155 4e1a 202E FFE6 	move.l -26(%fp),%d0
 7156 4e1e 2040      	move.l %d0,%a0
 7157 4e20 10BC 002E 	move.b #46,(%a0)
 7158 4e24 700B      	moveq #11,%d0
 7159 4e26 D0AE FFE6 	add.l -26(%fp),%d0
 7160 4e2a 2040      	move.l %d0,%a0
 7161 4e2c 10BC 0010 	move.b #16,(%a0)
 7162 4e30 7016      	moveq #22,%d0
 7163 4e32 D0AE FFE6 	add.l -26(%fp),%d0
 7164 4e36 222E FFEE 	move.l -18(%fp),%d1
 7165 4e3a 1201      	move.b %d1,%d1
 7166 4e3c 2040      	move.l %d0,%a0
 7167 4e3e 1081      	move.b %d1,(%a0)
 7168 4e40 7017      	moveq #23,%d0
 7169 4e42 D0AE FFE6 	add.l -26(%fp),%d0
 7170 4e46 222E FFEE 	move.l -18(%fp),%d1
 7171 4e4a 3201      	move.w %d1,%d1
 7172 4e4c E049      	lsr.w #8,%d1
 7173 4e4e 1201      	move.b %d1,%d1
 7174 4e50 2040      	move.l %d0,%a0
 7175 4e52 1081      	move.b %d1,(%a0)
68K GAS   			page 133


 7176 4e54 7018      	moveq #24,%d0
 7177 4e56 D0AE FFE6 	add.l -26(%fp),%d0
 7178 4e5a 222E FFEE 	move.l -18(%fp),%d1
 7179 4e5e 4241      	clr.w %d1
 7180 4e60 4841      	swap %d1
 7181 4e62 1201      	move.b %d1,%d1
 7182 4e64 2040      	move.l %d0,%a0
 7183 4e66 1081      	move.b %d1,(%a0)
 7184 4e68 7019      	moveq #25,%d0
 7185 4e6a D0AE FFE6 	add.l -26(%fp),%d0
 7186 4e6e 222E FFEE 	move.l -18(%fp),%d1
 7187 4e72 7418      	moveq #24,%d2
 7188 4e74 E4A9      	lsr.l %d2,%d1
 7189 4e76 1201      	move.b %d1,%d1
 7190 4e78 2040      	move.l %d0,%a0
 7191 4e7a 1081      	move.b %d1,(%a0)
 7192 4e7c 2F2E FFEA 	move.l -22(%fp),-(%sp)
 7193 4e80 2F2E FFE6 	move.l -26(%fp),-(%sp)
 7194 4e84 4EBA C5C4 	jsr st_clust
 7195 4e88 508F      	addq.l #8,%sp
 7196 4e8a 7020      	moveq #32,%d0
 7197 4e8c D0AE FFE6 	add.l -26(%fp),%d0
 7198 4e90 4878 0020 	pea 32.w
 7199 4e94 2F2E FFE6 	move.l -26(%fp),-(%sp)
 7200 4e98 2F00      	move.l %d0,-(%sp)
 7201 4e9a 4EBA B164 	jsr mem_cpy
 7202 4e9e 4FEF 000C 	lea (12,%sp),%sp
 7203 4ea2 7021      	moveq #33,%d0
 7204 4ea4 D0AE FFE6 	add.l -26(%fp),%d0
 7205 4ea8 2040      	move.l %d0,%a0
 7206 4eaa 10BC 002E 	move.b #46,(%a0)
 7207 4eae 2D6E FFD2 	move.l -46(%fp),-14(%fp)
 7207      FFF2 
 7208 4eb4 202E FFCA 	move.l -54(%fp),%d0
 7209 4eb8 2040      	move.l %d0,%a0
 7210 4eba 1010      	move.b (%a0),%d0
 7211 4ebc 0C00 0003 	cmp.b #3,%d0
 7212 4ec0 6614      	jne .L506
 7213 4ec2 202E FFCA 	move.l -54(%fp),%d0
 7214 4ec6 2040      	move.l %d0,%a0
 7215 4ec8 2028 0028 	move.l 40(%a0),%d0
 7216 4ecc B0AE FFF2 	cmp.l -14(%fp),%d0
 7217 4ed0 6604      	jne .L506
 7218 4ed2 42AE FFF2 	clr.l -14(%fp)
 7219               	.L506:
 7220 4ed6 7020      	moveq #32,%d0
 7221 4ed8 D0AE FFE6 	add.l -26(%fp),%d0
 7222 4edc 2F2E FFF2 	move.l -14(%fp),-(%sp)
 7223 4ee0 2F00      	move.l %d0,-(%sp)
 7224 4ee2 4EBA C566 	jsr st_clust
 7225 4ee6 508F      	addq.l #8,%sp
 7226 4ee8 202E FFCA 	move.l -54(%fp),%d0
 7227 4eec 2040      	move.l %d0,%a0
 7228 4eee 1D68 0002 	move.b 2(%a0),-5(%fp)
 7228      FFFB 
 7229 4ef4 6058      	jra .L507
 7230               	.L509:
68K GAS   			page 134


 7231 4ef6 202E FFCA 	move.l -54(%fp),%d0
 7232 4efa 2040      	move.l %d0,%a0
 7233 4efc 216E FFF6 	move.l -10(%fp),48(%a0)
 7233      0030 
 7234 4f02 52AE FFF6 	addq.l #1,-10(%fp)
 7235 4f06 202E FFCA 	move.l -54(%fp),%d0
 7236 4f0a 2040      	move.l %d0,%a0
 7237 4f0c 117C 0001 	move.b #1,4(%a0)
 7237      0004 
 7238 4f12 202E FFCA 	move.l -54(%fp),%d0
 7239 4f16 2F00      	move.l %d0,-(%sp)
 7240 4f18 4EBA B1F8 	jsr sync_window
 7241 4f1c 588F      	addq.l #4,%sp
 7242 4f1e 2D40 FFFC 	move.l %d0,-4(%fp)
 7243 4f22 4AAE FFFC 	tst.l -4(%fp)
 7244 4f26 662E      	jne .L512
 7245               	.L508:
 7246 4f28 202E FFCA 	move.l -54(%fp),%d0
 7247 4f2c 2040      	move.l %d0,%a0
 7248 4f2e 3028 000A 	move.w 10(%a0),%d0
 7249 4f32 3000      	move.w %d0,%d0
 7250 4f34 0280 0000 	and.l #65535,%d0
 7250      FFFF 
 7251 4f3a 2F00      	move.l %d0,-(%sp)
 7252 4f3c 42A7      	clr.l -(%sp)
 7253 4f3e 2F2E FFE6 	move.l -26(%fp),-(%sp)
 7254 4f42 4EBA B0FA 	jsr mem_set
 7255 4f46 4FEF 000C 	lea (12,%sp),%sp
 7256 4f4a 532E FFFB 	subq.b #1,-5(%fp)
 7257               	.L507:
 7258 4f4e 4A2E FFFB 	tst.b -5(%fp)
 7259 4f52 66A2      	jne .L509
 7260 4f54 6002      	jra .L505
 7261               	.L512:
 7262 4f56 4E71      	nop
 7263               	.L505:
 7264 4f58 4AAE FFFC 	tst.l -4(%fp)
 7265 4f5c 6610      	jne .L510
 7266 4f5e 70CA      	moveq #-54,%d0
 7267 4f60 D08E      	add.l %fp,%d0
 7268 4f62 2F00      	move.l %d0,-(%sp)
 7269 4f64 4EBA C6E4 	jsr dir_register
 7270 4f68 588F      	addq.l #4,%sp
 7271 4f6a 2D40 FFFC 	move.l %d0,-4(%fp)
 7272               	.L510:
 7273 4f6e 4AAE FFFC 	tst.l -4(%fp)
 7274 4f72 6714      	jeq .L511
 7275 4f74 202E FFCA 	move.l -54(%fp),%d0
 7276 4f78 2F2E FFEA 	move.l -22(%fp),-(%sp)
 7277 4f7c 2F00      	move.l %d0,-(%sp)
 7278 4f7e 4EBA BC14 	jsr remove_chain
 7279 4f82 508F      	addq.l #8,%sp
 7280 4f84 6000 008A 	jra .L498
 7281               	.L511:
 7282 4f88 2D6E FFDE 	move.l -34(%fp),-26(%fp)
 7282      FFE6 
 7283 4f8e 700B      	moveq #11,%d0
68K GAS   			page 135


 7284 4f90 D0AE FFE6 	add.l -26(%fp),%d0
 7285 4f94 2040      	move.l %d0,%a0
 7286 4f96 10BC 0010 	move.b #16,(%a0)
 7287 4f9a 7016      	moveq #22,%d0
 7288 4f9c D0AE FFE6 	add.l -26(%fp),%d0
 7289 4fa0 222E FFEE 	move.l -18(%fp),%d1
 7290 4fa4 1201      	move.b %d1,%d1
 7291 4fa6 2040      	move.l %d0,%a0
 7292 4fa8 1081      	move.b %d1,(%a0)
 7293 4faa 7017      	moveq #23,%d0
 7294 4fac D0AE FFE6 	add.l -26(%fp),%d0
 7295 4fb0 222E FFEE 	move.l -18(%fp),%d1
 7296 4fb4 3201      	move.w %d1,%d1
 7297 4fb6 E049      	lsr.w #8,%d1
 7298 4fb8 1201      	move.b %d1,%d1
 7299 4fba 2040      	move.l %d0,%a0
 7300 4fbc 1081      	move.b %d1,(%a0)
 7301 4fbe 7018      	moveq #24,%d0
 7302 4fc0 D0AE FFE6 	add.l -26(%fp),%d0
 7303 4fc4 222E FFEE 	move.l -18(%fp),%d1
 7304 4fc8 4241      	clr.w %d1
 7305 4fca 4841      	swap %d1
 7306 4fcc 1201      	move.b %d1,%d1
 7307 4fce 2040      	move.l %d0,%a0
 7308 4fd0 1081      	move.b %d1,(%a0)
 7309 4fd2 7019      	moveq #25,%d0
 7310 4fd4 D0AE FFE6 	add.l -26(%fp),%d0
 7311 4fd8 222E FFEE 	move.l -18(%fp),%d1
 7312 4fdc 7418      	moveq #24,%d2
 7313 4fde E4A9      	lsr.l %d2,%d1
 7314 4fe0 1201      	move.b %d1,%d1
 7315 4fe2 2040      	move.l %d0,%a0
 7316 4fe4 1081      	move.b %d1,(%a0)
 7317 4fe6 2F2E FFEA 	move.l -22(%fp),-(%sp)
 7318 4fea 2F2E FFE6 	move.l -26(%fp),-(%sp)
 7319 4fee 4EBA C45A 	jsr st_clust
 7320 4ff2 508F      	addq.l #8,%sp
 7321 4ff4 202E FFCA 	move.l -54(%fp),%d0
 7322 4ff8 2040      	move.l %d0,%a0
 7323 4ffa 117C 0001 	move.b #1,4(%a0)
 7323      0004 
 7324 5000 202E FFCA 	move.l -54(%fp),%d0
 7325 5004 2F00      	move.l %d0,-(%sp)
 7326 5006 4EBA B260 	jsr sync_fs
 7327 500a 588F      	addq.l #4,%sp
 7328 500c 2D40 FFFC 	move.l %d0,-4(%fp)
 7329               	.L498:
 7330 5010 202E FFFC 	move.l -4(%fp),%d0
 7331 5014 242E FFB8 	move.l -72(%fp),%d2
 7332 5018 4E5E      	unlk %fp
 7333 501a 4E75      	rts
 7335               	.align2
 7336               	.globlf_chmod
 7338               	f_chmod:
 7339 501c 4E56 FFCC 	link.w %fp,#-52
 7340 5020 2F02      	move.l %d2,-(%sp)
 7341 5022 222E 000C 	move.l 12(%fp),%d1
68K GAS   			page 136


 7342 5026 202E 0010 	move.l 16(%fp),%d0
 7343 502a 1D41 FFCE 	move.b %d1,-50(%fp)
 7344 502e 1D40 FFCC 	move.b %d0,-52(%fp)
 7345 5032 4878 0001 	pea 1.w
 7346 5036 200E      	move.l %fp,%d0
 7347 5038 5080      	addq.l #8,%d0
 7348 503a 2F00      	move.l %d0,-(%sp)
 7349 503c 70DC      	moveq #-36,%d0
 7350 503e D08E      	add.l %fp,%d0
 7351 5040 2F00      	move.l %d0,-(%sp)
 7352 5042 4EBA D00C 	jsr find_volume
 7353 5046 4FEF 000C 	lea (12,%sp),%sp
 7354 504a 2D40 FFFC 	move.l %d0,-4(%fp)
 7355 504e 4AAE FFFC 	tst.l -4(%fp)
 7356 5052 6600 00B2 	jne .L514
 7357 5056 41EE FFD0 	lea (-48,%fp),%a0
 7358 505a 2D48 FFF4 	move.l %a0,-12(%fp)
 7359 505e 202E 0008 	move.l 8(%fp),%d0
 7360 5062 2F00      	move.l %d0,-(%sp)
 7361 5064 70DC      	moveq #-36,%d0
 7362 5066 D08E      	add.l %fp,%d0
 7363 5068 2F00      	move.l %d0,-(%sp)
 7364 506a 4EBA CB8C 	jsr follow_path
 7365 506e 508F      	addq.l #8,%sp
 7366 5070 2D40 FFFC 	move.l %d0,-4(%fp)
 7367 5074 4AAE FFFC 	tst.l -4(%fp)
 7368 5078 6622      	jne .L515
 7369 507a 202E FFF4 	move.l -12(%fp),%d0
 7370 507e 720B      	moveq #11,%d1
 7371 5080 D081      	add.l %d1,%d0
 7372 5082 2040      	move.l %d0,%a0
 7373 5084 1010      	move.b (%a0),%d0
 7374 5086 1000      	move.b %d0,%d0
 7375 5088 0280 0000 	and.l #255,%d0
 7375      00FF 
 7376 508e 7220      	moveq #32,%d1
 7377 5090 C081      	and.l %d1,%d0
 7378 5092 4A80      	tst.l %d0
 7379 5094 6706      	jeq .L515
 7380 5096 7406      	moveq #6,%d2
 7381 5098 2D42 FFFC 	move.l %d2,-4(%fp)
 7382               	.L515:
 7383 509c 4AAE FFFC 	tst.l -4(%fp)
 7384 50a0 6664      	jne .L514
 7385 50a2 2D6E FFF0 	move.l -16(%fp),-8(%fp)
 7385      FFF8 
 7386 50a8 4AAE FFF8 	tst.l -8(%fp)
 7387 50ac 6608      	jne .L516
 7388 50ae 7006      	moveq #6,%d0
 7389 50b0 2D40 FFFC 	move.l %d0,-4(%fp)
 7390 50b4 6050      	jra .L514
 7391               	.L516:
 7392 50b6 022E 0027 	and.b #39,-52(%fp)
 7392      FFCC 
 7393 50bc 700B      	moveq #11,%d0
 7394 50be D0AE FFF8 	add.l -8(%fp),%d0
 7395 50c2 122E FFCE 	move.b -50(%fp),%d1
68K GAS   			page 137


 7396 50c6 C22E FFCC 	and.b -52(%fp),%d1
 7397 50ca 3041      	move.w %d1,%a0
 7398 50cc 720B      	moveq #11,%d1
 7399 50ce D2AE FFF8 	add.l -8(%fp),%d1
 7400 50d2 2241      	move.l %d1,%a1
 7401 50d4 1211      	move.b (%a1),%d1
 7402 50d6 142E FFCC 	move.b -52(%fp),%d2
 7403 50da 4602      	not.b %d2
 7404 50dc 3242      	move.w %d2,%a1
 7405 50de 3409      	move.w %a1,%d2
 7406 50e0 C202      	and.b %d2,%d1
 7407 50e2 3408      	move.w %a0,%d2
 7408 50e4 8202      	or.b %d2,%d1
 7409 50e6 2040      	move.l %d0,%a0
 7410 50e8 1081      	move.b %d1,(%a0)
 7411 50ea 202E FFDC 	move.l -36(%fp),%d0
 7412 50ee 2240      	move.l %d0,%a1
 7413 50f0 137C 0001 	move.b #1,4(%a1)
 7413      0004 
 7414 50f6 202E FFDC 	move.l -36(%fp),%d0
 7415 50fa 2F00      	move.l %d0,-(%sp)
 7416 50fc 4EBA B16A 	jsr sync_fs
 7417 5100 588F      	addq.l #4,%sp
 7418 5102 2D40 FFFC 	move.l %d0,-4(%fp)
 7419               	.L514:
 7420 5106 202E FFFC 	move.l -4(%fp),%d0
 7421 510a 242E FFC8 	move.l -56(%fp),%d2
 7422 510e 4E5E      	unlk %fp
 7423 5110 4E75      	rts
 7425               	.align2
 7426               	.globlf_utime
 7428               	f_utime:
 7429 5112 4E56 FFD0 	link.w %fp,#-48
 7430 5116 4878 0001 	pea 1.w
 7431 511a 200E      	move.l %fp,%d0
 7432 511c 5080      	addq.l #8,%d0
 7433 511e 2F00      	move.l %d0,-(%sp)
 7434 5120 70DC      	moveq #-36,%d0
 7435 5122 D08E      	add.l %fp,%d0
 7436 5124 2F00      	move.l %d0,-(%sp)
 7437 5126 4EBA CF28 	jsr find_volume
 7438 512a 4FEF 000C 	lea (12,%sp),%sp
 7439 512e 2D40 FFFC 	move.l %d0,-4(%fp)
 7440 5132 4AAE FFFC 	tst.l -4(%fp)
 7441 5136 6600 00DC 	jne .L518
 7442 513a 41EE FFD0 	lea (-48,%fp),%a0
 7443 513e 2D48 FFF4 	move.l %a0,-12(%fp)
 7444 5142 202E 0008 	move.l 8(%fp),%d0
 7445 5146 2F00      	move.l %d0,-(%sp)
 7446 5148 70DC      	moveq #-36,%d0
 7447 514a D08E      	add.l %fp,%d0
 7448 514c 2F00      	move.l %d0,-(%sp)
 7449 514e 4EBA CAA8 	jsr follow_path
 7450 5152 508F      	addq.l #8,%sp
 7451 5154 2D40 FFFC 	move.l %d0,-4(%fp)
 7452 5158 4AAE FFFC 	tst.l -4(%fp)
 7453 515c 6622      	jne .L519
68K GAS   			page 138


 7454 515e 202E FFF4 	move.l -12(%fp),%d0
 7455 5162 720B      	moveq #11,%d1
 7456 5164 D081      	add.l %d1,%d0
 7457 5166 2040      	move.l %d0,%a0
 7458 5168 1010      	move.b (%a0),%d0
 7459 516a 1000      	move.b %d0,%d0
 7460 516c 0280 0000 	and.l #255,%d0
 7460      00FF 
 7461 5172 7220      	moveq #32,%d1
 7462 5174 C081      	and.l %d1,%d0
 7463 5176 4A80      	tst.l %d0
 7464 5178 6706      	jeq .L519
 7465 517a 7006      	moveq #6,%d0
 7466 517c 2D40 FFFC 	move.l %d0,-4(%fp)
 7467               	.L519:
 7468 5180 4AAE FFFC 	tst.l -4(%fp)
 7469 5184 6600 008E 	jne .L518
 7470 5188 2D6E FFF0 	move.l -16(%fp),-8(%fp)
 7470      FFF8 
 7471 518e 4AAE FFF8 	tst.l -8(%fp)
 7472 5192 6608      	jne .L520
 7473 5194 7206      	moveq #6,%d1
 7474 5196 2D41 FFFC 	move.l %d1,-4(%fp)
 7475 519a 6078      	jra .L518
 7476               	.L520:
 7477 519c 7016      	moveq #22,%d0
 7478 519e D0AE FFF8 	add.l -8(%fp),%d0
 7479 51a2 222E 000C 	move.l 12(%fp),%d1
 7480 51a6 2041      	move.l %d1,%a0
 7481 51a8 3228 0006 	move.w 6(%a0),%d1
 7482 51ac 1201      	move.b %d1,%d1
 7483 51ae 2040      	move.l %d0,%a0
 7484 51b0 1081      	move.b %d1,(%a0)
 7485 51b2 7017      	moveq #23,%d0
 7486 51b4 D0AE FFF8 	add.l -8(%fp),%d0
 7487 51b8 222E 000C 	move.l 12(%fp),%d1
 7488 51bc 2041      	move.l %d1,%a0
 7489 51be 3228 0006 	move.w 6(%a0),%d1
 7490 51c2 E049      	lsr.w #8,%d1
 7491 51c4 1201      	move.b %d1,%d1
 7492 51c6 2040      	move.l %d0,%a0
 7493 51c8 1081      	move.b %d1,(%a0)
 7494 51ca 7018      	moveq #24,%d0
 7495 51cc D0AE FFF8 	add.l -8(%fp),%d0
 7496 51d0 222E 000C 	move.l 12(%fp),%d1
 7497 51d4 2041      	move.l %d1,%a0
 7498 51d6 3228 0004 	move.w 4(%a0),%d1
 7499 51da 1201      	move.b %d1,%d1
 7500 51dc 2040      	move.l %d0,%a0
 7501 51de 1081      	move.b %d1,(%a0)
 7502 51e0 7019      	moveq #25,%d0
 7503 51e2 D0AE FFF8 	add.l -8(%fp),%d0
 7504 51e6 222E 000C 	move.l 12(%fp),%d1
 7505 51ea 2041      	move.l %d1,%a0
 7506 51ec 3228 0004 	move.w 4(%a0),%d1
 7507 51f0 E049      	lsr.w #8,%d1
 7508 51f2 1201      	move.b %d1,%d1
68K GAS   			page 139


 7509 51f4 2040      	move.l %d0,%a0
 7510 51f6 1081      	move.b %d1,(%a0)
 7511 51f8 202E FFDC 	move.l -36(%fp),%d0
 7512 51fc 2040      	move.l %d0,%a0
 7513 51fe 117C 0001 	move.b #1,4(%a0)
 7513      0004 
 7514 5204 202E FFDC 	move.l -36(%fp),%d0
 7515 5208 2F00      	move.l %d0,-(%sp)
 7516 520a 4EBA B05C 	jsr sync_fs
 7517 520e 588F      	addq.l #4,%sp
 7518 5210 2D40 FFFC 	move.l %d0,-4(%fp)
 7519               	.L518:
 7520 5214 202E FFFC 	move.l -4(%fp),%d0
 7521 5218 4E5E      	unlk %fp
 7522 521a 4E75      	rts
 7524               	.align2
 7525               	.globlf_rename
 7527               	f_rename:
 7528 521c 4E56 FF98 	link.w %fp,#-104
 7529 5220 4878 0001 	pea 1.w
 7530 5224 200E      	move.l %fp,%d0
 7531 5226 5080      	addq.l #8,%d0
 7532 5228 2F00      	move.l %d0,-(%sp)
 7533 522a 70D8      	moveq #-40,%d0
 7534 522c D08E      	add.l %fp,%d0
 7535 522e 2F00      	move.l %d0,-(%sp)
 7536 5230 4EBA CE1E 	jsr find_volume
 7537 5234 4FEF 000C 	lea (12,%sp),%sp
 7538 5238 2D40 FFFC 	move.l %d0,-4(%fp)
 7539 523c 4AAE FFFC 	tst.l -4(%fp)
 7540 5240 6600 023E 	jne .L522
 7541 5244 202E FFD8 	move.l -40(%fp),%d0
 7542 5248 2D40 FFBC 	move.l %d0,-68(%fp)
 7543 524c 41EE FF9B 	lea (-101,%fp),%a0
 7544 5250 2D48 FFF0 	move.l %a0,-16(%fp)
 7545 5254 202E 0008 	move.l 8(%fp),%d0
 7546 5258 2F00      	move.l %d0,-(%sp)
 7547 525a 70D8      	moveq #-40,%d0
 7548 525c D08E      	add.l %fp,%d0
 7549 525e 2F00      	move.l %d0,-(%sp)
 7550 5260 4EBA C996 	jsr follow_path
 7551 5264 508F      	addq.l #8,%sp
 7552 5266 2D40 FFFC 	move.l %d0,-4(%fp)
 7553 526a 4AAE FFFC 	tst.l -4(%fp)
 7554 526e 6622      	jne .L523
 7555 5270 202E FFF0 	move.l -16(%fp),%d0
 7556 5274 720B      	moveq #11,%d1
 7557 5276 D081      	add.l %d1,%d0
 7558 5278 2040      	move.l %d0,%a0
 7559 527a 1010      	move.b (%a0),%d0
 7560 527c 1000      	move.b %d0,%d0
 7561 527e 0280 0000 	and.l #255,%d0
 7561      00FF 
 7562 5284 7220      	moveq #32,%d1
 7563 5286 C081      	and.l %d1,%d0
 7564 5288 4A80      	tst.l %d0
 7565 528a 6706      	jeq .L523
68K GAS   			page 140


 7566 528c 7006      	moveq #6,%d0
 7567 528e 2D40 FFFC 	move.l %d0,-4(%fp)
 7568               	.L523:
 7569 5292 4AAE FFFC 	tst.l -4(%fp)
 7570 5296 6600 01E8 	jne .L522
 7571 529a 202E FFEC 	move.l -20(%fp),%d0
 7572 529e 4A80      	tst.l %d0
 7573 52a0 660A      	jne .L524
 7574 52a2 7204      	moveq #4,%d1
 7575 52a4 2D41 FFFC 	move.l %d1,-4(%fp)
 7576 52a8 6000 01D6 	jra .L522
 7577               	.L524:
 7578 52ac 202E FFEC 	move.l -20(%fp),%d0
 7579 52b0 720B      	moveq #11,%d1
 7580 52b2 D081      	add.l %d1,%d0
 7581 52b4 4878 0015 	pea 21.w
 7582 52b8 2F00      	move.l %d0,-(%sp)
 7583 52ba 70A7      	moveq #-89,%d0
 7584 52bc D08E      	add.l %fp,%d0
 7585 52be 2F00      	move.l %d0,-(%sp)
 7586 52c0 4EBA AD3E 	jsr mem_cpy
 7587 52c4 4FEF 000C 	lea (12,%sp),%sp
 7588 52c8 4878 001C 	pea 28.w
 7589 52cc 70D8      	moveq #-40,%d0
 7590 52ce D08E      	add.l %fp,%d0
 7591 52d0 2F00      	move.l %d0,-(%sp)
 7592 52d2 70BC      	moveq #-68,%d0
 7593 52d4 D08E      	add.l %fp,%d0
 7594 52d6 2F00      	move.l %d0,-(%sp)
 7595 52d8 4EBA AD26 	jsr mem_cpy
 7596 52dc 4FEF 000C 	lea (12,%sp),%sp
 7597 52e0 700C      	moveq #12,%d0
 7598 52e2 D08E      	add.l %fp,%d0
 7599 52e4 2F00      	move.l %d0,-(%sp)
 7600 52e6 4EBA CAA2 	jsr get_ldnumber
 7601 52ea 588F      	addq.l #4,%sp
 7602 52ec 4A80      	tst.l %d0
 7603 52ee 6D18      	jlt .L525
 7604 52f0 202E 000C 	move.l 12(%fp),%d0
 7605 52f4 2F00      	move.l %d0,-(%sp)
 7606 52f6 70BC      	moveq #-68,%d0
 7607 52f8 D08E      	add.l %fp,%d0
 7608 52fa 2F00      	move.l %d0,-(%sp)
 7609 52fc 4EBA C8FA 	jsr follow_path
 7610 5300 508F      	addq.l #8,%sp
 7611 5302 2D40 FFFC 	move.l %d0,-4(%fp)
 7612 5306 6006      	jra .L526
 7613               	.L525:
 7614 5308 700B      	moveq #11,%d0
 7615 530a 2D40 FFFC 	move.l %d0,-4(%fp)
 7616               	.L526:
 7617 530e 4AAE FFFC 	tst.l -4(%fp)
 7618 5312 6606      	jne .L527
 7619 5314 7208      	moveq #8,%d1
 7620 5316 2D41 FFFC 	move.l %d1,-4(%fp)
 7621               	.L527:
 7622 531a 7004      	moveq #4,%d0
68K GAS   			page 141


 7623 531c B0AE FFFC 	cmp.l -4(%fp),%d0
 7624 5320 6600 015E 	jne .L522
 7625 5324 70BC      	moveq #-68,%d0
 7626 5326 D08E      	add.l %fp,%d0
 7627 5328 2F00      	move.l %d0,-(%sp)
 7628 532a 4EBA C31E 	jsr dir_register
 7629 532e 588F      	addq.l #4,%sp
 7630 5330 2D40 FFFC 	move.l %d0,-4(%fp)
 7631 5334 4AAE FFFC 	tst.l -4(%fp)
 7632 5338 6600 0146 	jne .L522
 7633 533c 2D6E FFD0 	move.l -48(%fp),-8(%fp)
 7633      FFF8 
 7634 5342 70A7      	moveq #-89,%d0
 7635 5344 D08E      	add.l %fp,%d0
 7636 5346 5480      	addq.l #2,%d0
 7637 5348 720D      	moveq #13,%d1
 7638 534a D2AE FFF8 	add.l -8(%fp),%d1
 7639 534e 4878 0013 	pea 19.w
 7640 5352 2F00      	move.l %d0,-(%sp)
 7641 5354 2F01      	move.l %d1,-(%sp)
 7642 5356 4EBA ACA8 	jsr mem_cpy
 7643 535a 4FEF 000C 	lea (12,%sp),%sp
 7644 535e 700B      	moveq #11,%d0
 7645 5360 D0AE FFF8 	add.l -8(%fp),%d0
 7646 5364 122E FFA7 	move.b -89(%fp),%d1
 7647 5368 0001 0020 	or.b #32,%d1
 7648 536c 2040      	move.l %d0,%a0
 7649 536e 1081      	move.b %d1,(%a0)
 7650 5370 202E FFD8 	move.l -40(%fp),%d0
 7651 5374 2040      	move.l %d0,%a0
 7652 5376 117C 0001 	move.b #1,4(%a0)
 7652      0004 
 7653 537c 222E FFE0 	move.l -32(%fp),%d1
 7654 5380 202E FFC4 	move.l -60(%fp),%d0
 7655 5384 B081      	cmp.l %d1,%d0
 7656 5386 6700 00CC 	jeq .L528
 7657 538a 700B      	moveq #11,%d0
 7658 538c D0AE FFF8 	add.l -8(%fp),%d0
 7659 5390 2040      	move.l %d0,%a0
 7660 5392 1010      	move.b (%a0),%d0
 7661 5394 1000      	move.b %d0,%d0
 7662 5396 0280 0000 	and.l #255,%d0
 7662      00FF 
 7663 539c 7210      	moveq #16,%d1
 7664 539e C081      	and.l %d1,%d0
 7665 53a0 4A80      	tst.l %d0
 7666 53a2 6700 00B0 	jeq .L528
 7667 53a6 202E FFD8 	move.l -40(%fp),%d0
 7668 53aa 2F2E FFF8 	move.l -8(%fp),-(%sp)
 7669 53ae 2F00      	move.l %d0,-(%sp)
 7670 53b0 4EBA C012 	jsr ld_clust
 7671 53b4 508F      	addq.l #8,%sp
 7672 53b6 2200      	move.l %d0,%d1
 7673 53b8 202E FFD8 	move.l -40(%fp),%d0
 7674 53bc 2F01      	move.l %d1,-(%sp)
 7675 53be 2F00      	move.l %d0,-(%sp)
 7676 53c0 4EBA B10E 	jsr clust2sect
68K GAS   			page 142


 7677 53c4 508F      	addq.l #8,%sp
 7678 53c6 2D40 FFF4 	move.l %d0,-12(%fp)
 7679 53ca 4AAE FFF4 	tst.l -12(%fp)
 7680 53ce 6608      	jne .L529
 7681 53d0 7002      	moveq #2,%d0
 7682 53d2 2D40 FFFC 	move.l %d0,-4(%fp)
 7683 53d6 607C      	jra .L528
 7684               	.L529:
 7685 53d8 202E FFD8 	move.l -40(%fp),%d0
 7686 53dc 2F2E FFF4 	move.l -12(%fp),-(%sp)
 7687 53e0 2F00      	move.l %d0,-(%sp)
 7688 53e2 4EBA AE16 	jsr move_window
 7689 53e6 508F      	addq.l #8,%sp
 7690 53e8 2D40 FFFC 	move.l %d0,-4(%fp)
 7691 53ec 202E FFD8 	move.l -40(%fp),%d0
 7692 53f0 7254      	moveq #84,%d1
 7693 53f2 D280      	add.l %d0,%d1
 7694 53f4 2D41 FFF8 	move.l %d1,-8(%fp)
 7695 53f8 4AAE FFFC 	tst.l -4(%fp)
 7696 53fc 6656      	jne .L528
 7697 53fe 202E FFF8 	move.l -8(%fp),%d0
 7698 5402 5280      	addq.l #1,%d0
 7699 5404 2040      	move.l %d0,%a0
 7700 5406 1010      	move.b (%a0),%d0
 7701 5408 0C00 002E 	cmp.b #46,%d0
 7702 540c 6646      	jne .L528
 7703 540e 202E FFD8 	move.l -40(%fp),%d0
 7704 5412 2040      	move.l %d0,%a0
 7705 5414 1010      	move.b (%a0),%d0
 7706 5416 0C00 0003 	cmp.b #3,%d0
 7707 541a 6612      	jne .L530
 7708 541c 222E FFC4 	move.l -60(%fp),%d1
 7709 5420 202E FFD8 	move.l -40(%fp),%d0
 7710 5424 2040      	move.l %d0,%a0
 7711 5426 2028 0028 	move.l 40(%a0),%d0
 7712 542a B081      	cmp.l %d1,%d0
 7713 542c 6706      	jeq .L531
 7714               	.L530:
 7715 542e 202E FFC4 	move.l -60(%fp),%d0
 7716 5432 6002      	jra .L532
 7717               	.L531:
 7718 5434 4280      	clr.l %d0
 7719               	.L532:
 7720 5436 2D40 FFF4 	move.l %d0,-12(%fp)
 7721 543a 2F2E FFF4 	move.l -12(%fp),-(%sp)
 7722 543e 2F2E FFF8 	move.l -8(%fp),-(%sp)
 7723 5442 4EBA C006 	jsr st_clust
 7724 5446 508F      	addq.l #8,%sp
 7725 5448 202E FFD8 	move.l -40(%fp),%d0
 7726 544c 2040      	move.l %d0,%a0
 7727 544e 117C 0001 	move.b #1,4(%a0)
 7727      0004 
 7728               	.L528:
 7729 5454 4AAE FFFC 	tst.l -4(%fp)
 7730 5458 6626      	jne .L522
 7731 545a 70D8      	moveq #-40,%d0
 7732 545c D08E      	add.l %fp,%d0
68K GAS   			page 143


 7733 545e 2F00      	move.l %d0,-(%sp)
 7734 5460 4EBA C280 	jsr dir_remove
 7735 5464 588F      	addq.l #4,%sp
 7736 5466 2D40 FFFC 	move.l %d0,-4(%fp)
 7737 546a 4AAE FFFC 	tst.l -4(%fp)
 7738 546e 6610      	jne .L522
 7739 5470 202E FFD8 	move.l -40(%fp),%d0
 7740 5474 2F00      	move.l %d0,-(%sp)
 7741 5476 4EBA ADF0 	jsr sync_fs
 7742 547a 588F      	addq.l #4,%sp
 7743 547c 2D40 FFFC 	move.l %d0,-4(%fp)
 7744               	.L522:
 7745 5480 202E FFFC 	move.l -4(%fp),%d0
 7746 5484 4E5E      	unlk %fp
 7747 5486 4E75      	rts
 7749               	.align2
 7750               	.globlf_getlabel
 7752               	f_getlabel:
 7753 5488 4E56 FFD8 	link.w %fp,#-40
 7754 548c 2F02      	move.l %d2,-(%sp)
 7755 548e 42A7      	clr.l -(%sp)
 7756 5490 200E      	move.l %fp,%d0
 7757 5492 5080      	addq.l #8,%d0
 7758 5494 2F00      	move.l %d0,-(%sp)
 7759 5496 70D8      	moveq #-40,%d0
 7760 5498 D08E      	add.l %fp,%d0
 7761 549a 2F00      	move.l %d0,-(%sp)
 7762 549c 4EBA CBB2 	jsr find_volume
 7763 54a0 4FEF 000C 	lea (12,%sp),%sp
 7764 54a4 2D40 FFFC 	move.l %d0,-4(%fp)
 7765 54a8 4AAE FFFC 	tst.l -4(%fp)
 7766 54ac 6600 009C 	jne .L534
 7767 54b0 4AAE 000C 	tst.l 12(%fp)
 7768 54b4 6700 0094 	jeq .L534
 7769 54b8 42AE FFE0 	clr.l -32(%fp)
 7770 54bc 42A7      	clr.l -(%sp)
 7771 54be 70D8      	moveq #-40,%d0
 7772 54c0 D08E      	add.l %fp,%d0
 7773 54c2 2F00      	move.l %d0,-(%sp)
 7774 54c4 4EBA B966 	jsr dir_sdi
 7775 54c8 508F      	addq.l #8,%sp
 7776 54ca 2D40 FFFC 	move.l %d0,-4(%fp)
 7777 54ce 4AAE FFFC 	tst.l -4(%fp)
 7778 54d2 6676      	jne .L534
 7779 54d4 4878 0001 	pea 1.w
 7780 54d8 70D8      	moveq #-40,%d0
 7781 54da D08E      	add.l %fp,%d0
 7782 54dc 2F00      	move.l %d0,-(%sp)
 7783 54de 4EBA C090 	jsr dir_read
 7784 54e2 508F      	addq.l #8,%sp
 7785 54e4 2D40 FFFC 	move.l %d0,-4(%fp)
 7786 54e8 4AAE FFFC 	tst.l -4(%fp)
 7787 54ec 6648      	jne .L535
 7788 54ee 202E FFEC 	move.l -20(%fp),%d0
 7789 54f2 4878 000B 	pea 11.w
 7790 54f6 2F00      	move.l %d0,-(%sp)
 7791 54f8 2F2E 000C 	move.l 12(%fp),-(%sp)
68K GAS   			page 144


 7792 54fc 4EBA AB02 	jsr mem_cpy
 7793 5500 4FEF 000C 	lea (12,%sp),%sp
 7794 5504 700B      	moveq #11,%d0
 7795 5506 2D40 FFF8 	move.l %d0,-8(%fp)
 7796               	.L537:
 7797 550a 202E 000C 	move.l 12(%fp),%d0
 7798 550e D0AE FFF8 	add.l -8(%fp),%d0
 7799 5512 2040      	move.l %d0,%a0
 7800 5514 4210      	clr.b (%a0)
 7801 5516 4AAE FFF8 	tst.l -8(%fp)
 7802 551a 6718      	jeq .L541
 7803               	.L536:
 7804 551c 53AE FFF8 	subq.l #1,-8(%fp)
 7805 5520 202E 000C 	move.l 12(%fp),%d0
 7806 5524 D0AE FFF8 	add.l -8(%fp),%d0
 7807 5528 2040      	move.l %d0,%a0
 7808 552a 1010      	move.b (%a0),%d0
 7809 552c 0C00 0020 	cmp.b #32,%d0
 7810 5530 67D8      	jeq .L537
 7811 5532 6002      	jra .L535
 7812               	.L541:
 7813 5534 4E71      	nop
 7814               	.L535:
 7815 5536 7004      	moveq #4,%d0
 7816 5538 B0AE FFFC 	cmp.l -4(%fp),%d0
 7817 553c 660C      	jne .L534
 7818 553e 202E 000C 	move.l 12(%fp),%d0
 7819 5542 2040      	move.l %d0,%a0
 7820 5544 4210      	clr.b (%a0)
 7821 5546 42AE FFFC 	clr.l -4(%fp)
 7822               	.L534:
 7823 554a 4AAE FFFC 	tst.l -4(%fp)
 7824 554e 6600 00D0 	jne .L538
 7825 5552 4AAE 0010 	tst.l 16(%fp)
 7826 5556 6700 00C8 	jeq .L538
 7827 555a 202E FFD8 	move.l -40(%fp),%d0
 7828 555e 2040      	move.l %d0,%a0
 7829 5560 2228 0020 	move.l 32(%a0),%d1
 7830 5564 202E FFD8 	move.l -40(%fp),%d0
 7831 5568 2F01      	move.l %d1,-(%sp)
 7832 556a 2F00      	move.l %d0,-(%sp)
 7833 556c 4EBA AC8C 	jsr move_window
 7834 5570 508F      	addq.l #8,%sp
 7835 5572 2D40 FFFC 	move.l %d0,-4(%fp)
 7836 5576 4AAE FFFC 	tst.l -4(%fp)
 7837 557a 6600 00A4 	jne .L538
 7838 557e 202E FFD8 	move.l -40(%fp),%d0
 7839 5582 2040      	move.l %d0,%a0
 7840 5584 1010      	move.b (%a0),%d0
 7841 5586 0C00 0003 	cmp.b #3,%d0
 7842 558a 6604      	jne .L539
 7843 558c 7043      	moveq #67,%d0
 7844 558e 6002      	jra .L540
 7845               	.L539:
 7846 5590 7027      	moveq #39,%d0
 7847               	.L540:
 7848 5592 2D40 FFF4 	move.l %d0,-12(%fp)
68K GAS   			page 145


 7849 5596 202E FFD8 	move.l -40(%fp),%d0
 7850 559a 7234      	moveq #52,%d1
 7851 559c D280      	add.l %d0,%d1
 7852 559e 202E FFF4 	move.l -12(%fp),%d0
 7853 55a2 5680      	addq.l #3,%d0
 7854 55a4 D081      	add.l %d1,%d0
 7855 55a6 2040      	move.l %d0,%a0
 7856 55a8 1010      	move.b (%a0),%d0
 7857 55aa 1000      	move.b %d0,%d0
 7858 55ac 0280 0000 	and.l #255,%d0
 7858      00FF 
 7859 55b2 2200      	move.l %d0,%d1
 7860 55b4 7418      	moveq #24,%d2
 7861 55b6 E5A9      	lsl.l %d2,%d1
 7862 55b8 202E FFD8 	move.l -40(%fp),%d0
 7863 55bc 307C 0034 	move.w #52,%a0
 7864 55c0 D1C0      	add.l %d0,%a0
 7865 55c2 202E FFF4 	move.l -12(%fp),%d0
 7866 55c6 5480      	addq.l #2,%d0
 7867 55c8 D088      	add.l %a0,%d0
 7868 55ca 2040      	move.l %d0,%a0
 7869 55cc 1010      	move.b (%a0),%d0
 7870 55ce 1000      	move.b %d0,%d0
 7871 55d0 0280 0000 	and.l #255,%d0
 7871      00FF 
 7872 55d6 4840      	swap %d0
 7873 55d8 4240      	clr.w %d0
 7874 55da 8280      	or.l %d0,%d1
 7875 55dc 202E FFD8 	move.l -40(%fp),%d0
 7876 55e0 307C 0034 	move.w #52,%a0
 7877 55e4 D1C0      	add.l %d0,%a0
 7878 55e6 202E FFF4 	move.l -12(%fp),%d0
 7879 55ea 5280      	addq.l #1,%d0
 7880 55ec D088      	add.l %a0,%d0
 7881 55ee 2040      	move.l %d0,%a0
 7882 55f0 1010      	move.b (%a0),%d0
 7883 55f2 1000      	move.b %d0,%d0
 7884 55f4 0280 0000 	and.l #255,%d0
 7884      00FF 
 7885 55fa E188      	lsl.l #8,%d0
 7886 55fc 8280      	or.l %d0,%d1
 7887 55fe 202E FFD8 	move.l -40(%fp),%d0
 7888 5602 7434      	moveq #52,%d2
 7889 5604 D082      	add.l %d2,%d0
 7890 5606 D0AE FFF4 	add.l -12(%fp),%d0
 7891 560a 2040      	move.l %d0,%a0
 7892 560c 1010      	move.b (%a0),%d0
 7893 560e 1000      	move.b %d0,%d0
 7894 5610 0280 0000 	and.l #255,%d0
 7894      00FF 
 7895 5616 8280      	or.l %d0,%d1
 7896 5618 202E 0010 	move.l 16(%fp),%d0
 7897 561c 2040      	move.l %d0,%a0
 7898 561e 2081      	move.l %d1,(%a0)
 7899               	.L538:
 7900 5620 202E FFFC 	move.l -4(%fp),%d0
 7901 5624 242E FFD4 	move.l -44(%fp),%d2
68K GAS   			page 146


 7902 5628 4E5E      	unlk %fp
 7903 562a 4E75      	rts
 7905               	.section.rodata
 7906               	.LC1:
 7907 000f 222A 2B2C 	.string"\"*+,.:;<=>?[]|\177"
 7907      2E3A 3B3C 
 7907      3D3E 3F5B 
 7907      5D7C 7F00 
 7908               	.text
 7909               	.align2
 7910               	.globlf_setlabel
 7912               	f_setlabel:
 7913 562c 4E56 FFC0 	link.w %fp,#-64
 7914 5630 2F02      	move.l %d2,-(%sp)
 7915 5632 4878 0001 	pea 1.w
 7916 5636 200E      	move.l %fp,%d0
 7917 5638 5080      	addq.l #8,%d0
 7918 563a 2F00      	move.l %d0,-(%sp)
 7919 563c 70CE      	moveq #-50,%d0
 7920 563e D08E      	add.l %fp,%d0
 7921 5640 2F00      	move.l %d0,-(%sp)
 7922 5642 4EBA CA0C 	jsr find_volume
 7923 5646 4FEF 000C 	lea (12,%sp),%sp
 7924 564a 2D40 FFFC 	move.l %d0,-4(%fp)
 7925 564e 4AAE FFFC 	tst.l -4(%fp)
 7926 5652 6708      	jeq .L543
 7927 5654 202E FFFC 	move.l -4(%fp),%d0
 7928 5658 6000 03A0 	jra .L544
 7929               	.L543:
 7930 565c 422E FFC3 	clr.b -61(%fp)
 7931 5660 42AE FFF0 	clr.l -16(%fp)
 7932 5664 6004      	jra .L545
 7933               	.L546:
 7934 5666 52AE FFF0 	addq.l #1,-16(%fp)
 7935               	.L545:
 7936 566a 202E 0008 	move.l 8(%fp),%d0
 7937 566e D0AE FFF0 	add.l -16(%fp),%d0
 7938 5672 2040      	move.l %d0,%a0
 7939 5674 1010      	move.b (%a0),%d0
 7940 5676 4A00      	tst.b %d0
 7941 5678 66EC      	jne .L546
 7942 567a 6004      	jra .L547
 7943               	.L549:
 7944 567c 53AE FFF0 	subq.l #1,-16(%fp)
 7945               	.L547:
 7946 5680 4AAE FFF0 	tst.l -16(%fp)
 7947 5684 6716      	jeq .L548
 7948 5686 222E 0008 	move.l 8(%fp),%d1
 7949 568a 202E FFF0 	move.l -16(%fp),%d0
 7950 568e 5380      	subq.l #1,%d0
 7951 5690 D081      	add.l %d1,%d0
 7952 5692 2040      	move.l %d0,%a0
 7953 5694 1010      	move.b (%a0),%d0
 7954 5696 0C00 0020 	cmp.b #32,%d0
 7955 569a 67E0      	jeq .L549
 7956               	.L548:
 7957 569c 4AAE FFF0 	tst.l -16(%fp)
68K GAS   			page 147


 7958 56a0 6700 0188 	jeq .L550
 7959 56a4 42AE FFF4 	clr.l -12(%fp)
 7960 56a8 2D6E FFF4 	move.l -12(%fp),-8(%fp)
 7960      FFF8 
 7961               	.L564:
 7962 56ae 202E 0008 	move.l 8(%fp),%d0
 7963 56b2 D0AE FFF8 	add.l -8(%fp),%d0
 7964 56b6 2040      	move.l %d0,%a0
 7965 56b8 1010      	move.b (%a0),%d0
 7966 56ba 1000      	move.b %d0,%d0
 7967 56bc 0240 00FF 	and.w #255,%d0
 7968 56c0 3D40 FFEE 	move.w %d0,-18(%fp)
 7969 56c4 52AE FFF8 	addq.l #1,-8(%fp)
 7970 56c8 302E FFEE 	move.w -18(%fp),%d0
 7971 56cc 1000      	move.b %d0,%d0
 7972 56ce 0C00 FF80 	cmp.b #-128,%d0
 7973 56d2 630C      	jls .L551
 7974 56d4 302E FFEE 	move.w -18(%fp),%d0
 7975 56d8 1000      	move.b %d0,%d0
 7976 56da 0C00 FF9F 	cmp.b #-97,%d0
 7977 56de 631C      	jls .L552
 7978               	.L551:
 7979 56e0 302E FFEE 	move.w -18(%fp),%d0
 7980 56e4 1000      	move.b %d0,%d0
 7981 56e6 0C00 FFDF 	cmp.b #-33,%d0
 7982 56ea 6300 0092 	jls .L553
 7983 56ee 302E FFEE 	move.w -18(%fp),%d0
 7984 56f2 1000      	move.b %d0,%d0
 7985 56f4 0C00 FFFC 	cmp.b #-4,%d0
 7986 56f8 6200 0084 	jhi .L553
 7987               	.L552:
 7988 56fc 7009      	moveq #9,%d0
 7989 56fe B0AE FFF4 	cmp.l -12(%fp),%d0
 7990 5702 6574      	jcs .L554
 7991 5704 222E FFF8 	move.l -8(%fp),%d1
 7992 5708 B2AE FFF0 	cmp.l -16(%fp),%d1
 7993 570c 646A      	jcc .L554
 7994 570e 202E 0008 	move.l 8(%fp),%d0
 7995 5712 D0AE FFF8 	add.l -8(%fp),%d0
 7996 5716 2040      	move.l %d0,%a0
 7997 5718 1010      	move.b (%a0),%d0
 7998 571a 0C00 003F 	cmp.b #63,%d0
 7999 571e 6312      	jls .L555
 8000 5720 202E 0008 	move.l 8(%fp),%d0
 8001 5724 D0AE FFF8 	add.l -8(%fp),%d0
 8002 5728 2040      	move.l %d0,%a0
 8003 572a 1010      	move.b (%a0),%d0
 8004 572c 0C00 007E 	cmp.b #126,%d0
 8005 5730 6322      	jls .L556
 8006               	.L555:
 8007 5732 202E 0008 	move.l 8(%fp),%d0
 8008 5736 D0AE FFF8 	add.l -8(%fp),%d0
 8009 573a 2040      	move.l %d0,%a0
 8010 573c 1010      	move.b (%a0),%d0
 8011 573e 4A00      	tst.b %d0
 8012 5740 6C36      	jge .L554
 8013 5742 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 148


 8014 5746 D0AE FFF8 	add.l -8(%fp),%d0
 8015 574a 2040      	move.l %d0,%a0
 8016 574c 1010      	move.b (%a0),%d0
 8017 574e 0C00 FFFC 	cmp.b #-4,%d0
 8018 5752 6224      	jhi .L554
 8019               	.L556:
 8020 5754 4280      	clr.l %d0
 8021 5756 302E FFEE 	move.w -18(%fp),%d0
 8022 575a E188      	lsl.l #8,%d0
 8023 575c 3200      	move.w %d0,%d1
 8024 575e 202E 0008 	move.l 8(%fp),%d0
 8025 5762 D0AE FFF8 	add.l -8(%fp),%d0
 8026 5766 2040      	move.l %d0,%a0
 8027 5768 1010      	move.b (%a0),%d0
 8028 576a 1000      	move.b %d0,%d0
 8029 576c 0240 00FF 	and.w #255,%d0
 8030 5770 8041      	or.w %d1,%d0
 8031 5772 52AE FFF8 	addq.l #1,-8(%fp)
 8032 5776 6002      	jra .L557
 8033               	.L554:
 8034 5778 4240      	clr.w %d0
 8035               	.L557:
 8036 577a 3D40 FFEE 	move.w %d0,-18(%fp)
 8037               	.L553:
 8038 577e 0C6E 0060 	cmp.w #96,-18(%fp)
 8038      FFEE 
 8039 5784 630E      	jls .L558
 8040 5786 0C6E 007A 	cmp.w #122,-18(%fp)
 8040      FFEE 
 8041 578c 6206      	jhi .L558
 8042 578e 066E FFE0 	add.w #-32,-18(%fp)
 8042      FFEE 
 8043               	.L558:
 8044 5794 4A6E FFEE 	tst.w -18(%fp)
 8045 5798 672C      	jeq .L559
 8046 579a 4280      	clr.l %d0
 8047 579c 302E FFEE 	move.w -18(%fp),%d0
 8048 57a0 2F00      	move.l %d0,-(%sp)
 8049 57a2 4879 0000 	pea .LC1
 8049      0000 
 8050 57a8 4EBA A934 	jsr chk_chr
 8051 57ac 508F      	addq.l #8,%sp
 8052 57ae 4A80      	tst.l %d0
 8053 57b0 6614      	jne .L559
 8054 57b2 0C6E 00FF 	cmp.w #255,-18(%fp)
 8054      FFEE 
 8055 57b8 6304      	jls .L560
 8056 57ba 700A      	moveq #10,%d0
 8057 57bc 6002      	jra .L561
 8058               	.L560:
 8059 57be 700B      	moveq #11,%d0
 8060               	.L561:
 8061 57c0 B0AE FFF4 	cmp.l -12(%fp),%d0
 8062 57c4 6206      	jhi .L562
 8063               	.L559:
 8064 57c6 7006      	moveq #6,%d0
 8065 57c8 6000 0230 	jra .L544
68K GAS   			page 149


 8066               	.L562:
 8067 57cc 0C6E 00FF 	cmp.w #255,-18(%fp)
 8067      FFEE 
 8068 57d2 6318      	jls .L563
 8069 57d4 302E FFEE 	move.w -18(%fp),%d0
 8070 57d8 E048      	lsr.w #8,%d0
 8071 57da 1200      	move.b %d0,%d1
 8072 57dc 70C3      	moveq #-61,%d0
 8073 57de D08E      	add.l %fp,%d0
 8074 57e0 D0AE FFF4 	add.l -12(%fp),%d0
 8075 57e4 2040      	move.l %d0,%a0
 8076 57e6 1081      	move.b %d1,(%a0)
 8077 57e8 52AE FFF4 	addq.l #1,-12(%fp)
 8078               	.L563:
 8079 57ec 302E FFEE 	move.w -18(%fp),%d0
 8080 57f0 1200      	move.b %d0,%d1
 8081 57f2 70C3      	moveq #-61,%d0
 8082 57f4 D08E      	add.l %fp,%d0
 8083 57f6 D0AE FFF4 	add.l -12(%fp),%d0
 8084 57fa 2040      	move.l %d0,%a0
 8085 57fc 1081      	move.b %d1,(%a0)
 8086 57fe 52AE FFF4 	addq.l #1,-12(%fp)
 8087 5802 202E FFF8 	move.l -8(%fp),%d0
 8088 5806 B0AE FFF0 	cmp.l -16(%fp),%d0
 8089 580a 6500 FEA2 	jcs .L564
 8090 580e 6012      	jra .L565
 8091               	.L566:
 8092 5810 70C3      	moveq #-61,%d0
 8093 5812 D08E      	add.l %fp,%d0
 8094 5814 D0AE FFF4 	add.l -12(%fp),%d0
 8095 5818 2040      	move.l %d0,%a0
 8096 581a 10BC 0020 	move.b #32,(%a0)
 8097 581e 52AE FFF4 	addq.l #1,-12(%fp)
 8098               	.L565:
 8099 5822 700A      	moveq #10,%d0
 8100 5824 B0AE FFF4 	cmp.l -12(%fp),%d0
 8101 5828 64E6      	jcc .L566
 8102               	.L550:
 8103 582a 42AE FFD6 	clr.l -42(%fp)
 8104 582e 42A7      	clr.l -(%sp)
 8105 5830 70CE      	moveq #-50,%d0
 8106 5832 D08E      	add.l %fp,%d0
 8107 5834 2F00      	move.l %d0,-(%sp)
 8108 5836 4EBA B5F4 	jsr dir_sdi
 8109 583a 508F      	addq.l #8,%sp
 8110 583c 2D40 FFFC 	move.l %d0,-4(%fp)
 8111 5840 4AAE FFFC 	tst.l -4(%fp)
 8112 5844 6600 01B0 	jne .L567
 8113 5848 4878 0001 	pea 1.w
 8114 584c 70CE      	moveq #-50,%d0
 8115 584e D08E      	add.l %fp,%d0
 8116 5850 2F00      	move.l %d0,-(%sp)
 8117 5852 4EBA BD1C 	jsr dir_read
 8118 5856 508F      	addq.l #8,%sp
 8119 5858 2D40 FFFC 	move.l %d0,-4(%fp)
 8120 585c 4AAE FFFC 	tst.l -4(%fp)
 8121 5860 6600 00AC 	jne .L568
68K GAS   			page 150


 8122 5864 102E FFC3 	move.b -61(%fp),%d0
 8123 5868 4A00      	tst.b %d0
 8124 586a 6778      	jeq .L569
 8125 586c 222E FFE2 	move.l -30(%fp),%d1
 8126 5870 4878 000B 	pea 11.w
 8127 5874 70C3      	moveq #-61,%d0
 8128 5876 D08E      	add.l %fp,%d0
 8129 5878 2F00      	move.l %d0,-(%sp)
 8130 587a 2F01      	move.l %d1,-(%sp)
 8131 587c 4EBA A782 	jsr mem_cpy
 8132 5880 4FEF 000C 	lea (12,%sp),%sp
 8133 5884 4EB9 0000 	jsr get_fattime
 8133      0000 
 8134 588a 2D40 FFEA 	move.l %d0,-22(%fp)
 8135 588e 202E FFE2 	move.l -30(%fp),%d0
 8136 5892 7216      	moveq #22,%d1
 8137 5894 D081      	add.l %d1,%d0
 8138 5896 222E FFEA 	move.l -22(%fp),%d1
 8139 589a 1201      	move.b %d1,%d1
 8140 589c 2040      	move.l %d0,%a0
 8141 589e 1081      	move.b %d1,(%a0)
 8142 58a0 202E FFE2 	move.l -30(%fp),%d0
 8143 58a4 7217      	moveq #23,%d1
 8144 58a6 D081      	add.l %d1,%d0
 8145 58a8 222E FFEA 	move.l -22(%fp),%d1
 8146 58ac 3201      	move.w %d1,%d1
 8147 58ae E049      	lsr.w #8,%d1
 8148 58b0 1201      	move.b %d1,%d1
 8149 58b2 2040      	move.l %d0,%a0
 8150 58b4 1081      	move.b %d1,(%a0)
 8151 58b6 202E FFE2 	move.l -30(%fp),%d0
 8152 58ba 7218      	moveq #24,%d1
 8153 58bc D081      	add.l %d1,%d0
 8154 58be 222E FFEA 	move.l -22(%fp),%d1
 8155 58c2 4241      	clr.w %d1
 8156 58c4 4841      	swap %d1
 8157 58c6 1201      	move.b %d1,%d1
 8158 58c8 2040      	move.l %d0,%a0
 8159 58ca 1081      	move.b %d1,(%a0)
 8160 58cc 202E FFE2 	move.l -30(%fp),%d0
 8161 58d0 7219      	moveq #25,%d1
 8162 58d2 D081      	add.l %d1,%d0
 8163 58d4 222E FFEA 	move.l -22(%fp),%d1
 8164 58d8 7418      	moveq #24,%d2
 8165 58da E4A9      	lsr.l %d2,%d1
 8166 58dc 1201      	move.b %d1,%d1
 8167 58de 2040      	move.l %d0,%a0
 8168 58e0 1081      	move.b %d1,(%a0)
 8169 58e2 600A      	jra .L570
 8170               	.L569:
 8171 58e4 202E FFE2 	move.l -30(%fp),%d0
 8172 58e8 2040      	move.l %d0,%a0
 8173 58ea 10BC FFE5 	move.b #-27,(%a0)
 8174               	.L570:
 8175 58ee 202E FFCE 	move.l -50(%fp),%d0
 8176 58f2 2040      	move.l %d0,%a0
 8177 58f4 117C 0001 	move.b #1,4(%a0)
68K GAS   			page 151


 8177      0004 
 8178 58fa 202E FFCE 	move.l -50(%fp),%d0
 8179 58fe 2F00      	move.l %d0,-(%sp)
 8180 5900 4EBA A966 	jsr sync_fs
 8181 5904 588F      	addq.l #4,%sp
 8182 5906 2D40 FFFC 	move.l %d0,-4(%fp)
 8183 590a 6000 00EA 	jra .L567
 8184               	.L568:
 8185 590e 7004      	moveq #4,%d0
 8186 5910 B0AE FFFC 	cmp.l -4(%fp),%d0
 8187 5914 6600 00E0 	jne .L567
 8188 5918 42AE FFFC 	clr.l -4(%fp)
 8189 591c 102E FFC3 	move.b -61(%fp),%d0
 8190 5920 4A00      	tst.b %d0
 8191 5922 6700 00D2 	jeq .L567
 8192 5926 4878 0001 	pea 1.w
 8193 592a 70CE      	moveq #-50,%d0
 8194 592c D08E      	add.l %fp,%d0
 8195 592e 2F00      	move.l %d0,-(%sp)
 8196 5930 4EBA B9E0 	jsr dir_alloc
 8197 5934 508F      	addq.l #8,%sp
 8198 5936 2D40 FFFC 	move.l %d0,-4(%fp)
 8199 593a 4AAE FFFC 	tst.l -4(%fp)
 8200 593e 6600 00B6 	jne .L567
 8201 5942 202E FFE2 	move.l -30(%fp),%d0
 8202 5946 4878 0020 	pea 32.w
 8203 594a 42A7      	clr.l -(%sp)
 8204 594c 2F00      	move.l %d0,-(%sp)
 8205 594e 4EBA A6EE 	jsr mem_set
 8206 5952 4FEF 000C 	lea (12,%sp),%sp
 8207 5956 222E FFE2 	move.l -30(%fp),%d1
 8208 595a 4878 000B 	pea 11.w
 8209 595e 70C3      	moveq #-61,%d0
 8210 5960 D08E      	add.l %fp,%d0
 8211 5962 2F00      	move.l %d0,-(%sp)
 8212 5964 2F01      	move.l %d1,-(%sp)
 8213 5966 4EBA A698 	jsr mem_cpy
 8214 596a 4FEF 000C 	lea (12,%sp),%sp
 8215 596e 202E FFE2 	move.l -30(%fp),%d0
 8216 5972 720B      	moveq #11,%d1
 8217 5974 D081      	add.l %d1,%d0
 8218 5976 2040      	move.l %d0,%a0
 8219 5978 10BC 0008 	move.b #8,(%a0)
 8220 597c 4EB9 0000 	jsr get_fattime
 8220      0000 
 8221 5982 2D40 FFEA 	move.l %d0,-22(%fp)
 8222 5986 202E FFE2 	move.l -30(%fp),%d0
 8223 598a 7216      	moveq #22,%d1
 8224 598c D081      	add.l %d1,%d0
 8225 598e 222E FFEA 	move.l -22(%fp),%d1
 8226 5992 1201      	move.b %d1,%d1
 8227 5994 2040      	move.l %d0,%a0
 8228 5996 1081      	move.b %d1,(%a0)
 8229 5998 202E FFE2 	move.l -30(%fp),%d0
 8230 599c 7217      	moveq #23,%d1
 8231 599e D081      	add.l %d1,%d0
 8232 59a0 222E FFEA 	move.l -22(%fp),%d1
68K GAS   			page 152


 8233 59a4 3201      	move.w %d1,%d1
 8234 59a6 E049      	lsr.w #8,%d1
 8235 59a8 1201      	move.b %d1,%d1
 8236 59aa 2040      	move.l %d0,%a0
 8237 59ac 1081      	move.b %d1,(%a0)
 8238 59ae 202E FFE2 	move.l -30(%fp),%d0
 8239 59b2 7218      	moveq #24,%d1
 8240 59b4 D081      	add.l %d1,%d0
 8241 59b6 222E FFEA 	move.l -22(%fp),%d1
 8242 59ba 4241      	clr.w %d1
 8243 59bc 4841      	swap %d1
 8244 59be 1201      	move.b %d1,%d1
 8245 59c0 2040      	move.l %d0,%a0
 8246 59c2 1081      	move.b %d1,(%a0)
 8247 59c4 202E FFE2 	move.l -30(%fp),%d0
 8248 59c8 7219      	moveq #25,%d1
 8249 59ca D081      	add.l %d1,%d0
 8250 59cc 222E FFEA 	move.l -22(%fp),%d1
 8251 59d0 7418      	moveq #24,%d2
 8252 59d2 E4A9      	lsr.l %d2,%d1
 8253 59d4 1201      	move.b %d1,%d1
 8254 59d6 2040      	move.l %d0,%a0
 8255 59d8 1081      	move.b %d1,(%a0)
 8256 59da 202E FFCE 	move.l -50(%fp),%d0
 8257 59de 2040      	move.l %d0,%a0
 8258 59e0 117C 0001 	move.b #1,4(%a0)
 8258      0004 
 8259 59e6 202E FFCE 	move.l -50(%fp),%d0
 8260 59ea 2F00      	move.l %d0,-(%sp)
 8261 59ec 4EBA A87A 	jsr sync_fs
 8262 59f0 588F      	addq.l #4,%sp
 8263 59f2 2D40 FFFC 	move.l %d0,-4(%fp)
 8264               	.L567:
 8265 59f6 202E FFFC 	move.l -4(%fp),%d0
 8266               	.L544:
 8267 59fa 242E FFBC 	move.l -68(%fp),%d2
 8268 59fe 4E5E      	unlk %fp
 8269 5a00 4E75      	rts
 8271               	.globlprogress
 8272               	.section.rodata
 8275               	progress:
 8276 001f 7C        	.byte124
 8277 0020 2F        	.byte47
 8278 0021 2D        	.byte45
 8279 0022 5C        	.byte92
 8280               	.LC2:
 8281 0023 EBFE 904D 	.string"\353\376\220MSDOS5.0"
 8281      5344 4F53 
 8281      352E 3000 
 8282               	.LC3:
 8283 002f 4E4F 204E 	.string"NO NAME    FAT32   "
 8283      414D 4520 
 8283      2020 2046 
 8283      4154 3332 
 8283      2020 2000 
 8284               	.LC4:
 8285 0043 4E4F 204E 	.string"NO NAME    FAT     "
68K GAS   			page 153


 8285      414D 4520 
 8285      2020 2046 
 8285      4154 2020 
 8285      2020 2000 
 8286               	.LC5:
 8287 0057 206C 6F6F 	.string" loop through (%d) FAT entries: "
 8287      7020 7468 
 8287      726F 7567 
 8287      6820 2825 
 8287      6429 2046 
 8288               	.text
 8289               	.align2
 8290               	.globlf_mkfs
 8292               	f_mkfs:
 8293 5a02 4E56 FFB0 	link.w %fp,#-80
 8294 5a06 2F03      	move.l %d3,-(%sp)
 8295 5a08 2F02      	move.l %d2,-(%sp)
 8296 5a0a 202E 000C 	move.l 12(%fp),%d0
 8297 5a0e 1D40 FFB2 	move.b %d0,-78(%fp)
 8298 5a12 200E      	move.l %fp,%d0
 8299 5a14 5080      	addq.l #8,%d0
 8300 5a16 2F00      	move.l %d0,-(%sp)
 8301 5a18 4EBA C370 	jsr get_ldnumber
 8302 5a1c 588F      	addq.l #4,%sp
 8303 5a1e 2D40 FFDC 	move.l %d0,-36(%fp)
 8304 5a22 4AAE FFDC 	tst.l -36(%fp)
 8305 5a26 6C06      	jge .L572
 8306 5a28 700B      	moveq #11,%d0
 8307 5a2a 6000 1006 	jra .L573
 8308               	.L572:
 8309 5a2e 0C2E 0001 	cmp.b #1,-78(%fp)
 8309      FFB2 
 8310 5a34 6306      	jls .L574
 8311 5a36 7013      	moveq #19,%d0
 8312 5a38 6000 0FF8 	jra .L573
 8313               	.L574:
 8314 5a3c 202E 0010 	move.l 16(%fp),%d0
 8315 5a40 5380      	subq.l #1,%d0
 8316 5a42 C0AE 0010 	and.l 16(%fp),%d0
 8317 5a46 4A80      	tst.l %d0
 8318 5a48 6706      	jeq .L575
 8319 5a4a 7013      	moveq #19,%d0
 8320 5a4c 6000 0FE4 	jra .L573
 8321               	.L575:
 8322 5a50 202E FFDC 	move.l -36(%fp),%d0
 8323 5a54 2D70 0DB0 	move.l FatFs(%d0.l*4),-40(%fp)
 8323      0000 0000 
 8323      FFD8 
 8324 5a5e 4AAE FFD8 	tst.l -40(%fp)
 8325 5a62 6606      	jne .L576
 8326 5a64 700C      	moveq #12,%d0
 8327 5a66 6000 0FCA 	jra .L573
 8328               	.L576:
 8329 5a6a 202E FFD8 	move.l -40(%fp),%d0
 8330 5a6e 2040      	move.l %d0,%a0
 8331 5a70 4210      	clr.b (%a0)
 8332 5a72 202E FFDC 	move.l -36(%fp),%d0
68K GAS   			page 154


 8333 5a76 1D70 0BB0 	move.b VolToPart(%d0.l*2),-41(%fp)
 8333      0000 0000 
 8333      FFD7 
 8334 5a80 222E FFDC 	move.l -36(%fp),%d1
 8335 5a84 203C 0000 	move.l #VolToPart,%d0
 8335      0000 
 8336 5a8a 5280      	addq.l #1,%d0
 8337 5a8c 2040      	move.l %d0,%a0
 8338 5a8e 1D70 1A00 	move.b (%a0,%d1.l*2),-42(%fp)
 8338      FFD6 
 8339 5a94 4280      	clr.l %d0
 8340 5a96 102E FFD7 	move.b -41(%fp),%d0
 8341 5a9a 2F00      	move.l %d0,-(%sp)
 8342 5a9c 4EB9 0000 	jsr disk_initialize
 8342      0000 
 8343 5aa2 588F      	addq.l #4,%sp
 8344 5aa4 1D40 FFD5 	move.b %d0,-43(%fp)
 8345 5aa8 4280      	clr.l %d0
 8346 5aaa 102E FFD5 	move.b -43(%fp),%d0
 8347 5aae 7201      	moveq #1,%d1
 8348 5ab0 C081      	and.l %d1,%d0
 8349 5ab2 1000      	move.b %d0,%d0
 8350 5ab4 4A00      	tst.b %d0
 8351 5ab6 6706      	jeq .L577
 8352 5ab8 7003      	moveq #3,%d0
 8353 5aba 6000 0F76 	jra .L573
 8354               	.L577:
 8355 5abe 4280      	clr.l %d0
 8356 5ac0 102E FFD5 	move.b -43(%fp),%d0
 8357 5ac4 7404      	moveq #4,%d2
 8358 5ac6 C082      	and.l %d2,%d0
 8359 5ac8 4A80      	tst.l %d0
 8360 5aca 6706      	jeq .L578
 8361 5acc 700A      	moveq #10,%d0
 8362 5ace 6000 0F62 	jra .L573
 8363               	.L578:
 8364 5ad2 720A      	moveq #10,%d1
 8365 5ad4 D2AE FFD8 	add.l -40(%fp),%d1
 8366 5ad8 4280      	clr.l %d0
 8367 5ada 102E FFD7 	move.b -41(%fp),%d0
 8368 5ade 2F01      	move.l %d1,-(%sp)
 8369 5ae0 4878 0002 	pea 2.w
 8370 5ae4 2F00      	move.l %d0,-(%sp)
 8371 5ae6 4EB9 0000 	jsr disk_ioctl
 8371      0000 
 8372 5aec 4FEF 000C 	lea (12,%sp),%sp
 8373 5af0 4A80      	tst.l %d0
 8374 5af2 6620      	jne .L579
 8375 5af4 202E FFD8 	move.l -40(%fp),%d0
 8376 5af8 2040      	move.l %d0,%a0
 8377 5afa 3028 000A 	move.w 10(%a0),%d0
 8378 5afe 0C40 0800 	cmp.w #2048,%d0
 8379 5b02 6210      	jhi .L579
 8380 5b04 202E FFD8 	move.l -40(%fp),%d0
 8381 5b08 2040      	move.l %d0,%a0
 8382 5b0a 3028 000A 	move.w 10(%a0),%d0
 8383 5b0e 0C40 01FF 	cmp.w #511,%d0
68K GAS   			page 155


 8384 5b12 6206      	jhi .L580
 8385               	.L579:
 8386 5b14 7001      	moveq #1,%d0
 8387 5b16 6000 0F1A 	jra .L573
 8388               	.L580:
 8389 5b1a 4A2E FFD6 	tst.b -42(%fp)
 8390 5b1e 6700 015A 	jeq .L581
 8391 5b22 7234      	moveq #52,%d1
 8392 5b24 D2AE FFD8 	add.l -40(%fp),%d1
 8393 5b28 4280      	clr.l %d0
 8394 5b2a 102E FFD7 	move.b -41(%fp),%d0
 8395 5b2e 4878 0001 	pea 1.w
 8396 5b32 42A7      	clr.l -(%sp)
 8397 5b34 2F01      	move.l %d1,-(%sp)
 8398 5b36 2F00      	move.l %d0,-(%sp)
 8399 5b38 4EB9 0000 	jsr disk_read
 8399      0000 
 8400 5b3e 4FEF 0010 	lea (16,%sp),%sp
 8401 5b42 4A80      	tst.l %d0
 8402 5b44 6706      	jeq .L582
 8403 5b46 7001      	moveq #1,%d0
 8404 5b48 6000 0EE8 	jra .L573
 8405               	.L582:
 8406 5b4c 202E FFD8 	move.l -40(%fp),%d0
 8407 5b50 0680 0000 	add.l #563,%d0
 8407      0233 
 8408 5b56 2040      	move.l %d0,%a0
 8409 5b58 1010      	move.b (%a0),%d0
 8410 5b5a 1000      	move.b %d0,%d0
 8411 5b5c 0280 0000 	and.l #255,%d0
 8411      00FF 
 8412 5b62 E188      	lsl.l #8,%d0
 8413 5b64 3200      	move.w %d0,%d1
 8414 5b66 202E FFD8 	move.l -40(%fp),%d0
 8415 5b6a 0680 0000 	add.l #562,%d0
 8415      0232 
 8416 5b70 2040      	move.l %d0,%a0
 8417 5b72 1010      	move.b (%a0),%d0
 8418 5b74 1000      	move.b %d0,%d0
 8419 5b76 0240 00FF 	and.w #255,%d0
 8420 5b7a 8041      	or.w %d1,%d0
 8421 5b7c 0C40 AA55 	cmp.w #-21931,%d0
 8422 5b80 6706      	jeq .L583
 8423 5b82 700E      	moveq #14,%d0
 8424 5b84 6000 0EAC 	jra .L573
 8425               	.L583:
 8426 5b88 7034      	moveq #52,%d0
 8427 5b8a D0AE FFD8 	add.l -40(%fp),%d0
 8428 5b8e 4281      	clr.l %d1
 8429 5b90 122E FFD6 	move.b -42(%fp),%d1
 8430 5b94 5381      	subq.l #1,%d1
 8431 5b96 E989      	lsl.l #4,%d1
 8432 5b98 0681 0000 	add.l #446,%d1
 8432      01BE 
 8433 5b9e 2400      	move.l %d0,%d2
 8434 5ba0 D481      	add.l %d1,%d2
 8435 5ba2 2D42 FFD0 	move.l %d2,-48(%fp)
68K GAS   			page 156


 8436 5ba6 202E FFD0 	move.l -48(%fp),%d0
 8437 5baa 5880      	addq.l #4,%d0
 8438 5bac 2040      	move.l %d0,%a0
 8439 5bae 1010      	move.b (%a0),%d0
 8440 5bb0 4A00      	tst.b %d0
 8441 5bb2 6606      	jne .L584
 8442 5bb4 700E      	moveq #14,%d0
 8443 5bb6 6000 0E7A 	jra .L573
 8444               	.L584:
 8445 5bba 700B      	moveq #11,%d0
 8446 5bbc D0AE FFD0 	add.l -48(%fp),%d0
 8447 5bc0 2040      	move.l %d0,%a0
 8448 5bc2 1010      	move.b (%a0),%d0
 8449 5bc4 1000      	move.b %d0,%d0
 8450 5bc6 0280 0000 	and.l #255,%d0
 8450      00FF 
 8451 5bcc 2200      	move.l %d0,%d1
 8452 5bce 7418      	moveq #24,%d2
 8453 5bd0 E5A9      	lsl.l %d2,%d1
 8454 5bd2 700A      	moveq #10,%d0
 8455 5bd4 D0AE FFD0 	add.l -48(%fp),%d0
 8456 5bd8 2040      	move.l %d0,%a0
 8457 5bda 1010      	move.b (%a0),%d0
 8458 5bdc 1000      	move.b %d0,%d0
 8459 5bde 0280 0000 	and.l #255,%d0
 8459      00FF 
 8460 5be4 4840      	swap %d0
 8461 5be6 4240      	clr.w %d0
 8462 5be8 8280      	or.l %d0,%d1
 8463 5bea 7009      	moveq #9,%d0
 8464 5bec D0AE FFD0 	add.l -48(%fp),%d0
 8465 5bf0 2040      	move.l %d0,%a0
 8466 5bf2 1010      	move.b (%a0),%d0
 8467 5bf4 1000      	move.b %d0,%d0
 8468 5bf6 0280 0000 	and.l #255,%d0
 8468      00FF 
 8469 5bfc E188      	lsl.l #8,%d0
 8470 5bfe 8280      	or.l %d0,%d1
 8471 5c00 202E FFD0 	move.l -48(%fp),%d0
 8472 5c04 5080      	addq.l #8,%d0
 8473 5c06 2040      	move.l %d0,%a0
 8474 5c08 1010      	move.b (%a0),%d0
 8475 5c0a 1000      	move.b %d0,%d0
 8476 5c0c 0280 0000 	and.l #255,%d0
 8476      00FF 
 8477 5c12 2401      	move.l %d1,%d2
 8478 5c14 8480      	or.l %d0,%d2
 8479 5c16 2D42 FFF0 	move.l %d2,-16(%fp)
 8480 5c1a 700F      	moveq #15,%d0
 8481 5c1c D0AE FFD0 	add.l -48(%fp),%d0
 8482 5c20 2040      	move.l %d0,%a0
 8483 5c22 1010      	move.b (%a0),%d0
 8484 5c24 1000      	move.b %d0,%d0
 8485 5c26 0280 0000 	and.l #255,%d0
 8485      00FF 
 8486 5c2c 2200      	move.l %d0,%d1
 8487 5c2e 7418      	moveq #24,%d2
68K GAS   			page 157


 8488 5c30 E5A9      	lsl.l %d2,%d1
 8489 5c32 700E      	moveq #14,%d0
 8490 5c34 D0AE FFD0 	add.l -48(%fp),%d0
 8491 5c38 2040      	move.l %d0,%a0
 8492 5c3a 1010      	move.b (%a0),%d0
 8493 5c3c 1000      	move.b %d0,%d0
 8494 5c3e 0280 0000 	and.l #255,%d0
 8494      00FF 
 8495 5c44 4840      	swap %d0
 8496 5c46 4240      	clr.w %d0
 8497 5c48 8280      	or.l %d0,%d1
 8498 5c4a 700D      	moveq #13,%d0
 8499 5c4c D0AE FFD0 	add.l -48(%fp),%d0
 8500 5c50 2040      	move.l %d0,%a0
 8501 5c52 1010      	move.b (%a0),%d0
 8502 5c54 1000      	move.b %d0,%d0
 8503 5c56 0280 0000 	and.l #255,%d0
 8503      00FF 
 8504 5c5c E188      	lsl.l #8,%d0
 8505 5c5e 8280      	or.l %d0,%d1
 8506 5c60 700C      	moveq #12,%d0
 8507 5c62 D0AE FFD0 	add.l -48(%fp),%d0
 8508 5c66 2040      	move.l %d0,%a0
 8509 5c68 1010      	move.b (%a0),%d0
 8510 5c6a 1000      	move.b %d0,%d0
 8511 5c6c 0280 0000 	and.l #255,%d0
 8511      00FF 
 8512 5c72 8081      	or.l %d1,%d0
 8513 5c74 2D40 FFB6 	move.l %d0,-74(%fp)
 8514 5c78 604C      	jra .L585
 8515               	.L581:
 8516 5c7a 4280      	clr.l %d0
 8517 5c7c 102E FFD7 	move.b -41(%fp),%d0
 8518 5c80 72B6      	moveq #-74,%d1
 8519 5c82 D28E      	add.l %fp,%d1
 8520 5c84 2F01      	move.l %d1,-(%sp)
 8521 5c86 4878 0001 	pea 1.w
 8522 5c8a 2F00      	move.l %d0,-(%sp)
 8523 5c8c 4EB9 0000 	jsr disk_ioctl
 8523      0000 
 8524 5c92 4FEF 000C 	lea (12,%sp),%sp
 8525 5c96 4A80      	tst.l %d0
 8526 5c98 660A      	jne .L586
 8527 5c9a 202E FFB6 	move.l -74(%fp),%d0
 8528 5c9e 727F      	moveq #127,%d1
 8529 5ca0 B280      	cmp.l %d0,%d1
 8530 5ca2 6506      	jcs .L587
 8531               	.L586:
 8532 5ca4 7001      	moveq #1,%d0
 8533 5ca6 6000 0D8A 	jra .L573
 8534               	.L587:
 8535 5caa 4A2E FFB2 	tst.b -78(%fp)
 8536 5cae 6704      	jeq .L588
 8537 5cb0 4280      	clr.l %d0
 8538 5cb2 6002      	jra .L589
 8539               	.L588:
 8540 5cb4 703F      	moveq #63,%d0
68K GAS   			page 158


 8541               	.L589:
 8542 5cb6 2D40 FFF0 	move.l %d0,-16(%fp)
 8543 5cba 202E FFB6 	move.l -74(%fp),%d0
 8544 5cbe 90AE FFF0 	sub.l -16(%fp),%d0
 8545 5cc2 2D40 FFB6 	move.l %d0,-74(%fp)
 8546               	.L585:
 8547 5cc6 4AAE 0010 	tst.l 16(%fp)
 8548 5cca 666A      	jne .L590
 8549 5ccc 202E FFB6 	move.l -74(%fp),%d0
 8550 5cd0 222E FFD8 	move.l -40(%fp),%d1
 8551 5cd4 2041      	move.l %d1,%a0
 8552 5cd6 3228 000A 	move.w 10(%a0),%d1
 8553 5cda 7409      	moveq #9,%d2
 8554 5cdc E469      	lsr.w %d2,%d1
 8555 5cde 3201      	move.w %d1,%d1
 8556 5ce0 0281 0000 	and.l #65535,%d1
 8556      FFFF 
 8557 5ce6 263C 0000 	move.l #2000,%d3
 8557      07D0 
 8558 5cec 4C41 3802 	divsl.l %d1,%d2:%d3
 8559 5cf0 2203      	move.l %d3,%d1
 8560 5cf2 4C41 0001 	divul.l %d1,%d1:%d0
 8561 5cf6 2D40 FFCC 	move.l %d0,-52(%fp)
 8562 5cfa 42AE FFF4 	clr.l -12(%fp)
 8563 5cfe 6004      	jra .L591
 8564               	.L592:
 8565 5d00 52AE FFF4 	addq.l #1,-12(%fp)
 8566               	.L591:
 8567 5d04 202E FFF4 	move.l -12(%fp),%d0
 8568 5d08 3030 0BB0 	move.w vst.1545(%d0.l*2),%d0
 8568      0000 0000 
 8569 5d10 3000      	move.w %d0,%d0
 8570 5d12 0280 0000 	and.l #65535,%d0
 8570      FFFF 
 8571 5d18 B0AE FFCC 	cmp.l -52(%fp),%d0
 8572 5d1c 62E2      	jhi .L592
 8573 5d1e 202E FFF4 	move.l -12(%fp),%d0
 8574 5d22 3030 0BB0 	move.w cst.1546(%d0.l*2),%d0
 8574      0000 0000 
 8575 5d2a 3000      	move.w %d0,%d0
 8576 5d2c 0280 0000 	and.l #65535,%d0
 8576      FFFF 
 8577 5d32 2D40 0010 	move.l %d0,16(%fp)
 8578               	.L590:
 8579 5d36 202E FFD8 	move.l -40(%fp),%d0
 8580 5d3a 2040      	move.l %d0,%a0
 8581 5d3c 3028 000A 	move.w 10(%a0),%d0
 8582 5d40 3000      	move.w %d0,%d0
 8583 5d42 0280 0000 	and.l #65535,%d0
 8583      FFFF 
 8584 5d48 242E 0010 	move.l 16(%fp),%d2
 8585 5d4c 4C40 2001 	divul.l %d0,%d1:%d2
 8586 5d50 2002      	move.l %d2,%d0
 8587 5d52 2D40 0010 	move.l %d0,16(%fp)
 8588 5d56 4AAE 0010 	tst.l 16(%fp)
 8589 5d5a 6606      	jne .L593
 8590 5d5c 7601      	moveq #1,%d3
68K GAS   			page 159


 8591 5d5e 2D43 0010 	move.l %d3,16(%fp)
 8592               	.L593:
 8593 5d62 0CAE 0000 	cmp.l #128,16(%fp)
 8593      0080 0010 
 8594 5d6a 6308      	jls .L594
 8595 5d6c 2D7C 0000 	move.l #128,16(%fp)
 8595      0080 0010 
 8596               	.L594:
 8597 5d74 202E FFB6 	move.l -74(%fp),%d0
 8598 5d78 4C6E 0001 	divul.l 16(%fp),%d1:%d0
 8598      0010 
 8599 5d7e 2D40 FFC8 	move.l %d0,-56(%fp)
 8600 5d82 1D7C 0001 	move.b #1,-1(%fp)
 8600      FFFF 
 8601 5d88 0CAE 0000 	cmp.l #4085,-56(%fp)
 8601      0FF5 FFC8 
 8602 5d90 6306      	jls .L595
 8603 5d92 1D7C 0002 	move.b #2,-1(%fp)
 8603      FFFF 
 8604               	.L595:
 8605 5d98 0CAE 0000 	cmp.l #65525,-56(%fp)
 8605      FFF5 FFC8 
 8606 5da0 6306      	jls .L596
 8607 5da2 1D7C 0003 	move.b #3,-1(%fp)
 8607      FFFF 
 8608               	.L596:
 8609 5da8 0C2E 0003 	cmp.b #3,-1(%fp)
 8609      FFFF 
 8610 5dae 6648      	jne .L597
 8611 5db0 202E FFC8 	move.l -56(%fp),%d0
 8612 5db4 5480      	addq.l #2,%d0
 8613 5db6 2200      	move.l %d0,%d1
 8614 5db8 E589      	lsl.l #2,%d1
 8615 5dba 202E FFD8 	move.l -40(%fp),%d0
 8616 5dbe 2040      	move.l %d0,%a0
 8617 5dc0 3028 000A 	move.w 10(%a0),%d0
 8618 5dc4 3000      	move.w %d0,%d0
 8619 5dc6 0280 0000 	and.l #65535,%d0
 8619      FFFF 
 8620 5dcc D081      	add.l %d1,%d0
 8621 5dce 5380      	subq.l #1,%d0
 8622 5dd0 222E FFD8 	move.l -40(%fp),%d1
 8623 5dd4 2041      	move.l %d1,%a0
 8624 5dd6 3228 000A 	move.w 10(%a0),%d1
 8625 5dda 3201      	move.w %d1,%d1
 8626 5ddc 0281 0000 	and.l #65535,%d1
 8626      FFFF 
 8627 5de2 4C41 0001 	divul.l %d1,%d1:%d0
 8628 5de6 2D40 FFE4 	move.l %d0,-28(%fp)
 8629 5dea 7020      	moveq #32,%d0
 8630 5dec 2D40 FFE8 	move.l %d0,-24(%fp)
 8631 5df0 42AE FFE0 	clr.l -32(%fp)
 8632 5df4 6000 0088 	jra .L598
 8633               	.L597:
 8634 5df8 0C2E 0001 	cmp.b #1,-1(%fp)
 8634      FFFF 
 8635 5dfe 6612      	jne .L599
68K GAS   			page 160


 8636 5e00 202E FFC8 	move.l -56(%fp),%d0
 8637 5e04 2200      	move.l %d0,%d1
 8638 5e06 D281      	add.l %d1,%d1
 8639 5e08 D081      	add.l %d1,%d0
 8640 5e0a 5280      	addq.l #1,%d0
 8641 5e0c E288      	lsr.l #1,%d0
 8642 5e0e 5680      	addq.l #3,%d0
 8643 5e10 6008      	jra .L600
 8644               	.L599:
 8645 5e12 202E FFC8 	move.l -56(%fp),%d0
 8646 5e16 5480      	addq.l #2,%d0
 8647 5e18 D080      	add.l %d0,%d0
 8648               	.L600:
 8649 5e1a 2D40 FFE4 	move.l %d0,-28(%fp)
 8650 5e1e 202E FFD8 	move.l -40(%fp),%d0
 8651 5e22 2040      	move.l %d0,%a0
 8652 5e24 3028 000A 	move.w 10(%a0),%d0
 8653 5e28 3000      	move.w %d0,%d0
 8654 5e2a 0280 0000 	and.l #65535,%d0
 8654      FFFF 
 8655 5e30 D0AE FFE4 	add.l -28(%fp),%d0
 8656 5e34 5380      	subq.l #1,%d0
 8657 5e36 222E FFD8 	move.l -40(%fp),%d1
 8658 5e3a 2041      	move.l %d1,%a0
 8659 5e3c 3228 000A 	move.w 10(%a0),%d1
 8660 5e40 3201      	move.w %d1,%d1
 8661 5e42 0281 0000 	and.l #65535,%d1
 8661      FFFF 
 8662 5e48 4C41 0001 	divul.l %d1,%d1:%d0
 8663 5e4c 2D40 FFE4 	move.l %d0,-28(%fp)
 8664 5e50 7001      	moveq #1,%d0
 8665 5e52 2D40 FFE8 	move.l %d0,-24(%fp)
 8666 5e56 202E FFD8 	move.l -40(%fp),%d0
 8667 5e5a 2040      	move.l %d0,%a0
 8668 5e5c 3028 000A 	move.w 10(%a0),%d0
 8669 5e60 343C 4000 	move.w #16384,%d2
 8670 5e64 0282 0000 	and.l #0xFFFF,%d2
 8670      FFFF 
 8671 5e6a 84C0      	divu.w %d0,%d2
 8672 5e6c 2202      	move.l %d2,%d1
 8673 5e6e 4841      	swap %d1
 8674 5e70 3002      	move.w %d2,%d0
 8675 5e72 3000      	move.w %d0,%d0
 8676 5e74 0280 0000 	and.l #65535,%d0
 8676      FFFF 
 8677 5e7a 2D40 FFE0 	move.l %d0,-32(%fp)
 8678               	.L598:
 8679 5e7e 262E FFF0 	move.l -16(%fp),%d3
 8680 5e82 D6AE FFE8 	add.l -24(%fp),%d3
 8681 5e86 2D43 FFEC 	move.l %d3,-20(%fp)
 8682 5e8a 202E FFEC 	move.l -20(%fp),%d0
 8683 5e8e D0AE FFE4 	add.l -28(%fp),%d0
 8684 5e92 2D40 FFC4 	move.l %d0,-60(%fp)
 8685 5e96 222E FFC4 	move.l -60(%fp),%d1
 8686 5e9a D2AE FFE0 	add.l -32(%fp),%d1
 8687 5e9e 2D41 FFC0 	move.l %d1,-64(%fp)
 8688 5ea2 202E FFC0 	move.l -64(%fp),%d0
68K GAS   			page 161


 8689 5ea6 D0AE 0010 	add.l 16(%fp),%d0
 8690 5eaa 90AE FFF0 	sub.l -16(%fp),%d0
 8691 5eae 222E FFB6 	move.l -74(%fp),%d1
 8692 5eb2 B280      	cmp.l %d0,%d1
 8693 5eb4 6406      	jcc .L601
 8694 5eb6 700E      	moveq #14,%d0
 8695 5eb8 6000 0B78 	jra .L573
 8696               	.L601:
 8697 5ebc 4280      	clr.l %d0
 8698 5ebe 102E FFD7 	move.b -41(%fp),%d0
 8699 5ec2 72BA      	moveq #-70,%d1
 8700 5ec4 D28E      	add.l %fp,%d1
 8701 5ec6 2F01      	move.l %d1,-(%sp)
 8702 5ec8 4878 0003 	pea 3.w
 8703 5ecc 2F00      	move.l %d0,-(%sp)
 8704 5ece 4EB9 0000 	jsr disk_ioctl
 8704      0000 
 8705 5ed4 4FEF 000C 	lea (12,%sp),%sp
 8706 5ed8 4A80      	tst.l %d0
 8707 5eda 6614      	jne .L602
 8708 5edc 202E FFBA 	move.l -70(%fp),%d0
 8709 5ee0 4A80      	tst.l %d0
 8710 5ee2 670C      	jeq .L602
 8711 5ee4 202E FFBA 	move.l -70(%fp),%d0
 8712 5ee8 0C80 0000 	cmp.l #32768,%d0
 8712      8000 
 8713 5eee 6306      	jls .L603
 8714               	.L602:
 8715 5ef0 7401      	moveq #1,%d2
 8716 5ef2 2D42 FFBA 	move.l %d2,-70(%fp)
 8717               	.L603:
 8718 5ef6 202E FFBA 	move.l -70(%fp),%d0
 8719 5efa D0AE FFC0 	add.l -64(%fp),%d0
 8720 5efe 5380      	subq.l #1,%d0
 8721 5f00 222E FFBA 	move.l -70(%fp),%d1
 8722 5f04 4481      	neg.l %d1
 8723 5f06 C081      	and.l %d1,%d0
 8724 5f08 2D40 FFBA 	move.l %d0,-70(%fp)
 8725 5f0c 202E FFBA 	move.l -70(%fp),%d0
 8726 5f10 90AE FFC0 	sub.l -64(%fp),%d0
 8727 5f14 2D40 FFBA 	move.l %d0,-70(%fp)
 8728 5f18 0C2E 0003 	cmp.b #3,-1(%fp)
 8728      FFFF 
 8729 5f1e 6612      	jne .L604
 8730 5f20 202E FFBA 	move.l -70(%fp),%d0
 8731 5f24 D1AE FFE8 	add.l %d0,-24(%fp)
 8732 5f28 202E FFBA 	move.l -70(%fp),%d0
 8733 5f2c D1AE FFEC 	add.l %d0,-20(%fp)
 8734 5f30 6008      	jra .L605
 8735               	.L604:
 8736 5f32 202E FFBA 	move.l -70(%fp),%d0
 8737 5f36 D1AE FFE4 	add.l %d0,-28(%fp)
 8738               	.L605:
 8739 5f3a 202E FFB6 	move.l -74(%fp),%d0
 8740 5f3e 90AE FFE8 	sub.l -24(%fp),%d0
 8741 5f42 90AE FFE4 	sub.l -28(%fp),%d0
 8742 5f46 90AE FFE0 	sub.l -32(%fp),%d0
68K GAS   			page 162


 8743 5f4a 4C6E 0001 	divul.l 16(%fp),%d1:%d0
 8743      0010 
 8744 5f50 2D40 FFC8 	move.l %d0,-56(%fp)
 8745 5f54 0C2E 0002 	cmp.b #2,-1(%fp)
 8745      FFFF 
 8746 5f5a 660A      	jne .L606
 8747 5f5c 0CAE 0000 	cmp.l #4085,-56(%fp)
 8747      0FF5 FFC8 
 8748 5f64 6312      	jls .L607
 8749               	.L606:
 8750 5f66 0C2E 0003 	cmp.b #3,-1(%fp)
 8750      FFFF 
 8751 5f6c 6610      	jne .L608
 8752 5f6e 0CAE 0000 	cmp.l #65525,-56(%fp)
 8752      FFF5 FFC8 
 8753 5f76 6206      	jhi .L608
 8754               	.L607:
 8755 5f78 700E      	moveq #14,%d0
 8756 5f7a 6000 0AB6 	jra .L573
 8757               	.L608:
 8758 5f7e 0C2E 0003 	cmp.b #3,-1(%fp)
 8758      FFFF 
 8759 5f84 6608      	jne .L609
 8760 5f86 1D7C 000C 	move.b #12,-3(%fp)
 8760      FFFD 
 8761 5f8c 6032      	jra .L610
 8762               	.L609:
 8763 5f8e 0C2E 0001 	cmp.b #1,-1(%fp)
 8763      FFFF 
 8764 5f94 6614      	jne .L611
 8765 5f96 202E FFB6 	move.l -74(%fp),%d0
 8766 5f9a 0C80 0000 	cmp.l #65535,%d0
 8766      FFFF 
 8767 5fa0 6208      	jhi .L611
 8768 5fa2 1D7C 0001 	move.b #1,-3(%fp)
 8768      FFFD 
 8769 5fa8 6016      	jra .L610
 8770               	.L611:
 8771 5faa 202E FFB6 	move.l -74(%fp),%d0
 8772 5fae 0C80 0000 	cmp.l #65535,%d0
 8772      FFFF 
 8773 5fb4 6204      	jhi .L612
 8774 5fb6 7004      	moveq #4,%d0
 8775 5fb8 6002      	jra .L613
 8776               	.L612:
 8777 5fba 7006      	moveq #6,%d0
 8778               	.L613:
 8779 5fbc 1D40 FFFD 	move.b %d0,-3(%fp)
 8780               	.L610:
 8781 5fc0 4A2E FFD6 	tst.b -42(%fp)
 8782 5fc4 675E      	jeq .L614
 8783 5fc6 7034      	moveq #52,%d0
 8784 5fc8 D0AE FFD8 	add.l -40(%fp),%d0
 8785 5fcc 4281      	clr.l %d1
 8786 5fce 122E FFD6 	move.b -42(%fp),%d1
 8787 5fd2 5381      	subq.l #1,%d1
 8788 5fd4 E989      	lsl.l #4,%d1
68K GAS   			page 163


 8789 5fd6 0681 0000 	add.l #446,%d1
 8789      01BE 
 8790 5fdc 2600      	move.l %d0,%d3
 8791 5fde D681      	add.l %d1,%d3
 8792 5fe0 2D43 FFD0 	move.l %d3,-48(%fp)
 8793 5fe4 202E FFD0 	move.l -48(%fp),%d0
 8794 5fe8 5880      	addq.l #4,%d0
 8795 5fea 2040      	move.l %d0,%a0
 8796 5fec 10AE FFFD 	move.b -3(%fp),(%a0)
 8797 5ff0 7234      	moveq #52,%d1
 8798 5ff2 D2AE FFD8 	add.l -40(%fp),%d1
 8799 5ff6 4280      	clr.l %d0
 8800 5ff8 102E FFD7 	move.b -41(%fp),%d0
 8801 5ffc 4878 0001 	pea 1.w
 8802 6000 42A7      	clr.l -(%sp)
 8803 6002 2F01      	move.l %d1,-(%sp)
 8804 6004 2F00      	move.l %d0,-(%sp)
 8805 6006 4EB9 0000 	jsr disk_write
 8805      0000 
 8806 600c 4FEF 0010 	lea (16,%sp),%sp
 8807 6010 4A80      	tst.l %d0
 8808 6012 6706      	jeq .L615
 8809 6014 7001      	moveq #1,%d0
 8810 6016 6000 0A1A 	jra .L573
 8811               	.L615:
 8812 601a 1D7C FFF8 	move.b #-8,-2(%fp)
 8812      FFFE 
 8813 6020 6000 0188 	jra .L616
 8814               	.L614:
 8815 6024 4A2E FFB2 	tst.b -78(%fp)
 8816 6028 670A      	jeq .L617
 8817 602a 1D7C FFF0 	move.b #-16,-2(%fp)
 8817      FFFE 
 8818 6030 6000 0178 	jra .L616
 8819               	.L617:
 8820 6034 202E FFD8 	move.l -40(%fp),%d0
 8821 6038 2040      	move.l %d0,%a0
 8822 603a 3028 000A 	move.w 10(%a0),%d0
 8823 603e 4281      	clr.l %d1
 8824 6040 3200      	move.w %d0,%d1
 8825 6042 7034      	moveq #52,%d0
 8826 6044 D0AE FFD8 	add.l -40(%fp),%d0
 8827 6048 2F01      	move.l %d1,-(%sp)
 8828 604a 42A7      	clr.l -(%sp)
 8829 604c 2F00      	move.l %d0,-(%sp)
 8830 604e 4EBA 9FEE 	jsr mem_set
 8831 6052 4FEF 000C 	lea (12,%sp),%sp
 8832 6056 202E FFD8 	move.l -40(%fp),%d0
 8833 605a 0680 0000 	add.l #498,%d0
 8833      01F2 
 8834 6060 2D40 FFD0 	move.l %d0,-48(%fp)
 8835 6064 202E FFD0 	move.l -48(%fp),%d0
 8836 6068 5280      	addq.l #1,%d0
 8837 606a 2040      	move.l %d0,%a0
 8838 606c 10BC 0001 	move.b #1,(%a0)
 8839 6070 202E FFD0 	move.l -48(%fp),%d0
 8840 6074 5480      	addq.l #2,%d0
68K GAS   			page 164


 8841 6076 2040      	move.l %d0,%a0
 8842 6078 10BC 0001 	move.b #1,(%a0)
 8843 607c 202E FFD0 	move.l -48(%fp),%d0
 8844 6080 5680      	addq.l #3,%d0
 8845 6082 2040      	move.l %d0,%a0
 8846 6084 4210      	clr.b (%a0)
 8847 6086 202E FFD0 	move.l -48(%fp),%d0
 8848 608a 5880      	addq.l #4,%d0
 8849 608c 2040      	move.l %d0,%a0
 8850 608e 10AE FFFD 	move.b -3(%fp),(%a0)
 8851 6092 202E FFD0 	move.l -48(%fp),%d0
 8852 6096 5A80      	addq.l #5,%d0
 8853 6098 2040      	move.l %d0,%a0
 8854 609a 10BC FFFE 	move.b #-2,(%a0)
 8855 609e 202E FFB6 	move.l -74(%fp),%d0
 8856 60a2 D0AE FFF0 	add.l -16(%fp),%d0
 8857 60a6 2400      	move.l %d0,%d2
 8858 60a8 4C3C 2401 	mulu.l #85284443,%d1:%d2
 8858      0515 565B 
 8859 60b0 9081      	sub.l %d1,%d0
 8860 60b2 E288      	lsr.l #1,%d0
 8861 60b4 D081      	add.l %d1,%d0
 8862 60b6 760D      	moveq #13,%d3
 8863 60b8 E6A8      	lsr.l %d3,%d0
 8864 60ba 2D40 FFBA 	move.l %d0,-70(%fp)
 8865 60be 202E FFD0 	move.l -48(%fp),%d0
 8866 60c2 5C80      	addq.l #6,%d0
 8867 60c4 222E FFBA 	move.l -70(%fp),%d1
 8868 60c8 E489      	lsr.l #2,%d1
 8869 60ca 1201      	move.b %d1,%d1
 8870 60cc 0001 003F 	or.b #63,%d1
 8871 60d0 2040      	move.l %d0,%a0
 8872 60d2 1081      	move.b %d1,(%a0)
 8873 60d4 202E FFD0 	move.l -48(%fp),%d0
 8874 60d8 5E80      	addq.l #7,%d0
 8875 60da 222E FFBA 	move.l -70(%fp),%d1
 8876 60de 1201      	move.b %d1,%d1
 8877 60e0 2040      	move.l %d0,%a0
 8878 60e2 1081      	move.b %d1,(%a0)
 8879 60e4 202E FFD0 	move.l -48(%fp),%d0
 8880 60e8 5080      	addq.l #8,%d0
 8881 60ea 2040      	move.l %d0,%a0
 8882 60ec 10BC 003F 	move.b #63,(%a0)
 8883 60f0 7009      	moveq #9,%d0
 8884 60f2 D0AE FFD0 	add.l -48(%fp),%d0
 8885 60f6 2040      	move.l %d0,%a0
 8886 60f8 4210      	clr.b (%a0)
 8887 60fa 700A      	moveq #10,%d0
 8888 60fc D0AE FFD0 	add.l -48(%fp),%d0
 8889 6100 2040      	move.l %d0,%a0
 8890 6102 4210      	clr.b (%a0)
 8891 6104 700B      	moveq #11,%d0
 8892 6106 D0AE FFD0 	add.l -48(%fp),%d0
 8893 610a 2040      	move.l %d0,%a0
 8894 610c 4210      	clr.b (%a0)
 8895 610e 700C      	moveq #12,%d0
 8896 6110 D0AE FFD0 	add.l -48(%fp),%d0
68K GAS   			page 165


 8897 6114 222E FFB6 	move.l -74(%fp),%d1
 8898 6118 1201      	move.b %d1,%d1
 8899 611a 2040      	move.l %d0,%a0
 8900 611c 1081      	move.b %d1,(%a0)
 8901 611e 700D      	moveq #13,%d0
 8902 6120 D0AE FFD0 	add.l -48(%fp),%d0
 8903 6124 222E FFB6 	move.l -74(%fp),%d1
 8904 6128 3201      	move.w %d1,%d1
 8905 612a E049      	lsr.w #8,%d1
 8906 612c 1201      	move.b %d1,%d1
 8907 612e 2040      	move.l %d0,%a0
 8908 6130 1081      	move.b %d1,(%a0)
 8909 6132 700E      	moveq #14,%d0
 8910 6134 D0AE FFD0 	add.l -48(%fp),%d0
 8911 6138 222E FFB6 	move.l -74(%fp),%d1
 8912 613c 4241      	clr.w %d1
 8913 613e 4841      	swap %d1
 8914 6140 1201      	move.b %d1,%d1
 8915 6142 2040      	move.l %d0,%a0
 8916 6144 1081      	move.b %d1,(%a0)
 8917 6146 700F      	moveq #15,%d0
 8918 6148 D0AE FFD0 	add.l -48(%fp),%d0
 8919 614c 222E FFB6 	move.l -74(%fp),%d1
 8920 6150 7418      	moveq #24,%d2
 8921 6152 E4A9      	lsr.l %d2,%d1
 8922 6154 1201      	move.b %d1,%d1
 8923 6156 2040      	move.l %d0,%a0
 8924 6158 1081      	move.b %d1,(%a0)
 8925 615a 202E FFD8 	move.l -40(%fp),%d0
 8926 615e 0680 0000 	add.l #562,%d0
 8926      0232 
 8927 6164 2040      	move.l %d0,%a0
 8928 6166 10BC 0055 	move.b #85,(%a0)
 8929 616a 202E FFD8 	move.l -40(%fp),%d0
 8930 616e 0680 0000 	add.l #563,%d0
 8930      0233 
 8931 6174 2040      	move.l %d0,%a0
 8932 6176 10BC FFAA 	move.b #-86,(%a0)
 8933 617a 7234      	moveq #52,%d1
 8934 617c D2AE FFD8 	add.l -40(%fp),%d1
 8935 6180 4280      	clr.l %d0
 8936 6182 102E FFD7 	move.b -41(%fp),%d0
 8937 6186 4878 0001 	pea 1.w
 8938 618a 42A7      	clr.l -(%sp)
 8939 618c 2F01      	move.l %d1,-(%sp)
 8940 618e 2F00      	move.l %d0,-(%sp)
 8941 6190 4EB9 0000 	jsr disk_write
 8941      0000 
 8942 6196 4FEF 0010 	lea (16,%sp),%sp
 8943 619a 4A80      	tst.l %d0
 8944 619c 6706      	jeq .L618
 8945 619e 7001      	moveq #1,%d0
 8946 61a0 6000 0890 	jra .L573
 8947               	.L618:
 8948 61a4 1D7C FFF8 	move.b #-8,-2(%fp)
 8948      FFFE 
 8949               	.L616:
68K GAS   			page 166


 8950 61aa 7034      	moveq #52,%d0
 8951 61ac D0AE FFD8 	add.l -40(%fp),%d0
 8952 61b0 2D40 FFD0 	move.l %d0,-48(%fp)
 8953 61b4 202E FFD8 	move.l -40(%fp),%d0
 8954 61b8 2040      	move.l %d0,%a0
 8955 61ba 3028 000A 	move.w 10(%a0),%d0
 8956 61be 3000      	move.w %d0,%d0
 8957 61c0 0280 0000 	and.l #65535,%d0
 8957      FFFF 
 8958 61c6 2F00      	move.l %d0,-(%sp)
 8959 61c8 42A7      	clr.l -(%sp)
 8960 61ca 2F2E FFD0 	move.l -48(%fp),-(%sp)
 8961 61ce 4EBA 9E6E 	jsr mem_set
 8962 61d2 4FEF 000C 	lea (12,%sp),%sp
 8963 61d6 4878 000B 	pea 11.w
 8964 61da 4879 0000 	pea .LC2
 8964      0000 
 8965 61e0 2F2E FFD0 	move.l -48(%fp),-(%sp)
 8966 61e4 4EBA 9E1A 	jsr mem_cpy
 8967 61e8 4FEF 000C 	lea (12,%sp),%sp
 8968 61ec 202E FFD8 	move.l -40(%fp),%d0
 8969 61f0 2040      	move.l %d0,%a0
 8970 61f2 3028 000A 	move.w 10(%a0),%d0
 8971 61f6 3000      	move.w %d0,%d0
 8972 61f8 0280 0000 	and.l #65535,%d0
 8972      FFFF 
 8973 61fe 2D40 FFF4 	move.l %d0,-12(%fp)
 8974 6202 700B      	moveq #11,%d0
 8975 6204 D0AE FFD0 	add.l -48(%fp),%d0
 8976 6208 222E FFF4 	move.l -12(%fp),%d1
 8977 620c 1201      	move.b %d1,%d1
 8978 620e 2040      	move.l %d0,%a0
 8979 6210 1081      	move.b %d1,(%a0)
 8980 6212 700C      	moveq #12,%d0
 8981 6214 D0AE FFD0 	add.l -48(%fp),%d0
 8982 6218 222E FFF4 	move.l -12(%fp),%d1
 8983 621c 3201      	move.w %d1,%d1
 8984 621e E049      	lsr.w #8,%d1
 8985 6220 1201      	move.b %d1,%d1
 8986 6222 2040      	move.l %d0,%a0
 8987 6224 1081      	move.b %d1,(%a0)
 8988 6226 700D      	moveq #13,%d0
 8989 6228 D0AE FFD0 	add.l -48(%fp),%d0
 8990 622c 222E 0010 	move.l 16(%fp),%d1
 8991 6230 1201      	move.b %d1,%d1
 8992 6232 2040      	move.l %d0,%a0
 8993 6234 1081      	move.b %d1,(%a0)
 8994 6236 700E      	moveq #14,%d0
 8995 6238 D0AE FFD0 	add.l -48(%fp),%d0
 8996 623c 222E FFE8 	move.l -24(%fp),%d1
 8997 6240 1201      	move.b %d1,%d1
 8998 6242 2040      	move.l %d0,%a0
 8999 6244 1081      	move.b %d1,(%a0)
 9000 6246 700F      	moveq #15,%d0
 9001 6248 D0AE FFD0 	add.l -48(%fp),%d0
 9002 624c 222E FFE8 	move.l -24(%fp),%d1
 9003 6250 3201      	move.w %d1,%d1
68K GAS   			page 167


 9004 6252 E049      	lsr.w #8,%d1
 9005 6254 1201      	move.b %d1,%d1
 9006 6256 2040      	move.l %d0,%a0
 9007 6258 1081      	move.b %d1,(%a0)
 9008 625a 7010      	moveq #16,%d0
 9009 625c D0AE FFD0 	add.l -48(%fp),%d0
 9010 6260 2040      	move.l %d0,%a0
 9011 6262 10BC 0001 	move.b #1,(%a0)
 9012 6266 0C2E 0003 	cmp.b #3,-1(%fp)
 9012      FFFF 
 9013 626c 6604      	jne .L619
 9014 626e 4280      	clr.l %d0
 9015 6270 6006      	jra .L620
 9016               	.L619:
 9017 6272 203C 0000 	move.l #512,%d0
 9017      0200 
 9018               	.L620:
 9019 6278 2D40 FFF4 	move.l %d0,-12(%fp)
 9020 627c 7011      	moveq #17,%d0
 9021 627e D0AE FFD0 	add.l -48(%fp),%d0
 9022 6282 222E FFF4 	move.l -12(%fp),%d1
 9023 6286 1201      	move.b %d1,%d1
 9024 6288 2040      	move.l %d0,%a0
 9025 628a 1081      	move.b %d1,(%a0)
 9026 628c 7012      	moveq #18,%d0
 9027 628e D0AE FFD0 	add.l -48(%fp),%d0
 9028 6292 222E FFF4 	move.l -12(%fp),%d1
 9029 6296 3201      	move.w %d1,%d1
 9030 6298 E049      	lsr.w #8,%d1
 9031 629a 1201      	move.b %d1,%d1
 9032 629c 2040      	move.l %d0,%a0
 9033 629e 1081      	move.b %d1,(%a0)
 9034 62a0 202E FFB6 	move.l -74(%fp),%d0
 9035 62a4 0C80 0000 	cmp.l #65535,%d0
 9035      FFFF 
 9036 62aa 6226      	jhi .L621
 9037 62ac 7013      	moveq #19,%d0
 9038 62ae D0AE FFD0 	add.l -48(%fp),%d0
 9039 62b2 222E FFB6 	move.l -74(%fp),%d1
 9040 62b6 1201      	move.b %d1,%d1
 9041 62b8 2040      	move.l %d0,%a0
 9042 62ba 1081      	move.b %d1,(%a0)
 9043 62bc 7014      	moveq #20,%d0
 9044 62be D0AE FFD0 	add.l -48(%fp),%d0
 9045 62c2 222E FFB6 	move.l -74(%fp),%d1
 9046 62c6 3201      	move.w %d1,%d1
 9047 62c8 E049      	lsr.w #8,%d1
 9048 62ca 1201      	move.b %d1,%d1
 9049 62cc 2040      	move.l %d0,%a0
 9050 62ce 1081      	move.b %d1,(%a0)
 9051 62d0 604C      	jra .L622
 9052               	.L621:
 9053 62d2 7020      	moveq #32,%d0
 9054 62d4 D0AE FFD0 	add.l -48(%fp),%d0
 9055 62d8 222E FFB6 	move.l -74(%fp),%d1
 9056 62dc 1201      	move.b %d1,%d1
 9057 62de 2040      	move.l %d0,%a0
68K GAS   			page 168


 9058 62e0 1081      	move.b %d1,(%a0)
 9059 62e2 7021      	moveq #33,%d0
 9060 62e4 D0AE FFD0 	add.l -48(%fp),%d0
 9061 62e8 222E FFB6 	move.l -74(%fp),%d1
 9062 62ec 3201      	move.w %d1,%d1
 9063 62ee E049      	lsr.w #8,%d1
 9064 62f0 1201      	move.b %d1,%d1
 9065 62f2 2040      	move.l %d0,%a0
 9066 62f4 1081      	move.b %d1,(%a0)
 9067 62f6 7022      	moveq #34,%d0
 9068 62f8 D0AE FFD0 	add.l -48(%fp),%d0
 9069 62fc 222E FFB6 	move.l -74(%fp),%d1
 9070 6300 4241      	clr.w %d1
 9071 6302 4841      	swap %d1
 9072 6304 1201      	move.b %d1,%d1
 9073 6306 2040      	move.l %d0,%a0
 9074 6308 1081      	move.b %d1,(%a0)
 9075 630a 7023      	moveq #35,%d0
 9076 630c D0AE FFD0 	add.l -48(%fp),%d0
 9077 6310 222E FFB6 	move.l -74(%fp),%d1
 9078 6314 7418      	moveq #24,%d2
 9079 6316 E4A9      	lsr.l %d2,%d1
 9080 6318 1201      	move.b %d1,%d1
 9081 631a 2040      	move.l %d0,%a0
 9082 631c 1081      	move.b %d1,(%a0)
 9083               	.L622:
 9084 631e 7015      	moveq #21,%d0
 9085 6320 D0AE FFD0 	add.l -48(%fp),%d0
 9086 6324 2040      	move.l %d0,%a0
 9087 6326 10AE FFFE 	move.b -2(%fp),(%a0)
 9088 632a 7018      	moveq #24,%d0
 9089 632c D0AE FFD0 	add.l -48(%fp),%d0
 9090 6330 2040      	move.l %d0,%a0
 9091 6332 10BC 003F 	move.b #63,(%a0)
 9092 6336 7019      	moveq #25,%d0
 9093 6338 D0AE FFD0 	add.l -48(%fp),%d0
 9094 633c 2040      	move.l %d0,%a0
 9095 633e 4210      	clr.b (%a0)
 9096 6340 701A      	moveq #26,%d0
 9097 6342 D0AE FFD0 	add.l -48(%fp),%d0
 9098 6346 2040      	move.l %d0,%a0
 9099 6348 50D0      	st (%a0)
 9100 634a 701B      	moveq #27,%d0
 9101 634c D0AE FFD0 	add.l -48(%fp),%d0
 9102 6350 2040      	move.l %d0,%a0
 9103 6352 4210      	clr.b (%a0)
 9104 6354 701C      	moveq #28,%d0
 9105 6356 D0AE FFD0 	add.l -48(%fp),%d0
 9106 635a 222E FFF0 	move.l -16(%fp),%d1
 9107 635e 1201      	move.b %d1,%d1
 9108 6360 2040      	move.l %d0,%a0
 9109 6362 1081      	move.b %d1,(%a0)
 9110 6364 701D      	moveq #29,%d0
 9111 6366 D0AE FFD0 	add.l -48(%fp),%d0
 9112 636a 222E FFF0 	move.l -16(%fp),%d1
 9113 636e 3201      	move.w %d1,%d1
 9114 6370 E049      	lsr.w #8,%d1
68K GAS   			page 169


 9115 6372 1201      	move.b %d1,%d1
 9116 6374 2040      	move.l %d0,%a0
 9117 6376 1081      	move.b %d1,(%a0)
 9118 6378 701E      	moveq #30,%d0
 9119 637a D0AE FFD0 	add.l -48(%fp),%d0
 9120 637e 222E FFF0 	move.l -16(%fp),%d1
 9121 6382 4241      	clr.w %d1
 9122 6384 4841      	swap %d1
 9123 6386 1201      	move.b %d1,%d1
 9124 6388 2040      	move.l %d0,%a0
 9125 638a 1081      	move.b %d1,(%a0)
 9126 638c 701F      	moveq #31,%d0
 9127 638e D0AE FFD0 	add.l -48(%fp),%d0
 9128 6392 222E FFF0 	move.l -16(%fp),%d1
 9129 6396 7418      	moveq #24,%d2
 9130 6398 E4A9      	lsr.l %d2,%d1
 9131 639a 1201      	move.b %d1,%d1
 9132 639c 2040      	move.l %d0,%a0
 9133 639e 1081      	move.b %d1,(%a0)
 9134 63a0 4EB9 0000 	jsr get_fattime
 9134      0000 
 9135 63a6 2D40 FFBA 	move.l %d0,-70(%fp)
 9136 63aa 0C2E 0003 	cmp.b #3,-1(%fp)
 9136      FFFF 
 9137 63b0 6600 0126 	jne .L623
 9138 63b4 7043      	moveq #67,%d0
 9139 63b6 D0AE FFD0 	add.l -48(%fp),%d0
 9140 63ba 222E FFBA 	move.l -70(%fp),%d1
 9141 63be 1201      	move.b %d1,%d1
 9142 63c0 2040      	move.l %d0,%a0
 9143 63c2 1081      	move.b %d1,(%a0)
 9144 63c4 7044      	moveq #68,%d0
 9145 63c6 D0AE FFD0 	add.l -48(%fp),%d0
 9146 63ca 222E FFBA 	move.l -70(%fp),%d1
 9147 63ce 3201      	move.w %d1,%d1
 9148 63d0 E049      	lsr.w #8,%d1
 9149 63d2 1201      	move.b %d1,%d1
 9150 63d4 2040      	move.l %d0,%a0
 9151 63d6 1081      	move.b %d1,(%a0)
 9152 63d8 7045      	moveq #69,%d0
 9153 63da D0AE FFD0 	add.l -48(%fp),%d0
 9154 63de 222E FFBA 	move.l -70(%fp),%d1
 9155 63e2 4241      	clr.w %d1
 9156 63e4 4841      	swap %d1
 9157 63e6 1201      	move.b %d1,%d1
 9158 63e8 2040      	move.l %d0,%a0
 9159 63ea 1081      	move.b %d1,(%a0)
 9160 63ec 7046      	moveq #70,%d0
 9161 63ee D0AE FFD0 	add.l -48(%fp),%d0
 9162 63f2 222E FFBA 	move.l -70(%fp),%d1
 9163 63f6 7418      	moveq #24,%d2
 9164 63f8 E4A9      	lsr.l %d2,%d1
 9165 63fa 1201      	move.b %d1,%d1
 9166 63fc 2040      	move.l %d0,%a0
 9167 63fe 1081      	move.b %d1,(%a0)
 9168 6400 7024      	moveq #36,%d0
 9169 6402 D0AE FFD0 	add.l -48(%fp),%d0
68K GAS   			page 170


 9170 6406 222E FFE4 	move.l -28(%fp),%d1
 9171 640a 1201      	move.b %d1,%d1
 9172 640c 2040      	move.l %d0,%a0
 9173 640e 1081      	move.b %d1,(%a0)
 9174 6410 7025      	moveq #37,%d0
 9175 6412 D0AE FFD0 	add.l -48(%fp),%d0
 9176 6416 222E FFE4 	move.l -28(%fp),%d1
 9177 641a 3201      	move.w %d1,%d1
 9178 641c E049      	lsr.w #8,%d1
 9179 641e 1201      	move.b %d1,%d1
 9180 6420 2040      	move.l %d0,%a0
 9181 6422 1081      	move.b %d1,(%a0)
 9182 6424 7026      	moveq #38,%d0
 9183 6426 D0AE FFD0 	add.l -48(%fp),%d0
 9184 642a 222E FFE4 	move.l -28(%fp),%d1
 9185 642e 4241      	clr.w %d1
 9186 6430 4841      	swap %d1
 9187 6432 1201      	move.b %d1,%d1
 9188 6434 2040      	move.l %d0,%a0
 9189 6436 1081      	move.b %d1,(%a0)
 9190 6438 7027      	moveq #39,%d0
 9191 643a D0AE FFD0 	add.l -48(%fp),%d0
 9192 643e 222E FFE4 	move.l -28(%fp),%d1
 9193 6442 7418      	moveq #24,%d2
 9194 6444 E4A9      	lsr.l %d2,%d1
 9195 6446 1201      	move.b %d1,%d1
 9196 6448 2040      	move.l %d0,%a0
 9197 644a 1081      	move.b %d1,(%a0)
 9198 644c 702C      	moveq #44,%d0
 9199 644e D0AE FFD0 	add.l -48(%fp),%d0
 9200 6452 2040      	move.l %d0,%a0
 9201 6454 10BC 0002 	move.b #2,(%a0)
 9202 6458 702D      	moveq #45,%d0
 9203 645a D0AE FFD0 	add.l -48(%fp),%d0
 9204 645e 2040      	move.l %d0,%a0
 9205 6460 4210      	clr.b (%a0)
 9206 6462 702E      	moveq #46,%d0
 9207 6464 D0AE FFD0 	add.l -48(%fp),%d0
 9208 6468 2040      	move.l %d0,%a0
 9209 646a 4210      	clr.b (%a0)
 9210 646c 702F      	moveq #47,%d0
 9211 646e D0AE FFD0 	add.l -48(%fp),%d0
 9212 6472 2040      	move.l %d0,%a0
 9213 6474 4210      	clr.b (%a0)
 9214 6476 7030      	moveq #48,%d0
 9215 6478 D0AE FFD0 	add.l -48(%fp),%d0
 9216 647c 2040      	move.l %d0,%a0
 9217 647e 10BC 0001 	move.b #1,(%a0)
 9218 6482 7031      	moveq #49,%d0
 9219 6484 D0AE FFD0 	add.l -48(%fp),%d0
 9220 6488 2040      	move.l %d0,%a0
 9221 648a 4210      	clr.b (%a0)
 9222 648c 7032      	moveq #50,%d0
 9223 648e D0AE FFD0 	add.l -48(%fp),%d0
 9224 6492 2040      	move.l %d0,%a0
 9225 6494 10BC 0006 	move.b #6,(%a0)
 9226 6498 7033      	moveq #51,%d0
68K GAS   			page 171


 9227 649a D0AE FFD0 	add.l -48(%fp),%d0
 9228 649e 2040      	move.l %d0,%a0
 9229 64a0 4210      	clr.b (%a0)
 9230 64a2 7040      	moveq #64,%d0
 9231 64a4 D0AE FFD0 	add.l -48(%fp),%d0
 9232 64a8 2040      	move.l %d0,%a0
 9233 64aa 10BC FF80 	move.b #-128,(%a0)
 9234 64ae 7042      	moveq #66,%d0
 9235 64b0 D0AE FFD0 	add.l -48(%fp),%d0
 9236 64b4 2040      	move.l %d0,%a0
 9237 64b6 10BC 0029 	move.b #41,(%a0)
 9238 64ba 7047      	moveq #71,%d0
 9239 64bc D0AE FFD0 	add.l -48(%fp),%d0
 9240 64c0 4878 0013 	pea 19.w
 9241 64c4 4879 0000 	pea .LC3
 9241      0000 
 9242 64ca 2F00      	move.l %d0,-(%sp)
 9243 64cc 4EBA 9B32 	jsr mem_cpy
 9244 64d0 4FEF 000C 	lea (12,%sp),%sp
 9245 64d4 6000 00A4 	jra .L624
 9246               	.L623:
 9247 64d8 7027      	moveq #39,%d0
 9248 64da D0AE FFD0 	add.l -48(%fp),%d0
 9249 64de 222E FFBA 	move.l -70(%fp),%d1
 9250 64e2 1201      	move.b %d1,%d1
 9251 64e4 2040      	move.l %d0,%a0
 9252 64e6 1081      	move.b %d1,(%a0)
 9253 64e8 7028      	moveq #40,%d0
 9254 64ea D0AE FFD0 	add.l -48(%fp),%d0
 9255 64ee 222E FFBA 	move.l -70(%fp),%d1
 9256 64f2 3201      	move.w %d1,%d1
 9257 64f4 E049      	lsr.w #8,%d1
 9258 64f6 1201      	move.b %d1,%d1
 9259 64f8 2040      	move.l %d0,%a0
 9260 64fa 1081      	move.b %d1,(%a0)
 9261 64fc 7029      	moveq #41,%d0
 9262 64fe D0AE FFD0 	add.l -48(%fp),%d0
 9263 6502 222E FFBA 	move.l -70(%fp),%d1
 9264 6506 4241      	clr.w %d1
 9265 6508 4841      	swap %d1
 9266 650a 1201      	move.b %d1,%d1
 9267 650c 2040      	move.l %d0,%a0
 9268 650e 1081      	move.b %d1,(%a0)
 9269 6510 702A      	moveq #42,%d0
 9270 6512 D0AE FFD0 	add.l -48(%fp),%d0
 9271 6516 222E FFBA 	move.l -70(%fp),%d1
 9272 651a 7418      	moveq #24,%d2
 9273 651c E4A9      	lsr.l %d2,%d1
 9274 651e 1201      	move.b %d1,%d1
 9275 6520 2040      	move.l %d0,%a0
 9276 6522 1081      	move.b %d1,(%a0)
 9277 6524 7016      	moveq #22,%d0
 9278 6526 D0AE FFD0 	add.l -48(%fp),%d0
 9279 652a 222E FFE4 	move.l -28(%fp),%d1
 9280 652e 1201      	move.b %d1,%d1
 9281 6530 2040      	move.l %d0,%a0
 9282 6532 1081      	move.b %d1,(%a0)
68K GAS   			page 172


 9283 6534 7017      	moveq #23,%d0
 9284 6536 D0AE FFD0 	add.l -48(%fp),%d0
 9285 653a 222E FFE4 	move.l -28(%fp),%d1
 9286 653e 3201      	move.w %d1,%d1
 9287 6540 E049      	lsr.w #8,%d1
 9288 6542 1201      	move.b %d1,%d1
 9289 6544 2040      	move.l %d0,%a0
 9290 6546 1081      	move.b %d1,(%a0)
 9291 6548 7024      	moveq #36,%d0
 9292 654a D0AE FFD0 	add.l -48(%fp),%d0
 9293 654e 2040      	move.l %d0,%a0
 9294 6550 10BC FF80 	move.b #-128,(%a0)
 9295 6554 7026      	moveq #38,%d0
 9296 6556 D0AE FFD0 	add.l -48(%fp),%d0
 9297 655a 2040      	move.l %d0,%a0
 9298 655c 10BC 0029 	move.b #41,(%a0)
 9299 6560 702B      	moveq #43,%d0
 9300 6562 D0AE FFD0 	add.l -48(%fp),%d0
 9301 6566 4878 0013 	pea 19.w
 9302 656a 4879 0000 	pea .LC4
 9302      0000 
 9303 6570 2F00      	move.l %d0,-(%sp)
 9304 6572 4EBA 9A8C 	jsr mem_cpy
 9305 6576 4FEF 000C 	lea (12,%sp),%sp
 9306               	.L624:
 9307 657a 202E FFD0 	move.l -48(%fp),%d0
 9308 657e 0680 0000 	add.l #510,%d0
 9308      01FE 
 9309 6584 2040      	move.l %d0,%a0
 9310 6586 10BC 0055 	move.b #85,(%a0)
 9311 658a 202E FFD0 	move.l -48(%fp),%d0
 9312 658e 0680 0000 	add.l #511,%d0
 9312      01FF 
 9313 6594 2040      	move.l %d0,%a0
 9314 6596 10BC FFAA 	move.b #-86,(%a0)
 9315 659a 4280      	clr.l %d0
 9316 659c 102E FFD7 	move.b -41(%fp),%d0
 9317 65a0 4878 0001 	pea 1.w
 9318 65a4 2F2E FFF0 	move.l -16(%fp),-(%sp)
 9319 65a8 2F2E FFD0 	move.l -48(%fp),-(%sp)
 9320 65ac 2F00      	move.l %d0,-(%sp)
 9321 65ae 4EB9 0000 	jsr disk_write
 9321      0000 
 9322 65b4 4FEF 0010 	lea (16,%sp),%sp
 9323 65b8 4A80      	tst.l %d0
 9324 65ba 6706      	jeq .L625
 9325 65bc 7001      	moveq #1,%d0
 9326 65be 6000 0472 	jra .L573
 9327               	.L625:
 9328 65c2 0C2E 0003 	cmp.b #3,-1(%fp)
 9328      FFFF 
 9329 65c8 6622      	jne .L626
 9330 65ca 222E FFF0 	move.l -16(%fp),%d1
 9331 65ce 5C81      	addq.l #6,%d1
 9332 65d0 4280      	clr.l %d0
 9333 65d2 102E FFD7 	move.b -41(%fp),%d0
 9334 65d6 4878 0001 	pea 1.w
68K GAS   			page 173


 9335 65da 2F01      	move.l %d1,-(%sp)
 9336 65dc 2F2E FFD0 	move.l -48(%fp),-(%sp)
 9337 65e0 2F00      	move.l %d0,-(%sp)
 9338 65e2 4EB9 0000 	jsr disk_write
 9338      0000 
 9339 65e8 4FEF 0010 	lea (16,%sp),%sp
 9340               	.L626:
 9341 65ec 2D6E FFEC 	move.l -20(%fp),-8(%fp)
 9341      FFF8 
 9342 65f2 42AE FFF4 	clr.l -12(%fp)
 9343 65f6 6000 024C 	jra .L627
 9344               	.L636:
 9345 65fa 202E FFD8 	move.l -40(%fp),%d0
 9346 65fe 2040      	move.l %d0,%a0
 9347 6600 3028 000A 	move.w 10(%a0),%d0
 9348 6604 3000      	move.w %d0,%d0
 9349 6606 0280 0000 	and.l #65535,%d0
 9349      FFFF 
 9350 660c 2F00      	move.l %d0,-(%sp)
 9351 660e 42A7      	clr.l -(%sp)
 9352 6610 2F2E FFD0 	move.l -48(%fp),-(%sp)
 9353 6614 4EBA 9A28 	jsr mem_set
 9354 6618 4FEF 000C 	lea (12,%sp),%sp
 9355 661c 4280      	clr.l %d0
 9356 661e 102E FFFE 	move.b -2(%fp),%d0
 9357 6622 2D40 FFBA 	move.l %d0,-70(%fp)
 9358 6626 0C2E 0003 	cmp.b #3,-1(%fp)
 9358      FFFF 
 9359 662c 676C      	jeq .L628
 9360 662e 0C2E 0001 	cmp.b #1,-1(%fp)
 9360      FFFF 
 9361 6634 6608      	jne .L629
 9362 6636 203C 00FF 	move.l #16776960,%d0
 9362      FF00 
 9363 663c 6004      	jra .L630
 9364               	.L629:
 9365 663e 70FF      	moveq #-1,%d0
 9366 6640 4600      	not.b %d0
 9367               	.L630:
 9368 6642 222E FFBA 	move.l -70(%fp),%d1
 9369 6646 8081      	or.l %d1,%d0
 9370 6648 2D40 FFBA 	move.l %d0,-70(%fp)
 9371 664c 202E FFBA 	move.l -70(%fp),%d0
 9372 6650 1200      	move.b %d0,%d1
 9373 6652 202E FFD0 	move.l -48(%fp),%d0
 9374 6656 2040      	move.l %d0,%a0
 9375 6658 1081      	move.b %d1,(%a0)
 9376 665a 202E FFD0 	move.l -48(%fp),%d0
 9377 665e 5280      	addq.l #1,%d0
 9378 6660 222E FFBA 	move.l -70(%fp),%d1
 9379 6664 3201      	move.w %d1,%d1
 9380 6666 E049      	lsr.w #8,%d1
 9381 6668 1201      	move.b %d1,%d1
 9382 666a 2040      	move.l %d0,%a0
 9383 666c 1081      	move.b %d1,(%a0)
 9384 666e 202E FFD0 	move.l -48(%fp),%d0
 9385 6672 5480      	addq.l #2,%d0
68K GAS   			page 174


 9386 6674 222E FFBA 	move.l -70(%fp),%d1
 9387 6678 4241      	clr.w %d1
 9388 667a 4841      	swap %d1
 9389 667c 1201      	move.b %d1,%d1
 9390 667e 2040      	move.l %d0,%a0
 9391 6680 1081      	move.b %d1,(%a0)
 9392 6682 202E FFD0 	move.l -48(%fp),%d0
 9393 6686 5680      	addq.l #3,%d0
 9394 6688 222E FFBA 	move.l -70(%fp),%d1
 9395 668c 7418      	moveq #24,%d2
 9396 668e E4A9      	lsr.l %d2,%d1
 9397 6690 1201      	move.b %d1,%d1
 9398 6692 2040      	move.l %d0,%a0
 9399 6694 1081      	move.b %d1,(%a0)
 9400 6696 6000 00AC 	jra .L631
 9401               	.L628:
 9402 669a 202E FFBA 	move.l -70(%fp),%d0
 9403 669e 72FF      	moveq #-1,%d1
 9404 66a0 4601      	not.b %d1
 9405 66a2 8081      	or.l %d1,%d0
 9406 66a4 2D40 FFBA 	move.l %d0,-70(%fp)
 9407 66a8 202E FFBA 	move.l -70(%fp),%d0
 9408 66ac 1200      	move.b %d0,%d1
 9409 66ae 202E FFD0 	move.l -48(%fp),%d0
 9410 66b2 2040      	move.l %d0,%a0
 9411 66b4 1081      	move.b %d1,(%a0)
 9412 66b6 202E FFD0 	move.l -48(%fp),%d0
 9413 66ba 5280      	addq.l #1,%d0
 9414 66bc 222E FFBA 	move.l -70(%fp),%d1
 9415 66c0 3201      	move.w %d1,%d1
 9416 66c2 E049      	lsr.w #8,%d1
 9417 66c4 1201      	move.b %d1,%d1
 9418 66c6 2040      	move.l %d0,%a0
 9419 66c8 1081      	move.b %d1,(%a0)
 9420 66ca 202E FFD0 	move.l -48(%fp),%d0
 9421 66ce 5480      	addq.l #2,%d0
 9422 66d0 222E FFBA 	move.l -70(%fp),%d1
 9423 66d4 4241      	clr.w %d1
 9424 66d6 4841      	swap %d1
 9425 66d8 1201      	move.b %d1,%d1
 9426 66da 2040      	move.l %d0,%a0
 9427 66dc 1081      	move.b %d1,(%a0)
 9428 66de 202E FFD0 	move.l -48(%fp),%d0
 9429 66e2 5680      	addq.l #3,%d0
 9430 66e4 222E FFBA 	move.l -70(%fp),%d1
 9431 66e8 7418      	moveq #24,%d2
 9432 66ea E4A9      	lsr.l %d2,%d1
 9433 66ec 1201      	move.b %d1,%d1
 9434 66ee 2040      	move.l %d0,%a0
 9435 66f0 1081      	move.b %d1,(%a0)
 9436 66f2 202E FFD0 	move.l -48(%fp),%d0
 9437 66f6 5880      	addq.l #4,%d0
 9438 66f8 2040      	move.l %d0,%a0
 9439 66fa 50D0      	st (%a0)
 9440 66fc 202E FFD0 	move.l -48(%fp),%d0
 9441 6700 5A80      	addq.l #5,%d0
 9442 6702 2040      	move.l %d0,%a0
68K GAS   			page 175


 9443 6704 50D0      	st (%a0)
 9444 6706 202E FFD0 	move.l -48(%fp),%d0
 9445 670a 5C80      	addq.l #6,%d0
 9446 670c 2040      	move.l %d0,%a0
 9447 670e 50D0      	st (%a0)
 9448 6710 202E FFD0 	move.l -48(%fp),%d0
 9449 6714 5E80      	addq.l #7,%d0
 9450 6716 2040      	move.l %d0,%a0
 9451 6718 50D0      	st (%a0)
 9452 671a 202E FFD0 	move.l -48(%fp),%d0
 9453 671e 5080      	addq.l #8,%d0
 9454 6720 2040      	move.l %d0,%a0
 9455 6722 50D0      	st (%a0)
 9456 6724 7009      	moveq #9,%d0
 9457 6726 D0AE FFD0 	add.l -48(%fp),%d0
 9458 672a 2040      	move.l %d0,%a0
 9459 672c 50D0      	st (%a0)
 9460 672e 700A      	moveq #10,%d0
 9461 6730 D0AE FFD0 	add.l -48(%fp),%d0
 9462 6734 2040      	move.l %d0,%a0
 9463 6736 50D0      	st (%a0)
 9464 6738 700B      	moveq #11,%d0
 9465 673a D0AE FFD0 	add.l -48(%fp),%d0
 9466 673e 2040      	move.l %d0,%a0
 9467 6740 10BC 000F 	move.b #15,(%a0)
 9468               	.L631:
 9469 6744 222E FFF8 	move.l -8(%fp),%d1
 9470 6748 52AE FFF8 	addq.l #1,-8(%fp)
 9471 674c 4280      	clr.l %d0
 9472 674e 102E FFD7 	move.b -41(%fp),%d0
 9473 6752 4878 0001 	pea 1.w
 9474 6756 2F01      	move.l %d1,-(%sp)
 9475 6758 2F2E FFD0 	move.l -48(%fp),-(%sp)
 9476 675c 2F00      	move.l %d0,-(%sp)
 9477 675e 4EB9 0000 	jsr disk_write
 9477      0000 
 9478 6764 4FEF 0010 	lea (16,%sp),%sp
 9479 6768 4A80      	tst.l %d0
 9480 676a 6706      	jeq .L632
 9481 676c 7001      	moveq #1,%d0
 9482 676e 6000 02C2 	jra .L573
 9483               	.L632:
 9484 6772 202E FFD8 	move.l -40(%fp),%d0
 9485 6776 2040      	move.l %d0,%a0
 9486 6778 3028 000A 	move.w 10(%a0),%d0
 9487 677c 3000      	move.w %d0,%d0
 9488 677e 0280 0000 	and.l #65535,%d0
 9488      FFFF 
 9489 6784 2F00      	move.l %d0,-(%sp)
 9490 6786 42A7      	clr.l -(%sp)
 9491 6788 2F2E FFD0 	move.l -48(%fp),-(%sp)
 9492 678c 4EBA 98B0 	jsr mem_set
 9493 6790 4FEF 000C 	lea (12,%sp),%sp
 9494 6794 2F2E FFE4 	move.l -28(%fp),-(%sp)
 9495 6798 4879 0000 	pea .LC5
 9495      0000 
 9496 679e 4EB9 0000 	jsr printf
68K GAS   			page 176


 9496      0000 
 9497 67a4 508F      	addq.l #8,%sp
 9498 67a6 70BE      	moveq #-66,%d0
 9499 67a8 D08E      	add.l %fp,%d0
 9500 67aa 2F00      	move.l %d0,-(%sp)
 9501 67ac 70BF      	moveq #-65,%d0
 9502 67ae D08E      	add.l %fp,%d0
 9503 67b0 2F00      	move.l %d0,-(%sp)
 9504 67b2 4EB9 0000 	jsr nkc_getxy
 9504      0000 
 9505 67b8 508F      	addq.l #8,%sp
 9506 67ba 7001      	moveq #1,%d0
 9507 67bc 2D40 FFBA 	move.l %d0,-70(%fp)
 9508 67c0 6074      	jra .L633
 9509               	.L635:
 9510 67c2 102E FFBE 	move.b -66(%fp),%d0
 9511 67c6 4281      	clr.l %d1
 9512 67c8 1200      	move.b %d0,%d1
 9513 67ca 102E FFBF 	move.b -65(%fp),%d0
 9514 67ce 1000      	move.b %d0,%d0
 9515 67d0 0280 0000 	and.l #255,%d0
 9515      00FF 
 9516 67d6 2F01      	move.l %d1,-(%sp)
 9517 67d8 2F00      	move.l %d0,-(%sp)
 9518 67da 4EB9 0000 	jsr nkc_setxy
 9518      0000 
 9519 67e0 508F      	addq.l #8,%sp
 9520 67e2 202E FFBA 	move.l -70(%fp),%d0
 9521 67e6 7203      	moveq #3,%d1
 9522 67e8 C081      	and.l %d1,%d0
 9523 67ea 1030 09B0 	move.b progress(%d0.l),%d0
 9523      0000 0000 
 9524 67f2 49C0      	extb.l %d0
 9525 67f4 2F00      	move.l %d0,-(%sp)
 9526 67f6 4EB9 0000 	jsr nkc_putchar
 9526      0000 
 9527 67fc 588F      	addq.l #4,%sp
 9528 67fe 222E FFF8 	move.l -8(%fp),%d1
 9529 6802 52AE FFF8 	addq.l #1,-8(%fp)
 9530 6806 4280      	clr.l %d0
 9531 6808 102E FFD7 	move.b -41(%fp),%d0
 9532 680c 4878 0001 	pea 1.w
 9533 6810 2F01      	move.l %d1,-(%sp)
 9534 6812 2F2E FFD0 	move.l -48(%fp),-(%sp)
 9535 6816 2F00      	move.l %d0,-(%sp)
 9536 6818 4EB9 0000 	jsr disk_write
 9536      0000 
 9537 681e 4FEF 0010 	lea (16,%sp),%sp
 9538 6822 4A80      	tst.l %d0
 9539 6824 6706      	jeq .L634
 9540 6826 7001      	moveq #1,%d0
 9541 6828 6000 0208 	jra .L573
 9542               	.L634:
 9543 682c 202E FFBA 	move.l -70(%fp),%d0
 9544 6830 5280      	addq.l #1,%d0
 9545 6832 2D40 FFBA 	move.l %d0,-70(%fp)
 9546               	.L633:
68K GAS   			page 177


 9547 6836 202E FFBA 	move.l -70(%fp),%d0
 9548 683a B0AE FFE4 	cmp.l -28(%fp),%d0
 9549 683e 6582      	jcs .L635
 9550 6840 52AE FFF4 	addq.l #1,-12(%fp)
 9551               	.L627:
 9552 6844 4AAE FFF4 	tst.l -12(%fp)
 9553 6848 6700 FDB0 	jeq .L636
 9554 684c 0C2E 0003 	cmp.b #3,-1(%fp)
 9554      FFFF 
 9555 6852 6606      	jne .L637
 9556 6854 202E 0010 	move.l 16(%fp),%d0
 9557 6858 6004      	jra .L638
 9558               	.L637:
 9559 685a 202E FFE0 	move.l -32(%fp),%d0
 9560               	.L638:
 9561 685e 2D40 FFF4 	move.l %d0,-12(%fp)
 9562               	.L640:
 9563 6862 222E FFF8 	move.l -8(%fp),%d1
 9564 6866 52AE FFF8 	addq.l #1,-8(%fp)
 9565 686a 4280      	clr.l %d0
 9566 686c 102E FFD7 	move.b -41(%fp),%d0
 9567 6870 4878 0001 	pea 1.w
 9568 6874 2F01      	move.l %d1,-(%sp)
 9569 6876 2F2E FFD0 	move.l -48(%fp),-(%sp)
 9570 687a 2F00      	move.l %d0,-(%sp)
 9571 687c 4EB9 0000 	jsr disk_write
 9571      0000 
 9572 6882 4FEF 0010 	lea (16,%sp),%sp
 9573 6886 4A80      	tst.l %d0
 9574 6888 6706      	jeq .L639
 9575 688a 7001      	moveq #1,%d0
 9576 688c 6000 01A4 	jra .L573
 9577               	.L639:
 9578 6890 53AE FFF4 	subq.l #1,-12(%fp)
 9579 6894 4AAE FFF4 	tst.l -12(%fp)
 9580 6898 66C8      	jne .L640
 9581 689a 0C2E 0003 	cmp.b #3,-1(%fp)
 9581      FFFF 
 9582 68a0 6600 0172 	jne .L641
 9583 68a4 202E FFD0 	move.l -48(%fp),%d0
 9584 68a8 2040      	move.l %d0,%a0
 9585 68aa 10BC 0052 	move.b #82,(%a0)
 9586 68ae 202E FFD0 	move.l -48(%fp),%d0
 9587 68b2 5280      	addq.l #1,%d0
 9588 68b4 2040      	move.l %d0,%a0
 9589 68b6 10BC 0052 	move.b #82,(%a0)
 9590 68ba 202E FFD0 	move.l -48(%fp),%d0
 9591 68be 5480      	addq.l #2,%d0
 9592 68c0 2040      	move.l %d0,%a0
 9593 68c2 10BC 0061 	move.b #97,(%a0)
 9594 68c6 202E FFD0 	move.l -48(%fp),%d0
 9595 68ca 5680      	addq.l #3,%d0
 9596 68cc 2040      	move.l %d0,%a0
 9597 68ce 10BC 0041 	move.b #65,(%a0)
 9598 68d2 202E FFD0 	move.l -48(%fp),%d0
 9599 68d6 0680 0000 	add.l #484,%d0
 9599      01E4 
68K GAS   			page 178


 9600 68dc 2040      	move.l %d0,%a0
 9601 68de 10BC 0072 	move.b #114,(%a0)
 9602 68e2 202E FFD0 	move.l -48(%fp),%d0
 9603 68e6 0680 0000 	add.l #485,%d0
 9603      01E5 
 9604 68ec 2040      	move.l %d0,%a0
 9605 68ee 10BC 0072 	move.b #114,(%a0)
 9606 68f2 202E FFD0 	move.l -48(%fp),%d0
 9607 68f6 0680 0000 	add.l #486,%d0
 9607      01E6 
 9608 68fc 2040      	move.l %d0,%a0
 9609 68fe 10BC 0041 	move.b #65,(%a0)
 9610 6902 202E FFD0 	move.l -48(%fp),%d0
 9611 6906 0680 0000 	add.l #487,%d0
 9611      01E7 
 9612 690c 2040      	move.l %d0,%a0
 9613 690e 10BC 0061 	move.b #97,(%a0)
 9614 6912 202E FFD0 	move.l -48(%fp),%d0
 9615 6916 0680 0000 	add.l #488,%d0
 9615      01E8 
 9616 691c 222E FFC8 	move.l -56(%fp),%d1
 9617 6920 1201      	move.b %d1,%d1
 9618 6922 5301      	subq.b #1,%d1
 9619 6924 2040      	move.l %d0,%a0
 9620 6926 1081      	move.b %d1,(%a0)
 9621 6928 202E FFD0 	move.l -48(%fp),%d0
 9622 692c 0680 0000 	add.l #489,%d0
 9622      01E9 
 9623 6932 222E FFC8 	move.l -56(%fp),%d1
 9624 6936 3201      	move.w %d1,%d1
 9625 6938 5341      	subq.w #1,%d1
 9626 693a E049      	lsr.w #8,%d1
 9627 693c 1201      	move.b %d1,%d1
 9628 693e 2040      	move.l %d0,%a0
 9629 6940 1081      	move.b %d1,(%a0)
 9630 6942 202E FFD0 	move.l -48(%fp),%d0
 9631 6946 0680 0000 	add.l #490,%d0
 9631      01EA 
 9632 694c 222E FFC8 	move.l -56(%fp),%d1
 9633 6950 5381      	subq.l #1,%d1
 9634 6952 4241      	clr.w %d1
 9635 6954 4841      	swap %d1
 9636 6956 1201      	move.b %d1,%d1
 9637 6958 2040      	move.l %d0,%a0
 9638 695a 1081      	move.b %d1,(%a0)
 9639 695c 202E FFD0 	move.l -48(%fp),%d0
 9640 6960 0680 0000 	add.l #491,%d0
 9640      01EB 
 9641 6966 222E FFC8 	move.l -56(%fp),%d1
 9642 696a 5381      	subq.l #1,%d1
 9643 696c 7418      	moveq #24,%d2
 9644 696e E4A9      	lsr.l %d2,%d1
 9645 6970 1201      	move.b %d1,%d1
 9646 6972 2040      	move.l %d0,%a0
 9647 6974 1081      	move.b %d1,(%a0)
 9648 6976 202E FFD0 	move.l -48(%fp),%d0
 9649 697a 0680 0000 	add.l #492,%d0
68K GAS   			page 179


 9649      01EC 
 9650 6980 2040      	move.l %d0,%a0
 9651 6982 10BC 0002 	move.b #2,(%a0)
 9652 6986 202E FFD0 	move.l -48(%fp),%d0
 9653 698a 0680 0000 	add.l #493,%d0
 9653      01ED 
 9654 6990 2040      	move.l %d0,%a0
 9655 6992 4210      	clr.b (%a0)
 9656 6994 202E FFD0 	move.l -48(%fp),%d0
 9657 6998 0680 0000 	add.l #494,%d0
 9657      01EE 
 9658 699e 2040      	move.l %d0,%a0
 9659 69a0 4210      	clr.b (%a0)
 9660 69a2 202E FFD0 	move.l -48(%fp),%d0
 9661 69a6 0680 0000 	add.l #495,%d0
 9661      01EF 
 9662 69ac 2040      	move.l %d0,%a0
 9663 69ae 4210      	clr.b (%a0)
 9664 69b0 202E FFD0 	move.l -48(%fp),%d0
 9665 69b4 0680 0000 	add.l #510,%d0
 9665      01FE 
 9666 69ba 2040      	move.l %d0,%a0
 9667 69bc 10BC 0055 	move.b #85,(%a0)
 9668 69c0 202E FFD0 	move.l -48(%fp),%d0
 9669 69c4 0680 0000 	add.l #511,%d0
 9669      01FF 
 9670 69ca 2040      	move.l %d0,%a0
 9671 69cc 10BC FFAA 	move.b #-86,(%a0)
 9672 69d0 222E FFF0 	move.l -16(%fp),%d1
 9673 69d4 5281      	addq.l #1,%d1
 9674 69d6 4280      	clr.l %d0
 9675 69d8 102E FFD7 	move.b -41(%fp),%d0
 9676 69dc 4878 0001 	pea 1.w
 9677 69e0 2F01      	move.l %d1,-(%sp)
 9678 69e2 2F2E FFD0 	move.l -48(%fp),-(%sp)
 9679 69e6 2F00      	move.l %d0,-(%sp)
 9680 69e8 4EB9 0000 	jsr disk_write
 9680      0000 
 9681 69ee 4FEF 0010 	lea (16,%sp),%sp
 9682 69f2 222E FFF0 	move.l -16(%fp),%d1
 9683 69f6 5E81      	addq.l #7,%d1
 9684 69f8 4280      	clr.l %d0
 9685 69fa 102E FFD7 	move.b -41(%fp),%d0
 9686 69fe 4878 0001 	pea 1.w
 9687 6a02 2F01      	move.l %d1,-(%sp)
 9688 6a04 2F2E FFD0 	move.l -48(%fp),-(%sp)
 9689 6a08 2F00      	move.l %d0,-(%sp)
 9690 6a0a 4EB9 0000 	jsr disk_write
 9690      0000 
 9691 6a10 4FEF 0010 	lea (16,%sp),%sp
 9692               	.L641:
 9693 6a14 4280      	clr.l %d0
 9694 6a16 102E FFD7 	move.b -41(%fp),%d0
 9695 6a1a 42A7      	clr.l -(%sp)
 9696 6a1c 42A7      	clr.l -(%sp)
 9697 6a1e 2F00      	move.l %d0,-(%sp)
 9698 6a20 4EB9 0000 	jsr disk_ioctl
68K GAS   			page 180


 9698      0000 
 9699 6a26 4FEF 000C 	lea (12,%sp),%sp
 9700 6a2a 4A80      	tst.l %d0
 9701 6a2c 56C0      	sne %d0
 9702 6a2e 49C0      	extb.l %d0
 9703 6a30 4480      	neg.l %d0
 9704               	.L573:
 9705 6a32 242E FFA8 	move.l -88(%fp),%d2
 9706 6a36 262E FFAC 	move.l -84(%fp),%d3
 9707 6a3a 4E5E      	unlk %fp
 9708 6a3c 4E75      	rts
 9710               	.align2
 9711               	.globlf_fdisk
 9713               	f_fdisk:
 9714 6a3e 4E56 FFC8 	link.w %fp,#-56
 9715 6a42 2F02      	move.l %d2,-(%sp)
 9716 6a44 202E 0008 	move.l 8(%fp),%d0
 9717 6a48 1D40 FFCA 	move.b %d0,-54(%fp)
 9718 6a4c 2D6E 0010 	move.l 16(%fp),-30(%fp)
 9718      FFE2 
 9719 6a52 4280      	clr.l %d0
 9720 6a54 102E FFCA 	move.b -54(%fp),%d0
 9721 6a58 2F00      	move.l %d0,-(%sp)
 9722 6a5a 4EB9 0000 	jsr disk_initialize
 9722      0000 
 9723 6a60 588F      	addq.l #4,%sp
 9724 6a62 1D40 FFE1 	move.b %d0,-31(%fp)
 9725 6a66 4280      	clr.l %d0
 9726 6a68 102E FFE1 	move.b -31(%fp),%d0
 9727 6a6c 7201      	moveq #1,%d1
 9728 6a6e C081      	and.l %d1,%d0
 9729 6a70 1000      	move.b %d0,%d0
 9730 6a72 4A00      	tst.b %d0
 9731 6a74 6706      	jeq .L643
 9732 6a76 7003      	moveq #3,%d0
 9733 6a78 6000 02FC 	jra .L644
 9734               	.L643:
 9735 6a7c 4280      	clr.l %d0
 9736 6a7e 102E FFE1 	move.b -31(%fp),%d0
 9737 6a82 7404      	moveq #4,%d2
 9738 6a84 C082      	and.l %d2,%d0
 9739 6a86 4A80      	tst.l %d0
 9740 6a88 6706      	jeq .L645
 9741 6a8a 700A      	moveq #10,%d0
 9742 6a8c 6000 02E8 	jra .L644
 9743               	.L645:
 9744 6a90 4280      	clr.l %d0
 9745 6a92 102E FFCA 	move.b -54(%fp),%d0
 9746 6a96 72CC      	moveq #-52,%d1
 9747 6a98 D28E      	add.l %fp,%d1
 9748 6a9a 2F01      	move.l %d1,-(%sp)
 9749 6a9c 4878 0001 	pea 1.w
 9750 6aa0 2F00      	move.l %d0,-(%sp)
 9751 6aa2 4EB9 0000 	jsr disk_ioctl
 9751      0000 
 9752 6aa8 4FEF 000C 	lea (12,%sp),%sp
 9753 6aac 4A80      	tst.l %d0
68K GAS   			page 181


 9754 6aae 6706      	jeq .L646
 9755 6ab0 7001      	moveq #1,%d0
 9756 6ab2 6000 02C2 	jra .L644
 9757               	.L646:
 9758 6ab6 7010      	moveq #16,%d0
 9759 6ab8 2D40 FFF8 	move.l %d0,-8(%fp)
 9760 6abc 600A      	jra .L647
 9761               	.L649:
 9762 6abe 202E FFF8 	move.l -8(%fp),%d0
 9763 6ac2 D080      	add.l %d0,%d0
 9764 6ac4 2D40 FFF8 	move.l %d0,-8(%fp)
 9765               	.L647:
 9766 6ac8 0CAE 0000 	cmp.l #255,-8(%fp)
 9766      00FF FFF8 
 9767 6ad0 6212      	jhi .L648
 9768 6ad2 202E FFCC 	move.l -52(%fp),%d0
 9769 6ad6 4C6E 0001 	divul.l -8(%fp),%d1:%d0
 9769      FFF8 
 9770 6adc 0C80 0000 	cmp.l #64574,%d0
 9770      FC3E 
 9771 6ae2 62DA      	jhi .L649
 9772               	.L648:
 9773 6ae4 0CAE 0000 	cmp.l #256,-8(%fp)
 9773      0100 FFF8 
 9774 6aec 6604      	jne .L650
 9775 6aee 53AE FFF8 	subq.l #1,-8(%fp)
 9776               	.L650:
 9777 6af2 202E FFF8 	move.l -8(%fp),%d0
 9778 6af6 1000      	move.b %d0,%d0
 9779 6af8 1200      	move.b %d0,%d1
 9780 6afa 5301      	subq.b #1,%d1
 9781 6afc 1D41 FFE0 	move.b %d1,-32(%fp)
 9782 6b00 202E FFF8 	move.l -8(%fp),%d0
 9783 6b04 2200      	move.l %d0,%d1
 9784 6b06 ED89      	lsl.l #6,%d1
 9785 6b08 2401      	move.l %d1,%d2
 9786 6b0a 9480      	sub.l %d0,%d2
 9787 6b0c 2D42 FFDC 	move.l %d2,-36(%fp)
 9788 6b10 202E FFCC 	move.l -52(%fp),%d0
 9789 6b14 4C6E 0001 	divul.l -36(%fp),%d1:%d0
 9789      FFDC 
 9790 6b1a 2D40 FFD8 	move.l %d0,-40(%fp)
 9791 6b1e 4878 0800 	pea 2048.w
 9792 6b22 42A7      	clr.l -(%sp)
 9793 6b24 2F2E FFE2 	move.l -30(%fp),-(%sp)
 9794 6b28 4EBA 9514 	jsr mem_set
 9795 6b2c 4FEF 000C 	lea (12,%sp),%sp
 9796 6b30 202E FFE2 	move.l -30(%fp),%d0
 9797 6b34 0680 0000 	add.l #446,%d0
 9797      01BE 
 9798 6b3a 2D40 FFEE 	move.l %d0,-18(%fp)
 9799 6b3e 42AE FFF4 	clr.l -12(%fp)
 9800 6b42 42AE FFFC 	clr.l -4(%fp)
 9801 6b46 6000 01CE 	jra .L651
 9802               	.L659:
 9803 6b4a 202E FFFC 	move.l -4(%fp),%d0
 9804 6b4e E588      	lsl.l #2,%d0
68K GAS   			page 182


 9805 6b50 D0AE 000C 	add.l 12(%fp),%d0
 9806 6b54 2040      	move.l %d0,%a0
 9807 6b56 2010      	move.l (%a0),%d0
 9808 6b58 7264      	moveq #100,%d1
 9809 6b5a B280      	cmp.l %d0,%d1
 9810 6b5c 6522      	jcs .L652
 9811 6b5e 202E FFFC 	move.l -4(%fp),%d0
 9812 6b62 E588      	lsl.l #2,%d0
 9813 6b64 D0AE 000C 	add.l 12(%fp),%d0
 9814 6b68 2040      	move.l %d0,%a0
 9815 6b6a 2010      	move.l (%a0),%d0
 9816 6b6c 4C2E 0800 	muls.l -40(%fp),%d0
 9816      FFD8 
 9817 6b72 2200      	move.l %d0,%d1
 9818 6b74 4C3C 1400 	mulu.l #1374389535,%d0:%d1
 9818      51EB 851F 
 9819 6b7c EA88      	lsr.l #5,%d0
 9820 6b7e 6014      	jra .L653
 9821               	.L652:
 9822 6b80 202E FFFC 	move.l -4(%fp),%d0
 9823 6b84 E588      	lsl.l #2,%d0
 9824 6b86 D0AE 000C 	add.l 12(%fp),%d0
 9825 6b8a 2040      	move.l %d0,%a0
 9826 6b8c 2010      	move.l (%a0),%d0
 9827 6b8e 4C6E 0001 	divul.l -36(%fp),%d1:%d0
 9827      FFDC 
 9828               	.L653:
 9829 6b94 2D40 FFD4 	move.l %d0,-44(%fp)
 9830 6b98 4AAE FFD4 	tst.l -44(%fp)
 9831 6b9c 6700 016C 	jeq .L663
 9832               	.L654:
 9833 6ba0 202E FFDC 	move.l -36(%fp),%d0
 9834 6ba4 4C2E 0800 	muls.l -12(%fp),%d0
 9834      FFF4 
 9835 6baa 2D40 FFE6 	move.l %d0,-26(%fp)
 9836 6bae 222E FFDC 	move.l -36(%fp),%d1
 9837 6bb2 4C2E 1800 	muls.l -44(%fp),%d1
 9837      FFD4 
 9838 6bb8 2D41 FFEA 	move.l %d1,-22(%fp)
 9839 6bbc 4AAE FFFC 	tst.l -4(%fp)
 9840 6bc0 6614      	jne .L656
 9841 6bc2 1D7C 0001 	move.b #1,-13(%fp)
 9841      FFF3 
 9842 6bc8 743F      	moveq #63,%d2
 9843 6bca D5AE FFE6 	add.l %d2,-26(%fp)
 9844 6bce 70C1      	moveq #-63,%d0
 9845 6bd0 D1AE FFEA 	add.l %d0,-22(%fp)
 9846 6bd4 6004      	jra .L657
 9847               	.L656:
 9848 6bd6 422E FFF3 	clr.b -13(%fp)
 9849               	.L657:
 9850 6bda 202E FFF4 	move.l -12(%fp),%d0
 9851 6bde D0AE FFD4 	add.l -44(%fp),%d0
 9852 6be2 2200      	move.l %d0,%d1
 9853 6be4 5381      	subq.l #1,%d1
 9854 6be6 2D41 FFD0 	move.l %d1,-48(%fp)
 9855 6bea 242E FFD0 	move.l -48(%fp),%d2
68K GAS   			page 183


 9856 6bee B4AE FFD8 	cmp.l -40(%fp),%d2
 9857 6bf2 6506      	jcs .L658
 9858 6bf4 7013      	moveq #19,%d0
 9859 6bf6 6000 017E 	jra .L644
 9860               	.L658:
 9861 6bfa 202E FFEE 	move.l -18(%fp),%d0
 9862 6bfe 5280      	addq.l #1,%d0
 9863 6c00 2040      	move.l %d0,%a0
 9864 6c02 10AE FFF3 	move.b -13(%fp),(%a0)
 9865 6c06 202E FFEE 	move.l -18(%fp),%d0
 9866 6c0a 5480      	addq.l #2,%d0
 9867 6c0c 222E FFF4 	move.l -12(%fp),%d1
 9868 6c10 E489      	lsr.l #2,%d1
 9869 6c12 1201      	move.b %d1,%d1
 9870 6c14 5201      	addq.b #1,%d1
 9871 6c16 2040      	move.l %d0,%a0
 9872 6c18 1081      	move.b %d1,(%a0)
 9873 6c1a 202E FFEE 	move.l -18(%fp),%d0
 9874 6c1e 5680      	addq.l #3,%d0
 9875 6c20 222E FFF4 	move.l -12(%fp),%d1
 9876 6c24 1201      	move.b %d1,%d1
 9877 6c26 2040      	move.l %d0,%a0
 9878 6c28 1081      	move.b %d1,(%a0)
 9879 6c2a 202E FFEE 	move.l -18(%fp),%d0
 9880 6c2e 5880      	addq.l #4,%d0
 9881 6c30 2040      	move.l %d0,%a0
 9882 6c32 10BC 0006 	move.b #6,(%a0)
 9883 6c36 202E FFEE 	move.l -18(%fp),%d0
 9884 6c3a 5A80      	addq.l #5,%d0
 9885 6c3c 2040      	move.l %d0,%a0
 9886 6c3e 10AE FFE0 	move.b -32(%fp),(%a0)
 9887 6c42 202E FFEE 	move.l -18(%fp),%d0
 9888 6c46 5C80      	addq.l #6,%d0
 9889 6c48 222E FFD0 	move.l -48(%fp),%d1
 9890 6c4c E489      	lsr.l #2,%d1
 9891 6c4e 1201      	move.b %d1,%d1
 9892 6c50 0601 003F 	add.b #63,%d1
 9893 6c54 2040      	move.l %d0,%a0
 9894 6c56 1081      	move.b %d1,(%a0)
 9895 6c58 202E FFEE 	move.l -18(%fp),%d0
 9896 6c5c 5E80      	addq.l #7,%d0
 9897 6c5e 222E FFD0 	move.l -48(%fp),%d1
 9898 6c62 1201      	move.b %d1,%d1
 9899 6c64 2040      	move.l %d0,%a0
 9900 6c66 1081      	move.b %d1,(%a0)
 9901 6c68 202E FFEE 	move.l -18(%fp),%d0
 9902 6c6c 5080      	addq.l #8,%d0
 9903 6c6e 222E FFE6 	move.l -26(%fp),%d1
 9904 6c72 1201      	move.b %d1,%d1
 9905 6c74 2040      	move.l %d0,%a0
 9906 6c76 1081      	move.b %d1,(%a0)
 9907 6c78 7009      	moveq #9,%d0
 9908 6c7a D0AE FFEE 	add.l -18(%fp),%d0
 9909 6c7e 222E FFE6 	move.l -26(%fp),%d1
 9910 6c82 3201      	move.w %d1,%d1
 9911 6c84 E049      	lsr.w #8,%d1
 9912 6c86 1201      	move.b %d1,%d1
68K GAS   			page 184


 9913 6c88 2040      	move.l %d0,%a0
 9914 6c8a 1081      	move.b %d1,(%a0)
 9915 6c8c 700A      	moveq #10,%d0
 9916 6c8e D0AE FFEE 	add.l -18(%fp),%d0
 9917 6c92 222E FFE6 	move.l -26(%fp),%d1
 9918 6c96 4241      	clr.w %d1
 9919 6c98 4841      	swap %d1
 9920 6c9a 1201      	move.b %d1,%d1
 9921 6c9c 2040      	move.l %d0,%a0
 9922 6c9e 1081      	move.b %d1,(%a0)
 9923 6ca0 700B      	moveq #11,%d0
 9924 6ca2 D0AE FFEE 	add.l -18(%fp),%d0
 9925 6ca6 222E FFE6 	move.l -26(%fp),%d1
 9926 6caa 7418      	moveq #24,%d2
 9927 6cac E4A9      	lsr.l %d2,%d1
 9928 6cae 1201      	move.b %d1,%d1
 9929 6cb0 2040      	move.l %d0,%a0
 9930 6cb2 1081      	move.b %d1,(%a0)
 9931 6cb4 700C      	moveq #12,%d0
 9932 6cb6 D0AE FFEE 	add.l -18(%fp),%d0
 9933 6cba 222E FFEA 	move.l -22(%fp),%d1
 9934 6cbe 1201      	move.b %d1,%d1
 9935 6cc0 2040      	move.l %d0,%a0
 9936 6cc2 1081      	move.b %d1,(%a0)
 9937 6cc4 700D      	moveq #13,%d0
 9938 6cc6 D0AE FFEE 	add.l -18(%fp),%d0
 9939 6cca 222E FFEA 	move.l -22(%fp),%d1
 9940 6cce 3201      	move.w %d1,%d1
 9941 6cd0 E049      	lsr.w #8,%d1
 9942 6cd2 1201      	move.b %d1,%d1
 9943 6cd4 2040      	move.l %d0,%a0
 9944 6cd6 1081      	move.b %d1,(%a0)
 9945 6cd8 700E      	moveq #14,%d0
 9946 6cda D0AE FFEE 	add.l -18(%fp),%d0
 9947 6cde 222E FFEA 	move.l -22(%fp),%d1
 9948 6ce2 4241      	clr.w %d1
 9949 6ce4 4841      	swap %d1
 9950 6ce6 1201      	move.b %d1,%d1
 9951 6ce8 2040      	move.l %d0,%a0
 9952 6cea 1081      	move.b %d1,(%a0)
 9953 6cec 700F      	moveq #15,%d0
 9954 6cee D0AE FFEE 	add.l -18(%fp),%d0
 9955 6cf2 222E FFEA 	move.l -22(%fp),%d1
 9956 6cf6 7418      	moveq #24,%d2
 9957 6cf8 E4A9      	lsr.l %d2,%d1
 9958 6cfa 1201      	move.b %d1,%d1
 9959 6cfc 2040      	move.l %d0,%a0
 9960 6cfe 1081      	move.b %d1,(%a0)
 9961 6d00 202E FFD4 	move.l -44(%fp),%d0
 9962 6d04 D1AE FFF4 	add.l %d0,-12(%fp)
 9963 6d08 6002      	jra .L655
 9964               	.L663:
 9965 6d0a 4E71      	nop
 9966               	.L655:
 9967 6d0c 52AE FFFC 	addq.l #1,-4(%fp)
 9968 6d10 7210      	moveq #16,%d1
 9969 6d12 D3AE FFEE 	add.l %d1,-18(%fp)
68K GAS   			page 185


 9970               	.L651:
 9971 6d16 7403      	moveq #3,%d2
 9972 6d18 B4AE FFFC 	cmp.l -4(%fp),%d2
 9973 6d1c 6400 FE2C 	jcc .L659
 9974 6d20 202E FFEE 	move.l -18(%fp),%d0
 9975 6d24 2040      	move.l %d0,%a0
 9976 6d26 10BC 0055 	move.b #85,(%a0)
 9977 6d2a 202E FFEE 	move.l -18(%fp),%d0
 9978 6d2e 5280      	addq.l #1,%d0
 9979 6d30 2040      	move.l %d0,%a0
 9980 6d32 10BC FFAA 	move.b #-86,(%a0)
 9981 6d36 4280      	clr.l %d0
 9982 6d38 102E FFCA 	move.b -54(%fp),%d0
 9983 6d3c 4878 0001 	pea 1.w
 9984 6d40 42A7      	clr.l -(%sp)
 9985 6d42 2F2E FFE2 	move.l -30(%fp),-(%sp)
 9986 6d46 2F00      	move.l %d0,-(%sp)
 9987 6d48 4EB9 0000 	jsr disk_write
 9987      0000 
 9988 6d4e 4FEF 0010 	lea (16,%sp),%sp
 9989 6d52 4A80      	tst.l %d0
 9990 6d54 661A      	jne .L660
 9991 6d56 4280      	clr.l %d0
 9992 6d58 102E FFCA 	move.b -54(%fp),%d0
 9993 6d5c 42A7      	clr.l -(%sp)
 9994 6d5e 42A7      	clr.l -(%sp)
 9995 6d60 2F00      	move.l %d0,-(%sp)
 9996 6d62 4EB9 0000 	jsr disk_ioctl
 9996      0000 
 9997 6d68 4FEF 000C 	lea (12,%sp),%sp
 9998 6d6c 4A80      	tst.l %d0
 9999 6d6e 6704      	jeq .L661
 10000               	.L660:
 10001 6d70 7001      	moveq #1,%d0
 10002 6d72 6002      	jra .L662
 10003               	.L661:
 10004 6d74 4280      	clr.l %d0
 10005               	.L662:
 10006               	.L644:
 10007 6d76 242E FFC4 	move.l -60(%fp),%d2
 10008 6d7a 4E5E      	unlk %fp
 10009 6d7c 4E75      	rts
 10011               	.align2
 10012               	.globlf_gets
 10014               	f_gets:
 10015 6d7e 4E56 FFF0 	link.w %fp,#-16
 10016 6d82 42AE FFFC 	clr.l -4(%fp)
 10017 6d86 2D6E 0008 	move.l 8(%fp),-8(%fp)
 10017      FFF8 
 10018 6d8c 6054      	jra .L665
 10019               	.L669:
 10020 6d8e 70F0      	moveq #-16,%d0
 10021 6d90 D08E      	add.l %fp,%d0
 10022 6d92 2F00      	move.l %d0,-(%sp)
 10023 6d94 4878 0001 	pea 1.w
 10024 6d98 70F5      	moveq #-11,%d0
 10025 6d9a D08E      	add.l %fp,%d0
68K GAS   			page 186


 10026 6d9c 2F00      	move.l %d0,-(%sp)
 10027 6d9e 2F2E 0010 	move.l 16(%fp),-(%sp)
 10028 6da2 4EBA C1F4 	jsr f_read
 10029 6da6 4FEF 0010 	lea (16,%sp),%sp
 10030 6daa 202E FFF0 	move.l -16(%fp),%d0
 10031 6dae 7201      	moveq #1,%d1
 10032 6db0 B280      	cmp.l %d0,%d1
 10033 6db2 663C      	jne .L672
 10034               	.L666:
 10035 6db4 102E FFF5 	move.b -11(%fp),%d0
 10036 6db8 1D40 FFF7 	move.b %d0,-9(%fp)
 10037 6dbc 0C2E 000D 	cmp.b #13,-9(%fp)
 10037      FFF7 
 10038 6dc2 671C      	jeq .L673
 10039               	.L668:
 10040 6dc4 202E FFF8 	move.l -8(%fp),%d0
 10041 6dc8 2040      	move.l %d0,%a0
 10042 6dca 10AE FFF7 	move.b -9(%fp),(%a0)
 10043 6dce 52AE FFF8 	addq.l #1,-8(%fp)
 10044 6dd2 52AE FFFC 	addq.l #1,-4(%fp)
 10045 6dd6 0C2E 000A 	cmp.b #10,-9(%fp)
 10045      FFF7 
 10046 6ddc 6716      	jeq .L674
 10047 6dde 6002      	jra .L665
 10048               	.L673:
 10049 6de0 4E71      	nop
 10050               	.L665:
 10051 6de2 202E 000C 	move.l 12(%fp),%d0
 10052 6de6 5380      	subq.l #1,%d0
 10053 6de8 B0AE FFFC 	cmp.l -4(%fp),%d0
 10054 6dec 6EA0      	jgt .L669
 10055 6dee 6006      	jra .L667
 10056               	.L672:
 10057 6df0 4E71      	nop
 10058 6df2 6002      	jra .L667
 10059               	.L674:
 10060 6df4 4E71      	nop
 10061               	.L667:
 10062 6df6 202E FFF8 	move.l -8(%fp),%d0
 10063 6dfa 2040      	move.l %d0,%a0
 10064 6dfc 4210      	clr.b (%a0)
 10065 6dfe 4AAE FFFC 	tst.l -4(%fp)
 10066 6e02 6706      	jeq .L670
 10067 6e04 202E 0008 	move.l 8(%fp),%d0
 10068 6e08 6002      	jra .L671
 10069               	.L670:
 10070 6e0a 4280      	clr.l %d0
 10071               	.L671:
 10072 6e0c 2200      	move.l %d0,%d1
 10073 6e0e 2041      	move.l %d1,%a0
 10074 6e10 4E5E      	unlk %fp
 10075 6e12 4E75      	rts
 10077               	.align2
 10079               	putc_bfd:
 10080 6e14 4E56 FFF4 	link.w %fp,#-12
 10081 6e18 2F0A      	move.l %a2,-(%sp)
 10082 6e1a 2F02      	move.l %d2,-(%sp)
68K GAS   			page 187


 10083 6e1c 202E 000C 	move.l 12(%fp),%d0
 10084 6e20 1D40 FFF6 	move.b %d0,-10(%fp)
 10085 6e24 0C2E 000A 	cmp.b #10,-10(%fp)
 10085      FFF6 
 10086 6e2a 660E      	jne .L676
 10087 6e2c 4878 000D 	pea 13.w
 10088 6e30 2F2E 0008 	move.l 8(%fp),-(%sp)
 10089 6e34 4EBA FFDE 	jsr putc_bfd
 10090 6e38 508F      	addq.l #8,%sp
 10091               	.L676:
 10092 6e3a 202E 0008 	move.l 8(%fp),%d0
 10093 6e3e 2040      	move.l %d0,%a0
 10094 6e40 2D68 0004 	move.l 4(%a0),-4(%fp)
 10094      FFFC 
 10095 6e46 4AAE FFFC 	tst.l -4(%fp)
 10096 6e4a 6D00 0084 	jlt .L682
 10097               	.L677:
 10098 6e4e 122E FFF6 	move.b -10(%fp),%d1
 10099 6e52 202E 0008 	move.l 8(%fp),%d0
 10100 6e56 D0AE FFFC 	add.l -4(%fp),%d0
 10101 6e5a 740C      	moveq #12,%d2
 10102 6e5c D082      	add.l %d2,%d0
 10103 6e5e 2040      	move.l %d0,%a0
 10104 6e60 1081      	move.b %d1,(%a0)
 10105 6e62 52AE FFFC 	addq.l #1,-4(%fp)
 10106 6e66 703C      	moveq #60,%d0
 10107 6e68 B0AE FFFC 	cmp.l -4(%fp),%d0
 10108 6e6c 6C3C      	jge .L679
 10109 6e6e 226E FFFC 	move.l -4(%fp),%a1
 10110 6e72 700C      	moveq #12,%d0
 10111 6e74 D0AE 0008 	add.l 8(%fp),%d0
 10112 6e78 222E 0008 	move.l 8(%fp),%d1
 10113 6e7c 2441      	move.l %d1,%a2
 10114 6e7e 2052      	move.l (%a2),%a0
 10115 6e80 220E      	move.l %fp,%d1
 10116 6e82 5181      	subq.l #8,%d1
 10117 6e84 2F01      	move.l %d1,-(%sp)
 10118 6e86 2F09      	move.l %a1,-(%sp)
 10119 6e88 2F00      	move.l %d0,-(%sp)
 10120 6e8a 2F08      	move.l %a0,-(%sp)
 10121 6e8c 4EBA C61E 	jsr f_write
 10122 6e90 4FEF 0010 	lea (16,%sp),%sp
 10123 6e94 222E FFFC 	move.l -4(%fp),%d1
 10124 6e98 202E FFF8 	move.l -8(%fp),%d0
 10125 6e9c B081      	cmp.l %d1,%d0
 10126 6e9e 6604      	jne .L680
 10127 6ea0 4280      	clr.l %d0
 10128 6ea2 6002      	jra .L681
 10129               	.L680:
 10130 6ea4 70FF      	moveq #-1,%d0
 10131               	.L681:
 10132 6ea6 2D40 FFFC 	move.l %d0,-4(%fp)
 10133               	.L679:
 10134 6eaa 202E 0008 	move.l 8(%fp),%d0
 10135 6eae 2040      	move.l %d0,%a0
 10136 6eb0 216E FFFC 	move.l -4(%fp),4(%a0)
 10136      0004 
68K GAS   			page 188


 10137 6eb6 202E 0008 	move.l 8(%fp),%d0
 10138 6eba 2440      	move.l %d0,%a2
 10139 6ebc 202A 0008 	move.l 8(%a2),%d0
 10140 6ec0 2200      	move.l %d0,%d1
 10141 6ec2 5281      	addq.l #1,%d1
 10142 6ec4 202E 0008 	move.l 8(%fp),%d0
 10143 6ec8 2040      	move.l %d0,%a0
 10144 6eca 2141 0008 	move.l %d1,8(%a0)
 10145 6ece 6002      	jra .L675
 10146               	.L682:
 10147 6ed0 4E71      	nop
 10148               	.L675:
 10149 6ed2 242E FFEC 	move.l -20(%fp),%d2
 10150 6ed6 246E FFF0 	move.l -16(%fp),%a2
 10151 6eda 4E5E      	unlk %fp
 10152 6edc 4E75      	rts
 10154               	.align2
 10155               	.globlf_putc
 10157               	f_putc:
 10158 6ede 4E56 FFAC 	link.w %fp,#-84
 10159 6ee2 2F02      	move.l %d2,-(%sp)
 10160 6ee4 202E 0008 	move.l 8(%fp),%d0
 10161 6ee8 1D40 FFAE 	move.b %d0,-82(%fp)
 10162 6eec 2D6E 000C 	move.l 12(%fp),-76(%fp)
 10162      FFB4 
 10163 6ef2 42AE FFB8 	clr.l -72(%fp)
 10164 6ef6 202E FFB8 	move.l -72(%fp),%d0
 10165 6efa 2D40 FFBC 	move.l %d0,-68(%fp)
 10166 6efe 102E FFAE 	move.b -82(%fp),%d0
 10167 6f02 49C0      	extb.l %d0
 10168 6f04 2F00      	move.l %d0,-(%sp)
 10169 6f06 70B4      	moveq #-76,%d0
 10170 6f08 D08E      	add.l %fp,%d0
 10171 6f0a 2F00      	move.l %d0,-(%sp)
 10172 6f0c 4EBA FF06 	jsr putc_bfd
 10173 6f10 508F      	addq.l #8,%sp
 10174 6f12 202E FFB8 	move.l -72(%fp),%d0
 10175 6f16 4A80      	tst.l %d0
 10176 6f18 6D3E      	jlt .L684
 10177 6f1a 202E FFB8 	move.l -72(%fp),%d0
 10178 6f1e 2040      	move.l %d0,%a0
 10179 6f20 222E FFB4 	move.l -76(%fp),%d1
 10180 6f24 70B0      	moveq #-80,%d0
 10181 6f26 D08E      	add.l %fp,%d0
 10182 6f28 2F00      	move.l %d0,-(%sp)
 10183 6f2a 2F08      	move.l %a0,-(%sp)
 10184 6f2c 70B4      	moveq #-76,%d0
 10185 6f2e D08E      	add.l %fp,%d0
 10186 6f30 740C      	moveq #12,%d2
 10187 6f32 D082      	add.l %d2,%d0
 10188 6f34 2F00      	move.l %d0,-(%sp)
 10189 6f36 2F01      	move.l %d1,-(%sp)
 10190 6f38 4EBA C572 	jsr f_write
 10191 6f3c 4FEF 0010 	lea (16,%sp),%sp
 10192 6f40 4A80      	tst.l %d0
 10193 6f42 6614      	jne .L684
 10194 6f44 202E FFB8 	move.l -72(%fp),%d0
68K GAS   			page 189


 10195 6f48 2200      	move.l %d0,%d1
 10196 6f4a 202E FFB0 	move.l -80(%fp),%d0
 10197 6f4e B081      	cmp.l %d1,%d0
 10198 6f50 6606      	jne .L684
 10199 6f52 202E FFBC 	move.l -68(%fp),%d0
 10200 6f56 6002      	jra .L685
 10201               	.L684:
 10202 6f58 70FF      	moveq #-1,%d0
 10203               	.L685:
 10204 6f5a 242E FFA8 	move.l -88(%fp),%d2
 10205 6f5e 4E5E      	unlk %fp
 10206 6f60 4E75      	rts
 10208               	.align2
 10209               	.globlf_puts
 10211               	f_puts:
 10212 6f62 4E56 FFB0 	link.w %fp,#-80
 10213 6f66 2F02      	move.l %d2,-(%sp)
 10214 6f68 2D6E 000C 	move.l 12(%fp),-76(%fp)
 10214      FFB4 
 10215 6f6e 42AE FFB8 	clr.l -72(%fp)
 10216 6f72 202E FFB8 	move.l -72(%fp),%d0
 10217 6f76 2D40 FFBC 	move.l %d0,-68(%fp)
 10218 6f7a 601C      	jra .L687
 10219               	.L688:
 10220 6f7c 202E 0008 	move.l 8(%fp),%d0
 10221 6f80 2040      	move.l %d0,%a0
 10222 6f82 1010      	move.b (%a0),%d0
 10223 6f84 49C0      	extb.l %d0
 10224 6f86 52AE 0008 	addq.l #1,8(%fp)
 10225 6f8a 2F00      	move.l %d0,-(%sp)
 10226 6f8c 70B4      	moveq #-76,%d0
 10227 6f8e D08E      	add.l %fp,%d0
 10228 6f90 2F00      	move.l %d0,-(%sp)
 10229 6f92 4EBA FE80 	jsr putc_bfd
 10230 6f96 508F      	addq.l #8,%sp
 10231               	.L687:
 10232 6f98 202E 0008 	move.l 8(%fp),%d0
 10233 6f9c 2040      	move.l %d0,%a0
 10234 6f9e 1010      	move.b (%a0),%d0
 10235 6fa0 4A00      	tst.b %d0
 10236 6fa2 66D8      	jne .L688
 10237 6fa4 202E FFB8 	move.l -72(%fp),%d0
 10238 6fa8 4A80      	tst.l %d0
 10239 6faa 6D3E      	jlt .L689
 10240 6fac 202E FFB8 	move.l -72(%fp),%d0
 10241 6fb0 2040      	move.l %d0,%a0
 10242 6fb2 222E FFB4 	move.l -76(%fp),%d1
 10243 6fb6 70B0      	moveq #-80,%d0
 10244 6fb8 D08E      	add.l %fp,%d0
 10245 6fba 2F00      	move.l %d0,-(%sp)
 10246 6fbc 2F08      	move.l %a0,-(%sp)
 10247 6fbe 70B4      	moveq #-76,%d0
 10248 6fc0 D08E      	add.l %fp,%d0
 10249 6fc2 740C      	moveq #12,%d2
 10250 6fc4 D082      	add.l %d2,%d0
 10251 6fc6 2F00      	move.l %d0,-(%sp)
 10252 6fc8 2F01      	move.l %d1,-(%sp)
68K GAS   			page 190


 10253 6fca 4EBA C4E0 	jsr f_write
 10254 6fce 4FEF 0010 	lea (16,%sp),%sp
 10255 6fd2 4A80      	tst.l %d0
 10256 6fd4 6614      	jne .L689
 10257 6fd6 202E FFB8 	move.l -72(%fp),%d0
 10258 6fda 2200      	move.l %d0,%d1
 10259 6fdc 202E FFB0 	move.l -80(%fp),%d0
 10260 6fe0 B081      	cmp.l %d1,%d0
 10261 6fe2 6606      	jne .L689
 10262 6fe4 202E FFBC 	move.l -68(%fp),%d0
 10263 6fe8 6002      	jra .L690
 10264               	.L689:
 10265 6fea 70FF      	moveq #-1,%d0
 10266               	.L690:
 10267 6fec 242E FFAC 	move.l -84(%fp),%d2
 10268 6ff0 4E5E      	unlk %fp
 10269 6ff2 4E75      	rts
 10271               	.align2
 10272               	.globlf_printf
 10274               	f_printf:
 10275 6ff4 4E56 FF84 	link.w %fp,#-124
 10276 6ff8 2F02      	move.l %d2,-(%sp)
 10277 6ffa 2D6E 0008 	move.l 8(%fp),-124(%fp)
 10277      FF84 
 10278 7000 42AE FF88 	clr.l -120(%fp)
 10279 7004 202E FF88 	move.l -120(%fp),%d0
 10280 7008 2D40 FF8C 	move.l %d0,-116(%fp)
 10281 700c 700C      	moveq #12,%d0
 10282 700e D08E      	add.l %fp,%d0
 10283 7010 5880      	addq.l #4,%d0
 10284 7012 2D40 FFE4 	move.l %d0,-28(%fp)
 10285               	.L741:
 10286 7016 202E 000C 	move.l 12(%fp),%d0
 10287 701a 2040      	move.l %d0,%a0
 10288 701c 1D50 FFED 	move.b (%a0),-19(%fp)
 10289 7020 5280      	addq.l #1,%d0
 10290 7022 2D40 000C 	move.l %d0,12(%fp)
 10291 7026 4A2E FFED 	tst.b -19(%fp)
 10292 702a 6700 044A 	jeq .L744
 10293               	.L692:
 10294 702e 0C2E 0025 	cmp.b #37,-19(%fp)
 10294      FFED 
 10295 7034 6718      	jeq .L694
 10296 7036 102E FFED 	move.b -19(%fp),%d0
 10297 703a 49C0      	extb.l %d0
 10298 703c 2F00      	move.l %d0,-(%sp)
 10299 703e 7084      	moveq #-124,%d0
 10300 7040 D08E      	add.l %fp,%d0
 10301 7042 2F00      	move.l %d0,-(%sp)
 10302 7044 4EBA FDCE 	jsr putc_bfd
 10303 7048 508F      	addq.l #8,%sp
 10304 704a 6000 0426 	jra .L695
 10305               	.L694:
 10306 704e 422E FFFF 	clr.b -1(%fp)
 10307 7052 42AE FFF2 	clr.l -14(%fp)
 10308 7056 202E 000C 	move.l 12(%fp),%d0
 10309 705a 2040      	move.l %d0,%a0
68K GAS   			page 191


 10310 705c 1D50 FFED 	move.b (%a0),-19(%fp)
 10311 7060 5280      	addq.l #1,%d0
 10312 7062 2D40 000C 	move.l %d0,12(%fp)
 10313 7066 0C2E 0030 	cmp.b #48,-19(%fp)
 10313      FFED 
 10314 706c 6618      	jne .L696
 10315 706e 1D7C 0001 	move.b #1,-1(%fp)
 10315      FFFF 
 10316 7074 202E 000C 	move.l 12(%fp),%d0
 10317 7078 2040      	move.l %d0,%a0
 10318 707a 1D50 FFED 	move.b (%a0),-19(%fp)
 10319 707e 5280      	addq.l #1,%d0
 10320 7080 2D40 000C 	move.l %d0,12(%fp)
 10321 7084 604C      	jra .L698
 10322               	.L696:
 10323 7086 0C2E 002D 	cmp.b #45,-19(%fp)
 10323      FFED 
 10324 708c 6644      	jne .L698
 10325 708e 1D7C 0002 	move.b #2,-1(%fp)
 10325      FFFF 
 10326 7094 202E 000C 	move.l 12(%fp),%d0
 10327 7098 2040      	move.l %d0,%a0
 10328 709a 1D50 FFED 	move.b (%a0),-19(%fp)
 10329 709e 5280      	addq.l #1,%d0
 10330 70a0 2D40 000C 	move.l %d0,12(%fp)
 10331 70a4 602C      	jra .L698
 10332               	.L700:
 10333 70a6 202E FFF2 	move.l -14(%fp),%d0
 10334 70aa D080      	add.l %d0,%d0
 10335 70ac 2200      	move.l %d0,%d1
 10336 70ae E589      	lsl.l #2,%d1
 10337 70b0 D280      	add.l %d0,%d1
 10338 70b2 102E FFED 	move.b -19(%fp),%d0
 10339 70b6 49C0      	extb.l %d0
 10340 70b8 D081      	add.l %d1,%d0
 10341 70ba 72D0      	moveq #-48,%d1
 10342 70bc D280      	add.l %d0,%d1
 10343 70be 2D41 FFF2 	move.l %d1,-14(%fp)
 10344 70c2 202E 000C 	move.l 12(%fp),%d0
 10345 70c6 2040      	move.l %d0,%a0
 10346 70c8 1D50 FFED 	move.b (%a0),-19(%fp)
 10347 70cc 5280      	addq.l #1,%d0
 10348 70ce 2D40 000C 	move.l %d0,12(%fp)
 10349               	.L698:
 10350 70d2 0C2E 002F 	cmp.b #47,-19(%fp)
 10350      FFED 
 10351 70d8 6F08      	jle .L699
 10352 70da 0C2E 0039 	cmp.b #57,-19(%fp)
 10352      FFED 
 10353 70e0 6FC4      	jle .L700
 10354               	.L699:
 10355 70e2 0C2E 006C 	cmp.b #108,-19(%fp)
 10355      FFED 
 10356 70e8 6708      	jeq .L701
 10357 70ea 0C2E 004C 	cmp.b #76,-19(%fp)
 10357      FFED 
 10358 70f0 6616      	jne .L702
68K GAS   			page 192


 10359               	.L701:
 10360 70f2 002E 0004 	or.b #4,-1(%fp)
 10360      FFFF 
 10361 70f8 202E 000C 	move.l 12(%fp),%d0
 10362 70fc 2040      	move.l %d0,%a0
 10363 70fe 1D50 FFED 	move.b (%a0),-19(%fp)
 10364 7102 5280      	addq.l #1,%d0
 10365 7104 2D40 000C 	move.l %d0,12(%fp)
 10366               	.L702:
 10367 7108 4A2E FFED 	tst.b -19(%fp)
 10368 710c 6700 036C 	jeq .L745
 10369               	.L703:
 10370 7110 1D6E FFED 	move.b -19(%fp),-20(%fp)
 10370      FFEC 
 10371 7116 0C2E 0060 	cmp.b #96,-20(%fp)
 10371      FFEC 
 10372 711c 6F14      	jle .L704
 10373 711e 0C2E 007A 	cmp.b #122,-20(%fp)
 10373      FFEC 
 10374 7124 6E0C      	jgt .L704
 10375 7126 102E FFEC 	move.b -20(%fp),%d0
 10376 712a 0600 FFE0 	add.b #-32,%d0
 10377 712e 1D40 FFEC 	move.b %d0,-20(%fp)
 10378               	.L704:
 10379 7132 102E FFEC 	move.b -20(%fp),%d0
 10380 7136 49C0      	extb.l %d0
 10381 7138 72BE      	moveq #-66,%d1
 10382 713a D081      	add.l %d1,%d0
 10383 713c 7416      	moveq #22,%d2
 10384 713e B480      	cmp.l %d0,%d2
 10385 7140 6500 014E 	jcs .L705
 10386 7144 303B 0A06 	move.w .L712(%pc,%d0.l*2),%d0
 10387 7148 4EFB 0002 	jmp %pc@(2,%d0:w)
 10388               	.balignw 2,0x284c
 10389               	.L712:
 10390 714c 0124      	.word .L706-.L712
 10391 714e 00F2      	.word .L707-.L712
 10392 7150 0134      	.word .L708-.L712
 10393 7152 0144      	.word .L705-.L712
 10394 7154 0144      	.word .L705-.L712
 10395 7156 0144      	.word .L705-.L712
 10396 7158 0144      	.word .L705-.L712
 10397 715a 0144      	.word .L705-.L712
 10398 715c 0144      	.word .L705-.L712
 10399 715e 0144      	.word .L705-.L712
 10400 7160 0144      	.word .L705-.L712
 10401 7162 0144      	.word .L705-.L712
 10402 7164 0144      	.word .L705-.L712
 10403 7166 012C      	.word .L709-.L712
 10404 7168 0144      	.word .L705-.L712
 10405 716a 0144      	.word .L705-.L712
 10406 716c 0144      	.word .L705-.L712
 10407 716e 002E      	.word .L710-.L712
 10408 7170 0144      	.word .L705-.L712
 10409 7172 0134      	.word .L708-.L712
 10410 7174 0144      	.word .L705-.L712
 10411 7176 0144      	.word .L705-.L712
68K GAS   			page 193


 10412 7178 013C      	.word .L711-.L712
 10413               	.L710:
 10414 717a 70E4      	moveq #-28,%d0
 10415 717c D08E      	add.l %fp,%d0
 10416 717e 72E4      	moveq #-28,%d1
 10417 7180 D28E      	add.l %fp,%d1
 10418 7182 2041      	move.l %d1,%a0
 10419 7184 2210      	move.l (%a0),%d1
 10420 7186 5881      	addq.l #4,%d1
 10421 7188 2040      	move.l %d0,%a0
 10422 718a 2081      	move.l %d1,(%a0)
 10423 718c 2040      	move.l %d0,%a0
 10424 718e 2010      	move.l (%a0),%d0
 10425 7190 5980      	subq.l #4,%d0
 10426 7192 2040      	move.l %d0,%a0
 10427 7194 2D50 FFE8 	move.l (%a0),-24(%fp)
 10428 7198 42AE FFF6 	clr.l -10(%fp)
 10429 719c 6004      	jra .L713
 10430               	.L714:
 10431 719e 52AE FFF6 	addq.l #1,-10(%fp)
 10432               	.L713:
 10433 71a2 202E FFE8 	move.l -24(%fp),%d0
 10434 71a6 D0AE FFF6 	add.l -10(%fp),%d0
 10435 71aa 2040      	move.l %d0,%a0
 10436 71ac 1010      	move.b (%a0),%d0
 10437 71ae 4A00      	tst.b %d0
 10438 71b0 66EC      	jne .L714
 10439 71b2 4280      	clr.l %d0
 10440 71b4 102E FFFF 	move.b -1(%fp),%d0
 10441 71b8 7202      	moveq #2,%d1
 10442 71ba C081      	and.l %d1,%d0
 10443 71bc 4A80      	tst.l %d0
 10444 71be 6646      	jne .L746
 10445 71c0 6010      	jra .L716
 10446               	.L717:
 10447 71c2 4878 0020 	pea 32.w
 10448 71c6 7084      	moveq #-124,%d0
 10449 71c8 D08E      	add.l %fp,%d0
 10450 71ca 2F00      	move.l %d0,-(%sp)
 10451 71cc 4EBA FC46 	jsr putc_bfd
 10452 71d0 508F      	addq.l #8,%sp
 10453               	.L716:
 10454 71d2 242E FFF6 	move.l -10(%fp),%d2
 10455 71d6 B4AE FFF2 	cmp.l -14(%fp),%d2
 10456 71da 55C0      	scs %d0
 10457 71dc 4400      	neg.b %d0
 10458 71de 52AE FFF6 	addq.l #1,-10(%fp)
 10459 71e2 4A00      	tst.b %d0
 10460 71e4 66DC      	jne .L717
 10461 71e6 6020      	jra .L718
 10462               	.L719:
 10463 71e8 202E FFE8 	move.l -24(%fp),%d0
 10464 71ec 2040      	move.l %d0,%a0
 10465 71ee 1010      	move.b (%a0),%d0
 10466 71f0 49C0      	extb.l %d0
 10467 71f2 52AE FFE8 	addq.l #1,-24(%fp)
 10468 71f6 2F00      	move.l %d0,-(%sp)
68K GAS   			page 194


 10469 71f8 7084      	moveq #-124,%d0
 10470 71fa D08E      	add.l %fp,%d0
 10471 71fc 2F00      	move.l %d0,-(%sp)
 10472 71fe 4EBA FC14 	jsr putc_bfd
 10473 7202 508F      	addq.l #8,%sp
 10474 7204 6002      	jra .L718
 10475               	.L746:
 10476 7206 4E71      	nop
 10477               	.L718:
 10478 7208 202E FFE8 	move.l -24(%fp),%d0
 10479 720c 2040      	move.l %d0,%a0
 10480 720e 1010      	move.b (%a0),%d0
 10481 7210 4A00      	tst.b %d0
 10482 7212 66D4      	jne .L719
 10483 7214 6010      	jra .L720
 10484               	.L721:
 10485 7216 4878 0020 	pea 32.w
 10486 721a 7084      	moveq #-124,%d0
 10487 721c D08E      	add.l %fp,%d0
 10488 721e 2F00      	move.l %d0,-(%sp)
 10489 7220 4EBA FBF2 	jsr putc_bfd
 10490 7224 508F      	addq.l #8,%sp
 10491               	.L720:
 10492 7226 202E FFF6 	move.l -10(%fp),%d0
 10493 722a B0AE FFF2 	cmp.l -14(%fp),%d0
 10494 722e 55C0      	scs %d0
 10495 7230 4400      	neg.b %d0
 10496 7232 52AE FFF6 	addq.l #1,-10(%fp)
 10497 7236 4A00      	tst.b %d0
 10498 7238 66DC      	jne .L721
 10499 723a 6000 0236 	jra .L695
 10500               	.L707:
 10501 723e 70E4      	moveq #-28,%d0
 10502 7240 D08E      	add.l %fp,%d0
 10503 7242 72E4      	moveq #-28,%d1
 10504 7244 D28E      	add.l %fp,%d1
 10505 7246 2041      	move.l %d1,%a0
 10506 7248 2210      	move.l (%a0),%d1
 10507 724a 5881      	addq.l #4,%d1
 10508 724c 2040      	move.l %d0,%a0
 10509 724e 2081      	move.l %d1,(%a0)
 10510 7250 2040      	move.l %d0,%a0
 10511 7252 2010      	move.l (%a0),%d0
 10512 7254 5980      	subq.l #4,%d0
 10513 7256 2040      	move.l %d0,%a0
 10514 7258 2010      	move.l (%a0),%d0
 10515 725a 1000      	move.b %d0,%d0
 10516 725c 49C0      	extb.l %d0
 10517 725e 2F00      	move.l %d0,-(%sp)
 10518 7260 7084      	moveq #-124,%d0
 10519 7262 D08E      	add.l %fp,%d0
 10520 7264 2F00      	move.l %d0,-(%sp)
 10521 7266 4EBA FBAC 	jsr putc_bfd
 10522 726a 508F      	addq.l #8,%sp
 10523 726c 6000 0204 	jra .L695
 10524               	.L706:
 10525 7270 1D7C 0002 	move.b #2,-2(%fp)
68K GAS   			page 195


 10525      FFFE 
 10526 7276 6030      	jra .L722
 10527               	.L709:
 10528 7278 1D7C 0008 	move.b #8,-2(%fp)
 10528      FFFE 
 10529 727e 6028      	jra .L722
 10530               	.L708:
 10531 7280 1D7C 000A 	move.b #10,-2(%fp)
 10531      FFFE 
 10532 7286 6020      	jra .L722
 10533               	.L711:
 10534 7288 1D7C 0010 	move.b #16,-2(%fp)
 10534      FFFE 
 10535 728e 6018      	jra .L722
 10536               	.L705:
 10537 7290 102E FFED 	move.b -19(%fp),%d0
 10538 7294 49C0      	extb.l %d0
 10539 7296 2F00      	move.l %d0,-(%sp)
 10540 7298 7084      	moveq #-124,%d0
 10541 729a D08E      	add.l %fp,%d0
 10542 729c 2F00      	move.l %d0,-(%sp)
 10543 729e 4EBA FB74 	jsr putc_bfd
 10544 72a2 508F      	addq.l #8,%sp
 10545 72a4 6000 01CC 	jra .L695
 10546               	.L722:
 10547 72a8 4280      	clr.l %d0
 10548 72aa 102E FFFF 	move.b -1(%fp),%d0
 10549 72ae 7204      	moveq #4,%d1
 10550 72b0 C081      	and.l %d1,%d0
 10551 72b2 4A80      	tst.l %d0
 10552 72b4 671E      	jeq .L723
 10553 72b6 70E4      	moveq #-28,%d0
 10554 72b8 D08E      	add.l %fp,%d0
 10555 72ba 72E4      	moveq #-28,%d1
 10556 72bc D28E      	add.l %fp,%d1
 10557 72be 2041      	move.l %d1,%a0
 10558 72c0 2210      	move.l (%a0),%d1
 10559 72c2 5881      	addq.l #4,%d1
 10560 72c4 2040      	move.l %d0,%a0
 10561 72c6 2081      	move.l %d1,(%a0)
 10562 72c8 2040      	move.l %d0,%a0
 10563 72ca 2010      	move.l (%a0),%d0
 10564 72cc 5980      	subq.l #4,%d0
 10565 72ce 2040      	move.l %d0,%a0
 10566 72d0 2010      	move.l (%a0),%d0
 10567 72d2 6042      	jra .L724
 10568               	.L723:
 10569 72d4 0C2E 0044 	cmp.b #68,-20(%fp)
 10569      FFEC 
 10570 72da 661E      	jne .L725
 10571 72dc 70E4      	moveq #-28,%d0
 10572 72de D08E      	add.l %fp,%d0
 10573 72e0 72E4      	moveq #-28,%d1
 10574 72e2 D28E      	add.l %fp,%d1
 10575 72e4 2041      	move.l %d1,%a0
 10576 72e6 2210      	move.l (%a0),%d1
 10577 72e8 5881      	addq.l #4,%d1
68K GAS   			page 196


 10578 72ea 2040      	move.l %d0,%a0
 10579 72ec 2081      	move.l %d1,(%a0)
 10580 72ee 2040      	move.l %d0,%a0
 10581 72f0 2010      	move.l (%a0),%d0
 10582 72f2 5980      	subq.l #4,%d0
 10583 72f4 2040      	move.l %d0,%a0
 10584 72f6 2010      	move.l (%a0),%d0
 10585 72f8 601C      	jra .L726
 10586               	.L725:
 10587 72fa 70E4      	moveq #-28,%d0
 10588 72fc D08E      	add.l %fp,%d0
 10589 72fe 72E4      	moveq #-28,%d1
 10590 7300 D28E      	add.l %fp,%d1
 10591 7302 2041      	move.l %d1,%a0
 10592 7304 2210      	move.l (%a0),%d1
 10593 7306 5881      	addq.l #4,%d1
 10594 7308 2040      	move.l %d0,%a0
 10595 730a 2081      	move.l %d1,(%a0)
 10596 730c 2040      	move.l %d0,%a0
 10597 730e 2010      	move.l (%a0),%d0
 10598 7310 5980      	subq.l #4,%d0
 10599 7312 2040      	move.l %d0,%a0
 10600 7314 2010      	move.l (%a0),%d0
 10601               	.L726:
 10602               	.L724:
 10603 7316 2D40 FFEE 	move.l %d0,-18(%fp)
 10604 731a 0C2E 0044 	cmp.b #68,-20(%fp)
 10604      FFEC 
 10605 7320 6612      	jne .L727
 10606 7322 202E FFEE 	move.l -18(%fp),%d0
 10607 7326 4A80      	tst.l %d0
 10608 7328 6C0A      	jge .L727
 10609 732a 44AE FFEE 	neg.l -18(%fp)
 10610 732e 002E 0008 	or.b #8,-1(%fp)
 10610      FFFF 
 10611               	.L727:
 10612 7334 42AE FFFA 	clr.l -6(%fp)
 10613               	.L732:
 10614 7338 4280      	clr.l %d0
 10615 733a 102E FFFE 	move.b -2(%fp),%d0
 10616 733e 222E FFEE 	move.l -18(%fp),%d1
 10617 7342 4C40 1000 	divul.l %d0,%d0:%d1
 10618 7346 1D40 FFEC 	move.b %d0,-20(%fp)
 10619 734a 4280      	clr.l %d0
 10620 734c 102E FFFE 	move.b -2(%fp),%d0
 10621 7350 242E FFEE 	move.l -18(%fp),%d2
 10622 7354 4C40 2001 	divul.l %d0,%d1:%d2
 10623 7358 2002      	move.l %d2,%d0
 10624 735a 2D40 FFEE 	move.l %d0,-18(%fp)
 10625 735e 0C2E 0009 	cmp.b #9,-20(%fp)
 10625      FFEC 
 10626 7364 6F18      	jle .L728
 10627 7366 0C2E 0078 	cmp.b #120,-19(%fp)
 10627      FFED 
 10628 736c 6604      	jne .L729
 10629 736e 7027      	moveq #39,%d0
 10630 7370 6002      	jra .L730
68K GAS   			page 197


 10631               	.L729:
 10632 7372 7007      	moveq #7,%d0
 10633               	.L730:
 10634 7374 122E FFEC 	move.b -20(%fp),%d1
 10635 7378 D001      	add.b %d1,%d0
 10636 737a 1D40 FFEC 	move.b %d0,-20(%fp)
 10637               	.L728:
 10638 737e 102E FFEC 	move.b -20(%fp),%d0
 10639 7382 0600 0030 	add.b #48,%d0
 10640 7386 1200      	move.b %d0,%d1
 10641 7388 70D0      	moveq #-48,%d0
 10642 738a D08E      	add.l %fp,%d0
 10643 738c D0AE FFFA 	add.l -6(%fp),%d0
 10644 7390 2040      	move.l %d0,%a0
 10645 7392 1081      	move.b %d1,(%a0)
 10646 7394 52AE FFFA 	addq.l #1,-6(%fp)
 10647 7398 4AAE FFEE 	tst.l -18(%fp)
 10648 739c 6708      	jeq .L731
 10649 739e 700F      	moveq #15,%d0
 10650 73a0 B0AE FFFA 	cmp.l -6(%fp),%d0
 10651 73a4 6492      	jcc .L732
 10652               	.L731:
 10653 73a6 4280      	clr.l %d0
 10654 73a8 102E FFFF 	move.b -1(%fp),%d0
 10655 73ac 7208      	moveq #8,%d1
 10656 73ae C081      	and.l %d1,%d0
 10657 73b0 4A80      	tst.l %d0
 10658 73b2 6712      	jeq .L733
 10659 73b4 70D0      	moveq #-48,%d0
 10660 73b6 D08E      	add.l %fp,%d0
 10661 73b8 D0AE FFFA 	add.l -6(%fp),%d0
 10662 73bc 2040      	move.l %d0,%a0
 10663 73be 10BC 002D 	move.b #45,(%a0)
 10664 73c2 52AE FFFA 	addq.l #1,-6(%fp)
 10665               	.L733:
 10666 73c6 2D6E FFFA 	move.l -6(%fp),-10(%fp)
 10666      FFF6 
 10667 73cc 4280      	clr.l %d0
 10668 73ce 102E FFFF 	move.b -1(%fp),%d0
 10669 73d2 7201      	moveq #1,%d1
 10670 73d4 C081      	and.l %d1,%d0
 10671 73d6 1000      	move.b %d0,%d0
 10672 73d8 4A00      	tst.b %d0
 10673 73da 6704      	jeq .L734
 10674 73dc 7030      	moveq #48,%d0
 10675 73de 6002      	jra .L735
 10676               	.L734:
 10677 73e0 7020      	moveq #32,%d0
 10678               	.L735:
 10679 73e2 1D40 FFEC 	move.b %d0,-20(%fp)
 10680 73e6 6014      	jra .L736
 10681               	.L738:
 10682 73e8 102E FFEC 	move.b -20(%fp),%d0
 10683 73ec 49C0      	extb.l %d0
 10684 73ee 2F00      	move.l %d0,-(%sp)
 10685 73f0 7084      	moveq #-124,%d0
 10686 73f2 D08E      	add.l %fp,%d0
68K GAS   			page 198


 10687 73f4 2F00      	move.l %d0,-(%sp)
 10688 73f6 4EBA FA1C 	jsr putc_bfd
 10689 73fa 508F      	addq.l #8,%sp
 10690               	.L736:
 10691 73fc 4280      	clr.l %d0
 10692 73fe 102E FFFF 	move.b -1(%fp),%d0
 10693 7402 7402      	moveq #2,%d2
 10694 7404 C082      	and.l %d2,%d0
 10695 7406 4A80      	tst.l %d0
 10696 7408 6614      	jne .L737
 10697 740a 206E FFF6 	move.l -10(%fp),%a0
 10698 740e B1EE FFF2 	cmp.l -14(%fp),%a0
 10699 7412 55C0      	scs %d0
 10700 7414 4400      	neg.b %d0
 10701 7416 52AE FFF6 	addq.l #1,-10(%fp)
 10702 741a 4A00      	tst.b %d0
 10703 741c 66CA      	jne .L738
 10704               	.L737:
 10705 741e 53AE FFFA 	subq.l #1,-6(%fp)
 10706 7422 70D0      	moveq #-48,%d0
 10707 7424 D08E      	add.l %fp,%d0
 10708 7426 D0AE FFFA 	add.l -6(%fp),%d0
 10709 742a 2040      	move.l %d0,%a0
 10710 742c 1010      	move.b (%a0),%d0
 10711 742e 49C0      	extb.l %d0
 10712 7430 2F00      	move.l %d0,-(%sp)
 10713 7432 7084      	moveq #-124,%d0
 10714 7434 D08E      	add.l %fp,%d0
 10715 7436 2F00      	move.l %d0,-(%sp)
 10716 7438 4EBA F9DA 	jsr putc_bfd
 10717 743c 508F      	addq.l #8,%sp
 10718 743e 4AAE FFFA 	tst.l -6(%fp)
 10719 7442 66DA      	jne .L737
 10720 7444 6014      	jra .L739
 10721               	.L740:
 10722 7446 102E FFEC 	move.b -20(%fp),%d0
 10723 744a 49C0      	extb.l %d0
 10724 744c 2F00      	move.l %d0,-(%sp)
 10725 744e 7084      	moveq #-124,%d0
 10726 7450 D08E      	add.l %fp,%d0
 10727 7452 2F00      	move.l %d0,-(%sp)
 10728 7454 4EBA F9BE 	jsr putc_bfd
 10729 7458 508F      	addq.l #8,%sp
 10730               	.L739:
 10731 745a 202E FFF6 	move.l -10(%fp),%d0
 10732 745e B0AE FFF2 	cmp.l -14(%fp),%d0
 10733 7462 55C0      	scs %d0
 10734 7464 4400      	neg.b %d0
 10735 7466 52AE FFF6 	addq.l #1,-10(%fp)
 10736 746a 4A00      	tst.b %d0
 10737 746c 66D8      	jne .L740
 10738 746e 6000 FBA6 	jra .L741
 10739               	.L695:
 10740 7472 6000 FBA2 	jra .L741
 10741               	.L744:
 10742 7476 4E71      	nop
 10743 7478 6002      	jra .L693
68K GAS   			page 199


 10744               	.L745:
 10745 747a 4E71      	nop
 10746               	.L693:
 10747 747c 202E FF88 	move.l -120(%fp),%d0
 10748 7480 4A80      	tst.l %d0
 10749 7482 6D3E      	jlt .L742
 10750 7484 202E FF88 	move.l -120(%fp),%d0
 10751 7488 2040      	move.l %d0,%a0
 10752 748a 222E FF84 	move.l -124(%fp),%d1
 10753 748e 70E0      	moveq #-32,%d0
 10754 7490 D08E      	add.l %fp,%d0
 10755 7492 2F00      	move.l %d0,-(%sp)
 10756 7494 2F08      	move.l %a0,-(%sp)
 10757 7496 7084      	moveq #-124,%d0
 10758 7498 D08E      	add.l %fp,%d0
 10759 749a 740C      	moveq #12,%d2
 10760 749c D082      	add.l %d2,%d0
 10761 749e 2F00      	move.l %d0,-(%sp)
 10762 74a0 2F01      	move.l %d1,-(%sp)
 10763 74a2 4EBA C008 	jsr f_write
 10764 74a6 4FEF 0010 	lea (16,%sp),%sp
 10765 74aa 4A80      	tst.l %d0
 10766 74ac 6614      	jne .L742
 10767 74ae 202E FF88 	move.l -120(%fp),%d0
 10768 74b2 2200      	move.l %d0,%d1
 10769 74b4 202E FFE0 	move.l -32(%fp),%d0
 10770 74b8 B081      	cmp.l %d1,%d0
 10771 74ba 6606      	jne .L742
 10772 74bc 202E FF8C 	move.l -116(%fp),%d0
 10773 74c0 6002      	jra .L743
 10774               	.L742:
 10775 74c2 70FF      	moveq #-1,%d0
 10776               	.L743:
 10777 74c4 242E FF80 	move.l -128(%fp),%d2
 10778 74c8 4E5E      	unlk %fp
 10779 74ca 4E75      	rts
 10781               	.section.rodata
 10782               	.align2
 10785               	vst.1545:
 10786 0078 0400      	.word1024
 10787 007a 0200      	.word512
 10788 007c 0100      	.word256
 10789 007e 0080      	.word128
 10790 0080 0040      	.word64
 10791 0082 0020      	.word32
 10792 0084 0010      	.word16
 10793 0086 0008      	.word8
 10794 0088 0004      	.word4
 10795 008a 0002      	.word2
 10796 008c 0000      	.word0
 10797               	.align2
 10800               	cst.1546:
 10801 008e 8000      	.word-32768
 10802 0090 4000      	.word16384
 10803 0092 2000      	.word8192
 10804 0094 1000      	.word4096
 10805 0096 0800      	.word2048
68K GAS   			page 200


 10806 0098 4000      	.word16384
 10807 009a 2000      	.word8192
 10808 009c 1000      	.word4096
 10809 009e 0800      	.word2048
 10810 00a0 0400      	.word1024
 10811 00a2 0200      	.word512
 10812               	.LC6:
 10813 00a4 4844 4130 	.string"HDA0"
 10813      00
 10814               	.LC7:
 10815 00a9 4844 4131 	.string"HDA1"
 10815      00
 10816               	.LC8:
 10817 00ae 4844 4132 	.string"HDA2"
 10817      00
 10818               	.LC9:
 10819 00b3 4844 4133 	.string"HDA3"
 10819      00
 10820               	.align2
 10823               	str.1255:
 10824 00b8 0000 0000 	.long.LC6
 10825 00bc 0000 0000 	.long.LC7
 10826 00c0 0000 0000 	.long.LC8
 10827 00c4 0000 0000 	.long.LC9
 10828               	.ident"GCC: (GNU) 4.5.1"
 10829               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 201


DEFINED SYMBOLS
                            *ABS*:00000000 ff.c
    {standard input}:4      .bss:00000000 FatFs
    {standard input}:6      .bss:00000020 Fsid
    {standard input}:6      .bss:00000022 CurrVol
    {standard input}:12     .text:00000000 mem_cpy
    {standard input}:38     .text:0000003e mem_set
    {standard input}:61     .text:00000070 mem_cmp
    {standard input}:103    .text:000000de chk_chr
    {standard input}:130    .text:00000112 sync_window
    {standard input}:210    .text:000001fa move_window
    {standard input}:254    .text:00000268 sync_fs
    {standard input}:451    .text:000004d0 clust2sect
    {standard input}:480    .text:00000516 get_fat
    {standard input}:743    .text:000007f0 put_fat
    {standard input}:1081   .text:00000b94 remove_chain
    {standard input}:1173   .text:00000c84 create_chain
    {standard input}:1326   .text:00000e2c dir_sdi
    {standard input}:1502   .text:00001008 dir_next
    {standard input}:1787   .text:00001312 dir_alloc
    {standard input}:1858   .text:000013c4 ld_clust
    {standard input}:1910   .text:0000144a st_clust
    {standard input}:1949   .text:000014a2 dir_find
    {standard input}:2029   .text:00001570 dir_read
    {standard input}:2114   .text:0000164a dir_register
    {standard input}:2167   .text:000016e2 dir_remove
    {standard input}:2219   .text:00001776 get_fileinfo
    {standard input}:2363   .text:000018ee create_name
    {standard input}:2633   .text:00001bf8 follow_path
    {standard input}:2792   .text:00001d8a get_ldnumber
    {standard input}:10823  .rodata:000000b8 str.1255
    {standard input}:2916   .text:00001eee check_fs
    {standard input}:3041   .text:00002050 find_volume
    {standard input}:3958   .text:00002ade validate
    {standard input}:4017   .text:00002b66 f_mount
    {standard input}:4079   .text:00002c06 f_open
    {standard input}:4409   .text:00002f98 f_read
    {standard input}:4843   .text:000034ac f_write
    {standard input}:5330   .text:00003a5a f_sync
    {standard input}:5529   .text:00003c84 f_close
    {standard input}:5554   .text:00003cc0 f_chdrive
    {standard input}:5578   .text:00003cf0 f_chdir
    {standard input}:5653   .text:00003dae f_getcwd
    {standard input}:5874   .text:00003fec f_lseek
    {standard input}:6256   .text:00004466 f_opendir
    {standard input}:6360   .text:00004578 f_closedir
    {standard input}:6379   .text:000045a0 f_readdir
    {standard input}:6439   .text:00004648 f_stat
    {standard input}:6488   .text:000046be f_getfree
    {standard input}:6687   .text:000048f4 f_truncate
    {standard input}:6880   .text:00004b1c f_unlink
    {standard input}:7044   .text:00004cd6 f_mkdir
    {standard input}:7338   .text:0000501c f_chmod
    {standard input}:7428   .text:00005112 f_utime
    {standard input}:7527   .text:0000521c f_rename
    {standard input}:7752   .text:00005488 f_getlabel
    {standard input}:7912   .text:0000562c f_setlabel
68K GAS   			page 202


    {standard input}:8275   .rodata:0000001f progress
    {standard input}:8292   .text:00005a02 f_mkfs
    {standard input}:10785  .rodata:00000078 vst.1545
    {standard input}:10800  .rodata:0000008e cst.1546
    {standard input}:9713   .text:00006a3e f_fdisk
    {standard input}:10014  .text:00006d7e f_gets
    {standard input}:10079  .text:00006e14 putc_bfd
    {standard input}:10157  .text:00006ede f_putc
    {standard input}:10211  .text:00006f62 f_puts
    {standard input}:10274  .text:00006ff4 f_printf

UNDEFINED SYMBOLS
disk_write
disk_read
disk_ioctl
disk_status
VolToPart
disk_initialize
get_fattime
printf
nkc_getxy
nkc_setxy
nkc_putchar
