68K GAS   			page 1


   1               	
   2               	.file"setvbuf.c"
   3               	.text
   4               	.align2
   5               	.globlsetvbuf
   7               	setvbuf:
   8 0000 4E56 0000 	link.w %fp,#0
   9 0004 202E 0008 	move.l 8(%fp),%d0
  10 0008 2040      	move.l %d0,%a0
  11 000a 3028 001A 	move.w 26(%a0),%d0
  12 000e 0C40 444C 	cmp.w #17484,%d0
  13 0012 6706      	jeq .L2
  14 0014 7001      	moveq #1,%d0
  15 0016 6000 00EA 	jra .L3
  16               	.L2:
  17 001a 7004      	moveq #4,%d0
  18 001c B0AE 0010 	cmp.l 16(%fp),%d0
  19 0020 6522      	jcs .L4
  20 0022 7001      	moveq #1,%d0
  21 0024 222E 0010 	move.l 16(%fp),%d1
  22 0028 E3A8      	lsl.l %d1,%d0
  23 002a 7216      	moveq #22,%d1
  24 002c C081      	and.l %d1,%d0
  25 002e 4A80      	tst.l %d0
  26 0030 6712      	jeq .L4
  27               	.L5:
  28 0032 2F2E 0008 	move.l 8(%fp),-(%sp)
  29 0036 4EB9 0000 	jsr fflush
  29      0000 
  30 003c 588F      	addq.l #4,%sp
  31 003e 4A80      	tst.l %d0
  32 0040 6608      	jne .L6
  33 0042 600C      	jra .L14
  34               	.L4:
  35 0044 7001      	moveq #1,%d0
  36 0046 6000 00BA 	jra .L3
  37               	.L6:
  38 004a 7001      	moveq #1,%d0
  39 004c 6000 00B4 	jra .L3
  40               	.L14:
  41 0050 202E 0008 	move.l 8(%fp),%d0
  42 0054 2040      	move.l %d0,%a0
  43 0056 2028 0004 	move.l 4(%a0),%d0
  44 005a 7204      	moveq #4,%d1
  45 005c C081      	and.l %d1,%d0
  46 005e 4A80      	tst.l %d0
  47 0060 6714      	jeq .L8
  48 0062 202E 0008 	move.l 8(%fp),%d0
  49 0066 2040      	move.l %d0,%a0
  50 0068 2028 000E 	move.l 14(%a0),%d0
  51 006c 2F00      	move.l %d0,-(%sp)
  52 006e 4EB9 0000 	jsr free
  52      0000 
  53 0074 588F      	addq.l #4,%sp
  54               	.L8:
  55 0076 202E 0008 	move.l 8(%fp),%d0
  56 007a 2040      	move.l %d0,%a0
68K GAS   			page 2


  57 007c 2028 0004 	move.l 4(%a0),%d0
  58 0080 72F3      	moveq #-13,%d1
  59 0082 C280      	and.l %d0,%d1
  60 0084 202E 0008 	move.l 8(%fp),%d0
  61 0088 2040      	move.l %d0,%a0
  62 008a 2141 0004 	move.l %d1,4(%a0)
  63 008e 222E 000C 	move.l 12(%fp),%d1
  64 0092 202E 0008 	move.l 8(%fp),%d0
  65 0096 2040      	move.l %d0,%a0
  66 0098 2141 000E 	move.l %d1,14(%a0)
  67 009c 222E 0014 	move.l 20(%fp),%d1
  68 00a0 202E 0008 	move.l 8(%fp),%d0
  69 00a4 2040      	move.l %d0,%a0
  70 00a6 2141 000A 	move.l %d1,10(%a0)
  71 00aa 202E 0008 	move.l 8(%fp),%d0
  72 00ae 2040      	move.l %d0,%a0
  73 00b0 4290      	clr.l (%a0)
  74 00b2 202E 0010 	move.l 16(%fp),%d0
  75 00b6 7202      	moveq #2,%d1
  76 00b8 B280      	cmp.l %d0,%d1
  77 00ba 670E      	jeq .L11
  78 00bc 7204      	moveq #4,%d1
  79 00be B280      	cmp.l %d0,%d1
  80 00c0 6722      	jeq .L12
  81 00c2 7201      	moveq #1,%d1
  82 00c4 B280      	cmp.l %d0,%d1
  83 00c6 6736      	jeq .L16
  84 00c8 6030      	jra .L15
  85               	.L11:
  86 00ca 202E 0008 	move.l 8(%fp),%d0
  87 00ce 2040      	move.l %d0,%a0
  88 00d0 2028 0004 	move.l 4(%a0),%d0
  89 00d4 7208      	moveq #8,%d1
  90 00d6 8280      	or.l %d0,%d1
  91 00d8 202E 0008 	move.l 8(%fp),%d0
  92 00dc 2040      	move.l %d0,%a0
  93 00de 2141 0004 	move.l %d1,4(%a0)
  94 00e2 601C      	jra .L13
  95               	.L12:
  96 00e4 202E 0008 	move.l 8(%fp),%d0
  97 00e8 2040      	move.l %d0,%a0
  98 00ea 42A8 000E 	clr.l 14(%a0)
  99 00ee 202E 0008 	move.l 8(%fp),%d0
 100 00f2 2040      	move.l %d0,%a0
 101 00f4 42A8 000A 	clr.l 10(%a0)
 102 00f8 6006      	jra .L13
 103               	.L15:
 104 00fa 7001      	moveq #1,%d0
 105 00fc 6004      	jra .L3
 106               	.L16:
 107 00fe 4E71      	nop
 108               	.L13:
 109 0100 4280      	clr.l %d0
 110               	.L3:
 111 0102 4E5E      	unlk %fp
 112 0104 4E75      	rts
 114               	.ident"GCC: (GNU) 4.5.1"
68K GAS   			page 3


 115               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 setvbuf.c
    {standard input}:7      .text:00000000 setvbuf

UNDEFINED SYMBOLS
fflush
free
