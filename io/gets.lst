68K GAS   			page 1


   1               	
   2               	.file"gets.c"
   3               	.text
   4               	.align2
   5               	.globlgets
   7               	gets:
   8 0000 4E56 FFF8 	link.w %fp,#-8
   9 0004 42AE FFFC 	clr.l -4(%fp)
  10 0008 6002      	jra .L5
  11               	.L10:
  12 000a 4E71      	nop
  13               	.L5:
  14 000c 203C 0000 	move.l #_pstreams,%d0
  14      0000 
  15 0012 2040      	move.l %d0,%a0
  16 0014 2010      	move.l (%a0),%d0
  17 0016 2F00      	move.l %d0,-(%sp)
  18 0018 4EB9 0000 	jsr fgetc
  18      0000 
  19 001e 588F      	addq.l #4,%sp
  20 0020 2D40 FFF8 	move.l %d0,-8(%fp)
  21 0024 70FF      	moveq #-1,%d0
  22 0026 B0AE FFF8 	cmp.l -8(%fp),%d0
  23 002a 673A      	jeq .L9
  24               	.L2:
  25 002c 203C 0000 	move.l #_pstreams,%d0
  25      0000 
  26 0032 5880      	addq.l #4,%d0
  27 0034 2040      	move.l %d0,%a0
  28 0036 2010      	move.l (%a0),%d0
  29 0038 2F00      	move.l %d0,-(%sp)
  30 003a 2F2E FFF8 	move.l -8(%fp),-(%sp)
  31 003e 4EB9 0000 	jsr fputc
  31      0000 
  32 0044 508F      	addq.l #8,%sp
  33 0046 202E FFFC 	move.l -4(%fp),%d0
  34 004a D0AE 0008 	add.l 8(%fp),%d0
  35 004e 222E FFF8 	move.l -8(%fp),%d1
  36 0052 1201      	move.b %d1,%d1
  37 0054 2040      	move.l %d0,%a0
  38 0056 1081      	move.b %d1,(%a0)
  39 0058 52AE FFFC 	addq.l #1,-4(%fp)
  40 005c 700A      	moveq #10,%d0
  41 005e B0AE FFF8 	cmp.l -8(%fp),%d0
  42 0062 66A6      	jne .L10
  43 0064 6002      	jra .L3
  44               	.L9:
  45 0066 4E71      	nop
  46               	.L3:
  47 0068 4AAE FFFC 	tst.l -4(%fp)
  48 006c 6606      	jne .L6
  49 006e 7001      	moveq #1,%d0
  50 0070 2D40 FFFC 	move.l %d0,-4(%fp)
  51               	.L6:
  52 0074 202E FFFC 	move.l -4(%fp),%d0
  53 0078 5380      	subq.l #1,%d0
  54 007a D0AE 0008 	add.l 8(%fp),%d0
68K GAS   			page 2


  55 007e 2040      	move.l %d0,%a0
  56 0080 4210      	clr.b (%a0)
  57 0082 70FF      	moveq #-1,%d0
  58 0084 B0AE FFF8 	cmp.l -8(%fp),%d0
  59 0088 6604      	jne .L7
  60 008a 4280      	clr.l %d0
  61 008c 6004      	jra .L8
  62               	.L7:
  63 008e 202E 0008 	move.l 8(%fp),%d0
  64               	.L8:
  65 0092 2200      	move.l %d0,%d1
  66 0094 2041      	move.l %d1,%a0
  67 0096 4E5E      	unlk %fp
  68 0098 4E75      	rts
  70               	.ident"GCC: (GNU) 4.5.1"
  71               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 3


DEFINED SYMBOLS
                            *ABS*:00000000 gets.c
    {standard input}:7      .text:00000000 gets

UNDEFINED SYMBOLS
_pstreams
fgetc
fputc
