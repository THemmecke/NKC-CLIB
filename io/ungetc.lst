68K GAS   			page 1


   1               	
   2               	.file"ungetc.c"
   3               	.text
   4               	.align2
   5               	.globlungetc
   7               	ungetc:
   8 0000 4E56 0000 	link.w %fp,#0
   9 0004 202E 000C 	move.l 12(%fp),%d0
  10 0008 2040      	move.l %d0,%a0
  11 000a 3028 001A 	move.w 26(%a0),%d0
  12 000e 0C40 444C 	cmp.w #17484,%d0
  13 0012 6706      	jeq .L2
  14 0014 70FF      	moveq #-1,%d0
  15 0016 6000 0130 	jra .L3
  16               	.L2:
  17 001a 202E 000C 	move.l 12(%fp),%d0
  18 001e 2040      	move.l %d0,%a0
  19 0020 2028 000E 	move.l 14(%a0),%d0
  20 0024 4A80      	tst.l %d0
  21 0026 6700 00FA 	jeq .L4
  22 002a 202E 000C 	move.l 12(%fp),%d0
  23 002e 2040      	move.l %d0,%a0
  24 0030 2028 0004 	move.l 4(%a0),%d0
  25 0034 727F      	moveq #127,%d1
  26 0036 4601      	not.b %d1
  27 0038 C081      	and.l %d1,%d0
  28 003a 4A80      	tst.l %d0
  29 003c 675C      	jeq .L5
  30 003e 202E 000C 	move.l 12(%fp),%d0
  31 0042 2040      	move.l %d0,%a0
  32 0044 2228 0012 	move.l 18(%a0),%d1
  33 0048 202E 000C 	move.l 12(%fp),%d0
  34 004c 2040      	move.l %d0,%a0
  35 004e 2028 000E 	move.l 14(%a0),%d0
  36 0052 B081      	cmp.l %d1,%d0
  37 0054 6744      	jeq .L5
  38 0056 202E 000C 	move.l 12(%fp),%d0
  39 005a 2040      	move.l %d0,%a0
  40 005c 2010      	move.l (%a0),%d0
  41 005e 2200      	move.l %d0,%d1
  42 0060 5281      	addq.l #1,%d1
  43 0062 202E 000C 	move.l 12(%fp),%d0
  44 0066 2040      	move.l %d0,%a0
  45 0068 2081      	move.l %d1,(%a0)
  46 006a 202E 000C 	move.l 12(%fp),%d0
  47 006e 2040      	move.l %d0,%a0
  48 0070 2028 0012 	move.l 18(%a0),%d0
  49 0074 2200      	move.l %d0,%d1
  50 0076 5381      	subq.l #1,%d1
  51 0078 202E 000C 	move.l 12(%fp),%d0
  52 007c 2040      	move.l %d0,%a0
  53 007e 2141 0012 	move.l %d1,18(%a0)
  54 0082 202E 000C 	move.l 12(%fp),%d0
  55 0086 2040      	move.l %d0,%a0
  56 0088 2028 0012 	move.l 18(%a0),%d0
  57 008c 222E 0008 	move.l 8(%fp),%d1
  58 0090 1201      	move.b %d1,%d1
68K GAS   			page 2


  59 0092 2040      	move.l %d0,%a0
  60 0094 1081      	move.b %d1,(%a0)
  61 0096 6000 00AC 	jra .L8
  62               	.L5:
  63 009a 2F2E 000C 	move.l 12(%fp),-(%sp)
  64 009e 4EB9 0000 	jsr fflush
  64      0000 
  65 00a4 588F      	addq.l #4,%sp
  66 00a6 4A80      	tst.l %d0
  67 00a8 6706      	jeq .L7
  68 00aa 70FF      	moveq #-1,%d0
  69 00ac 6000 009A 	jra .L3
  70               	.L7:
  71 00b0 202E 000C 	move.l 12(%fp),%d0
  72 00b4 2040      	move.l %d0,%a0
  73 00b6 2028 0004 	move.l 4(%a0),%d0
  74 00ba 727F      	moveq #127,%d1
  75 00bc 4601      	not.b %d1
  76 00be 8280      	or.l %d0,%d1
  77 00c0 202E 000C 	move.l 12(%fp),%d0
  78 00c4 2040      	move.l %d0,%a0
  79 00c6 2141 0004 	move.l %d1,4(%a0)
  80 00ca 202E 000C 	move.l 12(%fp),%d0
  81 00ce 7201      	moveq #1,%d1
  82 00d0 2040      	move.l %d0,%a0
  83 00d2 2081      	move.l %d1,(%a0)
  84 00d4 202E 000C 	move.l 12(%fp),%d0
  85 00d8 2040      	move.l %d0,%a0
  86 00da 2228 000E 	move.l 14(%a0),%d1
  87 00de 202E 000C 	move.l 12(%fp),%d0
  88 00e2 2040      	move.l %d0,%a0
  89 00e4 2028 000A 	move.l 10(%a0),%d0
  90 00e8 D280      	add.l %d0,%d1
  91 00ea 202E 000C 	move.l 12(%fp),%d0
  92 00ee 2040      	move.l %d0,%a0
  93 00f0 2141 0012 	move.l %d1,18(%a0)
  94 00f4 202E 000C 	move.l 12(%fp),%d0
  95 00f8 2040      	move.l %d0,%a0
  96 00fa 2028 0012 	move.l 18(%a0),%d0
  97 00fe 2200      	move.l %d0,%d1
  98 0100 5381      	subq.l #1,%d1
  99 0102 202E 000C 	move.l 12(%fp),%d0
 100 0106 2040      	move.l %d0,%a0
 101 0108 2141 0012 	move.l %d1,18(%a0)
 102 010c 202E 000C 	move.l 12(%fp),%d0
 103 0110 2040      	move.l %d0,%a0
 104 0112 2028 0012 	move.l 18(%a0),%d0
 105 0116 222E 0008 	move.l 8(%fp),%d1
 106 011a 1201      	move.b %d1,%d1
 107 011c 2040      	move.l %d0,%a0
 108 011e 1081      	move.b %d1,(%a0)
 109 0120 6022      	jra .L8
 110               	.L4:
 111 0122 202E 000C 	move.l 12(%fp),%d0
 112 0126 2040      	move.l %d0,%a0
 113 0128 1028 0009 	move.b 9(%a0),%d0
 114 012c 4A00      	tst.b %d0
68K GAS   			page 3


 115 012e 6704      	jeq .L9
 116 0130 70FF      	moveq #-1,%d0
 117 0132 6014      	jra .L3
 118               	.L9:
 119 0134 202E 0008 	move.l 8(%fp),%d0
 120 0138 1200      	move.b %d0,%d1
 121 013a 202E 000C 	move.l 12(%fp),%d0
 122 013e 2040      	move.l %d0,%a0
 123 0140 1141 0009 	move.b %d1,9(%a0)
 124               	.L8:
 125 0144 202E 0008 	move.l 8(%fp),%d0
 126               	.L3:
 127 0148 4E5E      	unlk %fp
 128 014a 4E75      	rts
 130               	.ident"GCC: (GNU) 4.5.1"
 131               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 ungetc.c
    {standard input}:7      .text:00000000 ungetc

UNDEFINED SYMBOLS
fflush
