68K GAS   			page 1


   1               	
   2               	.file"readbuf.c"
   3               	.text
   4               	.align2
   5               	.globl_readbuf
   7               	_readbuf:
   8 0000 4E56 FFFC 	link.w %fp,#-4
   9 0004 202E 0008 	move.l 8(%fp),%d0
  10 0008 2040      	move.l %d0,%a0
  11 000a 2028 0004 	move.l 4(%a0),%d0
  12 000e 727F      	moveq #127,%d1
  13 0010 4601      	not.b %d1
  14 0012 C081      	and.l %d1,%d0
  15 0014 4A80      	tst.l %d0
  16 0016 670E      	jeq .L2
  17 0018 202E 0008 	move.l 8(%fp),%d0
  18 001c 2040      	move.l %d0,%a0
  19 001e 2010      	move.l (%a0),%d0
  20 0020 4A80      	tst.l %d0
  21 0022 6600 0224 	jne .L3
  22               	.L2:
  23 0026 202E 0008 	move.l 8(%fp),%d0
  24 002a 2240      	move.l %d0,%a1
  25 002c 2029 0004 	move.l 4(%a1),%d0
  26 0030 0280 0000 	and.l #256,%d0
  26      0100 
  27 0036 4A80      	tst.l %d0
  28 0038 6716      	jeq .L4
  29 003a 2F2E 0008 	move.l 8(%fp),-(%sp)
  30 003e 4EB9 0000 	jsr fflush
  30      0000 
  31 0044 588F      	addq.l #4,%sp
  32 0046 4A80      	tst.l %d0
  33 0048 6706      	jeq .L4
  34 004a 70FF      	moveq #-1,%d0
  35 004c 6000 0224 	jra .L5
  36               	.L4:
  37 0050 202E 0008 	move.l 8(%fp),%d0
  38 0054 2040      	move.l %d0,%a0
  39 0056 2028 0004 	move.l 4(%a0),%d0
  40 005a 2200      	move.l %d0,%d1
  41 005c 0241 FEFF 	and.w #65279,%d1
  42 0060 202E 0008 	move.l 8(%fp),%d0
  43 0064 2240      	move.l %d0,%a1
  44 0066 2341 0004 	move.l %d1,4(%a1)
  45 006a 202E 0008 	move.l 8(%fp),%d0
  46 006e 2040      	move.l %d0,%a0
  47 0070 2028 0004 	move.l 4(%a0),%d0
  48 0074 727F      	moveq #127,%d1
  49 0076 4601      	not.b %d1
  50 0078 C081      	and.l %d1,%d0
  51 007a 4A80      	tst.l %d0
  52 007c 6626      	jne .L6
  53 007e 202E 0008 	move.l 8(%fp),%d0
  54 0082 2040      	move.l %d0,%a0
  55 0084 4290      	clr.l (%a0)
  56 0086 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 2


  57 008a 2240      	move.l %d0,%a1
  58 008c 2229 000E 	move.l 14(%a1),%d1
  59 0090 202E 0008 	move.l 8(%fp),%d0
  60 0094 2040      	move.l %d0,%a0
  61 0096 2141 0012 	move.l %d1,18(%a0)
  62 009a 202E 0008 	move.l 8(%fp),%d0
  63 009e 2240      	move.l %d0,%a1
  64 00a0 4229 0009 	clr.b 9(%a1)
  65               	.L6:
  66 00a4 202E 0008 	move.l 8(%fp),%d0
  67 00a8 2040      	move.l %d0,%a0
  68 00aa 2028 0004 	move.l 4(%a0),%d0
  69 00ae 727F      	moveq #127,%d1
  70 00b0 4601      	not.b %d1
  71 00b2 8280      	or.l %d0,%d1
  72 00b4 202E 0008 	move.l 8(%fp),%d0
  73 00b8 2240      	move.l %d0,%a1
  74 00ba 2341 0004 	move.l %d1,4(%a1)
  75 00be 202E 0008 	move.l 8(%fp),%d0
  76 00c2 2040      	move.l %d0,%a0
  77 00c4 2010      	move.l (%a0),%d0
  78 00c6 4A80      	tst.l %d0
  79 00c8 6600 017E 	jne .L3
  80 00cc 202E 0008 	move.l 8(%fp),%d0
  81 00d0 2240      	move.l %d0,%a1
  82 00d2 2229 000E 	move.l 14(%a1),%d1
  83 00d6 202E 0008 	move.l 8(%fp),%d0
  84 00da 2040      	move.l %d0,%a0
  85 00dc 2141 0012 	move.l %d1,18(%a0)
  86 00e0 202E 0008 	move.l 8(%fp),%d0
  87 00e4 2240      	move.l %d0,%a1
  88 00e6 2029 0004 	move.l 4(%a1),%d0
  89 00ea 7208      	moveq #8,%d1
  90 00ec C081      	and.l %d1,%d0
  91 00ee 4A80      	tst.l %d0
  92 00f0 6700 011A 	jeq .L7
  93 00f4 6000 00E4 	jra .L8
  94               	.L12:
  95 00f8 202E 0008 	move.l 8(%fp),%d0
  96 00fc 2040      	move.l %d0,%a0
  97 00fe 2228 0012 	move.l 18(%a0),%d1
  98 0102 202E 0008 	move.l 8(%fp),%d0
  99 0106 2240      	move.l %d0,%a1
 100 0108 1029 0008 	move.b 8(%a1),%d0
 101 010c 49C0      	extb.l %d0
 102 010e 4878 0001 	pea 1.w
 103 0112 2F01      	move.l %d1,-(%sp)
 104 0114 2F00      	move.l %d0,-(%sp)
 105 0116 4EB9 0000 	jsr _ll_read
 105      0000 
 106 011c 4FEF 000C 	lea (12,%sp),%sp
 107 0120 2D40 FFFC 	move.l %d0,-4(%fp)
 108 0124 4AAE FFFC 	tst.l -4(%fp)
 109 0128 6700 00CA 	jeq .L14
 110               	.L9:
 111 012c 202E 0008 	move.l 8(%fp),%d0
 112 0130 2040      	move.l %d0,%a0
68K GAS   			page 3


 113 0132 2010      	move.l (%a0),%d0
 114 0134 2200      	move.l %d0,%d1
 115 0136 5281      	addq.l #1,%d1
 116 0138 202E 0008 	move.l 8(%fp),%d0
 117 013c 2240      	move.l %d0,%a1
 118 013e 2281      	move.l %d1,(%a1)
 119 0140 202E 0008 	move.l 8(%fp),%d0
 120 0144 2040      	move.l %d0,%a0
 121 0146 2028 0012 	move.l 18(%a0),%d0
 122 014a 2240      	move.l %d0,%a1
 123 014c 1011      	move.b (%a1),%d0
 124 014e 0C00 000A 	cmp.b #10,%d0
 125 0152 6700 00A2 	jeq .L10
 126 0156 202E 0008 	move.l 8(%fp),%d0
 127 015a 2040      	move.l %d0,%a0
 128 015c 2028 0012 	move.l 18(%a0),%d0
 129 0160 2240      	move.l %d0,%a1
 130 0162 1011      	move.b (%a1),%d0
 131 0164 0C00 000D 	cmp.b #13,%d0
 132 0168 6700 008C 	jeq .L10
 133 016c 202E 0008 	move.l 8(%fp),%d0
 134 0170 2040      	move.l %d0,%a0
 135 0172 2028 0012 	move.l 18(%a0),%d0
 136 0176 2240      	move.l %d0,%a1
 137 0178 1011      	move.b (%a1),%d0
 138 017a 4A00      	tst.b %d0
 139 017c 6644      	jne .L11
 140 017e 202E 0008 	move.l 8(%fp),%d0
 141 0182 2040      	move.l %d0,%a0
 142 0184 2028 0004 	move.l 4(%a0),%d0
 143 0188 7240      	moveq #64,%d1
 144 018a C081      	and.l %d1,%d0
 145 018c 4A80      	tst.l %d0
 146 018e 6632      	jne .L11
 147 0190 202E 0008 	move.l 8(%fp),%d0
 148 0194 2040      	move.l %d0,%a0
 149 0196 2028 0004 	move.l 4(%a0),%d0
 150 019a 7220      	moveq #32,%d1
 151 019c 8280      	or.l %d0,%d1
 152 019e 202E 0008 	move.l 8(%fp),%d0
 153 01a2 2240      	move.l %d0,%a1
 154 01a4 2341 0004 	move.l %d1,4(%a1)
 155 01a8 202E 0008 	move.l 8(%fp),%d0
 156 01ac 2040      	move.l %d0,%a0
 157 01ae 2228 000E 	move.l 14(%a0),%d1
 158 01b2 202E 0008 	move.l 8(%fp),%d0
 159 01b6 2240      	move.l %d0,%a1
 160 01b8 2341 0012 	move.l %d1,18(%a1)
 161 01bc 70FF      	moveq #-1,%d0
 162 01be 6000 00B2 	jra .L5
 163               	.L11:
 164 01c2 202E 0008 	move.l 8(%fp),%d0
 165 01c6 2040      	move.l %d0,%a0
 166 01c8 2028 0012 	move.l 18(%a0),%d0
 167 01cc 2200      	move.l %d0,%d1
 168 01ce 5281      	addq.l #1,%d1
 169 01d0 202E 0008 	move.l 8(%fp),%d0
68K GAS   			page 4


 170 01d4 2240      	move.l %d0,%a1
 171 01d6 2341 0012 	move.l %d1,18(%a1)
 172               	.L8:
 173 01da 202E 0008 	move.l 8(%fp),%d0
 174 01de 2040      	move.l %d0,%a0
 175 01e0 2210      	move.l (%a0),%d1
 176 01e2 202E 0008 	move.l 8(%fp),%d0
 177 01e6 2240      	move.l %d0,%a1
 178 01e8 2029 000A 	move.l 10(%a1),%d0
 179 01ec B081      	cmp.l %d1,%d0
 180 01ee 6E00 FF08 	jgt .L12
 181 01f2 6002      	jra .L10
 182               	.L14:
 183 01f4 4E71      	nop
 184               	.L10:
 185 01f6 202E 0008 	move.l 8(%fp),%d0
 186 01fa 2040      	move.l %d0,%a0
 187 01fc 2228 000E 	move.l 14(%a0),%d1
 188 0200 202E 0008 	move.l 8(%fp),%d0
 189 0204 2240      	move.l %d0,%a1
 190 0206 2341 0012 	move.l %d1,18(%a1)
 191 020a 603C      	jra .L3
 192               	.L7:
 193 020c 202E 0008 	move.l 8(%fp),%d0
 194 0210 2040      	move.l %d0,%a0
 195 0212 2028 000A 	move.l 10(%a0),%d0
 196 0216 2040      	move.l %d0,%a0
 197 0218 202E 0008 	move.l 8(%fp),%d0
 198 021c 2240      	move.l %d0,%a1
 199 021e 2229 000E 	move.l 14(%a1),%d1
 200 0222 202E 0008 	move.l 8(%fp),%d0
 201 0226 2240      	move.l %d0,%a1
 202 0228 1029 0008 	move.b 8(%a1),%d0
 203 022c 49C0      	extb.l %d0
 204 022e 2F08      	move.l %a0,-(%sp)
 205 0230 2F01      	move.l %d1,-(%sp)
 206 0232 2F00      	move.l %d0,-(%sp)
 207 0234 4EB9 0000 	jsr _ll_read
 207      0000 
 208 023a 4FEF 000C 	lea (12,%sp),%sp
 209 023e 2200      	move.l %d0,%d1
 210 0240 202E 0008 	move.l 8(%fp),%d0
 211 0244 2040      	move.l %d0,%a0
 212 0246 2081      	move.l %d1,(%a0)
 213               	.L3:
 214 0248 202E 0008 	move.l 8(%fp),%d0
 215 024c 2240      	move.l %d0,%a1
 216 024e 2011      	move.l (%a1),%d0
 217 0250 4A80      	tst.l %d0
 218 0252 661C      	jne .L13
 219 0254 202E 0008 	move.l 8(%fp),%d0
 220 0258 2040      	move.l %d0,%a0
 221 025a 2028 0004 	move.l 4(%a0),%d0
 222 025e 7220      	moveq #32,%d1
 223 0260 8280      	or.l %d0,%d1
 224 0262 202E 0008 	move.l 8(%fp),%d0
 225 0266 2240      	move.l %d0,%a1
68K GAS   			page 5


 226 0268 2341 0004 	move.l %d1,4(%a1)
 227 026c 70FF      	moveq #-1,%d0
 228 026e 6002      	jra .L5
 229               	.L13:
 230 0270 4280      	clr.l %d0
 231               	.L5:
 232 0272 4E5E      	unlk %fp
 233 0274 4E75      	rts
 235               	.ident"GCC: (GNU) 4.5.1"
 236               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 readbuf.c
    {standard input}:7      .text:00000000 _readbuf

UNDEFINED SYMBOLS
fflush
_ll_read
