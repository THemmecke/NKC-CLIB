68K GAS   			page 1


   1               	
   2               	.file"fgets.c"
   3               	.text
   4               	.align2
   5               	.globlfgets
   7               	fgets:
   8 0000 4E56 FFF8 	link.w %fp,#-8
   9 0004 42AE FFFC 	clr.l -4(%fp)
  10 0008 6002      	jra .L6
  11               	.L11:
  12 000a 4E71      	nop
  13               	.L6:
  14 000c 2F2E 0010 	move.l 16(%fp),-(%sp)
  15 0010 4EB9 0000 	jsr fgetc
  15      0000 
  16 0016 588F      	addq.l #4,%sp
  17 0018 2D40 FFF8 	move.l %d0,-8(%fp)
  18 001c 70FF      	moveq #-1,%d0
  19 001e B0AE FFF8 	cmp.l -8(%fp),%d0
  20 0022 672A      	jeq .L9
  21               	.L2:
  22 0024 202E FFFC 	move.l -4(%fp),%d0
  23 0028 D0AE 0008 	add.l 8(%fp),%d0
  24 002c 222E FFF8 	move.l -8(%fp),%d1
  25 0030 1201      	move.b %d1,%d1
  26 0032 2040      	move.l %d0,%a0
  27 0034 1081      	move.b %d1,(%a0)
  28 0036 52AE FFFC 	addq.l #1,-4(%fp)
  29 003a 53AE 000C 	subq.l #1,12(%fp)
  30 003e 4AAE 000C 	tst.l 12(%fp)
  31 0042 670E      	jeq .L10
  32 0044 700A      	moveq #10,%d0
  33 0046 B0AE FFF8 	cmp.l -8(%fp),%d0
  34 004a 66BE      	jne .L11
  35 004c 6006      	jra .L3
  36               	.L9:
  37 004e 4E71      	nop
  38 0050 6002      	jra .L3
  39               	.L10:
  40 0052 4E71      	nop
  41               	.L3:
  42 0054 202E FFFC 	move.l -4(%fp),%d0
  43 0058 D0AE 0008 	add.l 8(%fp),%d0
  44 005c 2040      	move.l %d0,%a0
  45 005e 4210      	clr.b (%a0)
  46 0060 70FF      	moveq #-1,%d0
  47 0062 B0AE FFF8 	cmp.l -8(%fp),%d0
  48 0066 6604      	jne .L7
  49 0068 4280      	clr.l %d0
  50 006a 6004      	jra .L8
  51               	.L7:
  52 006c 202E 0008 	move.l 8(%fp),%d0
  53               	.L8:
  54 0070 2200      	move.l %d0,%d1
  55 0072 2041      	move.l %d1,%a0
  56 0074 4E5E      	unlk %fp
  57 0076 4E75      	rts
68K GAS   			page 2


  59               	.ident"GCC: (GNU) 4.5.1"
  60               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 3


DEFINED SYMBOLS
                            *ABS*:00000000 fgets.c
    {standard input}:7      .text:00000000 fgets

UNDEFINED SYMBOLS
fgetc
