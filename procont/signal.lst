68K GAS   			page 1


   1               	
   2               	.file"signal.c"
   3               	.globl_abterm
   4               	.section.bss
   5               	.align2
   8               	_abterm:
   9 0000 0000 0000 	.zero4
  10               	.text
  11               	.align2
  13               	sigill:
  14 0000 4E56 0000 	link.w %fp,#0
  15 0004 4E5E      	unlk %fp
  16 0006 4E75      	rts
  18               	.align2
  20               	sigint:
  21 0008 4E56 0000 	link.w %fp,#0
  22 000c 4E5E      	unlk %fp
  23 000e 4E75      	rts
  25               	.section.rodata
  26               	.LC0:
  27 0000 0A46 6C6F 	.string"\nFloating point exception"
  27      6174 696E 
  27      6720 706F 
  27      696E 7420 
  27      6578 6365 
  28               	.text
  29               	.align2
  31               	sigfpe:
  32 0010 4E56 0000 	link.w %fp,#0
  33 0014 203C 0000 	move.l #_pstreams,%d0
  33      0000 
  34 001a 5080      	addq.l #8,%d0
  35 001c 2040      	move.l %d0,%a0
  36 001e 2010      	move.l (%a0),%d0
  37 0020 4879 0000 	pea .LC0
  37      0000 
  38 0026 2F00      	move.l %d0,-(%sp)
  39 0028 4EB9 0000 	jsr fprintf
  39      0000 
  40 002e 508F      	addq.l #8,%sp
  41 0030 4878 0001 	pea 1.w
  42 0034 4EB9 0000 	jsr exit
  42      0000 
  43 003a 588F      	addq.l #4,%sp
  44 003c 4E5E      	unlk %fp
  45 003e 4E75      	rts
  47               	.section.rodata
  48               	.LC1:
  49 001a 0A47 656E 	.string"\nGeneral protection fault"
  49      6572 616C 
  49      2070 726F 
  49      7465 6374 
  49      696F 6E20 
  50               	.text
  51               	.align2
  53               	sigsegv:
  54 0040 4E56 0000 	link.w %fp,#0
68K GAS   			page 2


  55 0044 203C 0000 	move.l #_pstreams,%d0
  55      0000 
  56 004a 5080      	addq.l #8,%d0
  57 004c 2040      	move.l %d0,%a0
  58 004e 2010      	move.l (%a0),%d0
  59 0050 4879 0000 	pea .LC1
  59      0000 
  60 0056 2F00      	move.l %d0,-(%sp)
  61 0058 4EB9 0000 	jsr fprintf
  61      0000 
  62 005e 508F      	addq.l #8,%sp
  63 0060 4878 0001 	pea 1.w
  64 0064 4EB9 0000 	jsr exit
  64      0000 
  65 006a 588F      	addq.l #4,%sp
  66 006c 4E5E      	unlk %fp
  67 006e 4E75      	rts
  69               	.align2
  71               	sigterm:
  72 0070 4E56 0000 	link.w %fp,#0
  73 0074 42A7      	clr.l -(%sp)
  74 0076 4EB9 0000 	jsr exit
  74      0000 
  75 007c 588F      	addq.l #4,%sp
  76 007e 4E5E      	unlk %fp
  77 0080 4E75      	rts
  79               	.align2
  81               	siguser1:
  82 0082 4E56 0000 	link.w %fp,#0
  83 0086 4E5E      	unlk %fp
  84 0088 4E75      	rts
  86               	.align2
  88               	siguser2:
  89 008a 4E56 0000 	link.w %fp,#0
  90 008e 4E5E      	unlk %fp
  91 0090 4E75      	rts
  93               	.align2
  95               	siguser3:
  96 0092 4E56 0000 	link.w %fp,#0
  97 0096 4E5E      	unlk %fp
  98 0098 4E75      	rts
 100               	.align2
 102               	siguser:
 103 009a 4E56 0000 	link.w %fp,#0
 104 009e 4E5E      	unlk %fp
 105 00a0 4E75      	rts
 107               	.align2
 109               	sigbreak:
 110 00a2 4E56 0000 	link.w %fp,#0
 111 00a6 4878 0001 	pea 1.w
 112 00aa 4EB9 0000 	jsr exit
 112      0000 
 113 00b0 588F      	addq.l #4,%sp
 114 00b2 4E5E      	unlk %fp
 115 00b4 4E75      	rts
 117               	.align2
 119               	sigabort:
68K GAS   			page 3


 120 00b6 4E56 0000 	link.w %fp,#0
 121 00ba 7001      	moveq #1,%d0
 122 00bc 23C0 0000 	move.l %d0,_abterm
 122      0000 
 123 00c2 4878 0001 	pea 1.w
 124 00c6 4EB9 0000 	jsr exit
 124      0000 
 125 00cc 588F      	addq.l #4,%sp
 126 00ce 4E5E      	unlk %fp
 127 00d0 4E75      	rts
 129               	.data
 130               	.align2
 133               	deftab:
 134 0000 FFFF FFFF 	.long-1
 135 0004 FFFF FFFF 	.long-1
 136 0008 0000 0000 	.longsigint
 137 000c FFFF FFFF 	.long-1
 138 0010 0000 0000 	.longsigill
 139 0014 FFFF FFFF 	.long-1
 140 0018 FFFF FFFF 	.long-1
 141 001c FFFF FFFF 	.long-1
 142 0020 0000 0000 	.longsigfpe
 143 0024 FFFF FFFF 	.long-1
 144 0028 FFFF FFFF 	.long-1
 145 002c 0000 0000 	.longsigsegv
 146 0030 FFFF FFFF 	.long-1
 147 0034 FFFF FFFF 	.long-1
 148 0038 FFFF FFFF 	.long-1
 149 003c 0000 0000 	.longsigterm
 150 0040 0000 0000 	.longsiguser1
 151 0044 0000 0000 	.longsiguser2
 152 0048 FFFF FFFF 	.long-1
 153 004c FFFF FFFF 	.long-1
 154 0050 0000 0000 	.longsiguser3
 155 0054 0000 0000 	.longsigbreak
 156 0058 0000 0000 	.longsigabort
 157               	.localsigtab
 158               	.commsigtab,92,2
 159               	.text
 160               	.align2
 161               	.globlsignal
 163               	signal:
 164 00d2 4E56 FFFC 	link.w %fp,#-4
 165 00d6 7016      	moveq #22,%d0
 166 00d8 B0AE 0008 	cmp.l 8(%fp),%d0
 167 00dc 6C04      	jge .L13
 168 00de 70FF      	moveq #-1,%d0
 169 00e0 604E      	jra .L14
 170               	.L13:
 171 00e2 202E 0008 	move.l 8(%fp),%d0
 172 00e6 2D70 0DB0 	move.l sigtab(%d0.l*4),-4(%fp)
 172      0000 0000 
 172      FFFC 
 173 00f0 70FF      	moveq #-1,%d0
 174 00f2 B0AE FFFC 	cmp.l -4(%fp),%d0
 175 00f6 6604      	jne .L15
 176 00f8 70FF      	moveq #-1,%d0
68K GAS   			page 4


 177 00fa 6034      	jra .L14
 178               	.L15:
 179 00fc 4AAE FFFC 	tst.l -4(%fp)
 180 0100 661A      	jne .L16
 181 0102 202E 0008 	move.l 8(%fp),%d0
 182 0106 2230 0DB0 	move.l deftab(%d0.l*4),%d1
 182      0000 0000 
 183 010e 202E 0008 	move.l 8(%fp),%d0
 184 0112 2181 0DB0 	move.l %d1,sigtab(%d0.l*4)
 184      0000 0000 
 185 011a 6010      	jra .L17
 186               	.L16:
 187 011c 222E 000C 	move.l 12(%fp),%d1
 188 0120 202E 0008 	move.l 8(%fp),%d0
 189 0124 2181 0DB0 	move.l %d1,sigtab(%d0.l*4)
 189      0000 0000 
 190               	.L17:
 191 012c 202E FFFC 	move.l -4(%fp),%d0
 192               	.L14:
 193 0130 2200      	move.l %d0,%d1
 194 0132 2041      	move.l %d1,%a0
 195 0134 4E5E      	unlk %fp
 196 0136 4E75      	rts
 198               	.align2
 199               	.globlraise
 201               	raise:
 202 0138 4E56 FFFC 	link.w %fp,#-4
 203 013c 202E 0008 	move.l 8(%fp),%d0
 204 0140 2D70 0DB0 	move.l sigtab(%d0.l*4),-4(%fp)
 204      0000 0000 
 204      FFFC 
 205 014a 70FF      	moveq #-1,%d0
 206 014c B0AE FFFC 	cmp.l -4(%fp),%d0
 207 0150 6604      	jne .L19
 208 0152 7001      	moveq #1,%d0
 209 0154 601C      	jra .L20
 210               	.L19:
 211 0156 7001      	moveq #1,%d0
 212 0158 B0AE FFFC 	cmp.l -4(%fp),%d0
 213 015c 6604      	jne .L21
 214 015e 4280      	clr.l %d0
 215 0160 6010      	jra .L20
 216               	.L21:
 217 0162 2F2E 0008 	move.l 8(%fp),-(%sp)
 218 0166 202E FFFC 	move.l -4(%fp),%d0
 219 016a 2040      	move.l %d0,%a0
 220 016c 4E90      	jsr (%a0)
 221 016e 588F      	addq.l #4,%sp
 222 0170 4280      	clr.l %d0
 223               	.L20:
 224 0172 4E5E      	unlk %fp
 225 0174 4E75      	rts
 227               	.align2
 228               	.globlsiginit
 230               	siginit:
 231 0176 4E56 FFFC 	link.w %fp,#-4
 232 017a 42AE FFFC 	clr.l -4(%fp)
68K GAS   			page 5


 233 017e 601C      	jra .L23
 234               	.L24:
 235 0180 202E FFFC 	move.l -4(%fp),%d0
 236 0184 2230 0DB0 	move.l deftab(%d0.l*4),%d1
 236      0000 0000 
 237 018c 202E FFFC 	move.l -4(%fp),%d0
 238 0190 2181 0DB0 	move.l %d1,sigtab(%d0.l*4)
 238      0000 0000 
 239 0198 52AE FFFC 	addq.l #1,-4(%fp)
 240               	.L23:
 241 019c 7016      	moveq #22,%d0
 242 019e B0AE FFFC 	cmp.l -4(%fp),%d0
 243 01a2 6CDC      	jge .L24
 244 01a4 4E5E      	unlk %fp
 245 01a6 4E75      	rts
 247               	.ident"GCC: (GNU) 4.5.1"
 248               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 signal.c
    {standard input}:8      .bss:00000000 _abterm
    {standard input}:13     .text:00000000 sigill
    {standard input}:20     .text:00000008 sigint
    {standard input}:31     .text:00000010 sigfpe
    {standard input}:53     .text:00000040 sigsegv
    {standard input}:71     .text:00000070 sigterm
    {standard input}:81     .text:00000082 siguser1
    {standard input}:88     .text:0000008a siguser2
    {standard input}:95     .text:00000092 siguser3
    {standard input}:102    .text:0000009a siguser
    {standard input}:109    .text:000000a2 sigbreak
    {standard input}:119    .text:000000b6 sigabort
    {standard input}:133    .data:00000000 deftab
    {standard input}:158    .bss:00000004 sigtab
    {standard input}:163    .text:000000d2 signal
    {standard input}:201    .text:00000138 raise
    {standard input}:230    .text:00000176 siginit

UNDEFINED SYMBOLS
_pstreams
fprintf
exit
