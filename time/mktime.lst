68K GAS   			page 1


   1               	
   2               	.file"mktime.c"
   3               	.data
   6               	_monthdays:
   7 0000 1F        	.byte31
   8 0001 1C        	.byte28
   9 0002 1F        	.byte31
  10 0003 1E        	.byte30
  11 0004 1F        	.byte31
  12 0005 1E        	.byte30
  13 0006 1F        	.byte31
  14 0007 1F        	.byte31
  15 0008 1E        	.byte30
  16 0009 1F        	.byte31
  17 000a 1E        	.byte30
  18 000b 1F        	.byte31
  19               	.localdays
  20               	.commdays,4,2
  21               	.text
  22               	.align2
  23               	.globlmktime
  25               	mktime:
  26 0000 4E56 FFD8 	link.w %fp,#-40
  27 0004 2F02      	move.l %d2,-(%sp)
  28 0006 42AE FFFC 	clr.l -4(%fp)
  29 000a 202E 0008 	move.l 8(%fp),%d0
  30 000e 2200      	move.l %d0,%d1
  31 0010 70D8      	moveq #-40,%d0
  32 0012 D08E      	add.l %fp,%d0
  33 0014 2040      	move.l %d0,%a0
  34 0016 2241      	move.l %d1,%a1
  35 0018 2091      	move.l (%a1),(%a0)
  36 001a 5880      	addq.l #4,%d0
  37 001c 5881      	addq.l #4,%d1
  38 001e 2040      	move.l %d0,%a0
  39 0020 2241      	move.l %d1,%a1
  40 0022 2091      	move.l (%a1),(%a0)
  41 0024 5880      	addq.l #4,%d0
  42 0026 5881      	addq.l #4,%d1
  43 0028 2040      	move.l %d0,%a0
  44 002a 2241      	move.l %d1,%a1
  45 002c 2091      	move.l (%a1),(%a0)
  46 002e 5880      	addq.l #4,%d0
  47 0030 5881      	addq.l #4,%d1
  48 0032 2040      	move.l %d0,%a0
  49 0034 2241      	move.l %d1,%a1
  50 0036 2091      	move.l (%a1),(%a0)
  51 0038 5880      	addq.l #4,%d0
  52 003a 5881      	addq.l #4,%d1
  53 003c 2040      	move.l %d0,%a0
  54 003e 2241      	move.l %d1,%a1
  55 0040 2091      	move.l (%a1),(%a0)
  56 0042 5880      	addq.l #4,%d0
  57 0044 5881      	addq.l #4,%d1
  58 0046 2040      	move.l %d0,%a0
  59 0048 2241      	move.l %d1,%a1
  60 004a 2091      	move.l (%a1),(%a0)
68K GAS   			page 2


  61 004c 5880      	addq.l #4,%d0
  62 004e 5881      	addq.l #4,%d1
  63 0050 2040      	move.l %d0,%a0
  64 0052 2241      	move.l %d1,%a1
  65 0054 2091      	move.l (%a1),(%a0)
  66 0056 5880      	addq.l #4,%d0
  67 0058 5881      	addq.l #4,%d1
  68 005a 2040      	move.l %d0,%a0
  69 005c 2241      	move.l %d1,%a1
  70 005e 2091      	move.l (%a1),(%a0)
  71 0060 5880      	addq.l #4,%d0
  72 0062 5881      	addq.l #4,%d1
  73 0064 2040      	move.l %d0,%a0
  74 0066 2241      	move.l %d1,%a1
  75 0068 2091      	move.l (%a1),(%a0)
  76 006a 5880      	addq.l #4,%d0
  77 006c 5881      	addq.l #4,%d1
  78 006e 202E FFEC 	move.l -20(%fp),%d0
  79 0072 0680 0000 	add.l #2000,%d0
  79      07D0 
  80 0078 2D40 FFEC 	move.l %d0,-20(%fp)
  81 007c 202E FFE0 	move.l -32(%fp),%d0
  82 0080 4A80      	tst.l %d0
  83 0082 6C4C      	jge .L2
  84 0084 7017      	moveq #23,%d0
  85 0086 2D40 FFE0 	move.l %d0,-32(%fp)
  86 008a 202E FFE4 	move.l -28(%fp),%d0
  87 008e 5380      	subq.l #1,%d0
  88 0090 2D40 FFE4 	move.l %d0,-28(%fp)
  89 0094 202E FFE4 	move.l -28(%fp),%d0
  90 0098 4A80      	tst.l %d0
  91 009a 6E34      	jgt .L2
  92 009c 202E FFE8 	move.l -24(%fp),%d0
  93 00a0 5380      	subq.l #1,%d0
  94 00a2 2D40 FFE8 	move.l %d0,-24(%fp)
  95 00a6 202E FFE8 	move.l -24(%fp),%d0
  96 00aa 4A80      	tst.l %d0
  97 00ac 6C10      	jge .L3
  98 00ae 720B      	moveq #11,%d1
  99 00b0 2D41 FFE8 	move.l %d1,-24(%fp)
 100 00b4 202E FFEC 	move.l -20(%fp),%d0
 101 00b8 5380      	subq.l #1,%d0
 102 00ba 2D40 FFEC 	move.l %d0,-20(%fp)
 103               	.L3:
 104 00be 202E FFE8 	move.l -24(%fp),%d0
 105 00c2 1030 09B0 	move.b _monthdays(%d0.l),%d0
 105      0000 0000 
 106 00ca 49C0      	extb.l %d0
 107 00cc 2D40 FFE4 	move.l %d0,-28(%fp)
 108               	.L2:
 109 00d0 202E FFEC 	move.l -20(%fp),%d0
 110 00d4 0C80 0000 	cmp.l #1969,%d0
 110      07B1 
 111 00da 6F0C      	jle .L4
 112 00dc 202E FFEC 	move.l -20(%fp),%d0
 113 00e0 0C80 0000 	cmp.l #2038,%d0
 113      07F6 
68K GAS   			page 3


 114 00e6 6F06      	jle .L5
 115               	.L4:
 116 00e8 70FF      	moveq #-1,%d0
 117 00ea 6000 0142 	jra .L6
 118               	.L5:
 119 00ee 202E FFEC 	move.l -20(%fp),%d0
 120 00f2 0680 FFFF 	add.l #-1972,%d0
 120      F84C 
 121 00f8 7403      	moveq #3,%d2
 122 00fa C082      	and.l %d2,%d0
 123 00fc 4A80      	tst.l %d0
 124 00fe 6616      	jne .L7
 125 0100 202E FFEC 	move.l -20(%fp),%d0
 126 0104 0C80 0000 	cmp.l #2000,%d0
 126      07D0 
 127 010a 670A      	jeq .L7
 128 010c 13FC 001D 	move.b #29,_monthdays+1
 128      0000 0000 
 129 0114 6008      	jra .L8
 130               	.L7:
 131 0116 13FC 001C 	move.b #28,_monthdays+1
 131      0000 0000 
 132               	.L8:
 133 011e 222E FFEC 	move.l -20(%fp),%d1
 134 0122 2001      	move.l %d1,%d0
 135 0124 E788      	lsl.l #3,%d0
 136 0126 2400      	move.l %d0,%d2
 137 0128 E78A      	lsl.l #3,%d2
 138 012a 2042      	move.l %d2,%a0
 139 012c D088      	add.l %a0,%d0
 140 012e D081      	add.l %d1,%d0
 141 0130 2200      	move.l %d0,%d1
 142 0132 E589      	lsl.l #2,%d1
 143 0134 D081      	add.l %d1,%d0
 144 0136 0680 FFF5 	add.l #-719050,%d0
 144      0736 
 145 013c 23C0 0000 	move.l %d0,days
 145      0000 
 146 0142 202E FFEC 	move.l -20(%fp),%d0
 147 0146 0680 FFFF 	add.l #-1969,%d0
 147      F84F 
 148 014c 4A80      	tst.l %d0
 149 014e 6C02      	jge .L9
 150 0150 5680      	addq.l #3,%d0
 151               	.L9:
 152 0152 E480      	asr.l #2,%d0
 153 0154 2200      	move.l %d0,%d1
 154 0156 2039 0000 	move.l days,%d0
 154      0000 
 155 015c D081      	add.l %d1,%d0
 156 015e 23C0 0000 	move.l %d0,days
 156      0000 
 157 0164 42AE FFFC 	clr.l -4(%fp)
 158 0168 6022      	jra .L10
 159               	.L11:
 160 016a 202E FFFC 	move.l -4(%fp),%d0
 161 016e 0680 0000 	add.l #_monthdays,%d0
68K GAS   			page 4


 161      0000 
 162 0174 2040      	move.l %d0,%a0
 163 0176 1010      	move.b (%a0),%d0
 164 0178 49C0      	extb.l %d0
 165 017a 2239 0000 	move.l days,%d1
 165      0000 
 166 0180 D081      	add.l %d1,%d0
 167 0182 23C0 0000 	move.l %d0,days
 167      0000 
 168 0188 52AE FFFC 	addq.l #1,-4(%fp)
 169               	.L10:
 170 018c 202E FFE8 	move.l -24(%fp),%d0
 171 0190 B0AE FFFC 	cmp.l -4(%fp),%d0
 172 0194 6ED4      	jgt .L11
 173 0196 202E FFE4 	move.l -28(%fp),%d0
 174 019a 5380      	subq.l #1,%d0
 175 019c 2239 0000 	move.l days,%d1
 175      0000 
 176 01a2 D081      	add.l %d1,%d0
 177 01a4 23C0 0000 	move.l %d0,days
 177      0000 
 178 01aa 2039 0000 	move.l days,%d0
 178      0000 
 179 01b0 E788      	lsl.l #3,%d0
 180 01b2 2200      	move.l %d0,%d1
 181 01b4 E589      	lsl.l #2,%d1
 182 01b6 2401      	move.l %d1,%d2
 183 01b8 9480      	sub.l %d0,%d2
 184 01ba 2002      	move.l %d2,%d0
 185 01bc 23C0 0000 	move.l %d0,days
 185      0000 
 186 01c2 222E FFE0 	move.l -32(%fp),%d1
 187 01c6 2039 0000 	move.l days,%d0
 187      0000 
 188 01cc D081      	add.l %d1,%d0
 189 01ce 23C0 0000 	move.l %d0,days
 189      0000 
 190 01d4 2039 0000 	move.l days,%d0
 190      0000 
 191 01da E588      	lsl.l #2,%d0
 192 01dc 2200      	move.l %d0,%d1
 193 01de E989      	lsl.l #4,%d1
 194 01e0 2401      	move.l %d1,%d2
 195 01e2 9480      	sub.l %d0,%d2
 196 01e4 2002      	move.l %d2,%d0
 197 01e6 23C0 0000 	move.l %d0,days
 197      0000 
 198 01ec 222E FFDC 	move.l -36(%fp),%d1
 199 01f0 2039 0000 	move.l days,%d0
 199      0000 
 200 01f6 D081      	add.l %d1,%d0
 201 01f8 23C0 0000 	move.l %d0,days
 201      0000 
 202 01fe 2039 0000 	move.l days,%d0
 202      0000 
 203 0204 E588      	lsl.l #2,%d0
 204 0206 2200      	move.l %d0,%d1
68K GAS   			page 5


 205 0208 E989      	lsl.l #4,%d1
 206 020a 2401      	move.l %d1,%d2
 207 020c 9480      	sub.l %d0,%d2
 208 020e 2002      	move.l %d2,%d0
 209 0210 23C0 0000 	move.l %d0,days
 209      0000 
 210 0216 222E FFD8 	move.l -40(%fp),%d1
 211 021a 2039 0000 	move.l days,%d0
 211      0000 
 212 0220 D081      	add.l %d1,%d0
 213 0222 23C0 0000 	move.l %d0,days
 213      0000 
 214 0228 2039 0000 	move.l days,%d0
 214      0000 
 215               	.L6:
 216 022e 241F      	move.l (%sp)+,%d2
 217 0230 4E5E      	unlk %fp
 218 0232 4E75      	rts
 220               	.ident"GCC: (GNU) 4.5.1"
 221               	.section.note.GNU-stack,"",@progbits
68K GAS   			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 mktime.c
    {standard input}:6      .data:00000000 _monthdays
    {standard input}:20     .bss:00000000 days
    {standard input}:25     .text:00000000 mktime

NO UNDEFINED SYMBOLS
